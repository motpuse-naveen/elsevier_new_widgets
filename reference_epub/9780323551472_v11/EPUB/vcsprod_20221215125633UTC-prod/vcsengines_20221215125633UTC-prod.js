/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.3.5 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, https://github.com/requirejs/requirejs/blob/master/LICENSE
 */

/*!
 * jQuery JavaScript Library v3.4.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2019-05-01T21:04Z
 */

/*!
 * Sizzle CSS Selector Engine v2.3.4
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2019-04-08
 */

/*! jQuery UI - v1.12.1 - 2016-09-14
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js, focusable.js, form-reset-mixin.js, jquery-1-7.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/draggable.js, widgets/droppable.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/resizable.js, widgets/selectable.js, widgets/selectmenu.js, widgets/slider.js, widgets/sortable.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */

/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Position 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */

/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Disable Selection 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Effects 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */

/*!
 * jQuery UI Effects Blind 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Effects Bounce 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Effects Clip 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Effects Drop 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Effects Explode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Effects Fade 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Effects Fold 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Effects Highlight 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Effects Size 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Effects Scale 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Effects Puff 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Effects Pulsate 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Effects Shake 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Effects Slide 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Effects Transfer 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Focusable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Form Reset Mixin 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Support for jQuery core 1.7.x 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 */

/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Labels 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Tabbable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Unique ID 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Accordion 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Menu 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Autocomplete 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Controlgroup 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Checkboxradio 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Button 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Datepicker 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Resizable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Dialog 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Droppable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Progressbar 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Selectable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Selectmenu 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Slider 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Sortable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Spinner 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Tabs 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Tooltip 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Touch Punch Improved 0.3.1
 *
 *
 * Copyright 2013, Chris Hutchinson <chris@brushd.com>
 * Original jquery-ui-touch-punch Copyright 2011, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 * jquery.ui.widget.js
 * jquery.ui.mouse.js
 */

/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.2+97478eb6
 */

/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/**
 * @license text 2.0.15 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/text/LICENSE
 */

/**
 * Copyright 2015 Tim Down.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * @license
 * Video.js 6.11.0 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/master/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 */

/**
 * Copyright 2013 vtt.js Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/*!
	Autosize 4.0.0
	license: MIT
	http://www.jacklmoore.com/autosize
*/

/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */

function getQueryString(t){var e=[];window.location.search&&(e=window.location.search.substring(1).split("&"));for(var n={},i=0;i<e.length;i++){var o=e[i].split("=");n[o[0]]=o[1]}return n[t]}var requirejs,require,define;!function(global,setTimeout){function commentReplace(t,e){return e||""}function isFunction(t){return"[object Function]"===ostring.call(t)}function isArray(t){return"[object Array]"===ostring.call(t)}function each(t,e){if(t){var n;for(n=0;n<t.length&&(!t[n]||!e(t[n],n,t));n+=1);}}function eachReverse(t,e){if(t){var n;for(n=t.length-1;n>-1&&(!t[n]||!e(t[n],n,t));n-=1);}}function hasProp(t,e){return hasOwn.call(t,e)}function getOwn(t,e){return hasProp(t,e)&&t[e]}function eachProp(t,e){var n;for(n in t)if(hasProp(t,n)&&e(t[n],n))break}function mixin(t,e,n,i){return e&&eachProp(e,function(e,o){!n&&hasProp(t,o)||(!i||"object"!=typeof e||!e||isArray(e)||isFunction(e)||e instanceof RegExp?t[o]=e:(t[o]||(t[o]={}),mixin(t[o],e,n,i)))}),t}function bind(t,e){return function(){return e.apply(t,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(t){throw t}function getGlobal(t){if(!t)return t;var e=global;return each(t.split("."),function(t){e=e[t]}),e}function makeError(t,e,n,i){var o=new Error(e+"\nhttp://requirejs.org/docs/errors.html#"+t);return o.requireType=t,o.requireModules=i,n&&(o.originalError=n),o}function newContext(t){function e(t){var e,n;for(e=0;e<t.length;e++)if("."===(n=t[e]))t.splice(e,1),e-=1;else if(".."===n){if(0===e||1===e&&".."===t[2]||".."===t[e-1])continue;e>0&&(t.splice(e-1,2),e-=2)}}function n(t,n,i){var o,r,s,a,l,c,u,h,d,p,f,g=n&&n.split("/"),m=x.map,v=m&&m["*"];if(t&&(t=t.split("/"),c=t.length-1,x.nodeIdCompat&&jsSuffixRegExp.test(t[c])&&(t[c]=t[c].replace(jsSuffixRegExp,"")),"."===t[0].charAt(0)&&g&&(f=g.slice(0,g.length-1),t=f.concat(t)),e(t),t=t.join("/")),i&&m&&(g||v)){r=t.split("/");t:for(s=r.length;s>0;s-=1){if(l=r.slice(0,s).join("/"),g)for(a=g.length;a>0;a-=1)if((o=getOwn(m,g.slice(0,a).join("/")))&&(o=getOwn(o,l))){u=o,h=s;break t}!d&&v&&getOwn(v,l)&&(d=getOwn(v,l),p=s)}!u&&d&&(u=d,h=p),u&&(r.splice(0,h,u),t=r.join("/"))}return getOwn(x.pkgs,t)||t}function i(t){isBrowser&&each(scripts(),function(e){if(e.getAttribute("data-requiremodule")===t&&e.getAttribute("data-requirecontext")===_.contextName)return e.parentNode.removeChild(e),!0})}function o(t){var e=getOwn(x.paths,t);if(e&&isArray(e)&&e.length>1)return e.shift(),_.require.undef(t),_.makeRequire(null,{skipMap:!0})([t]),!0}function r(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function s(t,e,i,o){var s,a,l,c,u=null,h=e?e.name:null,d=t,p=!0,f="";return t||(p=!1,t="_@r"+(O+=1)),c=r(t),u=c[0],t=c[1],u&&(u=n(u,h,o),a=getOwn(P,u)),t&&(u?f=i?t:a&&a.normalize?a.normalize(t,function(t){return n(t,h,o)}):-1===t.indexOf("!")?n(t,h,o):t:(f=n(t,h,o),c=r(f),u=c[0],f=c[1],i=!0,s=_.nameToUrl(f))),l=!u||a||i?"":"_unnormalized"+(M+=1),{prefix:u,name:f,parentMap:e,unnormalized:!!l,url:s,originalName:d,isDefine:p,id:(u?u+"!"+f:f)+l}}function a(t){var e=t.id,n=getOwn(T,e);return n||(n=T[e]=new _.Module(t)),n}function l(t,e,n){var i=t.id,o=getOwn(T,i);!hasProp(P,i)||o&&!o.defineEmitComplete?(o=a(t),o.error&&"error"===e?n(o.error):o.on(e,n)):"defined"===e&&n(P[i])}function c(t,e){var n=t.requireModules,i=!1;e?e(t):(each(n,function(e){var n=getOwn(T,e);n&&(n.error=t,n.events.error&&(i=!0,n.emit("error",t)))}),i||req.onError(t))}function u(){globalDefQueue.length&&(each(globalDefQueue,function(t){var e=t[0];"string"==typeof e&&(_.defQueueMap[e]=!0),E.push(t)}),globalDefQueue=[])}function h(t){delete T[t],delete k[t]}function d(t,e,n){var i=t.map.id;t.error?t.emit("error",t.error):(e[i]=!0,each(t.depMaps,function(i,o){var r=i.id,s=getOwn(T,r);!s||t.depMatched[o]||n[r]||(getOwn(e,r)?(t.defineDep(o,P[r]),t.check()):d(s,e,n))}),n[i]=!0)}function p(){var t,e,n=1e3*x.waitSeconds,r=n&&_.startTime+n<(new Date).getTime(),s=[],a=[],l=!1,u=!0;if(!y){if(y=!0,eachProp(k,function(t){var n=t.map,c=n.id;if(t.enabled&&(n.isDefine||a.push(t),!t.error))if(!t.inited&&r)o(c)?(e=!0,l=!0):(s.push(c),i(c));else if(!t.inited&&t.fetched&&n.isDefine&&(l=!0,!n.prefix))return u=!1}),r&&s.length)return t=makeError("timeout","Load timeout for modules: "+s,null,s),t.contextName=_.contextName,c(t);u&&each(a,function(t){d(t,{},{})}),r&&!e||!l||!isBrowser&&!isWebWorker||C||(C=setTimeout(function(){C=0,p()},50)),y=!1}}function f(t){hasProp(P,t[0])||a(s(t[0],null,!0)).init(t[1],t[2])}function g(t,e,n,i){t.detachEvent&&!isOpera?i&&t.detachEvent(i,e):t.removeEventListener(n,e,!1)}function m(t){var e=t.currentTarget||t.srcElement;return g(e,_.onScriptLoad,"load","onreadystatechange"),g(e,_.onScriptError,"error"),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function v(){var t;for(u();E.length;){if(t=E.shift(),null===t[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+t[t.length-1]));f(t)}_.defQueueMap={}}var y,b,_,w,C,x={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},T={},k={},S={},E=[],P={},A={},I={},O=1,M=1;return w={require:function(t){return t.require?t.require:t.require=_.makeRequire(t.map)},exports:function(t){if(t.usingExports=!0,t.map.isDefine)return t.exports?P[t.map.id]=t.exports:t.exports=P[t.map.id]={}},module:function(t){return t.module?t.module:t.module={id:t.map.id,uri:t.map.url,config:function(){return getOwn(x.config,t.map.id)||{}},exports:t.exports||(t.exports={})}}},b=function(t){this.events=getOwn(S,t.id)||{},this.map=t,this.shim=getOwn(x.shim,t.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},b.prototype={init:function(t,e,n,i){i=i||{},this.inited||(this.factory=e,n?this.on("error",n):this.events.error&&(n=bind(this,function(t){this.emit("error",t)})),this.depMaps=t&&t.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(t,e){this.depMatched[t]||(this.depMatched[t]=!0,this.depCount-=1,this.depExports[t]=e)},fetch:function(){if(!this.fetched){this.fetched=!0,_.startTime=(new Date).getTime();var t=this.map;if(!this.shim)return t.prefix?this.callPlugin():this.load();_.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return t.prefix?this.callPlugin():this.load()}))}},load:function(){var t=this.map.url;A[t]||(A[t]=!0,_.load(this.map.id,t))},check:function(){if(this.enabled&&!this.enabling){var t,e,n=this.map.id,i=this.depExports,o=this.exports,r=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(r)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{o=_.execCb(n,r,i,o)}catch(e){t=e}else o=_.execCb(n,r,i,o);if(this.map.isDefine&&void 0===o&&(e=this.module,e?o=e.exports:this.usingExports&&(o=this.exports)),t)return t.requireMap=this.map,t.requireModules=this.map.isDefine?[this.map.id]:null,t.requireType=this.map.isDefine?"define":"require",c(this.error=t)}else o=r;if(this.exports=o,this.map.isDefine&&!this.ignore&&(P[n]=o,req.onResourceLoad)){var s=[];each(this.depMaps,function(t){s.push(t.normalizedMap||t)}),req.onResourceLoad(_,this.map,s)}h(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(_.defQueueMap,n)||this.fetch()}},callPlugin:function(){var t=this.map,e=t.id,i=s(t.prefix);this.depMaps.push(i),l(i,"defined",bind(this,function(i){var o,r,u,d=getOwn(I,this.map.id),p=this.map.name,f=this.map.parentMap?this.map.parentMap.name:null,g=_.makeRequire(t.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(i.normalize&&(p=i.normalize(p,function(t){return n(t,f,!0)})||""),r=s(t.prefix+"!"+p,this.map.parentMap,!0),l(r,"defined",bind(this,function(t){this.map.normalizedMap=r,this.init([],function(){return t},null,{enabled:!0,ignore:!0})})),void((u=getOwn(T,r.id))&&(this.depMaps.push(r),this.events.error&&u.on("error",bind(this,function(t){this.emit("error",t)})),u.enable()))):d?(this.map.url=_.nameToUrl(d),void this.load()):(o=bind(this,function(t){this.init([],function(){return t},null,{enabled:!0})}),o.error=bind(this,function(t){this.inited=!0,this.error=t,t.requireModules=[e],eachProp(T,function(t){0===t.map.id.indexOf(e+"_unnormalized")&&h(t.map.id)}),c(t)}),o.fromText=bind(this,function(n,i){var r=t.name,l=s(r),u=useInteractive;i&&(n=i),u&&(useInteractive=!1),a(l),hasProp(x.config,e)&&(x.config[r]=x.config[e]);try{req.exec(n)}catch(t){return c(makeError("fromtexteval","fromText eval for "+e+" failed: "+t,t,[e]))}u&&(useInteractive=!0),this.depMaps.push(l),_.completeLoad(r),g([r],o)}),void i.load(t.name,g,o,x))})),_.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){k[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(t,e){var n,i,o;if("string"==typeof t){if(t=s(t,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[e]=t,o=getOwn(w,t.id))return void(this.depExports[e]=o(this));this.depCount+=1,l(t,"defined",bind(this,function(t){this.undefed||(this.defineDep(e,t),this.check())})),this.errback?l(t,"error",bind(this,this.errback)):this.events.error&&l(t,"error",bind(this,function(t){this.emit("error",t)}))}n=t.id,i=T[n],hasProp(w,n)||!i||i.enabled||_.enable(t,this)})),eachProp(this.pluginMaps,bind(this,function(t){var e=getOwn(T,t.id);e&&!e.enabled&&_.enable(t,this)})),this.enabling=!1,this.check()},on:function(t,e){var n=this.events[t];n||(n=this.events[t]=[]),n.push(e)},emit:function(t,e){each(this.events[t],function(t){t(e)}),"error"===t&&delete this.events[t]}},_={config:x,contextName:t,registry:T,defined:P,urlFetched:A,defQueue:E,defQueueMap:{},Module:b,makeModuleMap:s,nextTick:req.nextTick,onError:c,configure:function(t){if(t.baseUrl&&"/"!==t.baseUrl.charAt(t.baseUrl.length-1)&&(t.baseUrl+="/"),"string"==typeof t.urlArgs){var e=t.urlArgs;t.urlArgs=function(t,n){return(-1===n.indexOf("?")?"?":"&")+e}}var n=x.shim,i={paths:!0,bundles:!0,config:!0,map:!0};eachProp(t,function(t,e){i[e]?(x[e]||(x[e]={}),mixin(x[e],t,!0,!0)):x[e]=t}),t.bundles&&eachProp(t.bundles,function(t,e){each(t,function(t){t!==e&&(I[t]=e)})}),t.shim&&(eachProp(t.shim,function(t,e){isArray(t)&&(t={deps:t}),!t.exports&&!t.init||t.exportsFn||(t.exportsFn=_.makeShimExports(t)),n[e]=t}),x.shim=n),t.packages&&each(t.packages,function(t){var e,n;t="string"==typeof t?{name:t}:t,n=t.name,e=t.location,e&&(x.paths[n]=t.location),x.pkgs[n]=t.name+"/"+(t.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(T,function(t,e){t.inited||t.map.unnormalized||(t.map=s(e,null,!0))}),(t.deps||t.callback)&&_.require(t.deps||[],t.callback)},makeShimExports:function(t){function e(){var e;return t.init&&(e=t.init.apply(global,arguments)),e||t.exports&&getGlobal(t.exports)}return e},makeRequire:function(e,o){function r(n,i,l){var u,h,d;return o.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof n?isFunction(i)?c(makeError("requireargs","Invalid require call"),l):e&&hasProp(w,n)?w[n](T[e.id]):req.get?req.get(_,n,e,r):(h=s(n,e,!1,!0),u=h.id,hasProp(P,u)?P[u]:c(makeError("notloaded",'Module name "'+u+'" has not been loaded yet for context: '+t+(e?"":". Use require([])")))):(v(),_.nextTick(function(){v(),d=a(s(null,e)),d.skipMap=o.skipMap,d.init(n,i,l,{enabled:!0}),p()}),r)}return o=o||{},mixin(r,{isBrowser:isBrowser,toUrl:function(t){var i,o=t.lastIndexOf("."),r=t.split("/")[0],s="."===r||".."===r;return-1!==o&&(!s||o>1)&&(i=t.substring(o,t.length),t=t.substring(0,o)),_.nameToUrl(n(t,e&&e.id,!0),i,!0)},defined:function(t){return hasProp(P,s(t,e,!1,!0).id)},specified:function(t){return t=s(t,e,!1,!0).id,hasProp(P,t)||hasProp(T,t)}}),e||(r.undef=function(t){u();var n=s(t,e,!0),o=getOwn(T,t);o.undefed=!0,i(t),delete P[t],delete A[n.url],delete S[t],eachReverse(E,function(e,n){e[0]===t&&E.splice(n,1)}),delete _.defQueueMap[t],o&&(o.events.defined&&(S[t]=o.events),h(t))}),r},enable:function(t){getOwn(T,t.id)&&a(t).enable()},completeLoad:function(t){var e,n,i,r=getOwn(x.shim,t)||{},s=r.exports;for(u();E.length;){if(n=E.shift(),null===n[0]){if(n[0]=t,e)break;e=!0}else n[0]===t&&(e=!0);f(n)}if(_.defQueueMap={},i=getOwn(T,t),!e&&!hasProp(P,t)&&i&&!i.inited){if(!(!x.enforceDefine||s&&getGlobal(s)))return o(t)?void 0:c(makeError("nodefine","No define call for "+t,null,[t]));f([t,r.deps||[],r.exportsFn])}p()},nameToUrl:function(t,e,n){var i,o,r,s,a,l,c,u=getOwn(x.pkgs,t);if(u&&(t=u),c=getOwn(I,t))return _.nameToUrl(c,e,n);if(req.jsExtRegExp.test(t))a=t+(e||"");else{for(i=x.paths,o=t.split("/"),r=o.length;r>0;r-=1)if(s=o.slice(0,r).join("/"),l=getOwn(i,s)){isArray(l)&&(l=l[0]),o.splice(0,r,l);break}a=o.join("/"),a+=e||(/^data\:|^blob\:|\?/.test(a)||n?"":".js"),a=("/"===a.charAt(0)||a.match(/^[\w\+\.\-]+:/)?"":x.baseUrl)+a}return x.urlArgs&&!/^blob\:/.test(a)?a+x.urlArgs(t,a):a},load:function(t,e){req.load(_,t,e)},execCb:function(t,e,n,i){return e.apply(i,n)},onScriptLoad:function(t){if("load"===t.type||readyRegExp.test((t.currentTarget||t.srcElement).readyState)){interactiveScript=null;var e=m(t);_.completeLoad(e.id)}},onScriptError:function(t){var e=m(t);if(!o(e.id)){var n=[];return eachProp(T,function(t,i){0!==i.indexOf("_@r")&&each(t.depMaps,function(t){if(t.id===e.id)return n.push(i),!0})}),c(makeError("scripterror",'Script error for "'+e.id+(n.length?'", needed by: '+n.join(", "):'"'),t,[e.id]))}}},_.require=_.makeRequire(),_}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(t){if("interactive"===t.readyState)return interactiveScript=t}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.5",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(t,e,n,i){var o,r,s=defContextName;return isArray(t)||"string"==typeof t||(r=t,isArray(e)?(t=e,e=n,n=i):t=[]),r&&r.context&&(s=r.context),o=getOwn(contexts,s),o||(o=contexts[s]=req.s.newContext(s)),r&&o.configure(r),o.require(t,e,n)},req.config=function(t){return req(t)},req.nextTick=void 0!==setTimeout?function(t){setTimeout(t,4)}:function(t){t()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(t){req[t]=function(){var e=contexts[defContextName];return e.require[t].apply(e,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],(baseElement=document.getElementsByTagName("base")[0])&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(t,e,n){var i=t.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return i.type=t.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i},req.load=function(t,e,n){var i,o=t&&t.config||{};if(isBrowser)return i=req.createNode(o,e,n),i.setAttribute("data-requirecontext",t.contextName),i.setAttribute("data-requiremodule",e),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",t.onScriptLoad,!1),i.addEventListener("error",t.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",t.onScriptLoad)),i.src=n,o.onNodeCreated&&o.onNodeCreated(i,o,e,n),currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{setTimeout(function(){},0),importScripts(n),t.completeLoad(e)}catch(i){t.onError(makeError("importscripts","importScripts failed for "+e+" at "+n,i,[e]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(t){if(head||(head=t.parentNode),dataMain=t.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(t,e,n){var i,o;"string"!=typeof t&&(n=e,e=t,t=null),isArray(e)||(n=e,e=null),!e&&isFunction(n)&&(e=[],n.length&&(n.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(t,n){e.push(n)}),e=(1===n.length?["require"]:["require","exports","module"]).concat(e))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript())&&(t||(t=i.getAttribute("data-requiremodule")),o=contexts[i.getAttribute("data-requirecontext")]),o?(o.defQueue.push([t,e,n]),o.defQueueMap[t]=!0):globalDefQueue.push([t,e,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this,"undefined"==typeof setTimeout?void 0:setTimeout),define("requireLib",function(){}),function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";function n(t,e,n){n=n||lt;var i,o,r=n.createElement("script");if(r.text=t,e)for(i in Ct)(o=e[i]||e.getAttribute&&e.getAttribute(i))&&r.setAttribute(i,o);n.head.appendChild(r).parentNode.removeChild(r)}function i(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?ft[gt.call(t)]||"object":typeof t}function o(t){var e=!!t&&"length"in t&&t.length,n=i(t);return!_t(t)&&!wt(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function r(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function s(t,e,n){return _t(e)?xt.grep(t,function(t,i){return!!e.call(t,i,t)!==n}):e.nodeType?xt.grep(t,function(t){return t===e!==n}):"string"!=typeof e?xt.grep(t,function(t){return pt.call(e,t)>-1!==n}):xt.filter(e,t,n)}function a(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function l(t){var e={};return xt.each(t.match(Lt)||[],function(t,n){e[n]=!0}),e}function c(t){return t}function u(t){throw t}function h(t,e,n,i){var o;try{t&&_t(o=t.promise)?o.call(t).done(e).fail(n):t&&_t(o=t.then)?o.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}function d(){lt.removeEventListener("DOMContentLoaded",d),t.removeEventListener("load",d),xt.ready()}function p(t,e){return e.toUpperCase()}function f(t){return t.replace(Ft,"ms-").replace(Nt,p)}function g(){this.expando=xt.expando+g.uid++}function m(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Ht.test(t)?JSON.parse(t):t)}function v(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(Vt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=m(n)}catch(t){}qt.set(t,e,n)}else n=void 0;return n}function y(t,e,n,i){var o,r,s=20,a=i?function(){return i.cur()}:function(){return xt.css(t,e,"")},l=a(),c=n&&n[3]||(xt.cssNumber[e]?"":"px"),u=t.nodeType&&(xt.cssNumber[e]||"px"!==c&&+l)&&Wt.exec(xt.css(t,e));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;s--;)xt.style(t,e,u+c),(1-r)*(1-(r=a()/l||.5))<=0&&(s=0),u/=r;u*=2,xt.style(t,e,u+c),n=n||[]}return n&&(u=+u||+l||0,o=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=o)),o}function b(t){var e,n=t.ownerDocument,i=t.nodeName,o=Jt[i];return o||(e=n.body.appendChild(n.createElement(i)),o=xt.css(e,"display"),e.parentNode.removeChild(e),"none"===o&&(o="block"),Jt[i]=o,o)}function _(t,e){for(var n,i,o=[],r=0,s=t.length;r<s;r++)i=t[r],i.style&&(n=i.style.display,e?("none"===n&&(o[r]=$t.get(i,"display")||null,o[r]||(i.style.display="")),""===i.style.display&&Xt(i)&&(o[r]=b(i))):"none"!==n&&(o[r]="none",$t.set(i,"display",n)));for(r=0;r<s;r++)null!=o[r]&&(t[r].style.display=o[r]);return t}function w(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&r(t,e)?xt.merge([t],n):n}function C(t,e){for(var n=0,i=t.length;n<i;n++)$t.set(t[n],"globalEval",!e||$t.get(e[n],"globalEval"))}function x(t,e,n,o,r){for(var s,a,l,c,u,h,d=e.createDocumentFragment(),p=[],f=0,g=t.length;f<g;f++)if((s=t[f])||0===s)if("object"===i(s))xt.merge(p,s.nodeType?[s]:s);else if(oe.test(s)){for(a=a||d.appendChild(e.createElement("div")),l=(ee.exec(s)||["",""])[1].toLowerCase(),c=ie[l]||ie._default,a.innerHTML=c[1]+xt.htmlPrefilter(s)+c[2],h=c[0];h--;)a=a.lastChild;xt.merge(p,a.childNodes),a=d.firstChild,a.textContent=""}else p.push(e.createTextNode(s));for(d.textContent="",f=0;s=p[f++];)if(o&&xt.inArray(s,o)>-1)r&&r.push(s);else if(u=Qt(s),a=w(d.appendChild(s),"script"),u&&C(a),n)for(h=0;s=a[h++];)ne.test(s.type||"")&&n.push(s);return d}function T(){return!0}function k(){return!1}function S(t,e){return t===E()==("focus"===e)}function E(){try{return lt.activeElement}catch(t){}}function P(t,e,n,i,o,r){var s,a;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=void 0);for(a in e)P(t,a,n,i,e[a],r);return t}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=k;else if(!o)return t;return 1===r&&(s=o,o=function(t){return xt().off(t),s.apply(this,arguments)},o.guid=s.guid||(s.guid=xt.guid++)),t.each(function(){xt.event.add(this,e,o,i,n)})}function A(t,e,n){if(!n)return void(void 0===$t.get(t,e)&&xt.event.add(t,e,T));$t.set(t,e,!1),xt.event.add(t,e,{namespace:!1,handler:function(t){var i,o,r=$t.get(this,e);if(1&t.isTrigger&&this[e]){if(r.length)(xt.event.special[e]||{}).delegateType&&t.stopPropagation();else if(r=ut.call(arguments),$t.set(this,e,r),i=n(this,e),this[e](),o=$t.get(this,e),r!==o||i?$t.set(this,e,!1):o={},r!==o)return t.stopImmediatePropagation(),t.preventDefault(),o.value}else r.length&&($t.set(this,e,{value:xt.event.trigger(xt.extend(r[0],xt.Event.prototype),r.slice(1),this)}),t.stopImmediatePropagation())}})}function I(t,e){return r(t,"table")&&r(11!==e.nodeType?e:e.firstChild,"tr")?xt(t).children("tbody")[0]||t:t}function O(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function M(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function D(t,e){var n,i,o,r,s,a,l,c;if(1===e.nodeType){if($t.hasData(t)&&(r=$t.access(t),s=$t.set(e,r),c=r.events)){delete s.handle,s.events={};for(o in c)for(n=0,i=c[o].length;n<i;n++)xt.event.add(e,o,c[o][n])}qt.hasData(t)&&(a=qt.access(t),l=xt.extend({},a),qt.set(e,l))}}function L(t,e){var n=e.nodeName.toLowerCase();"input"===n&&te.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function j(t,e,i,o){e=ht.apply([],e);var r,s,a,l,c,u,h=0,d=t.length,p=d-1,f=e[0],g=_t(f);if(g||d>1&&"string"==typeof f&&!bt.checkClone&&ue.test(f))return t.each(function(n){var r=t.eq(n);g&&(e[0]=f.call(this,n,r.html())),j(r,e,i,o)});if(d&&(r=x(e,t[0].ownerDocument,!1,t,o),s=r.firstChild,1===r.childNodes.length&&(r=s),s||o)){for(a=xt.map(w(r,"script"),O),l=a.length;h<d;h++)c=r,h!==p&&(c=xt.clone(c,!0,!0),l&&xt.merge(a,w(c,"script"))),i.call(t[h],c,h);if(l)for(u=a[a.length-1].ownerDocument,xt.map(a,M),h=0;h<l;h++)c=a[h],ne.test(c.type||"")&&!$t.access(c,"globalEval")&&xt.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?xt._evalUrl&&!c.noModule&&xt._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")}):n(c.textContent.replace(he,""),c,u))}return t}function R(t,e,n){for(var i,o=e?xt.filter(e,t):t,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||xt.cleanData(w(i)),i.parentNode&&(n&&Qt(i)&&C(w(i,"script")),i.parentNode.removeChild(i));return t}function B(t,e,n){var i,o,r,s,a=t.style;return n=n||pe(t),n&&(s=n.getPropertyValue(e)||n[e],""!==s||Qt(t)||(s=xt.style(t,e)),!bt.pixelBoxStyles()&&de.test(s)&&fe.test(e)&&(i=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=o,a.maxWidth=r)),void 0!==s?s+"":s}function F(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function N(t){for(var e=t[0].toUpperCase()+t.slice(1),n=ge.length;n--;)if((t=ge[n]+e)in me)return t}function U(t){var e=xt.cssProps[t]||ve[t];return e||(t in me?t:ve[t]=N(t)||t)}function $(t,e,n){var i=Wt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function q(t,e,n,i,o,r){var s="width"===e?1:0,a=0,l=0;if(n===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(l+=xt.css(t,n+Yt[s],!0,o)),i?("content"===n&&(l-=xt.css(t,"padding"+Yt[s],!0,o)),"margin"!==n&&(l-=xt.css(t,"border"+Yt[s]+"Width",!0,o))):(l+=xt.css(t,"padding"+Yt[s],!0,o),"padding"!==n?l+=xt.css(t,"border"+Yt[s]+"Width",!0,o):a+=xt.css(t,"border"+Yt[s]+"Width",!0,o));return!i&&r>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-l-a-.5))||0),l}function H(t,e,n){var i=pe(t),o=!bt.boxSizingReliable()||n,r=o&&"border-box"===xt.css(t,"boxSizing",!1,i),s=r,a=B(t,e,i),l="offset"+e[0].toUpperCase()+e.slice(1);if(de.test(a)){if(!n)return a;a="auto"}return(!bt.boxSizingReliable()&&r||"auto"===a||!parseFloat(a)&&"inline"===xt.css(t,"display",!1,i))&&t.getClientRects().length&&(r="border-box"===xt.css(t,"boxSizing",!1,i),(s=l in t)&&(a=t[l])),(a=parseFloat(a)||0)+q(t,e,n||(r?"border":"content"),s,i,a)+"px"}function V(t,e,n,i,o){return new V.prototype.init(t,e,n,i,o)}function z(){xe&&(!1===lt.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(z):t.setTimeout(z,xt.fx.interval),xt.fx.tick())}function W(){return t.setTimeout(function(){Ce=void 0}),Ce=Date.now()}function Y(t,e){var n,i=0,o={height:t};for(e=e?1:0;i<4;i+=2-e)n=Yt[i],o["margin"+n]=o["padding"+n]=t;return e&&(o.opacity=o.width=t),o}function G(t,e,n){for(var i,o=(X.tweeners[e]||[]).concat(X.tweeners["*"]),r=0,s=o.length;r<s;r++)if(i=o[r].call(n,e,t))return i}function Q(t,e,n){var i,o,r,s,a,l,c,u,h="width"in e||"height"in e,d=this,p={},f=t.style,g=t.nodeType&&Xt(t),m=$t.get(t,"fxshow");n.queue||(s=xt._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,xt.queue(t,"fx").length||s.empty.fire()})}));for(i in e)if(o=e[i],Te.test(o)){if(delete e[i],r=r||"toggle"===o,o===(g?"hide":"show")){if("show"!==o||!m||void 0===m[i])continue;g=!0}p[i]=m&&m[i]||xt.style(t,i)}if((l=!xt.isEmptyObject(e))||!xt.isEmptyObject(p)){h&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],c=m&&m.display,null==c&&(c=$t.get(t,"display")),u=xt.css(t,"display"),"none"===u&&(c?u=c:(_([t],!0),c=t.style.display||c,u=xt.css(t,"display"),_([t]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===xt.css(t,"float")&&(l||(d.done(function(){f.display=c}),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),l=!1;for(i in p)l||(m?"hidden"in m&&(g=m.hidden):m=$t.access(t,"fxshow",{display:c}),r&&(m.hidden=!g),g&&_([t],!0),d.done(function(){g||_([t]),$t.remove(t,"fxshow");for(i in p)xt.style(t,i,p[i])})),l=G(g?m[i]:0,i,d),i in m||(m[i]=l.start,g&&(l.end=l.start,l.start=0))}}function K(t,e){var n,i,o,r,s;for(n in t)if(i=f(n),o=e[i],r=t[n],Array.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),(s=xt.cssHooks[i])&&"expand"in s){r=s.expand(r),delete t[i];for(n in r)n in t||(t[n]=r[n],e[n]=o)}else e[i]=o}function X(t,e,n){var i,o,r=0,s=X.prefilters.length,a=xt.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=Ce||W(),n=Math.max(0,c.startTime+c.duration-e),i=n/c.duration||0,r=1-i,s=0,l=c.tweens.length;s<l;s++)c.tweens[s].run(r);return a.notifyWith(t,[c,r,n]),r<1&&l?n:(l||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:xt.extend({},e),opts:xt.extend(!0,{specialEasing:{},easing:xt.easing._default},n),originalProperties:e,originalOptions:n,startTime:Ce||W(),duration:n.duration,tweens:[],createTween:function(e,n){var i=xt.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)c.tweens[n].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),u=c.props;for(K(u,c.opts.specialEasing);r<s;r++)if(i=X.prefilters[r].call(c,t,u,c.opts))return _t(i.stop)&&(xt._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return xt.map(u,G,c),_t(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),xt.fx.timer(xt.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}function Z(t){return(t.match(Lt)||[]).join(" ")}function J(t){return t.getAttribute&&t.getAttribute("class")||""}function tt(t){return Array.isArray(t)?t:"string"==typeof t?t.match(Lt)||[]:[]}function et(t,e,n,o){var r;if(Array.isArray(e))xt.each(e,function(e,i){n||Re.test(t)?o(t,i):et(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,o)});else if(n||"object"!==i(e))o(t,e);else for(r in e)et(t+"["+r+"]",e[r],n,o)}function nt(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,r=e.toLowerCase().match(Lt)||[];if(_t(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function it(t,e,n,i){function o(a){var l;return r[a]=!0,xt.each(t[a]||[],function(t,a){var c=a(e,n,i);return"string"!=typeof c||s||r[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),o(c),!1)}),l}var r={},s=t===Ge;return o(e.dataTypes[0])||!r["*"]&&o("*")}function ot(t,e){var n,i,o=xt.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((o[n]?t:i||(i={}))[n]=e[n]);return i&&xt.extend(!0,t,i),t}function rt(t,e,n){for(var i,o,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(o in a)if(a[o]&&a[o].test(i)){l.unshift(o);break}if(l[0]in n)r=l[0];else{for(o in n){if(!l[0]||t.converters[o+" "+l[0]]){r=o;break}s||(s=o)}r=r||s}if(r)return r!==l[0]&&l.unshift(r),n[r]}function st(t,e,n,i){var o,r,s,a,l,c={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(r=u.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=c[l+" "+r]||c["* "+r]))for(o in c)if(a=o.split(" "),a[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[o]:!0!==c[o]&&(r=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}var at=[],lt=t.document,ct=Object.getPrototypeOf,ut=at.slice,ht=at.concat,dt=at.push,pt=at.indexOf,ft={},gt=ft.toString,mt=ft.hasOwnProperty,vt=mt.toString,yt=vt.call(Object),bt={},_t=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},wt=function(t){return null!=t&&t===t.window},Ct={type:!0,src:!0,nonce:!0,noModule:!0},xt=function(t,e){return new xt.fn.init(t,e)},Tt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;xt.fn=xt.prototype={jquery:"3.4.1",constructor:xt,length:0,toArray:function(){return ut.call(this)},get:function(t){
return null==t?ut.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=xt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return xt.each(this,t)},map:function(t){return this.pushStack(xt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(ut.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:dt,sort:at.sort,splice:at.splice},xt.extend=xt.fn.extend=function(){var t,e,n,i,o,r,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||_t(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)i=t[e],"__proto__"!==e&&s!==i&&(c&&i&&(xt.isPlainObject(i)||(o=Array.isArray(i)))?(n=s[e],r=o&&!Array.isArray(n)?[]:o||xt.isPlainObject(n)?n:{},o=!1,s[e]=xt.extend(c,r,i)):void 0!==i&&(s[e]=i));return s},xt.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==gt.call(t))&&(!(e=ct(t))||"function"==typeof(n=mt.call(e,"constructor")&&e.constructor)&&vt.call(n)===yt)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e){n(t,{nonce:e&&e.nonce})},each:function(t,e){var n,i=0;if(o(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(Tt,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(o(Object(t))?xt.merge(n,"string"==typeof t?[t]:t):dt.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:pt.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;i<n;i++)t[o++]=e[i];return t.length=o,t},grep:function(t,e,n){for(var i=[],o=0,r=t.length,s=!n;o<r;o++)!e(t[o],o)!==s&&i.push(t[o]);return i},map:function(t,e,n){var i,r,s=0,a=[];if(o(t))for(i=t.length;s<i;s++)null!=(r=e(t[s],s,n))&&a.push(r);else for(s in t)null!=(r=e(t[s],s,n))&&a.push(r);return ht.apply([],a)},guid:1,support:bt}),"function"==typeof Symbol&&(xt.fn[Symbol.iterator]=at[Symbol.iterator]),xt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){ft["[object "+e+"]"]=e.toLowerCase()});var kt=function(t){function e(t,e,n,i){var o,r,s,a,l,u,d,p=e&&e.ownerDocument,f=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==f&&9!==f&&11!==f)return n;if(!i&&((e?e.ownerDocument||e:N)!==O&&I(e),e=e||O,D)){if(11!==f&&(l=vt.exec(t)))if(o=l[1]){if(9===f){if(!(s=e.getElementById(o)))return n;if(s.id===o)return n.push(s),n}else if(p&&(s=p.getElementById(o))&&B(e,s)&&s.id===o)return n.push(s),n}else{if(l[2])return X.apply(n,e.getElementsByTagName(t)),n;if((o=l[3])&&_.getElementsByClassName&&e.getElementsByClassName)return X.apply(n,e.getElementsByClassName(o)),n}if(_.qsa&&!z[t+" "]&&(!L||!L.test(t))&&(1!==f||"object"!==e.nodeName.toLowerCase())){if(d=t,p=e,1===f&&ct.test(t)){for((a=e.getAttribute("id"))?a=a.replace(wt,Ct):e.setAttribute("id",a=F),u=T(t),r=u.length;r--;)u[r]="#"+a+" "+h(u[r]);d=u.join(","),p=yt.test(t)&&c(e.parentNode)||e}try{return X.apply(n,p.querySelectorAll(d)),n}catch(e){z(t,!0)}finally{a===F&&e.removeAttribute("id")}}}return S(t.replace(st,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>w.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[F]=!0,t}function o(t){var e=O.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var n=t.split("|"),i=n.length;i--;)w.attrHandle[n[i]]=e}function s(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&Tt(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function l(t){return i(function(e){return e=+e,i(function(n,i){for(var o,r=t([],n.length,e),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function c(t){return t&&void 0!==t.getElementsByTagName&&t}function u(){}function h(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function d(t,e,n){var i=e.dir,o=e.next,r=o||i,s=n&&"parentNode"===r,a=$++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||s)return t(e,n,o);return!1}:function(e,n,l){var c,u,h,d=[U,a];if(l){for(;e=e[i];)if((1===e.nodeType||s)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||s)if(h=e[F]||(e[F]={}),u=h[e.uniqueID]||(h[e.uniqueID]={}),o&&o===e.nodeName.toLowerCase())e=e[i]||e;else{if((c=u[r])&&c[0]===U&&c[1]===a)return d[2]=c[2];if(u[r]=d,d[2]=t(e,n,l))return!0}return!1}}function p(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function f(t,n,i){for(var o=0,r=n.length;o<r;o++)e(t,n[o],i);return i}function g(t,e,n,i,o){for(var r,s=[],a=0,l=t.length,c=null!=e;a<l;a++)(r=t[a])&&(n&&!n(r,i,o)||(s.push(r),c&&e.push(a)));return s}function m(t,e,n,o,r,s){return o&&!o[F]&&(o=m(o)),r&&!r[F]&&(r=m(r,s)),i(function(i,s,a,l){var c,u,h,d=[],p=[],m=s.length,v=i||f(e||"*",a.nodeType?[a]:a,[]),y=!t||!i&&e?v:g(v,d,t,a,l),b=n?r||(i?t:m||o)?[]:s:y;if(n&&n(y,b,a,l),o)for(c=g(b,p),o(c,[],a,l),u=c.length;u--;)(h=c[u])&&(b[p[u]]=!(y[p[u]]=h));if(i){if(r||t){if(r){for(c=[],u=b.length;u--;)(h=b[u])&&c.push(y[u]=h);r(null,b=[],c,l)}for(u=b.length;u--;)(h=b[u])&&(c=r?J(i,h):d[u])>-1&&(i[c]=!(s[c]=h))}}else b=g(b===s?b.splice(m,b.length):b),r?r(null,s,b,l):X.apply(s,b)})}function v(t){for(var e,n,i,o=t.length,r=w.relative[t[0].type],s=r||w.relative[" "],a=r?1:0,l=d(function(t){return t===e},s,!0),c=d(function(t){return J(e,t)>-1},s,!0),u=[function(t,n,i){var o=!r&&(i||n!==E)||((e=n).nodeType?l(t,n,i):c(t,n,i));return e=null,o}];a<o;a++)if(n=w.relative[t[a].type])u=[d(p(u),n)];else{if(n=w.filter[t[a].type].apply(null,t[a].matches),n[F]){for(i=++a;i<o&&!w.relative[t[i].type];i++);return m(a>1&&p(u),a>1&&h(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(st,"$1"),n,a<i&&v(t.slice(a,i)),i<o&&v(t=t.slice(i)),i<o&&h(t))}u.push(n)}return p(u)}function y(t,n){var o=n.length>0,r=t.length>0,s=function(i,s,a,l,c){var u,h,d,p=0,f="0",m=i&&[],v=[],y=E,b=i||r&&w.find.TAG("*",c),_=U+=null==y?1:Math.random()||.1,C=b.length;for(c&&(E=s===O||s||c);f!==C&&null!=(u=b[f]);f++){if(r&&u){for(h=0,s||u.ownerDocument===O||(I(u),a=!D);d=t[h++];)if(d(u,s||O,a)){l.push(u);break}c&&(U=_)}o&&((u=!d&&u)&&p--,i&&m.push(u))}if(p+=f,o&&f!==p){for(h=0;d=n[h++];)d(m,v,s,a);if(i){if(p>0)for(;f--;)m[f]||v[f]||(v[f]=Q.call(l));v=g(v)}X.apply(l,v),c&&!i&&v.length>0&&p+n.length>1&&e.uniqueSort(l)}return c&&(U=_,E=y),m};return o?i(s):s}var b,_,w,C,x,T,k,S,E,P,A,I,O,M,D,L,j,R,B,F="sizzle"+1*new Date,N=t.document,U=0,$=0,q=n(),H=n(),V=n(),z=n(),W=function(t,e){return t===e&&(A=!0),0},Y={}.hasOwnProperty,G=[],Q=G.pop,K=G.push,X=G.push,Z=G.slice,J=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},tt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",et="[\\x20\\t\\r\\n\\f]",nt="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",it="\\["+et+"*("+nt+")(?:"+et+"*([*^$|!~]?=)"+et+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+nt+"))|)"+et+"*\\]",ot=":("+nt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+it+")*)|.*)\\)|)",rt=new RegExp(et+"+","g"),st=new RegExp("^"+et+"+|((?:^|[^\\\\])(?:\\\\.)*)"+et+"+$","g"),at=new RegExp("^"+et+"*,"+et+"*"),lt=new RegExp("^"+et+"*([>+~]|"+et+")"+et+"*"),ct=new RegExp(et+"|>"),ut=new RegExp(ot),ht=new RegExp("^"+nt+"$"),dt={ID:new RegExp("^#("+nt+")"),CLASS:new RegExp("^\\.("+nt+")"),TAG:new RegExp("^("+nt+"|[*])"),ATTR:new RegExp("^"+it),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+et+"*(even|odd|(([+-]|)(\\d*)n|)"+et+"*(?:([+-]|)"+et+"*(\\d+)|))"+et+"*\\)|)","i"),bool:new RegExp("^(?:"+tt+")$","i"),needsContext:new RegExp("^"+et+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+et+"*((?:-\\d)?\\d*)"+et+"*\\)|)(?=[^-]|$)","i")},pt=/HTML$/i,ft=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,mt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,bt=new RegExp("\\\\([\\da-f]{1,6}"+et+"?|("+et+")|.)","ig"),_t=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},wt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Ct=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},xt=function(){I()},Tt=d(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{X.apply(G=Z.call(N.childNodes),N.childNodes),G[N.childNodes.length].nodeType}catch(t){X={apply:G.length?function(t,e){K.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}_=e.support={},x=e.isXML=function(t){var e=t.namespaceURI,n=(t.ownerDocument||t).documentElement;return!pt.test(e||n&&n.nodeName||"HTML")},I=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:N;return i!==O&&9===i.nodeType&&i.documentElement?(O=i,M=O.documentElement,D=!x(O),N!==O&&(n=O.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xt,!1):n.attachEvent&&n.attachEvent("onunload",xt)),_.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),_.getElementsByTagName=o(function(t){return t.appendChild(O.createComment("")),!t.getElementsByTagName("*").length}),_.getElementsByClassName=mt.test(O.getElementsByClassName),_.getById=o(function(t){return M.appendChild(t).id=F,!O.getElementsByName||!O.getElementsByName(F).length}),_.getById?(w.filter.ID=function(t){var e=t.replace(bt,_t);return function(t){return t.getAttribute("id")===e}},w.find.ID=function(t,e){if(void 0!==e.getElementById&&D){var n=e.getElementById(t);return n?[n]:[]}}):(w.filter.ID=function(t){var e=t.replace(bt,_t);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},w.find.ID=function(t,e){if(void 0!==e.getElementById&&D){var n,i,o,r=e.getElementById(t);if(r){if((n=r.getAttributeNode("id"))&&n.value===t)return[r];for(o=e.getElementsByName(t),i=0;r=o[i++];)if((n=r.getAttributeNode("id"))&&n.value===t)return[r]}return[]}}),w.find.TAG=_.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):_.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},w.find.CLASS=_.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&D)return e.getElementsByClassName(t)},j=[],L=[],(_.qsa=mt.test(O.querySelectorAll))&&(o(function(t){M.appendChild(t).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+et+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||L.push("\\["+et+"*(?:value|"+tt+")"),t.querySelectorAll("[id~="+F+"-]").length||L.push("~="),t.querySelectorAll(":checked").length||L.push(":checked"),t.querySelectorAll("a#"+F+"+*").length||L.push(".#.+[+~]")}),o(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=O.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&L.push("name"+et+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&L.push(":enabled",":disabled"),M.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&L.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),L.push(",.*:")})),(_.matchesSelector=mt.test(R=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&o(function(t){_.disconnectedMatch=R.call(t,"*"),R.call(t,"[s!='']:x"),j.push("!=",ot)}),L=L.length&&new RegExp(L.join("|")),j=j.length&&new RegExp(j.join("|")),e=mt.test(M.compareDocumentPosition),B=e||mt.test(M.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},W=e?function(t,e){if(t===e)return A=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!_.sortDetached&&e.compareDocumentPosition(t)===n?t===O||t.ownerDocument===N&&B(N,t)?-1:e===O||e.ownerDocument===N&&B(N,e)?1:P?J(P,t)-J(P,e):0:4&n?-1:1)}:function(t,e){if(t===e)return A=!0,0;var n,i=0,o=t.parentNode,r=e.parentNode,a=[t],l=[e];if(!o||!r)return t===O?-1:e===O?1:o?-1:r?1:P?J(P,t)-J(P,e):0;if(o===r)return s(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;a[i]===l[i];)i++;return i?s(a[i],l[i]):a[i]===N?-1:l[i]===N?1:0},O):O},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==O&&I(t),_.matchesSelector&&D&&!z[n+" "]&&(!j||!j.test(n))&&(!L||!L.test(n)))try{var i=R.call(t,n);if(i||_.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){z(n,!0)}return e(n,O,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==O&&I(t),B(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==O&&I(t);var n=w.attrHandle[e.toLowerCase()],i=n&&Y.call(w.attrHandle,e.toLowerCase())?n(t,e,!D):void 0;return void 0!==i?i:_.attributes||!D?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.escape=function(t){return(t+"").replace(wt,Ct)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,o=0;if(A=!_.detectDuplicates,P=!_.sortStable&&t.slice(0),t.sort(W),A){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return P=null,t},C=e.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=C(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=C(e);return n},w=e.selectors={cacheLength:50,createPseudo:i,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(bt,_t),t[3]=(t[3]||t[4]||t[5]||"").replace(bt,_t),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return dt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ut.test(n)&&(e=T(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(bt,_t).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=q[t+" "];return e||(e=new RegExp("(^|"+et+")"+t+"("+et+"|$)"))&&q(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(o){var r=e.attr(o,t);return null==r?"!="===n:!n||(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r.replace(rt," ")+" ").indexOf(i)>-1:"|="===n&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var c,u,h,d,p,f,g=r!==s?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a,b=!1;if(m){if(r){for(;g;){for(d=e;d=d[g];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&y){for(d=m,h=d[F]||(d[F]={}),u=h[d.uniqueID]||(h[d.uniqueID]={}),c=u[t]||[],p=c[0]===U&&c[1],b=p&&c[2],d=p&&m.childNodes[p];d=++p&&d&&d[g]||(b=p=0)||f.pop();)if(1===d.nodeType&&++b&&d===e){u[t]=[U,p,b];break}}else if(y&&(d=e,h=d[F]||(d[F]={}),u=h[d.uniqueID]||(h[d.uniqueID]={}),c=u[t]||[],p=c[0]===U&&c[1],b=p),!1===b)for(;(d=++p&&d&&d[g]||(b=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(y&&(h=d[F]||(d[F]={}),u=h[d.uniqueID]||(h[d.uniqueID]={}),u[t]=[U,b]),d!==e)););return(b-=o)===i||b%i==0&&b/i>=0}}},PSEUDO:function(t,n){var o,r=w.pseudos[t]||w.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[F]?r(n):r.length>1?(o=[t,t,"",n],w.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,o=r(t,n),s=o.length;s--;)i=J(t,o[s]),t[i]=!(e[i]=o[s])}):function(t){return r(t,0,o)}):r}},pseudos:{not:i(function(t){var e=[],n=[],o=k(t.replace(st,"$1"));return o[F]?i(function(t,e,n,i){for(var r,s=o(t,null,i,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,i,r){return e[0]=t,o(e,null,r,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(bt,_t),function(e){return(e.textContent||C(e)).indexOf(t)>-1}}),lang:i(function(t){return ht.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(bt,_t).toLowerCase(),function(e){var n;do{if(n=D?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===M},focus:function(t){return t===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:a(!1),disabled:a(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return ft.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,n){return[n<0?n+e:n]}),even:l(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:l(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:l(function(t,e,n){for(var i=n<0?n+e:n>e?e:n;--i>=0;)t.push(i);return t}),gt:l(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}},w.pseudos.nth=w.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[b]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(b);for(b in{submit:!0,reset:!0})w.pseudos[b]=function(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}(b);return u.prototype=w.filters=w.pseudos,w.setFilters=new u,T=e.tokenize=function(t,n){var i,o,r,s,a,l,c,u=H[t+" "];if(u)return n?0:u.slice(0);for(a=t,l=[],c=w.preFilter;a;){i&&!(o=at.exec(a))||(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),i=!1,(o=lt.exec(a))&&(i=o.shift(),r.push({value:i,type:o[0].replace(st," ")}),a=a.slice(i.length));for(s in w.filter)!(o=dt[s].exec(a))||c[s]&&!(o=c[s](o))||(i=o.shift(),r.push({value:i,type:s,matches:o}),a=a.slice(i.length));if(!i)break}return n?a.length:a?e.error(t):H(t,l).slice(0)},k=e.compile=function(t,e){var n,i=[],o=[],r=V[t+" "];if(!r){for(e||(e=T(t)),n=e.length;n--;)r=v(e[n]),r[F]?i.push(r):o.push(r);r=V(t,y(o,i)),r.selector=t}return r},S=e.select=function(t,e,n,i){var o,r,s,a,l,u="function"==typeof t&&t,d=!i&&T(t=u.selector||t);if(n=n||[],1===d.length){if(r=d[0]=d[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&9===e.nodeType&&D&&w.relative[r[1].type]){if(!(e=(w.find.ID(s.matches[0].replace(bt,_t),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=dt.needsContext.test(t)?0:r.length;o--&&(s=r[o],!w.relative[a=s.type]);)if((l=w.find[a])&&(i=l(s.matches[0].replace(bt,_t),yt.test(r[0].type)&&c(e.parentNode)||e))){if(r.splice(o,1),!(t=i.length&&h(r)))return X.apply(n,i),n;break}}return(u||k(t,d))(i,e,!D,n,!e||yt.test(t)&&c(e.parentNode)||e),n},_.sortStable=F.split("").sort(W).join("")===F,_.detectDuplicates=!!A,I(),_.sortDetached=o(function(t){return 1&t.compareDocumentPosition(O.createElement("fieldset"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),_.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||r(tt,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);xt.find=kt,xt.expr=kt.selectors,xt.expr[":"]=xt.expr.pseudos,xt.uniqueSort=xt.unique=kt.uniqueSort,xt.text=kt.getText,xt.isXMLDoc=kt.isXML,xt.contains=kt.contains,xt.escapeSelector=kt.escape;var St=function(t,e,n){for(var i=[],o=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&xt(t).is(n))break;i.push(t)}return i},Et=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},Pt=xt.expr.match.needsContext,At=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;xt.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?xt.find.matchesSelector(i,t)?[i]:[]:xt.find.matches(t,xt.grep(e,function(t){return 1===t.nodeType}))},xt.fn.extend({find:function(t){var e,n,i=this.length,o=this;if("string"!=typeof t)return this.pushStack(xt(t).filter(function(){for(e=0;e<i;e++)if(xt.contains(o[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)xt.find(t,o[e],n);return i>1?xt.uniqueSort(n):n},filter:function(t){return this.pushStack(s(this,t||[],!1))},not:function(t){return this.pushStack(s(this,t||[],!0))},is:function(t){return!!s(this,"string"==typeof t&&Pt.test(t)?xt(t):t||[],!1).length}});var It,Ot=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(xt.fn.init=function(t,e,n){var i,o;if(!t)return this;if(n=n||It,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:Ot.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof xt?e[0]:e,xt.merge(this,xt.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:lt,!0)),At.test(i[1])&&xt.isPlainObject(e))for(i in e)_t(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return o=lt.getElementById(i[2]),o&&(this[0]=o,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):_t(t)?void 0!==n.ready?n.ready(t):t(xt):xt.makeArray(t,this)}).prototype=xt.fn,It=xt(lt);var Mt=/^(?:parents|prev(?:Until|All))/,Dt={children:!0,contents:!0,next:!0,prev:!0};xt.fn.extend({has:function(t){var e=xt(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(xt.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,o=this.length,r=[],s="string"!=typeof t&&xt(t);if(!Pt.test(t))for(;i<o;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&xt.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(r.length>1?xt.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?pt.call(xt(t),this[0]):pt.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(xt.uniqueSort(xt.merge(this.get(),xt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),xt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return St(t,"parentNode")},parentsUntil:function(t,e,n){return St(t,"parentNode",n)},next:function(t){return a(t,"nextSibling")},prev:function(t){return a(t,"previousSibling")},nextAll:function(t){return St(t,"nextSibling")},prevAll:function(t){return St(t,"previousSibling")},nextUntil:function(t,e,n){return St(t,"nextSibling",n)},prevUntil:function(t,e,n){return St(t,"previousSibling",n)},siblings:function(t){return Et((t.parentNode||{}).firstChild,t)},children:function(t){return Et(t.firstChild)},contents:function(t){return void 0!==t.contentDocument?t.contentDocument:(r(t,"template")&&(t=t.content||t),xt.merge([],t.childNodes))}},function(t,e){xt.fn[t]=function(n,i){var o=xt.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=xt.filter(i,o)),this.length>1&&(Dt[t]||xt.uniqueSort(o),Mt.test(t)&&o.reverse()),this.pushStack(o)}});var Lt=/[^\x20\t\r\n\f]+/g;xt.Callbacks=function(t){t="string"==typeof t?l(t):xt.extend({},t);var e,n,o,r,s=[],a=[],c=-1,u=function(){for(r=r||t.once,o=e=!0;a.length;c=-1)for(n=a.shift();++c<s.length;)!1===s[c].apply(n[0],n[1])&&t.stopOnFalse&&(c=s.length,n=!1);t.memory||(n=!1),e=!1,r&&(s=n?[]:"")},h={add:function(){return s&&(n&&!e&&(c=s.length-1,a.push(n)),function e(n){xt.each(n,function(n,o){_t(o)?t.unique&&h.has(o)||s.push(o):o&&o.length&&"string"!==i(o)&&e(o)})}(arguments),n&&!e&&u()),this},remove:function(){return xt.each(arguments,function(t,e){for(var n;(n=xt.inArray(e,s,n))>-1;)s.splice(n,1),n<=c&&c--}),this},has:function(t){return t?xt.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=a=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=a=[],n||e||(s=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=n||[],n=[t,n.slice?n.slice():n],a.push(n),e||u()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!o}};return h},xt.extend({Deferred:function(e){var n=[["notify","progress",xt.Callbacks("memory"),xt.Callbacks("memory"),2],["resolve","done",xt.Callbacks("once memory"),xt.Callbacks("once memory"),0,"resolved"],["reject","fail",xt.Callbacks("once memory"),xt.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},catch:function(t){return o.then(null,t)},pipe:function(){var t=arguments;return xt.Deferred(function(e){xt.each(n,function(n,i){var o=_t(t[i[4]])&&t[i[4]];r[i[1]](function(){var t=o&&o.apply(this,arguments);t&&_t(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[i[0]+"With"](this,o?[t]:arguments)})}),t=null}).promise()},then:function(e,i,o){function r(e,n,i,o){return function(){var a=this,l=arguments,h=function(){var t,h;if(!(e<s)){if((t=i.apply(a,l))===n.promise())throw new TypeError("Thenable self-resolution");h=t&&("object"==typeof t||"function"==typeof t)&&t.then,_t(h)?o?h.call(t,r(s,n,c,o),r(s,n,u,o)):(s++,h.call(t,r(s,n,c,o),r(s,n,u,o),r(s,n,c,n.notifyWith))):(i!==c&&(a=void 0,l=[t]),(o||n.resolveWith)(a,l))}},d=o?h:function(){try{h()}catch(t){xt.Deferred.exceptionHook&&xt.Deferred.exceptionHook(t,d.stackTrace),e+1>=s&&(i!==u&&(a=void 0,l=[t]),n.rejectWith(a,l))}};e?d():(xt.Deferred.getStackHook&&(d.stackTrace=xt.Deferred.getStackHook()),t.setTimeout(d))}}var s=0;return xt.Deferred(function(t){n[0][3].add(r(0,t,_t(o)?o:c,t.notifyWith)),n[1][3].add(r(0,t,_t(e)?e:c)),n[2][3].add(r(0,t,_t(i)?i:u))}).promise()},promise:function(t){return null!=t?xt.extend(t,o):o}},r={};return xt.each(n,function(t,e){var s=e[2],a=e[5];o[e[1]]=s.add,a&&s.add(function(){i=a},n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),s.add(e[3].fire),r[e[0]]=function(){return r[e[0]+"With"](this===r?void 0:this,arguments),this},r[e[0]+"With"]=s.fireWith}),o.promise(r),e&&e.call(r,r),r},when:function(t){var e=arguments.length,n=e,i=Array(n),o=ut.call(arguments),r=xt.Deferred(),s=function(t){return function(n){i[t]=this,o[t]=arguments.length>1?ut.call(arguments):n,--e||r.resolveWith(i,o)}};if(e<=1&&(h(t,r.done(s(n)).resolve,r.reject,!e),"pending"===r.state()||_t(o[n]&&o[n].then)))return r.then();for(;n--;)h(o[n],s(n),r.reject);return r.promise()}});var jt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;xt.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&jt.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},xt.readyException=function(e){t.setTimeout(function(){throw e})};var Rt=xt.Deferred();xt.fn.ready=function(t){return Rt.then(t).catch(function(t){xt.readyException(t)}),this},xt.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--xt.readyWait:xt.isReady)||(xt.isReady=!0,!0!==t&&--xt.readyWait>0||Rt.resolveWith(lt,[xt]))}}),xt.ready.then=Rt.then,"complete"===lt.readyState||"loading"!==lt.readyState&&!lt.documentElement.doScroll?t.setTimeout(xt.ready):(lt.addEventListener("DOMContentLoaded",d),t.addEventListener("load",d));var Bt=function(t,e,n,o,r,s,a){var l=0,c=t.length,u=null==n;if("object"===i(n)){r=!0;for(l in n)Bt(t,e,l,n[l],!0,s,a)}else if(void 0!==o&&(r=!0,_t(o)||(a=!0),u&&(a?(e.call(t,o),e=null):(u=e,e=function(t,e,n){return u.call(xt(t),n)})),e))for(;l<c;l++)e(t[l],n,a?o:o.call(t[l],l,e(t[l],n)));return r?t:u?e.call(t):c?e(t[0],n):s},Ft=/^-ms-/,Nt=/-([a-z])/g,Ut=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};g.uid=1,g.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Ut(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,o=this.cache(t);if("string"==typeof e)o[f(e)]=n;else for(i in e)o[f(i)]=e[i];return o},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][f(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){Array.isArray(e)?e=e.map(f):(e=f(e),e=e in i?[e]:e.match(Lt)||[]),n=e.length;for(;n--;)delete i[e[n]]}(void 0===e||xt.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!xt.isEmptyObject(e)}};var $t=new g,qt=new g,Ht=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Vt=/[A-Z]/g;xt.extend({hasData:function(t){return qt.hasData(t)||$t.hasData(t)},data:function(t,e,n){return qt.access(t,e,n)},removeData:function(t,e){qt.remove(t,e)},_data:function(t,e,n){return $t.access(t,e,n)},_removeData:function(t,e){$t.remove(t,e)}}),xt.fn.extend({data:function(t,e){var n,i,o,r=this[0],s=r&&r.attributes;if(void 0===t){if(this.length&&(o=qt.get(r),1===r.nodeType&&!$t.get(r,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=f(i.slice(5)),v(r,i,o[i])));$t.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof t?this.each(function(){qt.set(this,t)}):Bt(this,function(e){var n;if(r&&void 0===e){if(void 0!==(n=qt.get(r,t)))return n;if(void 0!==(n=v(r,t)))return n}else this.each(function(){qt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){qt.remove(this,t)})}}),xt.extend({queue:function(t,e,n){
var i;if(t)return e=(e||"fx")+"queue",i=$t.get(t,e),n&&(!i||Array.isArray(n)?i=$t.access(t,e,xt.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=xt.queue(t,e),i=n.length,o=n.shift(),r=xt._queueHooks(t,e),s=function(){xt.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,s,r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return $t.get(t,n)||$t.access(t,n,{empty:xt.Callbacks("once memory").add(function(){$t.remove(t,[e+"queue",n])})})}}),xt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?xt.queue(this[0],t):void 0===e?this:this.each(function(){var n=xt.queue(this,t,e);xt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&xt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){xt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=xt.Deferred(),r=this,s=this.length,a=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=$t.get(r[s],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(e)}});var zt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Wt=new RegExp("^(?:([+-])=|)("+zt+")([a-z%]*)$","i"),Yt=["Top","Right","Bottom","Left"],Gt=lt.documentElement,Qt=function(t){return xt.contains(t.ownerDocument,t)},Kt={composed:!0};Gt.getRootNode&&(Qt=function(t){return xt.contains(t.ownerDocument,t)||t.getRootNode(Kt)===t.ownerDocument});var Xt=function(t,e){return t=e||t,"none"===t.style.display||""===t.style.display&&Qt(t)&&"none"===xt.css(t,"display")},Zt=function(t,e,n,i){var o,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];o=n.apply(t,i||[]);for(r in e)t.style[r]=s[r];return o},Jt={};xt.fn.extend({show:function(){return _(this,!0)},hide:function(){return _(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Xt(this)?xt(this).show():xt(this).hide()})}});var te=/^(?:checkbox|radio)$/i,ee=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ne=/^$|^module$|\/(?:java|ecma)script/i,ie={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ie.optgroup=ie.option,ie.tbody=ie.tfoot=ie.colgroup=ie.caption=ie.thead,ie.th=ie.td;var oe=/<|&#?\w+;/;!function(){var t=lt.createDocumentFragment(),e=t.appendChild(lt.createElement("div")),n=lt.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),bt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",bt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var re=/^key/,se=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ae=/^([^.]*)(?:\.(.+)|)/;xt.event={global:{},add:function(t,e,n,i,o){var r,s,a,l,c,u,h,d,p,f,g,m=$t.get(t);if(m)for(n.handler&&(r=n,n=r.handler,o=r.selector),o&&xt.find.matchesSelector(Gt,o),n.guid||(n.guid=xt.guid++),(l=m.events)||(l=m.events={}),(s=m.handle)||(s=m.handle=function(e){return void 0!==xt&&xt.event.triggered!==e.type?xt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(Lt)||[""],c=e.length;c--;)a=ae.exec(e[c])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p&&(h=xt.event.special[p]||{},p=(o?h.delegateType:h.bindType)||p,h=xt.event.special[p]||{},u=xt.extend({type:p,origType:g,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&xt.expr.match.needsContext.test(o),namespace:f.join(".")},r),(d=l[p])||(d=l[p]=[],d.delegateCount=0,h.setup&&!1!==h.setup.call(t,i,f,s)||t.addEventListener&&t.addEventListener(p,s)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),o?d.splice(d.delegateCount++,0,u):d.push(u),xt.event.global[p]=!0)},remove:function(t,e,n,i,o){var r,s,a,l,c,u,h,d,p,f,g,m=$t.hasData(t)&&$t.get(t);if(m&&(l=m.events)){for(e=(e||"").match(Lt)||[""],c=e.length;c--;)if(a=ae.exec(e[c])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(h=xt.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,d=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=d.length;r--;)u=d[r],!o&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(r,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,f,m.handle)||xt.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)xt.event.remove(t,p+e[c],n,i,!0);xt.isEmptyObject(l)&&$t.remove(t,"handle events")}},dispatch:function(t){var e,n,i,o,r,s,a=xt.event.fix(t),l=new Array(arguments.length),c=($t.get(this,"events")||{})[a.type]||[],u=xt.event.special[a.type]||{};for(l[0]=a,e=1;e<arguments.length;e++)l[e]=arguments[e];if(a.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,a)){for(s=xt.event.handlers.call(this,a,c),e=0;(o=s[e++])&&!a.isPropagationStopped();)for(a.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==r.namespace&&!a.rnamespace.test(r.namespace)||(a.handleObj=r,a.data=r.data,void 0!==(i=((xt.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,l))&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,a),a.result}},handlers:function(t,e){var n,i,o,r,s,a=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(r=[],s={},n=0;n<l;n++)i=e[n],o=i.selector+" ",void 0===s[o]&&(s[o]=i.needsContext?xt(o,this).index(c)>-1:xt.find(o,this,null,[c]).length),s[o]&&r.push(i);r.length&&a.push({elem:c,handlers:r})}return c=this,l<e.length&&a.push({elem:c,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(xt.Event.prototype,t,{enumerable:!0,configurable:!0,get:_t(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[xt.expando]?t:new xt.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return te.test(e.type)&&e.click&&r(e,"input")&&A(e,"click",T),!1},trigger:function(t){var e=this||t;return te.test(e.type)&&e.click&&r(e,"input")&&A(e,"click"),!0},_default:function(t){var e=t.target;return te.test(e.type)&&e.click&&r(e,"input")&&$t.get(e,"click")||r(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},xt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},xt.Event=function(t,e){if(!(this instanceof xt.Event))return new xt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?T:k,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&xt.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[xt.expando]=!0},xt.Event.prototype={constructor:xt.Event,isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=T,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=T,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=T,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},xt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&re.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&se.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},xt.event.addProp),xt.each({focus:"focusin",blur:"focusout"},function(t,e){xt.event.special[t]={setup:function(){return A(this,t,S),!1},trigger:function(){return A(this,t),!0},delegateType:e}}),xt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){xt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,r=t.handleObj;return o&&(o===i||xt.contains(i,o))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),xt.fn.extend({on:function(t,e,n,i){return P(this,t,e,n,i)},one:function(t,e,n,i){return P(this,t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,xt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=k),this.each(function(){xt.event.remove(this,t,n,e)})}});var le=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ce=/<script|<style|<link/i,ue=/checked\s*(?:[^=]|=\s*.checked.)/i,he=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;xt.extend({htmlPrefilter:function(t){return t.replace(le,"<$1></$2>")},clone:function(t,e,n){var i,o,r,s,a=t.cloneNode(!0),l=Qt(t);if(!(bt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||xt.isXMLDoc(t)))for(s=w(a),r=w(t),i=0,o=r.length;i<o;i++)L(r[i],s[i]);if(e)if(n)for(r=r||w(t),s=s||w(a),i=0,o=r.length;i<o;i++)D(r[i],s[i]);else D(t,a);return s=w(a,"script"),s.length>0&&C(s,!l&&w(t,"script")),a},cleanData:function(t){for(var e,n,i,o=xt.event.special,r=0;void 0!==(n=t[r]);r++)if(Ut(n)){if(e=n[$t.expando]){if(e.events)for(i in e.events)o[i]?xt.event.remove(n,i):xt.removeEvent(n,i,e.handle);n[$t.expando]=void 0}n[qt.expando]&&(n[qt.expando]=void 0)}}}),xt.fn.extend({detach:function(t){return R(this,t,!0)},remove:function(t){return R(this,t)},text:function(t){return Bt(this,function(t){return void 0===t?xt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return j(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){I(this,t).appendChild(t)}})},prepend:function(){return j(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=I(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return j(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return j(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(xt.cleanData(w(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return xt.clone(this,t,e)})},html:function(t){return Bt(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!ce.test(t)&&!ie[(ee.exec(t)||["",""])[1].toLowerCase()]){t=xt.htmlPrefilter(t);try{for(;n<i;n++)e=this[n]||{},1===e.nodeType&&(xt.cleanData(w(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return j(this,arguments,function(e){var n=this.parentNode;xt.inArray(this,t)<0&&(xt.cleanData(w(this)),n&&n.replaceChild(e,this))},t)}}),xt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){xt.fn[t]=function(t){for(var n,i=[],o=xt(t),r=o.length-1,s=0;s<=r;s++)n=s===r?this:this.clone(!0),xt(o[s])[e](n),dt.apply(i,n.get());return this.pushStack(i)}});var de=new RegExp("^("+zt+")(?!px)[a-z%]+$","i"),pe=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},fe=new RegExp(Yt.join("|"),"i");!function(){function e(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Gt.appendChild(l).appendChild(c);var e=t.getComputedStyle(c);i="1%"!==e.top,a=12===n(e.marginLeft),c.style.right="60%",s=36===n(e.right),o=36===n(e.width),c.style.position="absolute",r=12===n(c.offsetWidth/3),Gt.removeChild(l),c=null}}function n(t){return Math.round(parseFloat(t))}var i,o,r,s,a,l=lt.createElement("div"),c=lt.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",bt.clearCloneStyle="content-box"===c.style.backgroundClip,xt.extend(bt,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),a},scrollboxSize:function(){return e(),r}}))}();var ge=["Webkit","Moz","ms"],me=lt.createElement("div").style,ve={},ye=/^(none|table(?!-c[ea]).+)/,be=/^--/,_e={position:"absolute",visibility:"hidden",display:"block"},we={letterSpacing:"0",fontWeight:"400"};xt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=B(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,s,a=f(e),l=be.test(e),c=t.style;if(l||(e=U(a)),s=xt.cssHooks[e]||xt.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(o=s.get(t,!1,i))?o:c[e];r=typeof n,"string"===r&&(o=Wt.exec(n))&&o[1]&&(n=y(t,e,o),r="number"),null!=n&&n===n&&("number"!==r||l||(n+=o&&o[3]||(xt.cssNumber[a]?"":"px")),bt.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,i))||(l?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,i){var o,r,s,a=f(e);return be.test(e)||(e=U(a)),s=xt.cssHooks[e]||xt.cssHooks[a],s&&"get"in s&&(o=s.get(t,!0,n)),void 0===o&&(o=B(t,e,i)),"normal"===o&&e in we&&(o=we[e]),""===n||n?(r=parseFloat(o),!0===n||isFinite(r)?r||0:o):o}}),xt.each(["height","width"],function(t,e){xt.cssHooks[e]={get:function(t,n,i){if(n)return!ye.test(xt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?H(t,e,i):Zt(t,_e,function(){return H(t,e,i)})},set:function(t,n,i){var o,r=pe(t),s=!bt.scrollboxSize()&&"absolute"===r.position,a=s||i,l=a&&"border-box"===xt.css(t,"boxSizing",!1,r),c=i?q(t,e,i,l,r):0;return l&&s&&(c-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(r[e])-q(t,e,"border",!1,r)-.5)),c&&(o=Wt.exec(n))&&"px"!==(o[3]||"px")&&(t.style[e]=n,n=xt.css(t,e)),$(t,n,c)}}}),xt.cssHooks.marginLeft=F(bt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(B(t,"marginLeft"))||t.getBoundingClientRect().left-Zt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),xt.each({margin:"",padding:"",border:"Width"},function(t,e){xt.cssHooks[t+e]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];i<4;i++)o[t+Yt[i]+e]=r[i]||r[i-2]||r[0];return o}},"margin"!==t&&(xt.cssHooks[t+e].set=$)}),xt.fn.extend({css:function(t,e){return Bt(this,function(t,e,n){var i,o,r={},s=0;if(Array.isArray(e)){for(i=pe(t),o=e.length;s<o;s++)r[e[s]]=xt.css(t,e[s],!1,i);return r}return void 0!==n?xt.style(t,e,n):xt.css(t,e)},t,e,arguments.length>1)}}),xt.Tween=V,V.prototype={constructor:V,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||xt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(xt.cssNumber[n]?"":"px")},cur:function(){var t=V.propHooks[this.prop];return t&&t.get?t.get(this):V.propHooks._default.get(this)},run:function(t){var e,n=V.propHooks[this.prop];return this.options.duration?this.pos=e=xt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):V.propHooks._default.set(this),this}},V.prototype.init.prototype=V.prototype,V.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=xt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){xt.fx.step[t.prop]?xt.fx.step[t.prop](t):1!==t.elem.nodeType||!xt.cssHooks[t.prop]&&null==t.elem.style[U(t.prop)]?t.elem[t.prop]=t.now:xt.style(t.elem,t.prop,t.now+t.unit)}}},V.propHooks.scrollTop=V.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},xt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},xt.fx=V.prototype.init,xt.fx.step={};var Ce,xe,Te=/^(?:toggle|show|hide)$/,ke=/queueHooks$/;xt.Animation=xt.extend(X,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return y(n.elem,t,Wt.exec(e),n),n}]},tweener:function(t,e){_t(t)?(e=t,t=["*"]):t=t.match(Lt);for(var n,i=0,o=t.length;i<o;i++)n=t[i],X.tweeners[n]=X.tweeners[n]||[],X.tweeners[n].unshift(e)},prefilters:[Q],prefilter:function(t,e){e?X.prefilters.unshift(t):X.prefilters.push(t)}}),xt.speed=function(t,e,n){var i=t&&"object"==typeof t?xt.extend({},t):{complete:n||!n&&e||_t(t)&&t,duration:t,easing:n&&e||e&&!_t(e)&&e};return xt.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in xt.fx.speeds?i.duration=xt.fx.speeds[i.duration]:i.duration=xt.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){_t(i.old)&&i.old.call(this),i.queue&&xt.dequeue(this,i.queue)},i},xt.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Xt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=xt.isEmptyObject(t),r=xt.speed(e,n,i),s=function(){var e=X(this,xt.extend({},t),r);(o||$t.get(this,"finish"))&&e.stop(!0)};return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",r=xt.timers,s=$t.get(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&ke.test(o)&&i(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(n),e=!1,r.splice(o,1));!e&&n||xt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=$t.get(this),i=n[t+"queue"],o=n[t+"queueHooks"],r=xt.timers,s=i?i.length:0;for(n.finish=!0,xt.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<s;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),xt.each(["toggle","show","hide"],function(t,e){var n=xt.fn[e];xt.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(Y(e,!0),t,i,o)}}),xt.each({slideDown:Y("show"),slideUp:Y("hide"),slideToggle:Y("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){xt.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),xt.timers=[],xt.fx.tick=function(){var t,e=0,n=xt.timers;for(Ce=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||xt.fx.stop(),Ce=void 0},xt.fx.timer=function(t){xt.timers.push(t),xt.fx.start()},xt.fx.interval=13,xt.fx.start=function(){xe||(xe=!0,z())},xt.fx.stop=function(){xe=null},xt.fx.speeds={slow:600,fast:200,_default:400},xt.fn.delay=function(e,n){return e=xt.fx?xt.fx.speeds[e]||e:e,n=n||"fx",this.queue(n,function(n,i){var o=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(o)}})},function(){var t=lt.createElement("input"),e=lt.createElement("select"),n=e.appendChild(lt.createElement("option"));t.type="checkbox",bt.checkOn=""!==t.value,bt.optSelected=n.selected,t=lt.createElement("input"),t.value="t",t.type="radio",bt.radioValue="t"===t.value}();var Se,Ee=xt.expr.attrHandle;xt.fn.extend({attr:function(t,e){return Bt(this,xt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){xt.removeAttr(this,t)})}}),xt.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?xt.prop(t,e,n):(1===r&&xt.isXMLDoc(t)||(o=xt.attrHooks[e.toLowerCase()]||(xt.expr.match.bool.test(e)?Se:void 0)),void 0!==n?null===n?void xt.removeAttr(t,e):o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:(t.setAttribute(e,n+""),n):o&&"get"in o&&null!==(i=o.get(t,e))?i:(i=xt.find.attr(t,e),null==i?void 0:i))},attrHooks:{type:{set:function(t,e){if(!bt.radioValue&&"radio"===e&&r(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,o=e&&e.match(Lt);if(o&&1===t.nodeType)for(;n=o[i++];)t.removeAttribute(n)}}),Se={set:function(t,e,n){return!1===e?xt.removeAttr(t,n):t.setAttribute(n,n),n}},xt.each(xt.expr.match.bool.source.match(/\w+/g),function(t,e){var n=Ee[e]||xt.find.attr;Ee[e]=function(t,e,i){var o,r,s=e.toLowerCase();return i||(r=Ee[s],Ee[s]=o,o=null!=n(t,e,i)?s:null,Ee[s]=r),o}});var Pe=/^(?:input|select|textarea|button)$/i,Ae=/^(?:a|area)$/i;xt.fn.extend({prop:function(t,e){return Bt(this,xt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[xt.propFix[t]||t]})}}),xt.extend({prop:function(t,e,n){var i,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&xt.isXMLDoc(t)||(e=xt.propFix[e]||e,o=xt.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=xt.find.attr(t,"tabindex");return e?parseInt(e,10):Pe.test(t.nodeName)||Ae.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),bt.optSelected||(xt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),xt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){xt.propFix[this.toLowerCase()]=this}),xt.fn.extend({addClass:function(t){var e,n,i,o,r,s,a,l=0;if(_t(t))return this.each(function(e){xt(this).addClass(t.call(this,e,J(this)))});if(e=tt(t),e.length)for(;n=this[l++];)if(o=J(n),i=1===n.nodeType&&" "+Z(o)+" "){for(s=0;r=e[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=Z(i),o!==a&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,o,r,s,a,l=0;if(_t(t))return this.each(function(e){xt(this).removeClass(t.call(this,e,J(this)))});if(!arguments.length)return this.attr("class","");if(e=tt(t),e.length)for(;n=this[l++];)if(o=J(n),i=1===n.nodeType&&" "+Z(o)+" "){for(s=0;r=e[s++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");a=Z(i),o!==a&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):_t(t)?this.each(function(n){xt(this).toggleClass(t.call(this,n,J(this),e),e)}):this.each(function(){var e,o,r,s;if(i)for(o=0,r=xt(this),s=tt(t);e=s[o++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==n||(e=J(this),e&&$t.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":$t.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+Z(J(n))+" ").indexOf(e)>-1)return!0;return!1}});var Ie=/\r/g;xt.fn.extend({val:function(t){var e,n,i,o=this[0];{if(arguments.length)return i=_t(t),this.each(function(n){var o;1===this.nodeType&&(o=i?t.call(this,n,xt(this).val()):t,null==o?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=xt.map(o,function(t){return null==t?"":t+""})),(e=xt.valHooks[this.type]||xt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))});if(o)return(e=xt.valHooks[o.type]||xt.valHooks[o.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(Ie,""):null==n?"":n)}}}),xt.extend({valHooks:{option:{get:function(t){var e=xt.find.attr(t,"value");return null!=e?e:Z(xt.text(t))}},select:{get:function(t){var e,n,i,o=t.options,s=t.selectedIndex,a="select-one"===t.type,l=a?null:[],c=a?s+1:o.length;for(i=s<0?c:a?s:0;i<c;i++)if(n=o[i],(n.selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!r(n.parentNode,"optgroup"))){if(e=xt(n).val(),a)return e;l.push(e)}return l},set:function(t,e){for(var n,i,o=t.options,r=xt.makeArray(e),s=o.length;s--;)i=o[s],(i.selected=xt.inArray(xt.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(t.selectedIndex=-1),r}}}}),xt.each(["radio","checkbox"],function(){xt.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=xt.inArray(xt(t).val(),e)>-1}},bt.checkOn||(xt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),bt.focusin="onfocusin"in t;var Oe=/^(?:focusinfocus|focusoutblur)$/,Me=function(t){t.stopPropagation()};xt.extend(xt.event,{trigger:function(e,n,i,o){var r,s,a,l,c,u,h,d,p=[i||lt],f=mt.call(e,"type")?e.type:e,g=mt.call(e,"namespace")?e.namespace.split("."):[];if(s=d=a=i=i||lt,3!==i.nodeType&&8!==i.nodeType&&!Oe.test(f+xt.event.triggered)&&(f.indexOf(".")>-1&&(g=f.split("."),f=g.shift(),g.sort()),c=f.indexOf(":")<0&&"on"+f,e=e[xt.expando]?e:new xt.Event(f,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:xt.makeArray(n,[e]),h=xt.event.special[f]||{},o||!h.trigger||!1!==h.trigger.apply(i,n))){if(!o&&!h.noBubble&&!wt(i)){for(l=h.delegateType||f,Oe.test(l+f)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(i.ownerDocument||lt)&&p.push(a.defaultView||a.parentWindow||t)}for(r=0;(s=p[r++])&&!e.isPropagationStopped();)d=s,e.type=r>1?l:h.bindType||f,u=($t.get(s,"events")||{})[e.type]&&$t.get(s,"handle"),u&&u.apply(s,n),(u=c&&s[c])&&u.apply&&Ut(s)&&(e.result=u.apply(s,n),!1===e.result&&e.preventDefault());return e.type=f,o||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),n)||!Ut(i)||c&&_t(i[f])&&!wt(i)&&(a=i[c],a&&(i[c]=null),xt.event.triggered=f,e.isPropagationStopped()&&d.addEventListener(f,Me),i[f](),e.isPropagationStopped()&&d.removeEventListener(f,Me),xt.event.triggered=void 0,a&&(i[c]=a)),e.result}},simulate:function(t,e,n){var i=xt.extend(new xt.Event,n,{type:t,isSimulated:!0});xt.event.trigger(i,null,e)}}),xt.fn.extend({trigger:function(t,e){return this.each(function(){xt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return xt.event.trigger(t,e,n,!0)}}),bt.focusin||xt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){xt.event.simulate(e,t.target,xt.event.fix(t))};xt.event.special[e]={setup:function(){var i=this.ownerDocument||this,o=$t.access(i,e);o||i.addEventListener(t,n,!0),$t.access(i,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=$t.access(i,e)-1;o?$t.access(i,e,o):(i.removeEventListener(t,n,!0),$t.remove(i,e))}}});var De=t.location,Le=Date.now(),je=/\?/;xt.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||xt.error("Invalid XML: "+e),n};var Re=/\[\]$/,Be=/\r?\n/g,Fe=/^(?:submit|button|image|reset|file)$/i,Ne=/^(?:input|select|textarea|keygen)/i;xt.param=function(t,e){var n,i=[],o=function(t,e){var n=_t(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!xt.isPlainObject(t))xt.each(t,function(){o(this.name,this.value)});else for(n in t)et(n,t[n],e,o);return i.join("&")},xt.fn.extend({serialize:function(){return xt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=xt.prop(this,"elements");return t?xt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!xt(this).is(":disabled")&&Ne.test(this.nodeName)&&!Fe.test(t)&&(this.checked||!te.test(t))}).map(function(t,e){var n=xt(this).val();return null==n?null:Array.isArray(n)?xt.map(n,function(t){return{name:e.name,value:t.replace(Be,"\r\n")}}):{name:e.name,value:n.replace(Be,"\r\n")}}).get()}});var Ue=/%20/g,$e=/#.*$/,qe=/([?&])_=[^&]*/,He=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ve=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ze=/^(?:GET|HEAD)$/,We=/^\/\//,Ye={},Ge={},Qe="*/".concat("*"),Ke=lt.createElement("a");Ke.href=De.href,xt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:De.href,type:"GET",isLocal:Ve.test(De.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Qe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":xt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?ot(ot(t,xt.ajaxSettings),e):ot(xt.ajaxSettings,t)},ajaxPrefilter:nt(Ye),ajaxTransport:nt(Ge),ajax:function(e,n){function i(e,n,i,a){var c,d,p,_,w,C=n;u||(u=!0,l&&t.clearTimeout(l),o=void 0,s=a||"",x.readyState=e>0?4:0,c=e>=200&&e<300||304===e,i&&(_=rt(f,x,i)),_=st(f,_,x,c),c?(f.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(xt.lastModified[r]=w),(w=x.getResponseHeader("etag"))&&(xt.etag[r]=w)),204===e||"HEAD"===f.type?C="nocontent":304===e?C="notmodified":(C=_.state,d=_.data,p=_.error,c=!p)):(p=C,!e&&C||(C="error",e<0&&(e=0))),x.status=e,x.statusText=(n||C)+"",c?v.resolveWith(g,[d,C,x]):v.rejectWith(g,[x,C,p]),x.statusCode(b),b=void 0,h&&m.trigger(c?"ajaxSuccess":"ajaxError",[x,f,c?d:p]),y.fireWith(g,[x,C]),h&&(m.trigger("ajaxComplete",[x,f]),--xt.active||xt.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=void 0),n=n||{};var o,r,s,a,l,c,u,h,d,p,f=xt.ajaxSetup({},n),g=f.context||f,m=f.context&&(g.nodeType||g.jquery)?xt(g):xt.event,v=xt.Deferred(),y=xt.Callbacks("once memory"),b=f.statusCode||{},_={},w={},C="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(u){if(!a)for(a={};e=He.exec(s);)a[e[1].toLowerCase()+" "]=(a[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=a[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return u?s:null},setRequestHeader:function(t,e){return null==u&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,_[t]=e),this},overrideMimeType:function(t){return null==u&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)x.always(t[x.status]);else for(e in t)b[e]=[b[e],t[e]];return this},abort:function(t){var e=t||C;return o&&o.abort(e),i(0,e),this}};if(v.promise(x),f.url=((e||f.url||De.href)+"").replace(We,De.protocol+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(Lt)||[""],null==f.crossDomain){c=lt.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Ke.protocol+"//"+Ke.host!=c.protocol+"//"+c.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=xt.param(f.data,f.traditional)),it(Ye,f,n,x),u)return x;h=xt.event&&f.global,
h&&0==xt.active++&&xt.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!ze.test(f.type),r=f.url.replace($e,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Ue,"+")):(p=f.url.slice(r.length),f.data&&(f.processData||"string"==typeof f.data)&&(r+=(je.test(r)?"&":"?")+f.data,delete f.data),!1===f.cache&&(r=r.replace(qe,"$1"),p=(je.test(r)?"&":"?")+"_="+Le+++p),f.url=r+p),f.ifModified&&(xt.lastModified[r]&&x.setRequestHeader("If-Modified-Since",xt.lastModified[r]),xt.etag[r]&&x.setRequestHeader("If-None-Match",xt.etag[r])),(f.data&&f.hasContent&&!1!==f.contentType||n.contentType)&&x.setRequestHeader("Content-Type",f.contentType),x.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Qe+"; q=0.01":""):f.accepts["*"]);for(d in f.headers)x.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(g,x,f)||u))return x.abort();if(C="abort",y.add(f.complete),x.done(f.success),x.fail(f.error),o=it(Ge,f,n,x)){if(x.readyState=1,h&&m.trigger("ajaxSend",[x,f]),u)return x;f.async&&f.timeout>0&&(l=t.setTimeout(function(){x.abort("timeout")},f.timeout));try{u=!1,o.send(_,i)}catch(t){if(u)throw t;i(-1,t)}}else i(-1,"No Transport");return x},getJSON:function(t,e,n){return xt.get(t,e,n,"json")},getScript:function(t,e){return xt.get(t,void 0,e,"script")}}),xt.each(["get","post"],function(t,e){xt[e]=function(t,n,i,o){return _t(n)&&(o=o||i,i=n,n=void 0),xt.ajax(xt.extend({url:t,type:e,dataType:o,data:n,success:i},xt.isPlainObject(t)&&t))}}),xt._evalUrl=function(t,e){return xt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){xt.globalEval(t,e)}})},xt.fn.extend({wrapAll:function(t){var e;return this[0]&&(_t(t)&&(t=t.call(this[0])),e=xt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return _t(t)?this.each(function(e){xt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=xt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=_t(t);return this.each(function(n){xt(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){xt(this).replaceWith(this.childNodes)}),this}}),xt.expr.pseudos.hidden=function(t){return!xt.expr.pseudos.visible(t)},xt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},xt.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var Xe={0:200,1223:204},Ze=xt.ajaxSettings.xhr();bt.cors=!!Ze&&"withCredentials"in Ze,bt.ajax=Ze=!!Ze,xt.ajaxTransport(function(e){var n,i;if(bt.cors||Ze&&!e.crossDomain)return{send:function(o,r){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(s in o)a.setRequestHeader(s,o[s]);n=function(t){return function(){n&&(n=i=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(Xe[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),i=a.onerror=a.ontimeout=n("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout(function(){n&&i()})},n=n("abort");try{a.send(e.hasContent&&e.data||null)}catch(t){if(n)throw t}},abort:function(){n&&n()}}}),xt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),xt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return xt.globalEval(t),t}}}),xt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),xt.ajaxTransport("script",function(t){if(t.crossDomain||t.scriptAttrs){var e,n;return{send:function(i,o){e=xt("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&o("error"===t.type?404:200,t.type)}),lt.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Je=[],tn=/(=)\?(?=&|$)|\?\?/;xt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Je.pop()||xt.expando+"_"+Le++;return this[t]=!0,t}}),xt.ajaxPrefilter("json jsonp",function(e,n,i){var o,r,s,a=!1!==e.jsonp&&(tn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&tn.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=_t(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(tn,"$1"+o):!1!==e.jsonp&&(e.url+=(je.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return s||xt.error(o+" was not called"),s[0]},e.dataTypes[0]="json",r=t[o],t[o]=function(){s=arguments},i.always(function(){void 0===r?xt(t).removeProp(o):t[o]=r,e[o]&&(e.jsonpCallback=n.jsonpCallback,Je.push(o)),s&&_t(r)&&r(s[0]),s=r=void 0}),"script"}),bt.createHTMLDocument=function(){var t=lt.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),xt.parseHTML=function(t,e,n){if("string"!=typeof t)return[];"boolean"==typeof e&&(n=e,e=!1);var i,o,r;return e||(bt.createHTMLDocument?(e=lt.implementation.createHTMLDocument(""),i=e.createElement("base"),i.href=lt.location.href,e.head.appendChild(i)):e=lt),o=At.exec(t),r=!n&&[],o?[e.createElement(o[1])]:(o=x([t],e,r),r&&r.length&&xt(r).remove(),xt.merge([],o.childNodes))},xt.fn.load=function(t,e,n){var i,o,r,s=this,a=t.indexOf(" ");return a>-1&&(i=Z(t.slice(a)),t=t.slice(0,a)),_t(e)?(n=e,e=void 0):e&&"object"==typeof e&&(o="POST"),s.length>0&&xt.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done(function(t){r=arguments,s.html(i?xt("<div>").append(xt.parseHTML(t)).find(i):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,r||[t.responseText,e,t])})}),this},xt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){xt.fn[e]=function(t){return this.on(e,t)}}),xt.expr.pseudos.animated=function(t){return xt.grep(xt.timers,function(e){return t===e.elem}).length},xt.offset={setOffset:function(t,e,n){var i,o,r,s,a,l,c,u=xt.css(t,"position"),h=xt(t),d={};"static"===u&&(t.style.position="relative"),a=h.offset(),r=xt.css(t,"top"),l=xt.css(t,"left"),c=("absolute"===u||"fixed"===u)&&(r+l).indexOf("auto")>-1,c?(i=h.position(),s=i.top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),_t(e)&&(e=e.call(t,n,xt.extend({},a))),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+o),"using"in e?e.using.call(t,d):h.css(d)}},xt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){xt.offset.setOffset(this,t,e)});var e,n,i=this[0];if(i)return i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var t,e,n,i=this[0],o={top:0,left:0};if("fixed"===xt.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===xt.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&(o=xt(t).offset(),o.top+=xt.css(t,"borderTopWidth",!0),o.left+=xt.css(t,"borderLeftWidth",!0))}return{top:e.top-o.top-xt.css(i,"marginTop",!0),left:e.left-o.left-xt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===xt.css(t,"position");)t=t.offsetParent;return t||Gt})}}),xt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;xt.fn[t]=function(i){return Bt(this,function(t,i,o){var r;if(wt(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===o)return r?r[e]:t[i];r?r.scrollTo(n?r.pageXOffset:o,n?o:r.pageYOffset):t[i]=o},t,i,arguments.length)}}),xt.each(["top","left"],function(t,e){xt.cssHooks[e]=F(bt.pixelPosition,function(t,n){if(n)return n=B(t,e),de.test(n)?xt(t).position()[e]+"px":n})}),xt.each({Height:"height",Width:"width"},function(t,e){xt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){xt.fn[i]=function(o,r){var s=arguments.length&&(n||"boolean"!=typeof o),a=n||(!0===o||!0===r?"margin":"border");return Bt(this,function(e,n,o){var r;return wt(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===o?xt.css(e,n,a):xt.style(e,n,o,a)},e,s?o:void 0,s)}})}),xt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){xt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),xt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),xt.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),xt.proxy=function(t,e){var n,i,o;if("string"==typeof e&&(n=t[e],e=t,t=n),_t(t))return i=ut.call(arguments,2),o=function(){return t.apply(e||this,i.concat(ut.call(arguments)))},o.guid=t.guid=t.guid||xt.guid++,o},xt.holdReady=function(t){t?xt.readyWait++:xt.ready(!0)},xt.isArray=Array.isArray,xt.parseJSON=JSON.parse,xt.nodeName=r,xt.isFunction=_t,xt.isWindow=wt,xt.camelCase=f,xt.type=i,xt.now=Date.now,xt.isNumeric=function(t){var e=xt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return xt});var en=t.jQuery,nn=t.$;return xt.noConflict=function(e){return t.$===xt&&(t.$=nn),e&&t.jQuery===xt&&(t.jQuery=en),xt},e||(t.jQuery=t.$=xt),xt}),function(t){"function"==typeof define&&define.amd?define("jquery-ui",["jquery"],t):t(jQuery)}(function(t){function e(t){for(var e=t.css("visibility");"inherit"===e;)t=t.parent(),e=t.css("visibility");return"hidden"!==e}function n(t){for(var e,n;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(n=parseInt(t.css("zIndex"),10),!isNaN(n)&&0!==n))return n;t=t.parent()}return 0}function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=o(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function o(e){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",n,function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",n,r)}function r(){t.datepicker._isDisabledDatepicker(p.inline?p.dpDiv.parent()[0]:p.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function s(e,n){t.extend(e,n);for(var i in n)null==n[i]&&(e[i]=n[i]);return e}function a(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.ui=t.ui||{};var l=(t.ui.version="1.12.1",0),c=Array.prototype.slice;t.cleanData=function(e){return function(n){var i,o,r;for(r=0;null!=(o=n[r]);r++)try{i=t._data(o,"events"),i&&i.remove&&t(o).triggerHandler("remove")}catch(t){}e(n)}}(t.cleanData),t.widget=function(e,n,i){var o,r,s,a={},l=e.split(".")[0];e=e.split(".")[1];var c=l+"-"+e;return i||(i=n,n=t.Widget),t.isArray(i)&&(i=t.extend.apply(null,[{}].concat(i))),t.expr[":"][c.toLowerCase()]=function(e){return!!t.data(e,c)},t[l]=t[l]||{},o=t[l][e],r=t[l][e]=function(t,e){if(!this._createWidget)return new r(t,e);arguments.length&&this._createWidget(t,e)},t.extend(r,o,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),s=new n,s.options=t.widget.extend({},s.options),t.each(i,function(e,i){if(!t.isFunction(i))return void(a[e]=i);a[e]=function(){function t(){return n.prototype[e].apply(this,arguments)}function o(t){return n.prototype[e].apply(this,t)}return function(){var e,n=this._super,r=this._superApply;return this._super=t,this._superApply=o,e=i.apply(this,arguments),this._super=n,this._superApply=r,e}}()}),r.prototype=t.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||e:e},a,{constructor:r,namespace:l,widgetName:e,widgetFullName:c}),o?(t.each(o._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,r,n._proto)}),delete o._childConstructors):n._childConstructors.push(r),t.widget.bridge(e,r),r},t.widget.extend=function(e){for(var n,i,o=c.call(arguments,1),r=0,s=o.length;r<s;r++)for(n in o[r])i=o[r][n],o[r].hasOwnProperty(n)&&void 0!==i&&(t.isPlainObject(i)?e[n]=t.isPlainObject(e[n])?t.widget.extend({},e[n],i):t.widget.extend({},i):e[n]=i);return e},t.widget.bridge=function(e,n){var i=n.prototype.widgetFullName||e;t.fn[e]=function(o){var r="string"==typeof o,s=c.call(arguments,1),a=this;return r?this.length||"instance"!==o?this.each(function(){var n,r=t.data(this,i);return"instance"===o?(a=r,!1):r?t.isFunction(r[o])&&"_"!==o.charAt(0)?(n=r[o].apply(r,s),n!==r&&void 0!==n?(a=n&&n.jquery?a.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}):a=void 0:(s.length&&(o=t.widget.extend.apply(null,[o].concat(s))),this.each(function(){var e=t.data(this,i);e?(e.option(o||{}),e._init&&e._init()):t.data(this,i,new n(o,this))})),a}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,n){e._removeClass(n,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var i,o,r,s=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(s={},i=e.split("."),e=i.shift(),i.length){for(o=s[e]=t.widget.extend({},this.options[e]),r=0;r<i.length-1;r++)o[i[r]]=o[i[r]]||{},o=o[i[r]];if(e=i.pop(),1===arguments.length)return void 0===o[e]?null:o[e];o[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];s[e]=n}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var n,i,o;for(n in e)o=this.classesElementLookup[n],e[n]!==this.options.classes[n]&&o&&o.length&&(i=t(o.get()),this._removeClass(o,n),i.addClass(this._classes({element:i,keys:n,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function n(n,r){var s,a;for(a=0;a<n.length;a++)s=o.classesElementLookup[n[a]]||t(),s=t(e.add?t.unique(s.get().concat(e.element.get())):s.not(e.element).get()),o.classesElementLookup[n[a]]=s,i.push(n[a]),r&&e.classes[n[a]]&&i.push(e.classes[n[a]])}var i=[],o=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&n(e.keys.match(/\S+/g)||[],!0),e.extra&&n(e.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(e){var n=this;t.each(n.classesElementLookup,function(i,o){-1!==t.inArray(e.target,o)&&(n.classesElementLookup[i]=t(o.not(e.target).get()))})},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,!1)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,!0)},_toggleClass:function(t,e,n,i){i="boolean"==typeof i?i:n;var o="string"==typeof t||null===t,r={extra:o?e:n,keys:o?t:e,element:o?this.element:t,add:i};return r.element.toggleClass(this._classes(r),i),this},_on:function(e,n,i){var o,r=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=o=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),t.each(i,function(i,s){function a(){if(e||!0!==r.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof s?r[s]:s).apply(r,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||t.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?o.on(c,u,a):n.on(c,a)})},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(n).off(n),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,n,i){var o,r,s=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(o in r)o in n||(n[o]=r[o]);return this.element.trigger(n,i),!(t.isFunction(s)&&!1===s.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?!0===o||"number"==typeof o?n:o.effect||n:e;o=o||{},"number"==typeof o&&(o={duration:o}),s=!t.isEmptyObject(o),o.complete=r,o.delay&&i.delay(o.delay),s&&t.effects&&t.effects.effect[a]?i[e](o):a!==e&&i[a]?i[a](o.duration,o.easing,r):i.queue(function(n){t(this)[e](),r&&r.call(i[0]),n()})}});t.widget;!function(){function e(t,e,n){return[parseFloat(t[0])*(h.test(t[0])?e/100:1),parseFloat(t[1])*(h.test(t[1])?n/100:1)]}function n(e,n){return parseInt(t.css(e,n),10)||0}function i(e){var n=e[0];return 9===n.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(n)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}var o,r=Math.max,s=Math.abs,a=/left|center|right/,l=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,h=/%$/,d=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==o)return o;var e,n,i=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=i.children()[0];return t("body").append(i),e=r.offsetWidth,i.css("overflow","scroll"),n=r.offsetWidth,e===n&&(n=i[0].clientWidth),i.remove(),o=e-n},getScrollInfo:function(e){var n=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),o="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:o?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=t.isWindow(n[0]),o=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:o,offset:i||o?{left:0,top:0}:t(e).offset(),scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},t.fn.position=function(o){if(!o||!o.of)return d.apply(this,arguments);o=t.extend({},o);var h,p,f,g,m,v,y=t(o.of),b=t.position.getWithinInfo(o.within),_=t.position.getScrollInfo(b),w=(o.collision||"flip").split(" "),C={};return v=i(y),y[0].preventDefault&&(o.at="left top"),p=v.width,f=v.height,g=v.offset,m=t.extend({},g),t.each(["my","at"],function(){var t,e,n=(o[this]||"").split(" ");1===n.length&&(n=a.test(n[0])?n.concat(["center"]):l.test(n[0])?["center"].concat(n):["center","center"]),n[0]=a.test(n[0])?n[0]:"center",n[1]=l.test(n[1])?n[1]:"center",t=c.exec(n[0]),e=c.exec(n[1]),C[this]=[t?t[0]:0,e?e[0]:0],o[this]=[u.exec(n[0])[0],u.exec(n[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===o.at[0]?m.left+=p:"center"===o.at[0]&&(m.left+=p/2),"bottom"===o.at[1]?m.top+=f:"center"===o.at[1]&&(m.top+=f/2),h=e(C.at,p,f),m.left+=h[0],m.top+=h[1],this.each(function(){var i,a,l=t(this),c=l.outerWidth(),u=l.outerHeight(),d=n(this,"marginLeft"),v=n(this,"marginTop"),x=c+d+n(this,"marginRight")+_.width,T=u+v+n(this,"marginBottom")+_.height,k=t.extend({},m),S=e(C.my,l.outerWidth(),l.outerHeight());"right"===o.my[0]?k.left-=c:"center"===o.my[0]&&(k.left-=c/2),"bottom"===o.my[1]?k.top-=u:"center"===o.my[1]&&(k.top-=u/2),k.left+=S[0],k.top+=S[1],i={marginLeft:d,marginTop:v},t.each(["left","top"],function(e,n){t.ui.position[w[e]]&&t.ui.position[w[e]][n](k,{targetWidth:p,targetHeight:f,elemWidth:c,elemHeight:u,collisionPosition:i,collisionWidth:x,collisionHeight:T,offset:[h[0]+S[0],h[1]+S[1]],my:o.my,at:o.at,within:b,elem:l})}),o.using&&(a=function(t){var e=g.left-k.left,n=e+p-c,i=g.top-k.top,a=i+f-u,h={target:{element:y,left:g.left,top:g.top,width:p,height:f},element:{element:l,left:k.left,top:k.top,width:c,height:u},horizontal:n<0?"left":e>0?"right":"center",vertical:a<0?"top":i>0?"bottom":"middle"};p<c&&s(e+n)<p&&(h.horizontal="center"),f<u&&s(i+a)<f&&(h.vertical="middle"),r(s(e),s(n))>r(s(i),s(a))?h.important="horizontal":h.important="vertical",o.using.call(this,t,h)}),l.offset(t.extend(k,{using:a}))})},t.ui.position={fit:{left:function(t,e){var n,i=e.within,o=i.isWindow?i.scrollLeft:i.offset.left,s=i.width,a=t.left-e.collisionPosition.marginLeft,l=o-a,c=a+e.collisionWidth-s-o;e.collisionWidth>s?l>0&&c<=0?(n=t.left+l+e.collisionWidth-s-o,t.left+=l-n):t.left=c>0&&l<=0?o:l>c?o+s-e.collisionWidth:o:l>0?t.left+=l:c>0?t.left-=c:t.left=r(t.left-a,t.left)},top:function(t,e){var n,i=e.within,o=i.isWindow?i.scrollTop:i.offset.top,s=e.within.height,a=t.top-e.collisionPosition.marginTop,l=o-a,c=a+e.collisionHeight-s-o;e.collisionHeight>s?l>0&&c<=0?(n=t.top+l+e.collisionHeight-s-o,t.top+=l-n):t.top=c>0&&l<=0?o:l>c?o+s-e.collisionHeight:o:l>0?t.top+=l:c>0?t.top-=c:t.top=r(t.top-a,t.top)}},flip:{left:function(t,e){var n,i,o=e.within,r=o.offset.left+o.scrollLeft,a=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=t.left-e.collisionPosition.marginLeft,u=c-l,h=c+e.collisionWidth-a-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];u<0?((n=t.left+d+p+f+e.collisionWidth-a-r)<0||n<s(u))&&(t.left+=d+p+f):h>0&&((i=t.left-e.collisionPosition.marginLeft+d+p+f-l)>0||s(i)<h)&&(t.left+=d+p+f)},top:function(t,e){var n,i,o=e.within,r=o.offset.top+o.scrollTop,a=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=t.top-e.collisionPosition.marginTop,u=c-l,h=c+e.collisionHeight-a-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];u<0?((i=t.top+p+f+g+e.collisionHeight-a-r)<0||i<s(u))&&(t.top+=p+f+g):h>0&&((n=t.top-e.collisionPosition.marginTop+p+f+g-l)>0||s(n)<h)&&(t.top+=p+f+g)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}();var u=(t.ui.position,t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])}}),t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),"ui-effects-animated"),h=t;t.effects={effect:{}},function(t,e){function n(t,e,n){var i=u[e.type]||{};return null==t?n||!e.def?null:e.def:(t=i.floor?~~t:parseFloat(t),isNaN(t)?e.def:i.mod?(t+i.mod)%i.mod:0>t?0:i.max<t?i.max:t)}function i(e){var n=l(),i=n._rgba=[];return e=e.toLowerCase(),p(a,function(t,o){var r,s=o.re.exec(e),a=s&&o.parse(s),l=o.space||"rgba";if(a)return r=n[l](a),n[c[l].cache]=r[c[l].cache],i=n._rgba=r._rgba,!1}),i.length?("0,0,0,0"===i.join()&&t.extend(i,r.transparent),n):r[e]}function o(t,e,n){return n=(n+1)%1,6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}var r,s=/^([\-+])=\s*(\d+\.?\d*)/,a=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,n,i,o){return new t.Color.fn.parse(e,n,i,o)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=l.support={},d=t("<p>")[0],p=t.each;d.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=d.style.backgroundColor.indexOf("rgba")>-1,p(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),l.fn=t.extend(l.prototype,{parse:function(e,o,s,a){if(void 0===e)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=t(e).css(o),o=void 0);var u=this,h=t.type(e),d=this._rgba=[];return void 0!==o&&(e=[e,o,s,a],h="array"),"string"===h?this.parse(i(e)||r._default):"array"===h?(p(c.rgba.props,function(t,i){d[i.idx]=n(e[i.idx],i)}),this):"object"===h?(e instanceof l?p(c,function(t,n){e[n.cache]&&(u[n.cache]=e[n.cache].slice())}):p(c,function(i,o){var r=o.cache;p(o.props,function(t,i){if(!u[r]&&o.to){if("alpha"===t||null==e[t])return;u[r]=o.to(u._rgba)}u[r][i.idx]=n(e[t],i,!0)}),u[r]&&t.inArray(null,u[r].slice(0,3))<0&&(u[r][3]=1,o.from&&(u._rgba=o.from(u[r])))}),this):void 0},is:function(t){var e=l(t),n=!0,i=this;return p(c,function(t,o){var r,s=e[o.cache];return s&&(r=i[o.cache]||o.to&&o.to(i._rgba)||[],p(o.props,function(t,e){if(null!=s[e.idx])return n=s[e.idx]===r[e.idx]})),n}),n},_space:function(){var t=[],e=this;return p(c,function(n,i){e[i.cache]&&t.push(n)}),t.pop()},transition:function(t,e){var i=l(t),o=i._space(),r=c[o],s=0===this.alpha()?l("transparent"):this,a=s[r.cache]||r.to(s._rgba),h=a.slice();return i=i[r.cache],p(r.props,function(t,o){var r=o.idx,s=a[r],l=i[r],c=u[o.type]||{};null!==l&&(null===s?h[r]=l:(c.mod&&(l-s>c.mod/2?s+=c.mod:s-l>c.mod/2&&(s-=c.mod)),h[r]=n((l-s)*e+s,o)))}),this[o](h)},blend:function(e){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),o=l(e)._rgba;return l(t.map(n,function(t,e){return(1-i)*o[e]+i*t}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===n[3]&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===n[3]&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),i=n.pop();return e&&n.push(~~(255*i)),
"#"+t.map(n,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,n,i=t[0]/255,o=t[1]/255,r=t[2]/255,s=t[3],a=Math.max(i,o,r),l=Math.min(i,o,r),c=a-l,u=a+l,h=.5*u;return e=l===a?0:i===a?60*(o-r)/c+360:o===a?60*(r-i)/c+120:60*(i-o)/c+240,n=0===c?0:h<=.5?c/u:c/(2-u),[Math.round(e)%360,n,h,null==s?1:s]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,n=t[1],i=t[2],r=t[3],s=i<=.5?i*(1+n):i+n-i*n,a=2*i-s;return[Math.round(255*o(a,s,e+1/3)),Math.round(255*o(a,s,e)),Math.round(255*o(a,s,e-1/3)),r]},p(c,function(e,i){var o=i.props,r=i.cache,a=i.to,c=i.from;l.fn[e]=function(e){if(a&&!this[r]&&(this[r]=a(this._rgba)),void 0===e)return this[r].slice();var i,s=t.type(e),u="array"===s||"object"===s?e:arguments,h=this[r].slice();return p(o,function(t,e){var i=u["object"===s?t:e.idx];null==i&&(i=h[e.idx]),h[e.idx]=n(i,e)}),c?(i=l(c(h)),i[r]=h,i):l(h)},p(o,function(n,i){l.fn[n]||(l.fn[n]=function(o){var r,a=t.type(o),l="alpha"===n?this._hsla?"hsla":"rgba":e,c=this[l](),u=c[i.idx];return"undefined"===a?u:("function"===a&&(o=o.call(this,u),a=t.type(o)),null==o&&i.empty?this:("string"===a&&(r=s.exec(o))&&(o=u+parseFloat(r[2])*("+"===r[1]?1:-1)),c[i.idx]=o,this[l](c)))})})}),l.hook=function(e){var n=e.split(" ");p(n,function(e,n){t.cssHooks[n]={set:function(e,o){var r,s,a="";if("transparent"!==o&&("string"!==t.type(o)||(r=i(o)))){if(o=l(r||o),!h.rgba&&1!==o._rgba[3]){for(s="backgroundColor"===n?e.parentNode:e;(""===a||"transparent"===a)&&s&&s.style;)try{a=t.css(s,"backgroundColor"),s=s.parentNode}catch(t){}o=o.blend(a&&"transparent"!==a?a:"_default")}o=o.toRgbaString()}try{e.style[n]=o}catch(t){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=l(e.elem,n),e.end=l(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}})},l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),t.cssHooks.borderColor={expand:function(t){var e={};return p(["Top","Right","Bottom","Left"],function(n,i){e["border"+i+"Color"]=t}),e}},r=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(h),function(){function e(e){var n,i,o=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,r={};if(o&&o.length&&o[0]&&o[o[0]])for(i=o.length;i--;)n=o[i],"string"==typeof o[n]&&(r[t.camelCase(n)]=o[n]);else for(n in o)"string"==typeof o[n]&&(r[n]=o[n]);return r}function n(e,n){var i,r,s={};for(i in n)r=n[i],e[i]!==r&&(o[i]||!t.fx.step[i]&&isNaN(parseFloat(r))||(s[i]=r));return s}var i=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,n){t.fx.step[n]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(h.style(t.elem,n,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(o,r,s,a){var l=t.speed(r,s,a);return this.queue(function(){var r,s=t(this),a=s.attr("class")||"",c=l.children?s.find("*").addBack():s;c=c.map(function(){return{el:t(this),start:e(this)}}),r=function(){t.each(i,function(t,e){o[e]&&s[e+"Class"](o[e])})},r(),c=c.map(function(){return this.end=e(this.el[0]),this.diff=n(this.start,this.end),this}),s.attr("class",a),c=c.map(function(){var e=this,n=t.Deferred(),i=t.extend({},l,{queue:!1,complete:function(){n.resolve(e)}});return this.el.animate(this.diff,i),n.promise()}),t.when.apply(t,c.get()).done(function(){r(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(s[0])})})},t.fn.extend({addClass:function(e){return function(n,i,o,r){return i?t.effects.animateClass.call(this,{add:n},i,o,r):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(n,i,o,r){return arguments.length>1?t.effects.animateClass.call(this,{remove:n},i,o,r):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(n,i,o,r,s){return"boolean"==typeof i||void 0===i?o?t.effects.animateClass.call(this,i?{add:n}:{remove:n},o,r,s):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:n},i,o,r)}}(t.fn.toggleClass),switchClass:function(e,n,i,o,r){return t.effects.animateClass.call(this,{add:n,remove:e},i,o,r)}})}(),function(){function e(e,n,i,o){return t.isPlainObject(e)&&(n=e,e=e.effect),e={effect:e},null==n&&(n={}),t.isFunction(n)&&(o=n,i=null,n={}),("number"==typeof n||t.fx.speeds[n])&&(o=i,i=n,n={}),t.isFunction(i)&&(o=i,i=null),n&&t.extend(e,n),i=i||n.duration,e.duration=t.fx.off?0:"number"==typeof i?i:i in t.fx.speeds?t.fx.speeds[i]:t.fx.speeds._default,e.complete=o||n.complete,e}function n(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||("string"==typeof e&&!t.effects.effect[e]||(!!t.isFunction(e)||"object"==typeof e&&!e.effect))}function i(t,e){var n=e.outerWidth(),i=e.outerHeight(),o=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,r=o.exec(t)||["",0,n,i,0];return{top:parseFloat(r[1])||0,right:"auto"===r[2]?n:parseFloat(r[2]),bottom:"auto"===r[3]?i:parseFloat(r[3]),left:parseFloat(r[4])||0}}t.expr&&t.expr.filters&&t.expr.filters.animated&&(t.expr.filters.animated=function(e){return function(n){return!!t(n).data(u)||e(n)}}(t.expr.filters.animated)),!1!==t.uiBackCompat&&t.extend(t.effects,{save:function(t,e){for(var n=0,i=e.length;n<i;n++)null!==e[n]&&t.data("ui-effects-"+e[n],t[0].style[e[n]])},restore:function(t,e){for(var n,i=0,o=e.length;i<o;i++)null!==e[i]&&(n=t.data("ui-effects-"+e[i]),t.css(e[i],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var n={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},i=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:e.width(),height:e.height()},r=document.activeElement;try{r.id}catch(t){r=document.body}return e.wrap(i),(e[0]===r||t.contains(e[0],r))&&t(r).trigger("focus"),i=e.parent(),"static"===e.css("position")?(i.css({position:"relative"}),e.css({position:"relative"})):(t.extend(n,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,i){n[i]=e.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(o),i.css(n).show()},removeWrapper:function(e){var n=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===n||t.contains(e[0],n))&&t(n).trigger("focus")),e}}),t.extend(t.effects,{version:"1.12.1",define:function(e,n,i){return i||(i=n,n="effect"),t.effects.effect[e]=i,t.effects.effect[e].mode=n,i},scaledDimensions:function(t,e,n){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var i="horizontal"!==n?(e||100)/100:1,o="vertical"!==n?(e||100)/100:1;return{height:t.height()*o,width:t.width()*i,outerHeight:t.outerHeight()*o,outerWidth:t.outerWidth()*i}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,n){var i=t.queue();e>1&&i.splice.apply(i,[1,0].concat(i.splice(e,n))),t.dequeue()},saveStyle:function(t){t.data("ui-effects-style",t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data("ui-effects-style")||"",t.removeData("ui-effects-style")},mode:function(t,e){var n=t.is(":hidden");return"toggle"===e&&(e=n?"show":"hide"),(n?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var n,i;switch(t[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=t[0]/e.height}switch(t[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=t[1]/e.width}return{x:i,y:n}},createPlaceholder:function(e){var n,i=e.css("position"),o=e.position();return e.css({marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),/^(static|relative)/.test(i)&&(i="absolute",n=t("<"+e[0].nodeName+">").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight"),float:e.css("float")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass("ui-effects-placeholder"),e.data("ui-effects-placeholder",n)),e.css({position:i,left:o.left,top:o.top}),n},removePlaceholder:function(t){var e="ui-effects-placeholder",n=t.data(e);n&&(n.remove(),t.removeData(e))},cleanUp:function(e){t.effects.restoreStyle(e),t.effects.removePlaceholder(e)},setTransition:function(e,n,i,o){return o=o||{},t.each(n,function(t,n){var r=e.cssUnit(n);r[0]>0&&(o[n]=r[0]*i+r[1])}),o}}),t.fn.extend({effect:function(){function n(e){function n(){a.removeData(u),t.effects.cleanUp(a),"hide"===i.mode&&a.hide(),s()}function s(){t.isFunction(l)&&l.call(a[0]),t.isFunction(e)&&e()}var a=t(this);i.mode=h.shift(),!1===t.uiBackCompat||r?"none"===i.mode?(a[c](),s()):o.call(a[0],i,n):(a.is(":hidden")?"hide"===c:"show"===c)?(a[c](),s()):o.call(a[0],i,s)}var i=e.apply(this,arguments),o=t.effects.effect[i.effect],r=o.mode,s=i.queue,a=s||"fx",l=i.complete,c=i.mode,h=[],d=function(e){var n=t(this),i=t.effects.mode(n,c)||r;n.data(u,!0),h.push(i),r&&("show"===i||i===r&&"hide"===i)&&n.show(),r&&"none"===i||t.effects.saveStyle(n),t.isFunction(e)&&e()};return t.fx.off||!o?c?this[c](i.duration,l):this.each(function(){l&&l.call(this)}):!1===s?this.each(d).each(n):this.queue(a,d).queue(a,n)},show:function(t){return function(i){if(n(i))return t.apply(this,arguments);var o=e.apply(this,arguments);return o.mode="show",this.effect.call(this,o)}}(t.fn.show),hide:function(t){return function(i){if(n(i))return t.apply(this,arguments);var o=e.apply(this,arguments);return o.mode="hide",this.effect.call(this,o)}}(t.fn.hide),toggle:function(t){return function(i){if(n(i)||"boolean"==typeof i)return t.apply(this,arguments);var o=e.apply(this,arguments);return o.mode="toggle",this.effect.call(this,o)}}(t.fn.toggle),cssUnit:function(e){var n=this.css(e),i=[];return t.each(["em","px","%","pt"],function(t,e){n.indexOf(e)>0&&(i=[parseFloat(n),e])}),i},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):i(this.css("clip"),this)},transfer:function(e,n){var i=t(this),o=t(e.to),r="fixed"===o.css("position"),s=t("body"),a=r?s.scrollTop():0,l=r?s.scrollLeft():0,c=o.offset(),u={top:c.top-a,left:c.left-l,height:o.innerHeight(),width:o.innerWidth()},h=i.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(e.className).css({top:h.top-a,left:h.left-l,height:i.innerHeight(),width:i.innerWidth(),position:r?"fixed":"absolute"}).animate(u,e.duration,e.easing,function(){d.remove(),t.isFunction(n)&&n()})}}),t.fx.step.clip=function(e){e.clipInit||(e.start=t(e.elem).cssClip(),"string"==typeof e.end&&(e.end=i(e.end,e.elem)),e.clipInit=!0),t(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})}}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,n){e[n]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,n){t.easing["easeIn"+e]=n,t.easing["easeOut"+e]=function(t){return 1-n(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?n(2*t)/2:1-n(-2*t+2)/2}})}();t.effects,t.effects.define("blind","hide",function(e,n){var i={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},o=t(this),r=e.direction||"up",s=o.cssClip(),a={clip:t.extend({},s)},l=t.effects.createPlaceholder(o);a.clip[i[r][0]]=a.clip[i[r][1]],"show"===e.mode&&(o.cssClip(a.clip),l&&l.css(t.effects.clipToBox(a)),a.clip=s),l&&l.animate(t.effects.clipToBox(a),e.duration,e.easing),o.animate(a,{queue:!1,duration:e.duration,easing:e.easing,complete:n})}),t.effects.define("bounce",function(e,n){var i,o,r,s=t(this),a=e.mode,l="hide"===a,c="show"===a,u=e.direction||"up",h=e.distance,d=e.times||5,p=2*d+(c||l?1:0),f=e.duration/p,g=e.easing,m="up"===u||"down"===u?"top":"left",v="up"===u||"left"===u,y=0,b=s.queue().length;for(t.effects.createPlaceholder(s),r=s.css(m),h||(h=s["top"===m?"outerHeight":"outerWidth"]()/3),c&&(o={opacity:1},o[m]=r,s.css("opacity",0).css(m,v?2*-h:2*h).animate(o,f,g)),l&&(h/=Math.pow(2,d-1)),o={},o[m]=r;y<d;y++)i={},i[m]=(v?"-=":"+=")+h,s.animate(i,f,g).animate(o,f,g),h=l?2*h:h/2;l&&(i={opacity:0},i[m]=(v?"-=":"+=")+h,s.animate(i,f,g)),s.queue(n),t.effects.unshift(s,b,p+1)}),t.effects.define("clip","hide",function(e,n){var i,o={},r=t(this),s=e.direction||"vertical",a="both"===s,l=a||"horizontal"===s,c=a||"vertical"===s;i=r.cssClip(),o.clip={top:c?(i.bottom-i.top)/2:i.top,right:l?(i.right-i.left)/2:i.right,bottom:c?(i.bottom-i.top)/2:i.bottom,left:l?(i.right-i.left)/2:i.left},t.effects.createPlaceholder(r),"show"===e.mode&&(r.cssClip(o.clip),o.clip=i),r.animate(o,{queue:!1,duration:e.duration,easing:e.easing,complete:n})}),t.effects.define("drop","hide",function(e,n){var i,o=t(this),r=e.mode,s="show"===r,a=e.direction||"left",l="up"===a||"down"===a?"top":"left",c="up"===a||"left"===a?"-=":"+=",u="+="===c?"-=":"+=",h={opacity:0};t.effects.createPlaceholder(o),i=e.distance||o["top"===l?"outerHeight":"outerWidth"](!0)/2,h[l]=c+i,s&&(o.css(h),h[l]=u+i,h.opacity=1),o.animate(h,{queue:!1,duration:e.duration,easing:e.easing,complete:n})}),t.effects.define("explode","hide",function(e,n){function i(){b.push(this),b.length===h*d&&o()}function o(){p.css({visibility:"visible"}),t(b).remove(),n()}var r,s,a,l,c,u,h=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=h,p=t(this),f=e.mode,g="show"===f,m=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/d),y=Math.ceil(p.outerHeight()/h),b=[];for(r=0;r<h;r++)for(l=m.top+r*y,u=r-(h-1)/2,s=0;s<d;s++)a=m.left+s*v,c=s-(d-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-s*v,top:-r*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:a+(g?c*v:0),top:l+(g?u*y:0),opacity:g?0:1}).animate({left:a+(g?0:c*v),top:l+(g?0:u*y),opacity:g?1:0},e.duration||500,e.easing,i)}),t.effects.define("fade","toggle",function(e,n){var i="show"===e.mode;t(this).css("opacity",i?0:1).animate({opacity:i?1:0},{queue:!1,duration:e.duration,easing:e.easing,complete:n})}),t.effects.define("fold","hide",function(e,n){var i=t(this),o=e.mode,r="show"===o,s="hide"===o,a=e.size||15,l=/([0-9]+)%/.exec(a),c=!!e.horizFirst,u=c?["right","bottom"]:["bottom","right"],h=e.duration/2,d=t.effects.createPlaceholder(i),p=i.cssClip(),f={clip:t.extend({},p)},g={clip:t.extend({},p)},m=[p[u[0]],p[u[1]]],v=i.queue().length;l&&(a=parseInt(l[1],10)/100*m[s?0:1]),f.clip[u[0]]=a,g.clip[u[0]]=a,g.clip[u[1]]=0,r&&(i.cssClip(g.clip),d&&d.css(t.effects.clipToBox(g)),g.clip=p),i.queue(function(n){d&&d.animate(t.effects.clipToBox(f),h,e.easing).animate(t.effects.clipToBox(g),h,e.easing),n()}).animate(f,h,e.easing).animate(g,h,e.easing).queue(n),t.effects.unshift(i,v,4)}),t.effects.define("highlight","show",function(e,n){var i=t(this),o={backgroundColor:i.css("backgroundColor")};"hide"===e.mode&&(o.opacity=0),t.effects.saveStyle(i),i.css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(o,{queue:!1,duration:e.duration,easing:e.easing,complete:n})}),t.effects.define("size",function(e,n){var i,o,r,s=t(this),a=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],u=e.mode,h="effect"!==u,d=e.scale||"both",p=e.origin||["middle","center"],f=s.css("position"),g=s.position(),m=t.effects.scaledDimensions(s),v=e.from||m,y=e.to||t.effects.scaledDimensions(s,0);t.effects.createPlaceholder(s),"show"===u&&(r=v,v=y,y=r),o={from:{y:v.height/m.height,x:v.width/m.width},to:{y:y.height/m.height,x:y.width/m.width}},"box"!==d&&"both"!==d||(o.from.y!==o.to.y&&(v=t.effects.setTransition(s,l,o.from.y,v),y=t.effects.setTransition(s,l,o.to.y,y)),o.from.x!==o.to.x&&(v=t.effects.setTransition(s,c,o.from.x,v),y=t.effects.setTransition(s,c,o.to.x,y))),"content"!==d&&"both"!==d||o.from.y!==o.to.y&&(v=t.effects.setTransition(s,a,o.from.y,v),y=t.effects.setTransition(s,a,o.to.y,y)),p&&(i=t.effects.getBaseline(p,m),v.top=(m.outerHeight-v.outerHeight)*i.y+g.top,v.left=(m.outerWidth-v.outerWidth)*i.x+g.left,y.top=(m.outerHeight-y.outerHeight)*i.y+g.top,y.left=(m.outerWidth-y.outerWidth)*i.x+g.left),s.css(v),"content"!==d&&"both"!==d||(l=l.concat(["marginTop","marginBottom"]).concat(a),c=c.concat(["marginLeft","marginRight"]),s.find("*[width]").each(function(){var n=t(this),i=t.effects.scaledDimensions(n),r={height:i.height*o.from.y,width:i.width*o.from.x,outerHeight:i.outerHeight*o.from.y,outerWidth:i.outerWidth*o.from.x},s={height:i.height*o.to.y,width:i.width*o.to.x,outerHeight:i.height*o.to.y,outerWidth:i.width*o.to.x};o.from.y!==o.to.y&&(r=t.effects.setTransition(n,l,o.from.y,r),s=t.effects.setTransition(n,l,o.to.y,s)),o.from.x!==o.to.x&&(r=t.effects.setTransition(n,c,o.from.x,r),s=t.effects.setTransition(n,c,o.to.x,s)),h&&t.effects.saveStyle(n),n.css(r),n.animate(s,e.duration,e.easing,function(){h&&t.effects.restoreStyle(n)})})),s.animate(y,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){var e=s.offset();0===y.opacity&&s.css("opacity",v.opacity),h||(s.css("position","static"===f?"relative":f).offset(e),t.effects.saveStyle(s)),n()}})}),t.effects.define("scale",function(e,n){var i=t(this),o=e.mode,r=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"effect"!==o?0:100),s=t.extend(!0,{from:t.effects.scaledDimensions(i),to:t.effects.scaledDimensions(i,r,e.direction||"both"),origin:e.origin||["middle","center"]},e);e.fade&&(s.from.opacity=1,s.to.opacity=0),t.effects.effect.size.call(this,s,n)}),t.effects.define("puff","hide",function(e,n){var i=t.extend(!0,{},e,{fade:!0,percent:parseInt(e.percent,10)||150});t.effects.effect.scale.call(this,i,n)}),t.effects.define("pulsate","show",function(e,n){var i=t(this),o=e.mode,r="show"===o,s="hide"===o,a=r||s,l=2*(e.times||5)+(a?1:0),c=e.duration/l,u=0,h=1,d=i.queue().length;for(!r&&i.is(":visible")||(i.css("opacity",0).show(),u=1);h<l;h++)i.animate({opacity:u},c,e.easing),u=1-u;i.animate({opacity:u},c,e.easing),i.queue(n),t.effects.unshift(i,d,l+1)}),t.effects.define("shake",function(e,n){var i=1,o=t(this),r=e.direction||"left",s=e.distance||20,a=e.times||3,l=2*a+1,c=Math.round(e.duration/l),u="up"===r||"down"===r?"top":"left",h="up"===r||"left"===r,d={},p={},f={},g=o.queue().length;for(t.effects.createPlaceholder(o),d[u]=(h?"-=":"+=")+s,p[u]=(h?"+=":"-=")+2*s,f[u]=(h?"-=":"+=")+2*s,o.animate(d,c,e.easing);i<a;i++)o.animate(p,c,e.easing).animate(f,c,e.easing);o.animate(p,c,e.easing).animate(d,c/2,e.easing).queue(n),t.effects.unshift(o,g,l+1)}),t.effects.define("slide","show",function(e,n){var i,o,r=t(this),s={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},a=e.mode,l=e.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,h=e.distance||r["top"===c?"outerHeight":"outerWidth"](!0),d={};t.effects.createPlaceholder(r),i=r.cssClip(),o=r.position()[c],d[c]=(u?-1:1)*h+o,d.clip=r.cssClip(),d.clip[s[l][1]]=d.clip[s[l][0]],"show"===a&&(r.cssClip(d.clip),r.css(c,d[c]),d.clip=i,d[c]=o),r.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:n})});!1!==t.uiBackCompat&&t.effects.define("transfer",function(e,n){t(this).transfer(e,n)});t.ui.focusable=function(n,i){var o,r,s,a,l,c=n.nodeName.toLowerCase();return"area"===c?(o=n.parentNode,r=o.name,!(!n.href||!r||"map"!==o.nodeName.toLowerCase())&&(s=t("img[usemap='#"+r+"']"),s.length>0&&s.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(c)?(a=!n.disabled)&&(l=t(n).closest("fieldset")[0])&&(a=!l.disabled):a="a"===c?n.href||i:i,a&&t(n).is(":visible")&&e(t(n)))},t.extend(t.expr[":"],{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}});t.ui.focusable,t.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):t(this[0].form)},t.ui.formResetMixin={_formResetHandler:function(){var e=t(this);setTimeout(function(){var n=e.data("ui-form-reset-instances");t.each(n,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var t=this.form.data("ui-form-reset-instances")||[];t.length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t)}},_unbindFormResetHandler:function(){if(this.form.length){var e=this.form.data("ui-form-reset-instances");e.splice(t.inArray(this,e),1),e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};"1.7"===t.fn.jquery.substring(0,3)&&(t.each(["Width","Height"],function(e,n){function i(e,n,i,r){return t.each(o,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),r&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var o="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),s={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(e){return void 0===e?s["inner"+n].call(this):this.each(function(){t(this).css(r,i(this,e)+"px")})},t.fn["outer"+n]=function(e,o){return"number"!=typeof e?s["outer"+n].call(this,e):this.each(function(){t(this).css(r,i(this,e,!0,o)+"px")})}}),t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))});t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.ui.escapeSelector=function(){var t=/([!"#$%&'()*+,.\/:;<=>?@[\]^`{|}~])/g;return function(e){return e.replace(t,"\\$1")}}(),t.fn.labels=function(){var e,n,i,o,r;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(o=this.eq(0).parents("label"),i=this.attr("id"),i&&(e=this.eq(0).parents().last(),r=e.add(e.length?e.siblings():this.siblings()),n="label[for='"+t.ui.escapeSelector(i)+"']",o=o.add(r.find(n).addBack(n))),this.pushStack(o))},t.fn.scrollParent=function(e){var n=this.css("position"),i="absolute"===n,o=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var e=t(this);return(!i||"static"!==e.css("position"))&&o.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==n&&r.length?r:t(this[0].ownerDocument||document)},t.extend(t.expr[":"],{tabbable:function(e){var n=t.attr(e,"tabindex"),i=null!=n;return(!i||n>=0)&&t.ui.focusable(e,i)}}),t.fn.extend({uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),e.collapsible||!1!==e.active&&null!=e.active||(e.active=0),this._processPanels(),e.active<0&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t()}},_createIcons:function(){var e,n,i=this.options.icons;i&&(e=t("<span>"),this._addClass(e,"ui-accordion-header-icon","ui-icon "+i.header),e.prependTo(this.headers),n=this.active.children(".ui-accordion-header-icon"),this._removeClass(n,i.header)._addClass(n,null,i.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){if("active"===t)return void this._activate(e);"event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons())},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!t)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var n=t.ui.keyCode,i=this.headers.length,o=this.headers.index(e.target),r=!1;switch(e.keyCode){case n.RIGHT:case n.DOWN:r=this.headers[(o+1)%i];break;case n.LEFT:case n.UP:r=this.headers[(o-1+i)%i];break;case n.SPACE:case n.ENTER:this._eventHandler(e);break;case n.HOME:r=this.headers[0];break;case n.END:r=this.headers[i-1]}r&&(t(e.target).attr("tabIndex",-1),t(r).attr("tabIndex",0),t(r).trigger("focus"),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().trigger("focus")},refresh:function(){var e=this.options;this._processPanels(),!1===e.active&&!0===e.collapsible||!this.headers.length?(e.active=!1,this.active=t()):!1===e.active?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var e,n=this.options,i=n.heightStyle,o=this.element.parent();this.active=this._findActive(n.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var e=t(this),n=e.uniqueId().attr("id"),i=e.next(),o=i.uniqueId().attr("id");e.attr("aria-controls",o),i.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===i?(e=o.height(),this.element.siblings(":visible").each(function(){var n=t(this),i=n.css("position");"absolute"!==i&&"fixed"!==i&&(e-=n.outerHeight(!0))}),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===i&&(e=0,this.headers.next().each(function(){var n=t(this).is(":visible");n||t(this).show(),e=Math.max(e,t(this).css("height","").height()),n||t(this).hide()}).height(e))},_activate:function(e){var n=this._findActive(e)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var n={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){n[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var n,i,o=this.options,r=this.active,s=t(e.currentTarget),a=s[0]===r[0],l=a&&o.collapsible,c=l?t():s.next(),u=r.next(),h={oldHeader:r,oldPanel:u,newHeader:l?t():s,newPanel:c};e.preventDefault(),a&&!o.collapsible||!1===this._trigger("beforeActivate",e,h)||(o.active=!l&&this.headers.index(s),this.active=a?t():s,this._toggle(h),this._removeClass(r,"ui-accordion-header-active","ui-state-active"),o.icons&&(n=r.children(".ui-accordion-header-icon"),this._removeClass(n,null,o.icons.activeHeader)._addClass(n,null,o.icons.header)),a||(this._removeClass(s,"ui-accordion-header-collapsed")._addClass(s,"ui-accordion-header-active","ui-state-active"),o.icons&&(i=s.children(".ui-accordion-header-icon"),this._removeClass(i,null,o.icons.header)._addClass(i,null,o.icons.activeHeader)),this._addClass(s.next(),"ui-accordion-content-active")))},_toggle:function(e){var n=e.newPanel,i=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=i,this.options.animate?this._animate(n,i,e):(i.hide(),n.show(),this._toggleComplete(e)),i.attr({"aria-hidden":"true"}),i.prev().attr({"aria-selected":"false","aria-expanded":"false"}),n.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):n.length&&this.headers.filter(function(){return 0===parseInt(t(this).attr("tabIndex"),10)}).attr("tabIndex",-1),n.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,e,n){var i,o,r,s=this,a=0,l=t.css("box-sizing"),c=t.length&&(!e.length||t.index()<e.index()),u=this.options.animate||{},h=c&&u.down||u,d=function(){s._toggleComplete(n)};return"number"==typeof h&&(r=h),"string"==typeof h&&(o=h),
o=o||h.easing||u.easing,r=r||h.duration||u.duration,e.length?t.length?(i=t.show().outerHeight(),e.animate(this.hideProps,{duration:r,easing:o,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:r,easing:o,complete:d,step:function(t,n){n.now=Math.round(t),"height"!==n.prop?"content-box"===l&&(a+=n.now):"content"!==s.options.heightStyle&&(n.now=Math.round(i-e.outerHeight()-a),a=0)}})):e.animate(this.hideProps,r,o,d):t.animate(this.showProps,r,o,d)},_toggleComplete:function(t){var e=t.oldPanel,n=e.prev();this._removeClass(e,"ui-accordion-content-active"),this._removeClass(n,"ui-accordion-header-active")._addClass(n,"ui-accordion-header-collapsed"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(n){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e},t.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var n=t(e.target),i=t(t.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&i.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var n=t(e.target).closest(".ui-menu-item"),i=t(e.currentTarget);n[0]===i[0]&&(this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(e,i))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var n=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,n)},blur:function(e){this._delay(function(){!t.contains(this.element[0],t.ui.safeActiveElement(this.document[0]))&&this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),n=e.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),n.children().each(function(){var e=t(this);e.data("ui-menu-submenu-caret")&&e.remove()})},_keydown:function(e){var n,i,o,r,s=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:s=!1,i=this.previousFilter||"",r=!1,o=e.keyCode>=96&&e.keyCode<=105?(e.keyCode-96).toString():String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),o===i?r=!0:o=i+o,n=this._filterMenuItems(o),n=r&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(o=String.fromCharCode(e.keyCode),n=this._filterMenuItems(o)),n.length?(this.focus(e,n),this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}s&&e.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,n,i,o,r,s=this,a=this.options.icons.submenu,l=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),i=l.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),n=e.prev(),i=t("<span>").data("ui-menu-submenu-caret",!0);s._addClass(i,"ui-menu-icon","ui-icon "+a),n.attr("aria-haspopup","true").prepend(i),e.attr("aria-labelledby",n.attr("id"))}),this._addClass(i,"ui-menu","ui-widget ui-widget-content ui-front"),e=l.add(this.element),n=e.find(this.options.items),n.not(".ui-menu-item").each(function(){var e=t(this);s._isDivider(e)&&s._addClass(e,"ui-menu-divider","ui-widget-content")}),o=n.not(".ui-menu-item, .ui-menu-divider"),r=o.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(o,"ui-menu-item")._addClass(r,"ui-menu-item-wrapper"),n.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){if("icons"===t){var n=this.element.find(".ui-menu-icon");this._removeClass(n,null,this.options.icons.submenu)._addClass(n,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",String(t)),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var n,i,o;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),o=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(o,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=e.children(".ui-menu"),n.length&&t&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var n,i,o,r,s,a;this._hasScroll()&&(n=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,o=e.offset().top-this.activeMenu.offset().top-n-i,r=this.activeMenu.scrollTop(),s=this.activeMenu.height(),a=e.outerHeight(),o<0?this.activeMenu.scrollTop(r+o):o+a>s&&this.activeMenu.scrollTop(r+o-s+a))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var n=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(e,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(e),this._removeClass(i.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=i},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,n){var i;this.active&&(i="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[e]()),this.focus(n,i)},nextPage:function(e){var n,i,o;if(!this.active)return void this.next(e);this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=t(this),n.offset().top-i-o<0}),this.focus(e,n)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))},previousPage:function(e){var n,i,o;if(!this.active)return void this.next(e);this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=t(this),n.offset().top-i+o>0}),this.focus(e,n)):this.focus(e,this.activeMenu.find(this.options.items).first()))},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,n)},_filterMenuItems:function(e){var n=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return i.test(t.trim(t(this).children(".ui-menu-item-wrapper").text()))})}});t.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,n,i,o=this.element[0].nodeName.toLowerCase(),r="textarea"===o,s="input"===o;this.isMultiLine=r||!s&&this._isContentEditable(this.element),this.valueMethod=this.element[r||s?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return e=!0,i=!0,void(n=!0);e=!1,i=!1,n=!1;var r=t.ui.keyCode;switch(o.keyCode){case r.PAGE_UP:e=!0,this._move("previousPage",o);break;case r.PAGE_DOWN:e=!0,this._move("nextPage",o);break;case r.UP:e=!0,this._keyEvent("previous",o);break;case r.DOWN:e=!0,this._keyEvent("next",o);break;case r.ENTER:this.menu.active&&(e=!0,o.preventDefault(),this.menu.select(o));break;case r.TAB:this.menu.active&&this.menu.select(o);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(o),o.preventDefault());break;default:n=!0,this._searchTimeout(o)}},keypress:function(i){if(e)return e=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||i.preventDefault());if(!n){var o=t.ui.keyCode;switch(i.keyCode){case o.PAGE_UP:this._move("previousPage",i);break;case o.PAGE_DOWN:this._move("nextPage",i);break;case o.UP:this._keyEvent("previous",i);break;case o.DOWN:this._keyEvent("next",i)}}},input:function(t){if(i)return i=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){if(this.cancelBlur)return void delete this.cancelBlur;clearTimeout(this.searching),this.close(t),this._change(t)}}),this._initSource(),this.menu=t("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==t.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(e,n){var i,o;if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)});o=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:o})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(o.value),(i=n.item.attr("aria-label")||o.value)&&t.trim(i).length&&(this.liveRegion.children().hide(),t("<div>").text(i).appendTo(this.liveRegion))},menuselect:function(e,n){var i=n.item.data("ui-autocomplete-item"),o=this.previous;this.element[0]!==t.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=o,this._delay(function(){this.previous=o,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=t("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var n=this.menu.element[0];return e.target===this.element[0]||e.target===n||t.contains(n,e.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,n,i=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(n,i){i(t.ui.autocomplete.filter(e,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(e,o){i.xhr&&i.xhr.abort(),i.xhr=t.ajax({url:n,data:e,dataType:"json",success:function(t){o(t)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),n=this.menu.element.is(":visible"),i=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;e&&(!e||n||i)||(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy(function(t){e===this.requestIndex&&this.__response(t),--this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var n=this.menu.element.empty();this._renderMenu(n,e),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,n){var i=this;t.each(n,function(t,n){i._renderItemData(e,n)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,n){return t("<li>").append(t("<div>").text(n.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,n){var i=new RegExp(t.ui.autocomplete.escapeRegex(n),"i");return t.grep(e,function(t){return i.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(n).appendTo(this.liveRegion))}});var d=(t.ui.autocomplete,/ui-corner-([a-z]){2,6}/g);t.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var e=this,n=[];t.each(this.options.items,function(i,o){var r,s={};if(o)return"controlgroupLabel"===i?(r=e.element.find(o),r.each(function(){var e=t(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),e._addClass(r,null,"ui-widget ui-widget-content ui-state-default"),void(n=n.concat(r.get()))):void(t.fn[i]&&(s=e["_"+i+"Options"]?e["_"+i+"Options"]("middle"):{classes:{}},e.element.find(o).each(function(){var o=t(this),r=o[i]("instance"),a=t.widget.extend({},s);if("button"!==i||!o.parent(".ui-spinner").length){r||(r=o[i]()[i]("instance")),r&&(a.classes=e._resolveClassesValues(a.classes,r)),o[i](a);var l=o[i]("widget");t.data(l[0],"ui-controlgroup-data",r||o[i]("instance")),n.push(l[0])}})))}),this.childWidgets=t(t.unique(n)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each(function(){var n=t(this),i=n.data("ui-controlgroup-data");i&&i[e]&&i[e]()})},_updateCornerClass:function(t,e){var n=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(t,null,n)},_buildSimpleOptions:function(t,e){var n="vertical"===this.options.direction,i={classes:{}};return i.classes[e]={middle:"",first:"ui-corner-"+(n?"top":"left"),last:"ui-corner-"+(n?"bottom":"right"),only:"ui-corner-all"}[t],i},_spinnerOptions:function(t){var e=this._buildSimpleOptions(t,"ui-spinner");return e.classes["ui-spinner-up"]="",e.classes["ui-spinner-down"]="",e},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:!!e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(e,n){var i={};return t.each(e,function(o){var r=n.options.classes[o]||"";r=t.trim(r.replace(d,"")),i[o]=(r+" "+e[o]).replace(/\s+/g," ")}),i},_setOption:function(t,e){if("direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"===t)return void this._callChildMethod(e?"disable":"enable");this.refresh()},refresh:function(){var e,n=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),e=this.childWidgets,this.options.onlyVisible&&(e=e.filter(":visible")),e.length&&(t.each(["first","last"],function(t,i){var o=e[i]().data("ui-controlgroup-data");if(o&&n["_"+o.widgetName+"Options"]){var r=n["_"+o.widgetName+"Options"](1===e.length?"only":i);r.classes=n._resolveClassesValues(r.classes,o),o.element[o.widgetName](r)}else n._updateCornerClass(e[i](),i)}),this._callChildMethod("refresh"))}});t.widget("ui.checkboxradio",[t.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var e,n,i=this,o=this._super()||{};return this._readType(),n=this.element.labels(),this.label=t(n[n.length-1]),this.label.length||t.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){i.originalLabel+=3===this.nodeType?t(this).text():this.outerHTML}),this.originalLabel&&(o.label=this.originalLabel),e=this.element[0].disabled,null!=e&&(o.disabled=e),o},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===e&&/radio|checkbox/.test(this.type)||t.error("Can't create checkboxradio on element.nodeName="+e+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e,n=this.element[0].name,i="input[name='"+t.ui.escapeSelector(n)+"']";return n?(e=this.form.length?t(this.form[0].elements).filter(i):t(i).filter(function(){return 0===t(this).form().length}),e.not(this.element)):t([])},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",e)._toggleClass(this.icon,null,"ui-icon-blank",!e),"radio"===this.type&&this._getRadioGroup().each(function(){var e=t(this).checkboxradio("instance");e&&e._removeClass(e.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){if("label"!==t||e){if(this._super(t,e),"disabled"===t)return this._toggleClass(this.label,null,"ui-state-disabled",e),void(this.element[0].disabled=e);this.refresh()}},_updateIcon:function(e){var n="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=t("<span>"),this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(n+=e?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,e?"ui-icon-blank":"ui-icon-check")):n+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",n),e||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),this.iconSpace&&(t=t.not(this.iconSpace[0])),t.remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]);t.ui.checkboxradio;t.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),t=this.element[0].disabled,null!=t&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(e){e.keyCode===t.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,n){var i="iconPosition"!==e,o=i?this.options.iconPosition:n,r="top"===o||"bottom"===o;this.icon?i&&this._removeClass(this.icon,null,this.options.icon):(this.icon=t("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),i&&this._addClass(this.icon,null,n),this._attachIcon(o),r?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(o))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=void 0===t.showLabel?this.options.showLabel:t.showLabel,n=void 0===t.icon?this.options.icon:t.icon;e||n||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),this.element[0].disabled=e,e&&this.element.blur())},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),!1!==t.uiBackCompat&&(t.widget("ui.button",t.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){if("text"===t)return void this._super("showLabel",e);"showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),this._superApply(arguments)}}),t.fn.button=function(e){return function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?e.apply(this,arguments):(t.ui.checkboxradio||t.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(t.fn.button),t.fn.buttonset=function(){return t.ui.controlgroup||t.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))});t.ui.button;t.extend(t.ui,{datepicker:{version:"1.12.1"}});var p
;t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return s(this._defaults,t||{}),this},_attachDatepicker:function(e,n){var i,o,r;i=e.nodeName.toLowerCase(),o="div"===i||"span"===i,e.id||(this.uuid+=1,e.id="dp"+this.uuid),r=this._newInst(t(e),o),r.settings=t.extend({},n||{}),"input"===i?this._connectDatepicker(e,r):o&&this._inlineDatepicker(e,r)},_newInst:function(e,n){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?o(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,n){var i=t(e);n.append=t([]),n.trigger=t([]),i.hasClass(this.markerClassName)||(this._attachments(i,n),i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(n),t.data(e,"datepicker",n),n.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,n){var i,o,r,s=this._get(n,"appendText"),a=this._get(n,"isRTL");n.append&&n.append.remove(),s&&(n.append=t("<span class='"+this._appendClass+"'>"+s+"</span>"),e[a?"before":"after"](n.append)),e.off("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),i=this._get(n,"showOn"),"focus"!==i&&"both"!==i||e.on("focus",this._showDatepicker),"button"!==i&&"both"!==i||(o=this._get(n,"buttonText"),r=this._get(n,"buttonImage"),n.trigger=t(this._get(n,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:r,alt:o,title:o}):t("<button type='button'></button>").addClass(this._triggerClass).html(r?t("<img/>").attr({src:r,alt:o,title:o}):o)),e[a?"before":"after"](n.trigger),n.trigger.on("click",function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,n,i,o,r=new Date(2009,11,20),s=this._get(t,"dateFormat");s.match(/[DM]/)&&(e=function(t){for(n=0,i=0,o=0;o<t.length;o++)t[o].length>n&&(n=t[o].length,i=o);return i},r.setMonth(e(this._get(t,s.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(e(this._get(t,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),t.input.attr("size",this._formatDate(t,r).length)}},_inlineDatepicker:function(e,n){var i=t(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(n.dpDiv),t.data(e,"datepicker",n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(e),n.dpDiv.css("display","block"))},_dialogDatepicker:function(e,n,i,o,r){var a,l,c,u,h,d=this._dialogInst;return d||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),t("body").append(this._dialogInput),d=this._dialogInst=this._newInst(this._dialogInput,!1),d.settings={},t.data(this._dialogInput[0],"datepicker",d)),s(d.settings,o||{}),n=n&&n.constructor===Date?this._formatDate(d,n):n,this._dialogInput.val(n),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+u,c/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),d.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",d),this},_destroyDatepicker:function(e){var n,i=t(e),o=t.data(e,"datepicker");i.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===n?(o.append.remove(),o.trigger.remove(),i.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==n&&"span"!==n||i.removeClass(this.markerClassName).empty(),p===o&&(p=null))},_enableDatepicker:function(e){var n,i,o=t(e),r=t.data(e,"datepicker");o.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),"input"===n?(e.disabled=!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==n&&"span"!==n||(i=o.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var n,i,o=t(e),r=t.data(e,"datepicker");o.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),"input"===n?(e.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==n&&"span"!==n||(i=o.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,n,i){var o,r,a,l,c=this._getInst(e);if(2===arguments.length&&"string"==typeof n)return"defaults"===n?t.extend({},t.datepicker._defaults):c?"all"===n?t.extend({},c.settings):this._get(c,n):null;o=n||{},"string"==typeof n&&(o={},o[n]=i),c&&(this._curInst===c&&this._hideDatepicker(),r=this._getDateDatepicker(e,!0),a=this._getMinMaxDate(c,"min"),l=this._getMinMaxDate(c,"max"),s(c.settings,o),null!==a&&void 0!==o.dateFormat&&void 0===o.minDate&&(c.settings.minDate=this._formatDate(c,a)),null!==l&&void 0!==o.dateFormat&&void 0===o.maxDate&&(c.settings.maxDate=this._formatDate(c,l)),"disabled"in o&&(o.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),c),this._autoSize(c),this._setDate(c,r),this._updateAlternate(c),this._updateDatepicker(c))},_changeDatepicker:function(t,e,n){this._optionDatepicker(t,e,n)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var n=this._getInst(t);n&&(this._setDate(n,e),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(t,e){var n=this._getInst(t);return n&&!n.inline&&this._setDateFromField(n,e),n?this._getDate(n):null},_doKeyDown:function(e){var n,i,o,r=t.datepicker._getInst(e.target),s=!0,a=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),s=!1;break;case 13:return o=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",r.dpDiv),o[0]&&t.datepicker._selectDay(e.target,r.selectedMonth,r.selectedYear,o[0]),n=t.datepicker._get(r,"onSelect"),n?(i=t.datepicker._formatDate(r),n.apply(r.input?r.input[0]:null,[i,r])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(r,"stepBigMonths"):-t.datepicker._get(r,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(r,"stepBigMonths"):+t.datepicker._get(r,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),s=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),s=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?1:-1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(r,"stepBigMonths"):-t.datepicker._get(r,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),s=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?-1:1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(r,"stepBigMonths"):+t.datepicker._get(r,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),s=e.ctrlKey||e.metaKey;break;default:s=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):s=!1;s&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var n,i,o=t.datepicker._getInst(e.target);if(t.datepicker._get(o,"constrainInput"))return n=t.datepicker._possibleChars(t.datepicker._get(o,"dateFormat")),i=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||i<" "||!n||n.indexOf(i)>-1},_doKeyUp:function(e){var n,i=t.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{n=t.datepicker.parseDate(t.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.datepicker._getFormatConfig(i)),n&&(t.datepicker._setDateFromField(i),t.datepicker._updateAlternate(i),t.datepicker._updateDatepicker(i))}catch(t){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var i,o,r,a,l,c,u;i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),o=t.datepicker._get(i,"beforeShow"),r=o?o.apply(e,[e,i]):{},!1!==r&&(s(i.settings,r),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),a=!1,t(e).parents().each(function(){return!(a|="fixed"===t(this).css("position"))}),l={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),l=t.datepicker._checkOffset(i,l,a),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":a?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"}),i.inline||(c=t.datepicker._get(i,"showAnim"),u=t.datepicker._get(i,"duration"),i.dpDiv.css("z-index",n(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[c]?i.dpDiv.show(c,t.datepicker._get(i,"showOptions"),u):i.dpDiv[c||"show"](c?u:null),t.datepicker._shouldFocusInput(i)&&i.input.trigger("focus"),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,p=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n,i=this._getNumberOfMonths(e),o=i[1],s=e.dpDiv.find("."+this._dayOverClass+" a");s.length>0&&r.apply(s.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&e.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",17*o+"em"),e.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(n=e.yearshtml,setTimeout(function(){n===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),n=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,n,i){var o=e.dpDiv.outerWidth(),r=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:t(document).scrollLeft()),c=document.documentElement.clientHeight+(i?0:t(document).scrollTop());return n.left-=this._get(e,"isRTL")?o-s:0,n.left-=i&&n.left===e.input.offset().left?t(document).scrollLeft():0,n.top-=i&&n.top===e.input.offset().top+a?t(document).scrollTop():0,n.left-=Math.min(n.left,n.left+o>l&&l>o?Math.abs(n.left+o-l):0),n.top-=Math.min(n.top,n.top+r>c&&c>r?Math.abs(r+a):0),n},_findPos:function(e){for(var n,i=this._getInst(e),o=this._get(i,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[o?"previousSibling":"nextSibling"];return n=t(e).offset(),[n.left,n.top]},_hideDatepicker:function(e){var n,i,o,r,s=this._curInst;!s||e&&s!==t.data(e,"datepicker")||this._datepickerShowing&&(n=this._get(s,"showAnim"),i=this._get(s,"duration"),o=function(){t.datepicker._tidyDialog(s)},t.effects&&(t.effects.effect[n]||t.effects[n])?s.dpDiv.hide(n,t.datepicker._get(s,"showOptions"),i,o):s.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,o),n||o(),this._datepickerShowing=!1,r=this._get(s,"onClose"),r&&r.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var n=t(e.target),i=t.datepicker._getInst(n[0]);(n[0].id===t.datepicker._mainDivId||0!==n.parents("#"+t.datepicker._mainDivId).length||n.hasClass(t.datepicker.markerClassName)||n.closest("."+t.datepicker._triggerClass).length||!t.datepicker._datepickerShowing||t.datepicker._inDialog&&t.blockUI)&&(!n.hasClass(t.datepicker.markerClassName)||t.datepicker._curInst===i)||t.datepicker._hideDatepicker()}},_adjustDate:function(e,n,i){var o=t(e),r=this._getInst(o[0]);this._isDisabledDatepicker(o[0])||(this._adjustInstDate(r,n+("M"===i?this._get(r,"showCurrentAtPos"):0),i),this._updateDatepicker(r))},_gotoToday:function(e){var n,i=t(e),o=this._getInst(i[0]);this._get(o,"gotoCurrent")&&o.currentDay?(o.selectedDay=o.currentDay,o.drawMonth=o.selectedMonth=o.currentMonth,o.drawYear=o.selectedYear=o.currentYear):(n=new Date,o.selectedDay=n.getDate(),o.drawMonth=o.selectedMonth=n.getMonth(),o.drawYear=o.selectedYear=n.getFullYear()),this._notifyChange(o),this._adjustDate(i)},_selectMonthYear:function(e,n,i){var o=t(e),r=this._getInst(o[0]);r["selected"+("M"===i?"Month":"Year")]=r["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(o)},_selectDay:function(e,n,i,o){var r,s=t(e);t(o).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||(r=this._getInst(s[0]),r.selectedDay=r.currentDay=t("a",o).html(),r.selectedMonth=r.currentMonth=n,r.selectedYear=r.currentYear=i,this._selectDate(e,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(e){var n=t(e);this._selectDate(n,"")},_selectDate:function(e,n){var i,o=t(e),r=this._getInst(o[0]);n=null!=n?n:this._formatDate(r),r.input&&r.input.val(n),this._updateAlternate(r),i=this._get(r,"onSelect"),i?i.apply(r.input?r.input[0]:null,[n,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var n,i,o,r=this._get(e,"altField");r&&(n=this._get(e,"altFormat")||this._get(e,"dateFormat"),i=this._getDate(e),o=this.formatDate(n,i,this._getFormatConfig(e)),t(r).val(o))},noWeekends:function(t){var e=t.getDay();return[e>0&&e<6,""]},iso8601Week:function(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1},parseDate:function(e,n,i){if(null==e||null==n)throw"Invalid arguments";if(""===(n="object"==typeof n?n.toString():n+""))return null;var o,r,s,a,l=0,c=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),h=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,d=(i?i.dayNames:null)||this._defaults.dayNames,p=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,f=(i?i.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,v=-1,y=-1,b=!1,_=function(t){var n=o+1<e.length&&e.charAt(o+1)===t;return n&&o++,n},w=function(t){var e=_(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,o="y"===t?i:1,r=new RegExp("^\\d{"+o+","+i+"}"),s=n.substring(l).match(r);if(!s)throw"Missing number at position "+l;return l+=s[0].length,parseInt(s[0],10)},C=function(e,i,o){var r=-1,s=t.map(_(e)?o:i,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(s,function(t,e){var i=e[1];if(n.substr(l,i.length).toLowerCase()===i.toLowerCase())return r=e[0],l+=i.length,!1}),-1!==r)return r+1;throw"Unknown name at position "+l},x=function(){if(n.charAt(l)!==e.charAt(o))throw"Unexpected literal at position "+l;l++};for(o=0;o<e.length;o++)if(b)"'"!==e.charAt(o)||_("'")?x():b=!1;else switch(e.charAt(o)){case"d":v=w("d");break;case"D":C("D",h,d);break;case"o":y=w("o");break;case"m":m=w("m");break;case"M":m=C("M",p,f);break;case"y":g=w("y");break;case"@":a=new Date(w("@")),g=a.getFullYear(),m=a.getMonth()+1,v=a.getDate();break;case"!":a=new Date((w("!")-this._ticksTo1970)/1e4),g=a.getFullYear(),m=a.getMonth()+1,v=a.getDate();break;case"'":_("'")?x():b=!0;break;default:x()}if(l<n.length&&(s=n.substr(l),!/^\s+/.test(s)))throw"Extra/unparsed characters found in date: "+s;if(-1===g?g=(new Date).getFullYear():g<100&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(g<=u?0:-100)),y>-1)for(m=1,v=y;;){if(r=this._getDaysInMonth(g,m-1),v<=r)break;m++,v-=r}if(a=this._daylightSavingAdjust(new Date(g,m-1,v)),a.getFullYear()!==g||a.getMonth()+1!==m||a.getDate()!==v)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,n){if(!e)return"";var i,o=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,r=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,a=(n?n.monthNames:null)||this._defaults.monthNames,l=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},c=function(t,e,n){var i=""+e;if(l(t))for(;i.length<n;)i="0"+i;return i},u=function(t,e,n,i){return l(t)?i[e]:n[e]},h="",d=!1;if(e)for(i=0;i<t.length;i++)if(d)"'"!==t.charAt(i)||l("'")?h+=t.charAt(i):d=!1;else switch(t.charAt(i)){case"d":h+=c("d",e.getDate(),2);break;case"D":h+=u("D",e.getDay(),o,r);break;case"o":h+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=c("m",e.getMonth()+1,2);break;case"M":h+=u("M",e.getMonth(),s,a);break;case"y":h+=l("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":h+=e.getTime();break;case"!":h+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?h+="'":d=!0;break;default:h+=t.charAt(i)}return h},_possibleChars:function(t){var e,n="",i=!1,o=function(n){var i=e+1<t.length&&t.charAt(e+1)===n;return i&&e++,i};for(e=0;e<t.length;e++)if(i)"'"!==t.charAt(e)||o("'")?n+=t.charAt(e):i=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":o("'")?n+="'":i=!0;break;default:n+=t.charAt(e)}return n},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var n=this._get(t,"dateFormat"),i=t.lastVal=t.input?t.input.val():null,o=this._getDefaultDate(t),r=o,s=this._getFormatConfig(t);try{r=this.parseDate(n,i,s)||o}catch(t){i=e?"":i}t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),t.currentDay=i?r.getDate():0,t.currentMonth=i?r.getMonth():0,t.currentYear=i?r.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,n,i){var o=null==n||""===n?i:"string"==typeof n?function(n){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),n,t.datepicker._getFormatConfig(e))}catch(t){}for(var i=(n.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,o=i.getFullYear(),r=i.getMonth(),s=i.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=a.exec(n);l;){switch(l[2]||"d"){case"d":case"D":s+=parseInt(l[1],10);break;case"w":case"W":s+=7*parseInt(l[1],10);break;case"m":case"M":r+=parseInt(l[1],10),s=Math.min(s,t.datepicker._getDaysInMonth(o,r));break;case"y":case"Y":o+=parseInt(l[1],10),s=Math.min(s,t.datepicker._getDaysInMonth(o,r))}l=a.exec(n)}return new Date(o,r,s)}(n):"number"==typeof n?isNaN(n)?i:function(t){var e=new Date;return e.setDate(e.getDate()+t),e}(n):new Date(n.getTime());return o=o&&"Invalid Date"===o.toString()?i:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,n){var i=!e,o=t.selectedMonth,r=t.selectedYear,s=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=s.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=s.getMonth(),t.drawYear=t.selectedYear=t.currentYear=s.getFullYear(),o===t.selectedMonth&&r===t.selectedYear||n||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(i?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(e){var n=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(i,-n,"M")},next:function(){t.datepicker._adjustDate(i,+n,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(i)},selectDay:function(){return t.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(i,this,"Y"),!1}};t(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,n,i,o,r,s,a,l,c,u,h,d,p,f,g,m,v,y,b,_,w,C,x,T,k,S,E,P,A,I,O,M,D,L,j,R,B,F,N,U=new Date,$=this._daylightSavingAdjust(new Date(U.getFullYear(),U.getMonth(),U.getDate())),q=this._get(t,"isRTL"),H=this._get(t,"showButtonPanel"),V=this._get(t,"hideIfNoPrevNext"),z=this._get(t,"navigationAsDateFormat"),W=this._getNumberOfMonths(t),Y=this._get(t,"showCurrentAtPos"),G=this._get(t,"stepMonths"),Q=1!==W[0]||1!==W[1],K=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),X=this._getMinMaxDate(t,"min"),Z=this._getMinMaxDate(t,"max"),J=t.drawMonth-Y,tt=t.drawYear;if(J<0&&(J+=12,tt--),Z)for(e=this._daylightSavingAdjust(new Date(Z.getFullYear(),Z.getMonth()-W[0]*W[1]+1,Z.getDate())),e=X&&e<X?X:e;this._daylightSavingAdjust(new Date(tt,J,1))>e;)--J<0&&(J=11,tt--);for(t.drawMonth=J,t.drawYear=tt,n=this._get(t,"prevText"),n=z?this.formatDate(n,this._daylightSavingAdjust(new Date(tt,J-G,1)),this._getFormatConfig(t)):n,i=this._canAdjustMonth(t,-1,tt,J)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"e":"w")+"'>"+n+"</span></a>":V?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"e":"w")+"'>"+n+"</span></a>",o=this._get(t,"nextText"),o=z?this.formatDate(o,this._daylightSavingAdjust(new Date(tt,J+G,1)),this._getFormatConfig(t)):o,r=this._canAdjustMonth(t,1,tt,J)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"w":"e")+"'>"+o+"</span></a>":V?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"w":"e")+"'>"+o+"</span></a>",s=this._get(t,"currentText"),a=this._get(t,"gotoCurrent")&&t.currentDay?K:$,s=z?this.formatDate(s,a,this._getFormatConfig(t)):s,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",c=H?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(q?l:"")+(this._isInRange(t,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+(q?"":l)+"</div>":"",u=parseInt(this._get(t,"firstDay"),10),u=isNaN(u)?0:u,h=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),_="",C=0;C<W[0];C++){for(x="",this.maxRows=4,T=0;T<W[1];T++){if(k=this._daylightSavingAdjust(new Date(tt,J,t.selectedDay)),S=" ui-corner-all",E="",Q){if(E+="<div class='ui-datepicker-group",W[1]>1)switch(T){case 0:E+=" ui-datepicker-group-first",S=" ui-corner-"+(q?"right":"left");break;case W[1]-1:E+=" ui-datepicker-group-last",S=" ui-corner-"+(q?"left":"right");break;default:E+=" ui-datepicker-group-middle",S=""}E+="'>"}for(E+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===C?q?r:i:"")+(/all|right/.test(S)&&0===C?q?i:r:"")+this._generateMonthYearHeader(t,J,tt,X,Z,C>0||T>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",P=h?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;w<7;w++)A=(w+u)%7,P+="<th scope='col'"+((w+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+d[A]+"'>"+p[A]+"</span></th>";for(E+=P+"</tr></thead><tbody>",I=this._getDaysInMonth(tt,J),tt===t.selectedYear&&J===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,I)),O=(this._getFirstDayOfMonth(tt,J)-u+7)%7,M=Math.ceil((O+I)/7),D=Q&&this.maxRows>M?this.maxRows:M,this.maxRows=D,L=this._daylightSavingAdjust(new Date(tt,J,1-O)),j=0;j<D;j++){for(E+="<tr>",R=h?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(L)+"</td>":"",w=0;w<7;w++)B=m?m.apply(t.input?t.input[0]:null,[L]):[!0,""],F=L.getMonth()!==J,N=F&&!y||!B[0]||X&&L<X||Z&&L>Z,R+="<td class='"+((w+u+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(L.getTime()===k.getTime()&&J===t.selectedMonth&&t._keyEvent||b.getTime()===L.getTime()&&b.getTime()===k.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!v?"":" "+B[1]+(L.getTime()===K.getTime()?" "+this._currentClass:"")+(L.getTime()===$.getTime()?" ui-datepicker-today":""))+"'"+(F&&!v||!B[2]?"":" title='"+B[2].replace(/'/g,"&#39;")+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+L.getMonth()+"' data-year='"+L.getFullYear()+"'")+">"+(F&&!v?"&#xa0;":N?"<span class='ui-state-default'>"+L.getDate()+"</span>":"<a class='ui-state-default"+(L.getTime()===$.getTime()?" ui-state-highlight":"")+(L.getTime()===K.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+L.getDate()+"</a>")+"</td>",L.setDate(L.getDate()+1),L=this._daylightSavingAdjust(L);E+=R+"</tr>"}J++,J>11&&(J=0,tt++),E+="</tbody></table>"+(Q?"</div>"+(W[0]>0&&T===W[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=E}_+=x}return _+=c,t._keyEvent=!1,_},_generateMonthYearHeader:function(t,e,n,i,o,r,s,a){var l,c,u,h,d,p,f,g,m=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(r||!m)_+="<span class='ui-datepicker-month'>"+s[e]+"</span>";else{for(l=i&&i.getFullYear()===n,c=o&&o.getFullYear()===n,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;u<12;u++)(!l||u>=i.getMonth())&&(!c||u<=o.getMonth())&&(_+="<option value='"+u+"'"+(u===e?" selected='selected'":"")+">"+a[u]+"</option>");_+="</select>"}if(y||(b+=_+(!r&&m&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",r||!v)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(h=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(h[0]),g=Math.max(f,p(h[1]||"")),f=i?Math.max(f,i.getFullYear()):f,g=o?Math.min(g,o.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=g;f++)t.yearshtml+="<option value='"+f+"'"+(f===n?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),y&&(b+=(!r&&m&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(t,e,n){var i=t.selectedYear+("Y"===n?e:0),o=t.selectedMonth+("M"===n?e:0),r=Math.min(t.selectedDay,this._getDaysInMonth(i,o))+("D"===n?e:0),s=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(i,o,r)));t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),"M"!==n&&"Y"!==n||this._notifyChange(t)},_restrictMinMax:function(t,e){var n=this._getMinMaxDate(t,"min"),i=this._getMinMaxDate(t,"max"),o=n&&e<n?n:e;return i&&o>i?i:o},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,n,i){var o=this._getNumberOfMonths(t),r=this._daylightSavingAdjust(new Date(n,i+(e<0?e:o[0]*o[1]),1));return e<0&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(t,r)},_isInRange:function(t,e){var n,i,o=this._getMinMaxDate(t,"min"),r=this._getMinMaxDate(t,"max"),s=null,a=null,l=this._get(t,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),s=parseInt(n[0],10),a=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(s+=i),n[1].match(/[+\-].*/)&&(a+=i)),(!o||e.getTime()>=o.getTime())&&(!r||e.getTime()<=r.getTime())&&(!s||e.getFullYear()>=s)&&(!a||e.getFullYear()<=a)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,n,i){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear)
;var o=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(i,n,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),o,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).on("mousedown",t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(n)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.12.1";var f=(t.datepicker,t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),!1);t(document).on("mouseup",function(){f=!1});t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(n){if(!0===t.data(n.target,e.widgetName+".preventClickEvent"))return t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!f){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var n=this,i=1===e.which,o=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(i&&!o&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),f=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,f=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,n,i){var o,r=t.ui[e].prototype;for(o in i)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([n,i[o]])},call:function(t,e,n,i){var o,r=t.plugins[e];if(r&&(i||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;o<r.length;o++)t.options[r[o][0]]&&r[o][1].apply(t.element,n)}},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")};t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging"))return void(this.destroyOnClear=!0);this._removeHandleClassName(),this._mouseDestroy()},_mouseCapture:function(e){var n=this.options;return!(this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blurActiveElement(e),this._blockFrames(!0===n.iframeFix?"iframe":n.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var n=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(n).length||t.ui.safeBlur(n)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(!1===this._trigger("drag",e,i))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==n._trigger("stop",e)&&n._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper),o=i?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,o=this.options,r=this.document[0];return this.relativeContainer=null,o.containment?"window"===o.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,t(r).width()-this.helperProportions.width-this.margins.left,(t(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),n=t(o.containment),void((i=n[0])&&(e=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(t,e){var n,i,o,r,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=n?o-this.offset.click.top>=n[1]||o-this.offset.click.top>n[3]?o:o-this.offset.click.top>=n[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?r-this.offset.click.left>=n[0]||r-this.offset.click.left>n[2]?r:r-this.offset.click.left>=n[0]?r-s.grid[0]:r+s.grid[0]:r),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n,i){var o=t.extend({},n,{item:i.element});i.sortables=[],t(i.options.connectToSortable).each(function(){var n=t(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",e,o))})},stop:function(e,n,i){var o=t.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,t.each(i.sortables,function(){var t=this;t.isOver?(t.isOver=0,i.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,o))})},drag:function(e,n,i){t.each(i.sortables,function(){var o=!1,r=this;r.positionAbs=i.positionAbs,r.helperProportions=i.helperProportions,r.offset.click=i.offset.click,r._intersectsWith(r.containerCache)&&(o=!0,t.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==r&&this._intersectsWith(this.containerCache)&&t.contains(r.element[0],this.element[0])&&(o=!1),o})),o?(r.isOver||(r.isOver=1,i._parent=n.helper.parent(),r.currentItem=n.helper.appendTo(r.element).data("ui-sortable-item",!0),r.options._helper=r.options.helper,r.options.helper=function(){return n.helper[0]},e.target=r.currentItem[0],r._mouseCapture(e,!0),r._mouseStart(e,!0,!0),r.offset.click.top=i.offset.click.top,r.offset.click.left=i.offset.click.left,r.offset.parent.left-=i.offset.parent.left-r.offset.parent.left,r.offset.parent.top-=i.offset.parent.top-r.offset.parent.top,i._trigger("toSortable",e),i.dropped=r.element,t.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,r.fromOutside=i),r.currentItem&&(r._mouseDrag(e),n.position=r.position)):r.isOver&&(r.isOver=0,r.cancelHelperRemoval=!0,r.options._revert=r.options.revert,r.options.revert=!1,r._trigger("out",e,r._uiHash(r)),r._mouseStop(e,!0),r.options.revert=r.options._revert,r.options.helper=r.options._helper,r.placeholder&&r.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(e),n.position=i._generatePosition(e,!0),i._trigger("fromSortable",e),i.dropped=!1,t.each(i.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,n,i){var o=t("body"),r=i.options;o.css("cursor")&&(r._cursor=o.css("cursor")),o.css("cursor",r.cursor)},stop:function(e,n,i){var o=i.options;o._cursor&&t("body").css("cursor",o._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n,i){var o=t(n.helper),r=i.options;o.css("opacity")&&(r._opacity=o.css("opacity")),o.css("opacity",r.opacity)},stop:function(e,n,i){var o=i.options;o._opacity&&t(n.helper).css("opacity",o._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(e,n,i){var o=i.options,r=!1,s=i.scrollParentNotHidden[0],a=i.document[0];s!==a&&"HTML"!==s.tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+s.offsetHeight-e.pageY<o.scrollSensitivity?s.scrollTop=r=s.scrollTop+o.scrollSpeed:e.pageY-i.overflowOffset.top<o.scrollSensitivity&&(s.scrollTop=r=s.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+s.offsetWidth-e.pageX<o.scrollSensitivity?s.scrollLeft=r=s.scrollLeft+o.scrollSpeed:e.pageX-i.overflowOffset.left<o.scrollSensitivity&&(s.scrollLeft=r=s.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(e.pageY-t(a).scrollTop()<o.scrollSensitivity?r=t(a).scrollTop(t(a).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(a).scrollTop())<o.scrollSensitivity&&(r=t(a).scrollTop(t(a).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(e.pageX-t(a).scrollLeft()<o.scrollSensitivity?r=t(a).scrollLeft(t(a).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(a).scrollLeft())<o.scrollSensitivity&&(r=t(a).scrollLeft(t(a).scrollLeft()+o.scrollSpeed)))),!1!==r&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,n,i){var o=i.options;i.snapElements=[],t(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var e=t(this),n=e.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:n.top,left:n.left})})},drag:function(e,n,i){var o,r,s,a,l,c,u,h,d,p,f=i.options,g=f.snapTolerance,m=n.offset.left,v=m+i.helperProportions.width,y=n.offset.top,b=y+i.helperProportions.height;for(d=i.snapElements.length-1;d>=0;d--)l=i.snapElements[d].left-i.margins.left,c=l+i.snapElements[d].width,u=i.snapElements[d].top-i.margins.top,h=u+i.snapElements[d].height,v<l-g||m>c+g||b<u-g||y>h+g||!t.contains(i.snapElements[d].item.ownerDocument,i.snapElements[d].item)?(i.snapElements[d].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[d].item})),i.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(o=Math.abs(u-b)<=g,r=Math.abs(h-y)<=g,s=Math.abs(l-v)<=g,a=Math.abs(c-m)<=g,o&&(n.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top),r&&(n.position.top=i._convertPositionTo("relative",{top:h,left:0}).top),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c}).left)),p=o||r||s||a,"outer"!==f.snapMode&&(o=Math.abs(u-y)<=g,r=Math.abs(h-b)<=g,s=Math.abs(l-m)<=g,a=Math.abs(c-v)<=g,o&&(n.position.top=i._convertPositionTo("relative",{top:u,left:0}).top),r&&(n.position.top=i._convertPositionTo("relative",{top:h-i.helperProportions.height,left:0}).top),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left)),!i.snapElements[d].snapping&&(o||r||s||a||p)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[d].item})),i.snapElements[d].snapping=o||r||s||a||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,n,i){var o,r=i.options,s=t.makeArray(t(r.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});s.length&&(o=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each(function(e){t(this).css("zIndex",o+e)}),this.css("zIndex",o+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n,i){var o=t(n.helper),r=i.options;o.css("zIndex")&&(r._zIndex=o.css("zIndex")),o.css("zIndex",r.zIndex)},stop:function(e,n,i){var o=i.options;o._zIndex&&t(n.helper).css("zIndex",o._zIndex)}});t.ui.draggable;t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",o=!1;return e[i]>0||(e[i]=1,o=e[i]>0,e[i]=0,o)},_create:function(){var e,n=this.options,i=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),n.autoHide&&t(this.element).on("mouseenter",function(){n.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())}).on("mouseleave",function(){n.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,n=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var e,n,i,o,r,s=this.options,a=this;if(this.handles=s.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},n=0;n<i.length;n++)e=t.trim(i[n]),o="ui-resizable-"+e,r=t("<div>"),this._addClass(r,"ui-resizable-handle "+o),r.css({zIndex:s.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(r);this._renderAxis=function(e){var n,i,o,r;e=e||this.element;for(n in this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=t(this.handles[n]),this._on(this.handles[n],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=t(this.handles[n],this.element),r=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),o=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),e.css(o,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){a.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=r&&r[1]?r[1]:"se")}),s.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var n,i,o=!1;for(n in this.handles)((i=t(this.handles[n])[0])===e.target||t.contains(i,e.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(e){var n,i,o,r=this.options,s=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),r.containment&&(n+=t(r.containment).scrollLeft()||0,i+=t(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalPosition={left:n,top:i},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var n,i,o=this.originalMousePosition,r=this.axis,s=e.pageX-o.left||0,a=e.pageY-o.top||0,l=this._change[r];return this._updatePrevProperties(),!!l&&(n=l.apply(this,[e,s,a]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(n=this._updateRatio(n,e)),n=this._respectSize(n,e),this._updateCache(n),this._propagate("resize",e),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var n,i,o,r,s,a,l,c=this.options,u=this;return this._helper&&(n=this._proportionallyResizeElements,i=n.length&&/textarea/i.test(n[0].nodeName),o=i&&this._hasScroll(n[0],"left")?0:u.sizeDiff.height,r=i?0:u.sizeDiff.width,s={width:u.helper.width()-r,height:u.helper.height()-o},a=parseFloat(u.element.css("left"))+(u.position.left-u.originalPosition.left)||null,l=parseFloat(u.element.css("top"))+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(t.extend(s,{top:l,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,n,i,o,r,s=this.options;r={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||t)&&(e=r.minHeight*this.aspectRatio,i=r.minWidth/this.aspectRatio,n=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,e>r.minWidth&&(r.minWidth=e),i>r.minHeight&&(r.minHeight=i),n<r.maxWidth&&(r.maxWidth=n),o<r.maxHeight&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,n=this.size,i=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===i&&(t.left=e.left+(n.width-t.width),t.top=null),"nw"===i&&(t.top=e.top+(n.height-t.height),t.left=e.left+(n.width-t.width)),t},_respectSize:function(t){
var e=this._vBoundaries,n=this.axis,i=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,r=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,s=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(n),u=/nw|ne|n/.test(n);return r&&(t.width=e.minWidth),s&&(t.height=e.minHeight),i&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),r&&c&&(t.left=a-e.minWidth),i&&c&&(t.left=a-e.maxWidth),s&&u&&(t.top=l-e.minHeight),o&&u&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,n=[],i=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],o=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)n[e]=parseFloat(i[e])||0,n[e]+=parseFloat(o[e])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,n=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,n=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var n=this.originalSize;return{left:this.originalPosition.left+e,width:n.width-e}},n:function(t,e,n){var i=this.originalSize;return{top:this.originalPosition.top+n,height:i.height-n}},s:function(t,e,n){return{height:this.originalSize.height+n}},se:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},sw:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,n,i]))},ne:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},nw:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,n,i]))}},_propagate:function(e,n){t.ui.plugin.call(this,e,[n,this.ui()]),"resize"!==e&&this._trigger(e,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var n=t(this).resizable("instance"),i=n.options,o=n._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),s=r&&n._hasScroll(o[0],"left")?0:n.sizeDiff.height,a=r?0:n.sizeDiff.width,l={width:n.size.width-a,height:n.size.height-s},c=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,u=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(t.extend(l,u&&c?{top:u,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};o&&o.length&&t(o[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,n,i,o,r,s,a,l=t(this).resizable("instance"),c=l.options,u=l.element,h=c.containment,d=h instanceof t?h.get(0):/parent/.test(h)?u.parent().get(0):h;d&&(l.containerElement=t(d),/document/.test(h)||h===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(d),n=[],t(["Top","Right","Left","Bottom"]).each(function(t,i){n[t]=l._num(e.css("padding"+i))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-n[3],width:e.innerWidth()-n[1]},i=l.containerOffset,o=l.containerSize.height,r=l.containerSize.width,s=l._hasScroll(d,"left")?d.scrollWidth:r,a=l._hasScroll(d)?d.scrollHeight:o,l.parentData={element:d,left:i.left,top:i.top,width:s,height:a}))},resize:function(e){var n,i,o,r,s=t(this).resizable("instance"),a=s.options,l=s.containerOffset,c=s.position,u=s._aspectRatio||e.shiftKey,h={top:0,left:0},d=s.containerElement,p=!0;d[0]!==document&&/static/.test(d.css("position"))&&(h=l),c.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-h.left),u&&(s.size.height=s.size.width/s.aspectRatio,p=!1),s.position.left=a.helper?l.left:0),c.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),u&&(s.size.width=s.size.height*s.aspectRatio,p=!1),s.position.top=s._helper?l.top:0),o=s.containerElement.get(0)===s.element.parent().get(0),r=/relative|absolute/.test(s.containerElement.css("position")),o&&r?(s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top):(s.offset.left=s.element.offset().left,s.offset.top=s.element.offset().top),n=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-h.left:s.offset.left-l.left)),i=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-h.top:s.offset.top-l.top)),n+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-n,u&&(s.size.height=s.size.width/s.aspectRatio,p=!1)),i+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-i,u&&(s.size.width=s.size.height*s.aspectRatio,p=!1)),p||(s.position.left=s.prevPosition.left,s.position.top=s.prevPosition.top,s.size.width=s.prevSize.width,s.size.height=s.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),n=e.options,i=e.containerOffset,o=e.containerPosition,r=e.containerElement,s=t(e.helper),a=s.offset(),l=s.outerWidth()-e.sizeDiff.width,c=s.outerHeight()-e.sizeDiff.height;e._helper&&!n.animate&&/relative/.test(r.css("position"))&&t(this).css({left:a.left-o.left-i.left,width:l,height:c}),e._helper&&!n.animate&&/static/.test(r.css("position"))&&t(this).css({left:a.left-o.left-i.left,width:l,height:c})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),n=e.options;t(n.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,n){var i=t(this).resizable("instance"),o=i.options,r=i.originalSize,s=i.originalPosition,a={height:i.size.height-r.height||0,width:i.size.width-r.width||0,top:i.position.top-s.top||0,left:i.position.left-s.left||0};t(o.alsoResize).each(function(){var e=t(this),i=t(this).data("ui-resizable-alsoresize"),o={},r=e.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(r,function(t,e){var n=(i[e]||0)+(a[e]||0);n&&n>=0&&(o[e]=n||null)}),e.css(o)})},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),n=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),!1!==t.uiBackCompat&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,n=t(this).resizable("instance"),i=n.options,o=n.size,r=n.originalSize,s=n.originalPosition,a=n.axis,l="number"==typeof i.grid?[i.grid,i.grid]:i.grid,c=l[0]||1,u=l[1]||1,h=Math.round((o.width-r.width)/c)*c,d=Math.round((o.height-r.height)/u)*u,p=r.width+h,f=r.height+d,g=i.maxWidth&&i.maxWidth<p,m=i.maxHeight&&i.maxHeight<f,v=i.minWidth&&i.minWidth>p,y=i.minHeight&&i.minHeight>f;i.grid=l,v&&(p+=c),y&&(f+=u),g&&(p-=c),m&&(f-=u),/^(se|s|e)$/.test(a)?(n.size.width=p,n.size.height=f):/^(ne)$/.test(a)?(n.size.width=p,n.size.height=f,n.position.top=s.top-d):/^(sw)$/.test(a)?(n.size.width=p,n.size.height=f,n.position.left=s.left-h):((f-u<=0||p-c<=0)&&(e=n._getPaddingPlusBorderDimensions(this)),f-u>0?(n.size.height=f,n.position.top=s.top-d):(f=u-e.height,n.size.height=f,n.position.top=s.top+r.height-f),p-c>0?(n.size.width=p,n.position.left=s.left-h):(p=c-e.width,n.size.width=p,n.position.left=s.left+r.width-p))}});t.ui.resizable;t.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var n=t(this).css(e).offset().top;n<0&&t(this).css("top",e.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var n=this;this._isOpen&&!1!==this._trigger("beforeClose",e)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||t.ui.safeBlur(t.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,n){var i=!1,o=this.uiDialog.siblings(".ui-front:visible").map(function(){return+t(this).css("z-index")}).get(),r=Math.max.apply(null,o);return r>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",r+1),i=!0),i&&!n&&this._trigger("focus",e),i},open:function(){var e=this;if(this._isOpen)return void(this._moveToTop()&&this._focusTabbable());this._isOpen=!0,this.opener=t(t.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._makeFocusTarget(),this._trigger("open")},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).trigger("focus")},_keepFocus:function(e){function n(){var e=t.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===e||t.contains(this.uiDialog[0],e)||this._focusTabbable()}e.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=t("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB&&!e.isDefaultPrevented()){var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),o=n.filter(":last");e.target!==o[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==i[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay(function(){o.trigger("focus")}),e.preventDefault()):(this._delay(function(){i.trigger("focus")}),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:t("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(e,"ui-dialog-title"),this._title(e),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var e=this,n=this.options.buttons;if(this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(n)||t.isArray(n)&&!n.length)return void this._removeClass(this.uiDialog,"ui-dialog-buttons");t.each(n,function(n,i){var o,r;i=t.isFunction(i)?{click:i,text:n}:i,i=t.extend({type:"button"},i),o=i.click,r={icon:i.icon,iconPosition:i.iconPosition,showLabel:i.showLabel,icons:i.icons,text:i.text},delete i.click,delete i.icon,delete i.iconPosition,delete i.showLabel,delete i.icons,"boolean"==typeof i.text&&delete i.text,t("<button></button>",i).button(r).appendTo(e.uiButtonSet).on("click",function(){o.apply(e.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var n=this,i=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,o){n._addClass(t(this),"ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",i,e(o))},drag:function(t,i){n._trigger("drag",t,e(i))},stop:function(o,r){var s=r.offset.left-n.document.scrollLeft(),a=r.offset.top-n.document.scrollTop();i.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" top"+(a>=0?"+":"")+a,of:n.window},n._removeClass(t(this),"ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",o,e(r))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var n=this,i=this.options,o=i.resizable,r=this.uiDialog.css("position"),s="string"==typeof o?o:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:s,start:function(i,o){n._addClass(t(this),"ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",i,e(o))},resize:function(t,i){n._trigger("resize",t,e(i))},stop:function(o,r){var s=n.uiDialog.offset(),a=s.left-n.document.scrollLeft(),l=s.top-n.document.scrollTop();i.height=n.uiDialog.height(),i.width=n.uiDialog.width(),i.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(l>=0?"+":"")+l,of:n.window},n._removeClass(t(this),"ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",o,e(r))}}).css("position",r)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=t(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),n=t.inArray(this,e);-1!==n&&e.splice(n,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var n=this,i=!1,o={};t.each(e,function(t,e){n._setOption(t,e),t in n.sizeRelatedOptions&&(i=!0),t in n.resizableRelatedOptions&&(o[t]=e)}),i&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,n){var i,o,r=this.uiDialog;"disabled"!==e&&(this._super(e,n),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:t("<a>").text(""+this.options.closeText).html()}),"draggable"===e&&(i=r.is(":data(ui-draggable)"),i&&!n&&r.draggable("destroy"),!i&&n&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(o=r.is(":data(ui-resizable)"),o&&!n&&r.resizable("destroy"),o&&"string"==typeof n&&r.resizable("option","handles",n),o||!1===n||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),e=Math.max(0,i.minHeight-t),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-t):"none","auto"===i.height?this.element.css({minHeight:e,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!t(e.target).closest(".ui-dialog").length||!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=t("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==t.uiBackCompat&&t.widget("ui.dialog",t.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}});t.ui.dialog;t.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,n=this.options,i=n.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(i)?i:function(t){return t.is(i)},this.proportions=function(){if(!arguments.length)return e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});e=arguments[0]},this._addToManager(n.scope),n.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,n){if("accept"===e)this.accept=t.isFunction(n)?n:function(t){return t.is(n)};else if("scope"===e){var i=t.ui.ddmanager.droppables[this.options.scope];this._splice(i),this._addToManager(n)}this._super(e,n)},_activate:function(e){var n=t.ui.ddmanager.current;this._addActiveClass(),n&&this._trigger("activate",e,this.ui(n))},_deactivate:function(e){var n=t.ui.ddmanager.current;this._removeActiveClass(),n&&this._trigger("deactivate",e,this.ui(n))},_over:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(n)))},_out:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(n)))},_drop:function(e,n){var i=n||t.ui.ddmanager.current,o=!1;return!(!i||(i.currentItem||i.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var n=t(this).droppable("instance");if(n.options.greedy&&!n.options.disabled&&n.options.scope===i.options.scope&&n.accept.call(n.element[0],i.currentItem||i.element)&&g(i,t.extend(n,{offset:n.element.offset()}),n.options.tolerance,e))return o=!0,!1}),!o&&(!!this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(i)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var g=t.ui.intersect=function(){function t(t,e,n){return t>=e&&t<e+n}return function(e,n,i,o){if(!n.offset)return!1;var r=(e.positionAbs||e.position.absolute).left+e.margins.left,s=(e.positionAbs||e.position.absolute).top+e.margins.top,a=r+e.helperProportions.width,l=s+e.helperProportions.height,c=n.offset.left,u=n.offset.top,h=c+n.proportions().width,d=u+n.proportions().height;switch(i){case"fit":return c<=r&&a<=h&&u<=s&&l<=d;case"intersect":return c<r+e.helperProportions.width/2&&a-e.helperProportions.width/2<h&&u<s+e.helperProportions.height/2&&l-e.helperProportions.height/2<d;case"pointer":return t(o.pageY,u,n.proportions().height)&&t(o.pageX,c,n.proportions().width);case"touch":return(s>=u&&s<=d||l>=u&&l<=d||s<u&&l>d)&&(r>=c&&r<=h||a>=c&&a<=h||r<c&&a>h);default:return!1}}}();t.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,n){var i,o,r=t.ui.ddmanager.droppables[e.options.scope]||[],s=n?n.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(i=0;i<r.length;i++)if(!(r[i].options.disabled||e&&!r[i].accept.call(r[i].element[0],e.currentItem||e.element))){for(o=0;o<a.length;o++)if(a[o]===r[i].element[0]){r[i].proportions().height=0;continue t}r[i].visible="none"!==r[i].element.css("display"),r[i].visible&&("mousedown"===s&&r[i]._activate.call(r[i],n),r[i].offset=r[i].element.offset(),r[i].proportions({width:r[i].element[0].offsetWidth,height:r[i].element[0].offsetHeight}))}},drop:function(e,n){var i=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&g(e,this,this.options.tolerance,n)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),i},dragStart:function(e,n){e.element.parentsUntil("body").on("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)})},drag:function(e,n){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,n),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i,o,r,s=g(e,this,this.options.tolerance,n),a=!s&&this.isover?"isout":s&&!this.isover?"isover":null;a&&(this.options.greedy&&(o=this.options.scope,r=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===o}),r.length&&(i=t(r[0]).droppable("instance"),i.greedyChild="isover"===a)),i&&"isover"===a&&(i.isover=!1,i.isout=!0,i._out.call(i,n)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,n),i&&"isout"===a&&(i.isout=!1,i.isover=!0,i._over.call(i,n)))}})},dragStop:function(e,n){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)}},!1!==t.uiBackCompat&&t.widget("ui.droppable",t.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});t.ui.droppable,t.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=t("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(t){if(void 0===t)return this.options.value;this.options.value=this._constrainedValue(t),this._refreshValue()},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=!1===t,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).width(n.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,e===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}}),t.widget("ui.selectable",t.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e.elementPos=t(e.element[0]).offset(),e.selectees=t(e.options.filter,e.element[0]),e._addClass(e.selectees,"ui-selectee"),e.selectees.each(function(){var n=t(this),i=n.offset(),o={left:i.left-e.elementPos.left,top:i.top-e.elementPos.top};t.data(this,"selectable-item",{element:this,$element:n,left:o.left,top:o.top,right:o.left+n.outerWidth(),bottom:o.top+n.outerHeight(),startselected:!1,selected:n.hasClass("ui-selected"),selecting:n.hasClass("ui-selecting"),unselecting:n.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=t("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(e){var n=this,i=this.options;this.opos=[e.pageX,e.pageY],this.elementPos=t(this.element[0]).offset(),this.options.disabled||(this.selectees=t(i.filter,this.element[0]),this._trigger("start",e),t(i.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var i=t.data(this,"selectable-item");i.startselected=!0,e.metaKey||e.ctrlKey||(n._removeClass(i.$element,"ui-selected"),i.selected=!1,n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",e,{unselecting:i.element}))}),
t(e.target).parents().addBack().each(function(){var i,o=t.data(this,"selectable-item");if(o)return i=!e.metaKey&&!e.ctrlKey||!o.$element.hasClass("ui-selected"),n._removeClass(o.$element,i?"ui-unselecting":"ui-selected")._addClass(o.$element,i?"ui-selecting":"ui-unselecting"),o.unselecting=!i,o.selecting=i,o.selected=i,i?n._trigger("selecting",e,{selecting:o.element}):n._trigger("unselecting",e,{unselecting:o.element}),!1}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var n,i=this,o=this.options,r=this.opos[0],s=this.opos[1],a=e.pageX,l=e.pageY;return r>a&&(n=a,a=r,r=n),s>l&&(n=l,l=s,s=n),this.helper.css({left:r,top:s,width:a-r,height:l-s}),this.selectees.each(function(){var n=t.data(this,"selectable-item"),c=!1,u={};n&&n.element!==i.element[0]&&(u.left=n.left+i.elementPos.left,u.right=n.right+i.elementPos.left,u.top=n.top+i.elementPos.top,u.bottom=n.bottom+i.elementPos.top,"touch"===o.tolerance?c=!(u.left>a||u.right<r||u.top>l||u.bottom<s):"fit"===o.tolerance&&(c=u.left>r&&u.right<a&&u.top>s&&u.bottom<l),c?(n.selected&&(i._removeClass(n.$element,"ui-selected"),n.selected=!1),n.unselecting&&(i._removeClass(n.$element,"ui-unselecting"),n.unselecting=!1),n.selecting||(i._addClass(n.$element,"ui-selecting"),n.selecting=!0,i._trigger("selecting",e,{selecting:n.element}))):(n.selecting&&((e.metaKey||e.ctrlKey)&&n.startselected?(i._removeClass(n.$element,"ui-selecting"),n.selecting=!1,i._addClass(n.$element,"ui-selected"),n.selected=!0):(i._removeClass(n.$element,"ui-selecting"),n.selecting=!1,n.startselected&&(i._addClass(n.$element,"ui-unselecting"),n.unselecting=!0),i._trigger("unselecting",e,{unselecting:n.element}))),n.selected&&(e.metaKey||e.ctrlKey||n.startselected||(i._removeClass(n.$element,"ui-selected"),n.selected=!1,i._addClass(n.$element,"ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element})))))}),!1}},_mouseStop:function(e){var n=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var i=t.data(this,"selectable-item");n._removeClass(i.$element,"ui-unselecting"),i.unselecting=!1,i.startselected=!1,n._trigger("unselected",e,{unselected:i.element})}),t(".ui-selecting",this.element[0]).each(function(){var i=t.data(this,"selectable-item");n._removeClass(i.$element,"ui-selecting")._addClass(i.$element,"ui-selected"),i.selecting=!1,i.selected=!0,i.startselected=!0,n._trigger("selected",e,{selected:i.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),t.widget("ui.selectmenu",[t.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=t()},_drawButton:function(){var e,n=this,i=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(t){this.button.focus(),t.preventDefault()}}),this.element.hide(),this.button=t("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),e=t("<span>").appendTo(this.button),this._addClass(e,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(i).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){n._rendered||n._refreshMenu()})},_drawMenu:function(){var e=this;this.menu=t("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=t("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(t,n){t.preventDefault(),e._setSelection(),e._select(n.item.data("ui-selectmenu-item"),t)},focus:function(t,n){var i=n.item.data("ui-selectmenu-item");null!=e.focusIndex&&i.index!==e.focusIndex&&(e._trigger("focus",t,{item:i}),e.isOpen||e._select(i,t)),e.focusIndex=i.index,e.button.attr("aria-activedescendant",e.menuItems.eq(i.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var t,e=this.element.find("option");this.menu.empty(),this._parseOptions(e),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,e.length&&(t=this._getSelectedItem(),this.menuInstance.focus(null,t),this._setAria(t.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(t){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",t)))},_position:function(){this.menuWrap.position(t.extend({of:this.button},this.options.position))},close:function(t){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",t))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(e){var n=t("<span>");return this._setText(n,e.label),this._addClass(n,"ui-selectmenu-text"),n},_renderMenu:function(e,n){var i=this,o="";t.each(n,function(n,r){var s;r.optgroup!==o&&(s=t("<li>",{text:r.optgroup}),i._addClass(s,"ui-selectmenu-optgroup","ui-menu-divider"+(r.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),s.appendTo(e),o=r.optgroup),i._renderItemData(e,r)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-selectmenu-item",e)},_renderItem:function(e,n){var i=t("<li>"),o=t("<div>",{title:n.element.attr("title")});return n.disabled&&this._addClass(i,null,"ui-state-disabled"),this._setText(o,n.label),i.append(o).appendTo(e)},_setText:function(t,e){e?t.text(e):t.html("&#160;")},_move:function(t,e){var n,i,o=".ui-menu-item";this.isOpen?n=this.menuItems.eq(this.focusIndex).parent("li"):(n=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),o+=":not(.ui-state-disabled)"),i="first"===t||"last"===t?n["first"===t?"prevAll":"nextAll"](o).eq(-1):n[t+"All"](o).eq(0),i.length&&this.menuInstance.focus(e,i)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(t){this[this.isOpen?"close":"open"](t)},_setSelection:function(){var t;this.range&&(window.getSelection?(t=window.getSelection(),t.removeAllRanges(),t.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(e){this.isOpen&&(t(e.target).closest(".ui-selectmenu-menu, #"+t.ui.escapeSelector(this.ids.button)).length||this.close(e))}},_buttonEvents:{mousedown:function(){var t;window.getSelection?(t=window.getSelection(),t.rangeCount&&(this.range=t.getRangeAt(0))):this.range=document.selection.createRange()},click:function(t){this._setSelection(),this._toggle(t)},keydown:function(e){var n=!0;switch(e.keyCode){case t.ui.keyCode.TAB:case t.ui.keyCode.ESCAPE:this.close(e),n=!1;break;case t.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(e);break;case t.ui.keyCode.UP:e.altKey?this._toggle(e):this._move("prev",e);break;case t.ui.keyCode.DOWN:e.altKey?this._toggle(e):this._move("next",e);break;case t.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(e):this._toggle(e);break;case t.ui.keyCode.LEFT:this._move("prev",e);break;case t.ui.keyCode.RIGHT:this._move("next",e);break;case t.ui.keyCode.HOME:case t.ui.keyCode.PAGE_UP:this._move("first",e);break;case t.ui.keyCode.END:case t.ui.keyCode.PAGE_DOWN:this._move("last",e);break;default:this.menu.trigger(e),n=!1}n&&e.preventDefault()}},_selectFocusedItem:function(t){var e=this.menuItems.eq(this.focusIndex).parent("li");e.hasClass("ui-state-disabled")||this._select(e.data("ui-selectmenu-item"),t)},_select:function(t,e){var n=this.element[0].selectedIndex;this.element[0].selectedIndex=t.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(t)),this._setAria(t),this._trigger("select",e,{item:t}),t.index!==n&&this._trigger("change",e,{item:t}),this.close(e)},_setAria:function(t){var e=this.menuItems.eq(t.index).attr("id");this.button.attr({"aria-labelledby":e,"aria-activedescendant":e}),this.menu.attr("aria-activedescendant",e)},_setOption:function(t,e){if("icons"===t){var n=this.button.find("span.ui-icon");this._removeClass(n,null,this.options.icons.button)._addClass(n,null,e.button)}this._super(t,e),"appendTo"===t&&this.menuWrap.appendTo(this._appendTo()),"width"===t&&this._resizeButton()},_setOptionDisabled:function(t){this._super(t),this.menuInstance.option("disabled",t),this.button.attr("aria-disabled",t),this._toggleClass(this.button,null,"ui-state-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var t=this.options.width;if(!1===t)return void this.button.css("width","");null===t&&(t=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(t)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var t=this._super();return t.disabled=this.element.prop("disabled"),t},_parseOptions:function(e){var n=this,i=[];e.each(function(e,o){i.push(n._parseOption(t(o),e))}),this.items=i},_parseOption:function(t,e){var n=t.parent("optgroup");return{element:t,index:e,value:t.val(),label:t.text(),optgroup:n.attr("label")||"",disabled:n.prop("disabled")||t.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,n,i=this.options,o=this.element.find(".ui-slider-handle"),r=[];for(n=i.values&&i.values.length||1,o.length>n&&(o.slice(n).remove(),o=o.slice(0,n)),e=o.length;e<n;e++)r.push("<span tabindex='0'></span>");this.handles=o.add(t(r.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var n,i,o,r,s,a,l,c=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(n),o=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var n=Math.abs(i-c.values(e));(o>n||o===n&&(e===c._lastChangedValue||c.values(e)===u.min))&&(o=n,r=t(this),s=e)}),!1!==this._start(e,s)&&(this._mouseSliding=!0,this._handleIndex=s,this._addClass(r,null,"ui-state-active"),r.trigger("focus"),a=r.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-a.left-r.width()/2,top:e.pageY-a.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,s,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,i,o,r;return"horizontal"===this.orientation?(e=this.elementSize.width,n=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,n=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/e,i>1&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),o=this._valueMax()-this._valueMin(),r=this._valueMin()+i*o,this._trimAlignValue(r)},_uiHash:function(t,e,n){var i={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(i.value=void 0!==e?e:this.values(t),i.values=n||this.values()),i},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,n){var i,o=this.value(),r=this.values();this._hasMultipleValues()&&(i=this.values(e?0:1),o=this.values(e),2===this.options.values.length&&!0===this.options.range&&(n=0===e?Math.min(i,n):Math.max(i,n)),r[e]=n),n!==o&&!1!==this._trigger("slide",t,this._uiHash(e,n,r))&&(this._hasMultipleValues()?this.values(e,n):this.value(n))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,n){var i,o,r;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(i=this.options.values,o=arguments[0],r=0;r<i.length;r+=1)i[r]=this._trimAlignValue(o[r]),this._change(null,r);this._refreshValue()},_setOption:function(e,n){var i,o=0;switch("range"===e&&!0===this.options.range&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(o=this.options.values.length),this._super(e,n),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(n),this.handles.css("horizontal"===n?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=o-1;i>=0;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,n,i;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this._hasMultipleValues()){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,n=(t-this._valueMin())%e,i=t-n;return 2*Math.abs(n)>=e&&(i+=n>0?e:-e),parseFloat(i.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),n=this.options.step;t=Math.round((t-e)/n)*n+e,t>this.options.max&&(t-=n),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return-1===n?0:e.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,n,i,o,r,s=this.options.range,a=this.options,l=this,c=!this._animateOff&&a.animate,u={};this._hasMultipleValues()?this.handles.each(function(i){n=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100,u["horizontal"===l.orientation?"left":"bottom"]=n+"%",t(this).stop(1,1)[c?"animate":"css"](u,a.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},a.animate),1===i&&l.range[c?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:a.animate})):(0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},a.animate),1===i&&l.range[c?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:a.animate}))),e=n}):(i=this.value(),o=this._valueMin(),r=this._valueMax(),n=r!==o?(i-o)/(r-o)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[c?"animate":"css"](u,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:100-n+"%"},a.animate),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:100-n+"%"},a.animate))},_handleEvents:{keydown:function(e){var n,i,o,r=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),!1===this._start(e,r)))return}switch(o=this.options.step,n=i=this._hasMultipleValues()?this.values(r):this.value(),e.keyCode){case t.ui.keyCode.HOME:i=this._valueMin();break;case t.ui.keyCode.END:i=this._valueMax();break;case t.ui.keyCode.PAGE_UP:i=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;i=this._trimAlignValue(n+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;i=this._trimAlignValue(n-o)}this._slide(e,r,i)},keyup:function(e){var n=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,n),this._change(e,n),this._removeClass(t(e.target),null,"ui-state-active"))}}}),t.widget("ui.sortable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,n){return t>=e&&t<e+n},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,n){var i=null,o=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),t(e.target).parents().each(function(){if(t.data(this,r.widgetName+"-item")===r)return i=t(this),!1}),t.data(e.target,r.widgetName+"-item")===r&&(i=t(e.target)),!!i&&(!(this.options.handle&&!n&&(t(this.options.handle,i).find("*").addBack().each(function(){this===e.target&&(o=!0)}),!o))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,n,i){var o,r,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",s.cursor),this.storedStylesheet=t("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var n,i,o,r,s=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(e.pageY-this.document.scrollTop()<s.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-s.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<s.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+s.scrollSpeed)),e.pageX-this.document.scrollLeft()<s.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-s.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<s.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+s.scrollSpeed))),!1!==a&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],o=i.item[0],(r=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&!(o===this.currentItem[0]||this.placeholder[1===r?"next":"prev"]()[0]===o||t.contains(this.placeholder[0],o)||"semi-dynamic"===this.options.type&&t.contains(this.element[0],o))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(e,i),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,n){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var i=this,o=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){i._clear(e)})}else this._clear(e,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},t(n).each(function(){var n=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);n&&i.push((e.key||n[1]+"[]")+"="+(e.key&&e.expression?n[1]:n[2]))}),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},n.each(function(){i.push(t(e.item||this).attr(e.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,o=i+this.helperProportions.height,r=t.left,s=r+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,u=this.offset.click.left,h="x"===this.options.axis||i+c>a&&i+c<l,d="y"===this.options.axis||e+u>r&&e+u<s,p=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:r<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<s&&a<i+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e,n,i="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),o="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width);return!(!i||!o)&&(e=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection(),this.floating?"right"===n||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:i&&("down"===i&&e||"up"===i&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left
;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function n(){a.push(this)}var i,o,r,s,a=[],l=[],c=this._connectWith();if(c&&e)for(i=c.length-1;i>=0;i--)for(r=t(c[i],this.document[0]),o=r.length-1;o>=0;o--)(s=t.data(r[o],this.widgetFullName))&&s!==this&&!s.options.disabled&&l.push([t.isFunction(s.options.items)?s.options.items.call(s.element):t(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(l.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=l.length-1;i>=0;i--)l[i][0].each(n);return t(a)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var n=0;n<e.length;n++)if(e[n]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var n,i,o,r,s,a,l,c,u=this.items,h=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(n=d.length-1;n>=0;n--)for(o=t(d[n],this.document[0]),i=o.length-1;i>=0;i--)(r=t.data(o[i],this.widgetFullName))&&r!==this&&!r.options.disabled&&(h.push([t.isFunction(r.options.items)?r.options.items.call(r.element[0],e,{item:this.currentItem}):t(r.options.items,r.element),r]),this.containers.push(r));for(n=h.length-1;n>=0;n--)for(s=h[n][1],a=h[n][0],i=0,c=a.length;i<c;i++)l=t(a[i]),l.data(this.widgetName+"-item",s),u.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,o,r;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?t(this.options.toleranceElement,i.item):i.item,e||(i.width=o.outerWidth(),i.height=o.outerHeight()),r=o.offset(),i.left=r.left,i.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)r=this.containers[n].element.offset(),this.containers[n].containerCache.left=r.left,this.containers[n].containerCache.top=r.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var n,i=e.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=e.currentItem[0].nodeName.toLowerCase(),o=t("<"+i+">",e.document[0]);return e._addClass(o,"ui-sortable-placeholder",n||e.currentItem[0].className)._removeClass(o,"ui-sortable-helper"),"tbody"===i?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(o)):"tr"===i?e._createTrPlaceholder(e.currentItem,o):"img"===i&&o.attr("src",e.currentItem.attr("src")),n||o.css("visibility","hidden"),o},update:function(t,o){n&&!i.forcePlaceholderSize||(o.height()||o.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(i.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),i.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,n){var i=this;e.children().each(function(){t("<td>&#160;</td>",i.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(e){var n,i,o,r,s,a,l,c,u,h,d=null,p=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(d&&t.contains(this.containers[n].element[0],d.element[0]))continue;d=this.containers[n],p=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",e,this._uiHash(this)),this.containers[n].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(o=1e4,r=null,u=d.floating||this._isFloating(this.currentItem),s=u?"left":"top",a=u?"width":"height",h=u?"pageX":"pageY",i=this.items.length-1;i>=0;i--)t.contains(this.containers[p].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(l=this.items[i].item.offset()[s],c=!1,e[h]-l>this.items[i][a]/2&&(c=!0),Math.abs(e[h]-l)<o&&(o=Math.abs(e[h]-l),r=this.items[i],this.direction=c?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(e,r,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||t("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),i[0].style.width&&!n.forceHelperSize||i.width(this.currentItem.width()),i[0].style.height&&!n.forceHelperSize||i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),"document"!==o.containment&&"window"!==o.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(e=t(o.containment)[0],n=t(o.containment).offset(),i="hidden"!==t(e).css("overflow"),this.containment=[n.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*i}},_generatePosition:function(e){var n,i,o=this.options,r=e.pageX,s=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),o.grid&&(n=this.originalPageY+Math.round((s-this.originalPageY)/o.grid[1])*o.grid[1],s=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-o.grid[1]:n+o.grid[1]:n,i=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-o.grid[0]:i+o.grid[0]:i)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!i)})},_clear:function(t,e){function n(t,e,n){return function(i){n._trigger(t,i,e._uiHash(e))}}this.reverting=!1;var i,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&o.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||o.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(o.push(function(t){this._trigger("remove",t,this._uiHash())}),o.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||o.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(o.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(i=0;i<o.length;i++)o[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var n=e||this;return{helper:n.helper,placeholder:n.placeholder||t([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:e?e.element:null}}});t.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e=this._super(),n=this.element;return t.each(["min","max","step"],function(t,i){var o=n.attr(i);null!=o&&o.length&&(e[i]=o)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){if(this.cancelBlur)return void delete this.cancelBlur;this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t)},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function n(){this.element[0]===t.ui.safeActiveElement(this.document[0])||(this.element.trigger("focus"),this.previous=i,this._delay(function(){this.previous=i}))}var i;i=this.element[0]===t.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),e.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),!1!==this._start(e)&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){if(t(e.currentTarget).hasClass("ui-state-active"))return!1!==this._start(e)&&void this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(e){var n=this.options,i=t.ui.keyCode;switch(e.keyCode){case i.UP:return this._repeat(null,1,e),!0;case i.DOWN:return this._repeat(null,-1,e),!0;case i.PAGE_UP:return this._repeat(null,n.page,e),!0;case i.PAGE_DOWN:return this._repeat(null,-n.page,e),!0}return!1},_start:function(t){return!(!this.spinning&&!1===this._trigger("start",t))&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(t,e,n){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,n)},t),this._spin(e*this.options.step,n)},_spin:function(t,e){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+t*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",e,{value:n})||(this._value(n),this.counter++)},_increment:function(e){var n=this.options.incremental;return n?t.isFunction(n)?n(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return-1===n?0:e.length-n-1},_adjustValue:function(t){var e,n,i=this.options;return e=null!==i.min?i.min:0,n=t-e,n=Math.round(n/i.step)*i.step,t=e+n,t=parseFloat(t.toFixed(this._precision())),null!==i.max&&t>i.max?i.max:null!==i.min&&t<i.min?i.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){var n,i,o;if("culture"===t||"numberFormat"===t)return n=this._parse(this.element.val()),this.options[t]=e,void this.element.val(this._format(n));"max"!==t&&"min"!==t&&"step"!==t||"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(i=this.buttons.first().find(".ui-icon"),this._removeClass(i,null,this.options.icons.up),this._addClass(i,null,e.up),o=this.buttons.last().find(".ui-icon"),this._removeClass(o,null,this.options.icons.down),this._addClass(o,null,e.down)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable")},_setOptions:a(function(t){this._super(t)}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var t=this.value();return null!==t&&t===this._adjustValue(t)},_value:function(t,e){var n;""!==t&&null!==(n=this._parse(t))&&(e||(n=this._adjustValue(n)),t=this._format(n)),this.element.val(t),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:a(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:a(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:a(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:a(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){if(!arguments.length)return this._parse(this.element.val());a(this._value).call(this,t)},widget:function(){return this.uiSpinner}}),!1!==t.uiBackCompat&&t.widget("ui.spinner",t.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}});t.ui.spinner;t.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var t=/#.*$/;return function(e){var n,i;n=e.href.replace(t,""),i=location.href.replace(t,"");try{n=decodeURIComponent(n)}catch(t){}try{i=decodeURIComponent(i)}catch(t){}return e.hash.length>1&&n===i}}(),_create:function(){var e=this,n=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,n.collapsible),this._processTabs(),n.active=this._initialActive(),t.isArray(n.disabled)&&(n.disabled=t.unique(n.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(n.active):this.active=t(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var e=this.options.active,n=this.options.collapsible,i=location.hash.substring(1);return null===e&&(i&&this.tabs.each(function(n,o){if(t(o).attr("aria-controls")===i)return e=n,!1}),null===e&&(e=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==e&&-1!==e||(e=!!this.tabs.length&&0)),!1!==e&&-1===(e=this.tabs.index(this.tabs.eq(e)))&&(e=!n&&0),!n&&!1===e&&this.anchors.length&&(e=0),e},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var n=t(t.ui.safeActiveElement(this.document[0])).closest("li"),i=this.tabs.index(n),o=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:i++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:o=!1,i--;break;case t.ui.keyCode.END:i=this.anchors.length-1;break;case t.ui.keyCode.HOME:i=0;break;case t.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(i);case t.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(i!==this.options.active&&i);default:return}e.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,o),e.ctrlKey||e.metaKey||(n.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(e){return e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,n){for(var i=this.tabs.length-1;-1!==t.inArray(function(){return e>i&&(e=0),e<0&&(e=i),e}(),this.options.disabled);)e=n?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).trigger("focus"),t},_setOption:function(t,e){if("active"===t)return void this._activate(e);this._super(t,e),"collapsible"===t&&(this._toggleClass("ui-tabs-collapsible",null,e),e||!1!==this.options.active||this._activate(0)),"event"===t&&this._setupEvents(e),"heightStyle"===t&&this._setupHeightStyle(e)},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,n=this.tablist.children(":has(a[href])");e.disabled=t.map(n.filter(".ui-state-disabled"),function(t){return n.index(t)}),this._processTabs(),!1!==e.active&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this,n=this.tabs,i=this.anchors,o=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=t(),this.anchors.each(function(n,i){var o,r,s,a=t(i).uniqueId().attr("id"),l=t(i).closest("li"),c=l.attr("aria-controls");e._isLocal(i)?(o=i.hash,s=o.substring(1),r=e.element.find(e._sanitizeSelector(o))):(s=l.attr("aria-controls")||t({}).uniqueId()[0].id,o="#"+s,r=e.element.find(o),r.length||(r=e._createPanel(s),r.insertAfter(e.panels[n-1]||e.tablist)),r.attr("aria-live","polite")),r.length&&(e.panels=e.panels.add(r)),c&&l.data("ui-tabs-aria-controls",c),l.attr({"aria-controls":s,"aria-labelledby":a}),r.attr("aria-labelledby",a)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),n&&(this._off(n.not(this.tabs)),this._off(i.not(this.anchors)),this._off(o.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(e){var n,i,o;for(t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1),o=0;i=this.tabs[o];o++)n=t(i),!0===e||-1!==t.inArray(o,e)?(n.attr("aria-disabled","true"),this._addClass(n,null,"ui-state-disabled")):(n.removeAttr("aria-disabled"),this._removeClass(n,null,"ui-state-disabled"));this.options.disabled=e,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===e)},_setupEvents:function(e){var n={};e&&t.each(e.split(" "),function(t,e){n[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var n,i=this.element.parent();"fill"===e?(n=i.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),i=e.css("position");"absolute"!==i&&"fixed"!==i&&(n-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,n-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(n=0,this.panels.each(function(){n=Math.max(n,t(this).height("").height())}).height(n))},_eventHandler:function(e){var n=this.options,i=this.active,o=t(e.currentTarget),r=o.closest("li"),s=r[0]===i[0],a=s&&n.collapsible,l=a?t():this._getPanelForTab(r),c=i.length?this._getPanelForTab(i):t(),u={oldTab:i,oldPanel:c,newTab:a?t():r,newPanel:l};e.preventDefault(),r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||s&&!n.collapsible||!1===this._trigger("beforeActivate",e,u)||(n.active=!a&&this.tabs.index(r),this.active=s?t():r,this.xhr&&this.xhr.abort(),c.length||l.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(r),e),this._toggle(e,u))},_toggle:function(e,n){function i(){r.running=!1,r._trigger("activate",e,n)}function o(){r._addClass(n.newTab.closest("li"),"ui-tabs-active","ui-state-active"),s.length&&r.options.show?r._show(s,r.options.show,i):(s.show(),i())}var r=this,s=n.newPanel,a=n.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){r._removeClass(n.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),o()}):(this._removeClass(n.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),a.hide(),o()),a.attr("aria-hidden","true"),n.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),s.length&&a.length?n.oldTab.attr("tabIndex",-1):s.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),s.attr("aria-hidden","false"),n.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(e){var n,i=this._findActive(e);i[0]!==this.active[0]&&(i.length||(i=this.active),n=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:t.noop}))},_findActive:function(e){return!1===e?t():this.tabs.eq(e)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+t.ui.escapeSelector(e)+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var e=t(this),n=e.data("ui-tabs-aria-controls");n?e.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(e){var n=this.options.disabled;!1!==n&&(void 0===e?n=!1:(e=this._getIndex(e),
n=t.isArray(n)?t.map(n,function(t){return t!==e?t:null}):t.map(this.tabs,function(t,n){return n!==e?n:null})),this._setOptionDisabled(n))},disable:function(e){var n=this.options.disabled;if(!0!==n){if(void 0===e)n=!0;else{if(e=this._getIndex(e),-1!==t.inArray(e,n))return;n=t.isArray(n)?t.merge([e],n).sort():[e]}this._setOptionDisabled(n)}},load:function(e,n){e=this._getIndex(e);var i=this,o=this.tabs.eq(e),r=o.find(".ui-tabs-anchor"),s=this._getPanelForTab(o),a={tab:o,panel:s},l=function(t,e){"abort"===e&&i.panels.stop(!1,!0),i._removeClass(o,"ui-tabs-loading"),s.removeAttr("aria-busy"),t===i.xhr&&delete i.xhr};this._isLocal(r[0])||(this.xhr=t.ajax(this._ajaxSettings(r,n,a)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(o,"ui-tabs-loading"),s.attr("aria-busy","true"),this.xhr.done(function(t,e,o){setTimeout(function(){s.html(t),i._trigger("load",n,a),l(o,e)},1)}).fail(function(t,e){setTimeout(function(){l(t,e)},1)})))},_ajaxSettings:function(e,n,i){var o=this;return{url:e.attr("href").replace(/#.*$/,""),beforeSend:function(e,r){return o._trigger("beforeLoad",n,t.extend({jqXHR:e,ajaxSettings:r},i))}}},_getPanelForTab:function(e){var n=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}}),!1!==t.uiBackCompat&&t.widget("ui.tabs",t.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}});t.ui.tabs;t.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(e,n){var i=(e.attr("aria-describedby")||"").split(/\s+/);i.push(n),e.data("ui-tooltip-id",n).attr("aria-describedby",t.trim(i.join(" ")))},_removeDescribedBy:function(e){var n=e.data("ui-tooltip-id"),i=(e.attr("aria-describedby")||"").split(/\s+/),o=t.inArray(n,i);-1!==o&&i.splice(o,1),e.removeData("ui-tooltip-id"),i=t.trim(i.join(" ")),i?e.attr("aria-describedby",i):e.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=t("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=t([])},_setOption:function(e,n){var i=this;this._super(e,n),"content"===e&&t.each(this.tooltips,function(t,e){i._updateContent(e.element)})},_setOptionDisabled:function(t){this[t?"_disable":"_enable"]()},_disable:function(){var e=this;t.each(this.tooltips,function(n,i){var o=t.Event("blur");o.target=o.currentTarget=i.element[0],e.close(o,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var e=t(this);if(e.is("[title]"))return e.data("ui-tooltip-title",e.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))}),this.disabledTitles=t([])},open:function(e){var n=this,i=t(e?e.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&i.parents().each(function(){var e,i=t(this);i.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,n.close(e,!0)),i.attr("title")&&(i.uniqueId(),n.parents[this.id]={element:this,title:i.attr("title")},i.attr("title",""))}),this._registerCloseHandlers(e,i),this._updateContent(i,e))},_updateContent:function(t,e){var n,i=this.options.content,o=this,r=e?e.type:null;if("string"==typeof i||i.nodeType||i.jquery)return this._open(e,t,i);(n=i.call(t[0],function(n){o._delay(function(){t.data("ui-tooltip-open")&&(e&&(e.type=r),this._open(e,t,n))})}))&&this._open(e,t,n)},_open:function(e,n,i){function o(t){c.of=t,s.is(":hidden")||s.position(c)}var r,s,a,l,c=t.extend({},this.options.position);if(i){if(r=this._find(n))return void r.tooltip.find(".ui-tooltip-content").html(i);n.is("[title]")&&(e&&"mouseover"===e.type?n.attr("title",""):n.removeAttr("title")),r=this._tooltip(n),s=r.tooltip,this._addDescribedBy(n,s.attr("id")),s.find(".ui-tooltip-content").html(i),this.liveRegion.children().hide(),l=t("<div>").html(s.find(".ui-tooltip-content").html()),l.removeAttr("name").find("[name]").removeAttr("name"),l.removeAttr("id").find("[id]").removeAttr("id"),l.appendTo(this.liveRegion),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:o}),o(e)):s.position(t.extend({of:n},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(a=this.delayedShow=setInterval(function(){s.is(":visible")&&(o(c.of),clearInterval(a))},t.fx.interval)),this._trigger("open",e,{tooltip:s})}},_registerCloseHandlers:function(e,n){var i={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var i=t.Event(e);i.currentTarget=n[0],this.close(i,!0)}}};n[0]!==this.element[0]&&(i.remove=function(){this._removeTooltip(this._find(n).tooltip)}),e&&"mouseover"!==e.type||(i.mouseleave="close"),e&&"focusin"!==e.type||(i.focusout="close"),this._on(!0,n,i)},close:function(e){var n,i=this,o=t(e?e.currentTarget:this.element),r=this._find(o);if(!r)return void o.removeData("ui-tooltip-open");n=r.tooltip,r.closing||(clearInterval(this.delayedShow),o.data("ui-tooltip-title")&&!o.attr("title")&&o.attr("title",o.data("ui-tooltip-title")),this._removeDescribedBy(o),r.hiding=!0,n.stop(!0),this._hide(n,this.options.hide,function(){i._removeTooltip(t(this))}),o.removeData("ui-tooltip-open"),this._off(o,"mouseleave focusout keyup"),o[0]!==this.element[0]&&this._off(o,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,n){t(n.element).attr("title",n.title),delete i.parents[e]}),r.closing=!0,this._trigger("close",e,{tooltip:n}),r.hiding||(r.closing=!1))},_tooltip:function(e){var n=t("<div>").attr("role","tooltip"),i=t("<div>").appendTo(n),o=n.uniqueId().attr("id");return this._addClass(i,"ui-tooltip-content"),this._addClass(n,"ui-tooltip","ui-widget ui-widget-content"),n.appendTo(this._appendTo(e)),this.tooltips[o]={element:e,tooltip:n}},_find:function(t){var e=t.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_appendTo:function(t){var e=t.closest(".ui-front, dialog");return e.length||(e=this.document[0].body),e},_destroy:function(){var e=this;t.each(this.tooltips,function(n,i){var o=t.Event("blur"),r=i.element;o.target=o.currentTarget=r[0],e.close(o,!0),t("#"+n).remove(),r.data("ui-tooltip-title")&&(r.attr("title")||r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),!1!==t.uiBackCompat&&t.widget("ui.tooltip",t.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);return this.options.tooltipClass&&t.tooltip.addClass(this.options.tooltipClass),t}});t.ui.tooltip}),function(t){"function"==typeof define&&define.amd?define("touch-punch",["jquery","jquery-ui"],t):t(jQuery)}(function(t){function e(t){var e=window.pageXOffset,n=window.pageYOffset,i=t.clientX,o=t.clientY;return 0===t.pageY&&Math.floor(o)>Math.floor(t.pageY)||0===t.pageX&&Math.floor(i)>Math.floor(t.pageX)?(i-=e,o-=n):(o<t.pageY-n||i<t.pageX-e)&&(i=t.pageX-e,o=t.pageY-n),{clientX:i,clientY:o}}function n(n,o){if(!(!i&&n.originalEvent.touches.length>1||i&&!n.isPrimary)){var r=i?n.originalEvent:n.originalEvent.changedTouches[0],s=document.createEvent("MouseEvents"),a=e(r);t(r.target).is("input")||t(r.target).is("textarea")?n.stopPropagation():n.preventDefault(),s.initMouseEvent(o,!0,!0,window,1,n.screenX||r.screenX,n.screenY||r.screenY,n.clientX||a.clientX,n.clientY||a.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(s)}}var i=window.navigator.pointerEnabled||window.navigator.msPointerEnabled;if(t.support.touch="ontouchend"in document||i,t.support.touch&&t.ui.mouse){var o,r=t.ui.mouse.prototype,s=r._mouseInit;r._touchStart=function(t){var e=this;o||!i&&!e._mouseCapture(t.originalEvent.changedTouches[0])||(o=!0,e._touchMoved=!1,n(t,"mouseover"),n(t,"mousemove"),n(t,"mousedown"))},r._touchMove=function(t){o&&(this._touchMoved=!0,n(t,"mousemove"))},r._touchEnd=function(t){o&&(n(t,"mouseup"),n(t,"mouseout"),this._touchMoved||n(t,"click"),o=!1)},r._mouseInit=function(){var e=this;e.element.on({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd"),pointerDown:t.proxy(e,"_touchStart"),pointerMove:t.proxy(e,"_touchMove"),pointerUp:t.proxy(e,"_touchEnd"),MSPointerDown:t.proxy(e,"_touchStart"),MSPointerMove:t.proxy(e,"_touchMove"),MSPointerUp:t.proxy(e,"_touchEnd")}),s.call(e)}}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("promise",e):t.ES6Promise=e()}(this,function(){"use strict";function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function e(t){return"function"==typeof t}function n(t){U=t}function i(t){$=t}function o(){return void 0!==N?function(){N(s)}:r()}function r(){var t=setTimeout;return function(){return t(s,1)}}function s(){for(var t=0;t<F;t+=2){(0,Y[t])(Y[t+1]),Y[t]=void 0,Y[t+1]=void 0}F=0}function a(t,e){var n=this,i=new this.constructor(c);void 0===i[Q]&&P(i);var o=n._state;if(o){var r=arguments[o-1];$(function(){return k(o,i,r,n._result)})}else w(n,i,t,e);return i}function l(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(c);return v(n,t),n}function c(){}function u(){return new TypeError("You cannot resolve a promise with itself")}function h(){return new TypeError("A promises callback cannot return that same promise.")}function d(t){try{return t.then}catch(t){return J.error=t,J}}function p(t,e,n,i){try{t.call(e,n,i)}catch(t){return t}}function f(t,e,n){$(function(t){var i=!1,o=p(n,e,function(n){i||(i=!0,e!==n?v(t,n):b(t,n))},function(e){i||(i=!0,_(t,e))},"Settle: "+(t._label||" unknown promise"));!i&&o&&(i=!0,_(t,o))},t)}function g(t,e){e._state===X?b(t,e._result):e._state===Z?_(t,e._result):w(e,void 0,function(e){return v(t,e)},function(e){return _(t,e)})}function m(t,n,i){n.constructor===t.constructor&&i===a&&n.constructor.resolve===l?g(t,n):i===J?(_(t,J.error),J.error=null):void 0===i?b(t,n):e(i)?f(t,n,i):b(t,n)}function v(e,n){e===n?_(e,u()):t(n)?m(e,n,d(n)):b(e,n)}function y(t){t._onerror&&t._onerror(t._result),C(t)}function b(t,e){t._state===K&&(t._result=e,t._state=X,0!==t._subscribers.length&&$(C,t))}function _(t,e){t._state===K&&(t._state=Z,t._result=e,$(y,t))}function w(t,e,n,i){var o=t._subscribers,r=o.length;t._onerror=null,o[r]=e,o[r+X]=n,o[r+Z]=i,0===r&&t._state&&$(C,t)}function C(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i=void 0,o=void 0,r=t._result,s=0;s<e.length;s+=3)i=e[s],o=e[s+n],i?k(n,i,o,r):o(r);t._subscribers.length=0}}function x(){this.error=null}function T(t,e){try{return t(e)}catch(t){return tt.error=t,tt}}function k(t,n,i,o){var r=e(i),s=void 0,a=void 0,l=void 0,c=void 0;if(r){if(s=T(i,o),s===tt?(c=!0,a=s.error,s.error=null):l=!0,n===s)return void _(n,h())}else s=o,l=!0;n._state!==K||(r&&l?v(n,s):c?_(n,a):t===X?b(n,s):t===Z&&_(n,s))}function S(t,e){try{e(function(e){v(t,e)},function(e){_(t,e)})}catch(e){_(t,e)}}function E(){return et++}function P(t){t[Q]=et++,t._state=void 0,t._result=void 0,t._subscribers=[]}function A(){return new Error("Array Methods must be provided an Array")}function A(){return new Error("Array Methods must be provided an Array")}function I(t){return new nt(this,t).promise}function O(t){var e=this;return new e(B(t)?function(n,i){for(var o=t.length,r=0;r<o;r++)e.resolve(t[r]).then(n,i)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function M(t){var e=this,n=new e(c);return _(n,t),n}function D(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function L(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function j(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=it}var R=void 0;R=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var B=R,F=0,N=void 0,U=void 0,$=function(t,e){Y[F]=t,Y[F+1]=e,2===(F+=2)&&(U?U(s):G())},q="undefined"!=typeof window?window:void 0,H=q||{},V=H.MutationObserver||H.WebKitMutationObserver,z="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),W="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Y=new Array(1e3),G=void 0;G=z?function(){return function(){return process.nextTick(s)}}():V?function(){var t=0,e=new V(s),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():W?function(){var t=new MessageChannel;return t.port1.onmessage=s,function(){return t.port2.postMessage(0)}}():void 0===q&&"function"==typeof require?function(){try{var t=require,e=t("vertx");return N=e.runOnLoop||e.runOnContext,o()}catch(t){return r()}}():r();var Q=Math.random().toString(36).substring(16),K=void 0,X=1,Z=2,J=new x,tt=new x,et=0,nt=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(c),this.promise[Q]||P(this.promise),B(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?b(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&b(this.promise,this._result))):_(this.promise,A())}return t.prototype._enumerate=function(t){for(var e=0;this._state===K&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===l){var o=d(t);if(o===a&&t._state!==K)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===it){var r=new n(c);m(r,t,o),this._willSettleAt(r,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(i(t),e)},t.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===K&&(this._remaining--,t===Z?_(i,n):this._result[e]=n),0===this._remaining&&b(i,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;w(t,void 0,function(t){return n._settledAt(X,e,t)},function(t){return n._settledAt(Z,e,t)})},t}(),it=function(){function t(e){this[Q]=E(),this._result=this._state=void 0,this._subscribers=[],c!==e&&("function"!=typeof e&&D(),this instanceof t?S(this,e):L())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var e=this,n=e.constructor;return e.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})})},t}();return it.prototype.then=a,it.all=I,it.race=O,it.resolve=l,it.reject=M,it._setScheduler=n,it._setAsap=i,it._asap=$,it.polyfill=j,it.Promise=it,it}),function(){function t(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function e(t,e,n,i){for(var o=-1,r=null==t?0:t.length;++o<r;){var s=t[o];e(i,s,n(s),t)}return i}function n(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function i(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function o(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function r(t,e){for(var n=-1,i=null==t?0:t.length,o=0,r=[];++n<i;){var s=t[n];e(s,n,t)&&(r[o++]=s)}return r}function s(t,e){return!!(null==t?0:t.length)&&v(t,e,0)>-1}function a(t,e,n){for(var i=-1,o=null==t?0:t.length;++i<o;)if(n(e,t[i]))return!0;return!1}function l(t,e){for(var n=-1,i=null==t?0:t.length,o=Array(i);++n<i;)o[n]=e(t[n],n,t);return o}function c(t,e){for(var n=-1,i=e.length,o=t.length;++n<i;)t[o+n]=e[n];return t}function u(t,e,n,i){var o=-1,r=null==t?0:t.length;for(i&&r&&(n=t[++o]);++o<r;)n=e(n,t[o],o,t);return n}function h(t,e,n,i){var o=null==t?0:t.length;for(i&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function d(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function p(t){return t.split("")}function f(t){return t.match(Me)||[]}function g(t,e,n){var i;return n(t,function(t,n,o){if(e(t,n,o))return i=n,!1}),i}function m(t,e,n,i){for(var o=t.length,r=n+(i?1:-1);i?r--:++r<o;)if(e(t[r],r,t))return r;return-1}function v(t,e,n){return e===e?V(t,e,n):m(t,b,n)}function y(t,e,n,i){for(var o=n-1,r=t.length;++o<r;)if(i(t[o],e))return o;return-1}function b(t){return t!==t}function _(t,e){var n=null==t?0:t.length;return n?k(t,e)/n:Pt}function w(t){return function(e){return null==e?X:e[t]}}function C(t){return function(e){return null==t?X:t[e]}}function x(t,e,n,i,o){return o(t,function(t,o,r){n=i?(i=!1,t):e(n,t,o,r)}),n}function T(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function k(t,e){for(var n,i=-1,o=t.length;++i<o;){var r=e(t[i]);r!==X&&(n=n===X?r:n+r)}return n}function S(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function E(t,e){return l(e,function(e){return[e,t[e]]})}function P(t){return function(e){return t(e)}}function A(t,e){return l(e,function(e){return t[e]})}function I(t,e){return t.has(e)}function O(t,e){for(var n=-1,i=t.length;++n<i&&v(e,t[n],0)>-1;);return n}function M(t,e){for(var n=t.length;n--&&v(e,t[n],0)>-1;);return n}function D(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}function L(t){return"\\"+_n[t]}function j(t,e){return null==t?X:t[e]}function R(t){return hn.test(t)}function B(t){return dn.test(t)}function F(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function N(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function U(t,e){return function(n){return t(e(n))}}function $(t,e){for(var n=-1,i=t.length,o=0,r=[];++n<i;){var s=t[n];s!==e&&s!==it||(t[n]=it,r[o++]=n)}return r}function q(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function H(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function V(t,e,n){for(var i=n-1,o=t.length;++i<o;)if(t[i]===e)return i;return-1}function z(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}function W(t){return R(t)?G(t):Bn(t)}function Y(t){return R(t)?Q(t):p(t)}function G(t){for(var e=cn.lastIndex=0;cn.test(t);)++e;return e}function Q(t){return t.match(cn)||[]}function K(t){return t.match(un)||[]}var X,Z=200,J="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",tt="Expected a function",et="__lodash_hash_undefined__",nt=500,it="__lodash_placeholder__",ot=1,rt=2,st=4,at=1,lt=2,ct=1,ut=2,ht=4,dt=8,pt=16,ft=32,gt=64,mt=128,vt=256,yt=512,bt=30,_t="...",wt=800,Ct=16,xt=1,Tt=2,kt=1/0,St=9007199254740991,Et=1.7976931348623157e308,Pt=NaN,At=4294967295,It=At-1,Ot=At>>>1,Mt=[["ary",mt],["bind",ct],["bindKey",ut],["curry",dt],["curryRight",pt],["flip",yt],["partial",ft],["partialRight",gt],["rearg",vt]],Dt="[object Arguments]",Lt="[object Array]",jt="[object AsyncFunction]",Rt="[object Boolean]",Bt="[object Date]",Ft="[object DOMException]",Nt="[object Error]",Ut="[object Function]",$t="[object GeneratorFunction]",qt="[object Map]",Ht="[object Number]",Vt="[object Null]",zt="[object Object]",Wt="[object Proxy]",Yt="[object RegExp]",Gt="[object Set]",Qt="[object String]",Kt="[object Symbol]",Xt="[object Undefined]",Zt="[object WeakMap]",Jt="[object WeakSet]",te="[object ArrayBuffer]",ee="[object DataView]",ne="[object Float32Array]",ie="[object Float64Array]",oe="[object Int8Array]",re="[object Int16Array]",se="[object Int32Array]",ae="[object Uint8Array]",le="[object Uint8ClampedArray]",ce="[object Uint16Array]",ue="[object Uint32Array]",he=/\b__p \+= '';/g,de=/\b(__p \+=) '' \+/g,pe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,fe=/&(?:amp|lt|gt|quot|#39);/g,ge=/[&<>"']/g,me=RegExp(fe.source),ve=RegExp(ge.source),ye=/<%-([\s\S]+?)%>/g,be=/<%([\s\S]+?)%>/g,_e=/<%=([\s\S]+?)%>/g,we=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ce=/^\w*$/,xe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Te=/[\\^$.*+?()[\]{}|]/g,ke=RegExp(Te.source),Se=/^\s+|\s+$/g,Ee=/^\s+/,Pe=/\s+$/,Ae=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ie=/\{\n\/\* \[wrapped with (.+)\] \*/,Oe=/,? & /,Me=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,De=/\\(\\)?/g,Le=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,je=/\w*$/,Re=/^[-+]0x[0-9a-f]+$/i,Be=/^0b[01]+$/i,Fe=/^\[object .+?Constructor\]$/,Ne=/^0o[0-7]+$/i,Ue=/^(?:0|[1-9]\d*)$/,$e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qe=/($^)/,He=/['\n\r\u2028\u2029\\]/g,Ve="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ze="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",We="["+ze+"]",Ye="["+Ve+"]",Ge="[a-z\\xdf-\\xf6\\xf8-\\xff]",Qe="[^\\ud800-\\udfff"+ze+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Ke="\\ud83c[\\udffb-\\udfff]",Xe="(?:\\ud83c[\\udde6-\\uddff]){2}",Ze="[\\ud800-\\udbff][\\udc00-\\udfff]",Je="[A-Z\\xc0-\\xd6\\xd8-\\xde]",tn="(?:"+Ge+"|"+Qe+")",en="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",nn="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",Xe,Ze].join("|")+")[\\ufe0e\\ufe0f]?"+en+")*",on="[\\ufe0e\\ufe0f]?"+en+nn,rn="(?:"+["[\\u2700-\\u27bf]",Xe,Ze].join("|")+")"+on,sn="(?:"+["[^\\ud800-\\udfff]"+Ye+"?",Ye,Xe,Ze,"[\\ud800-\\udfff]"].join("|")+")",an=RegExp("['’]","g"),ln=RegExp(Ye,"g"),cn=RegExp(Ke+"(?="+Ke+")|"+sn+on,"g"),un=RegExp([Je+"?"+Ge+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[We,Je,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[We,Je+tn,"$"].join("|")+")",Je+"?"+tn+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Je+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",rn].join("|"),"g"),hn=RegExp("[\\u200d\\ud800-\\udfff"+Ve+"\\ufe0e\\ufe0f]"),dn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],fn=-1,gn={};gn[ne]=gn[ie]=gn[oe]=gn[re]=gn[se]=gn[ae]=gn[le]=gn[ce]=gn[ue]=!0,gn[Dt]=gn[Lt]=gn[te]=gn[Rt]=gn[ee]=gn[Bt]=gn[Nt]=gn[Ut]=gn[qt]=gn[Ht]=gn[zt]=gn[Yt]=gn[Gt]=gn[Qt]=gn[Zt]=!1;var mn={};mn[Dt]=mn[Lt]=mn[te]=mn[ee]=mn[Rt]=mn[Bt]=mn[ne]=mn[ie]=mn[oe]=mn[re]=mn[se]=mn[qt]=mn[Ht]=mn[zt]=mn[Yt]=mn[Gt]=mn[Qt]=mn[Kt]=mn[ae]=mn[le]=mn[ce]=mn[ue]=!0,mn[Nt]=mn[Ut]=mn[Zt]=!1;var vn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},yn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},_n={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},wn=parseFloat,Cn=parseInt,xn="object"==typeof global&&global&&global.Object===Object&&global,Tn="object"==typeof self&&self&&self.Object===Object&&self,kn=xn||Tn||Function("return this")(),Sn="object"==typeof exports&&exports&&!exports.nodeType&&exports,En=Sn&&"object"==typeof module&&module&&!module.nodeType&&module,Pn=En&&En.exports===Sn,An=Pn&&xn.process,In=function(){try{var t=En&&En.require&&En.require("util").types;return t||An&&An.binding&&An.binding("util")}catch(t){}}(),On=In&&In.isArrayBuffer,Mn=In&&In.isDate,Dn=In&&In.isMap,Ln=In&&In.isRegExp,jn=In&&In.isSet,Rn=In&&In.isTypedArray,Bn=w("length"),Fn=C(vn),Nn=C(yn),Un=C(bn),$n=function p(C){function V(t){if(el(t)&&!dd(t)&&!(t instanceof Me)){if(t instanceof Q)return t;if(du.call(t,"__wrapped__"))return Zr(t)}return new Q(t)}function G(){}function Q(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=X}function Me(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=At,this.__views__=[]}function Ve(){var t=new Me(this.__wrapped__);return t.__actions__=Do(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Do(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Do(this.__views__),t}function ze(){if(this.__filtered__){var t=new Me(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function We(){var t=this.__wrapped__.value(),e=this.__dir__,n=dd(t),i=e<0,o=n?t.length:0,r=Cr(0,o,this.__views__),s=r.start,a=r.end,l=a-s,c=i?a:s-1,u=this.__iteratees__,h=u.length,d=0,p=qu(l,this.__takeCount__);if(!n||!i&&o==l&&p==l)return mo(t,this.__actions__);var f=[];t:for(;l--&&d<p;){c+=e;for(var g=-1,m=t[c];++g<h;){var v=u[g],y=v.iteratee,b=v.type,_=y(m);if(b==Tt)m=_;else if(!_){if(b==xt)continue t;break t}}f[d++]=m}return f}function Ye(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Ge(){this.__data__=Zu?Zu(null):{},this.size=0}function Qe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Ke(t){var e=this.__data__;if(Zu){var n=e[t];return n===et?X:n}return du.call(e,t)?e[t]:X}function Xe(t){var e=this.__data__;return Zu?e[t]!==X:du.call(e,t)}function Ze(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Zu&&e===X?et:e,this}function Je(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function tn(){this.__data__=[],this.size=0}function en(t){var e=this.__data__,n=Yn(e,t);return!(n<0)&&(n==e.length-1?e.pop():Su.call(e,n,1),--this.size,!0)}function nn(t){var e=this.__data__,n=Yn(e,t);return n<0?X:e[n][1]}function on(t){return Yn(this.__data__,t)>-1}function rn(t,e){var n=this.__data__,i=Yn(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}function sn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function cn(){this.size=0,this.__data__={hash:new Ye,map:new(Gu||Je),string:new Ye}}function un(t){var e=yr(this,t).delete(t);return this.size-=e?1:0,e}function hn(t){return yr(this,t).get(t)}function dn(t){return yr(this,t).has(t)}function vn(t,e){var n=yr(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}function yn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new sn;++e<n;)this.add(t[e])}function bn(t){return this.__data__.set(t,et),this}function _n(t){return this.__data__.has(t)}function xn(t){var e=this.__data__=new Je(t);this.size=e.size}function Tn(){this.__data__=new Je,this.size=0}function Sn(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function En(t){return this.__data__.get(t)}function An(t){return this.__data__.has(t)}function In(t,e){var n=this.__data__;if(n instanceof Je){var i=n.__data__;if(!Gu||i.length<Z-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new sn(i)}return n.set(t,e),this.size=n.size,this}function Bn(t,e){var n=dd(t),i=!n&&hd(t),o=!n&&!i&&fd(t),r=!n&&!i&&!o&&bd(t),s=n||i||o||r,a=s?S(t.length,ru):[],l=a.length;for(var c in t)!e&&!du.call(t,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ir(c,l))||a.push(c);return a}function qn(t){var e=t.length;return e?t[Ki(0,e-1)]:X}function Hn(t,e){return Gr(Do(t),Jn(e,0,t.length))}function Vn(t){return Gr(Do(t))}function zn(t,e,n){(n===X||$a(t[e],n))&&(n!==X||e in t)||Xn(t,e,n)}function Wn(t,e,n){var i=t[e];du.call(t,e)&&$a(i,n)&&(n!==X||e in t)||Xn(t,e,n)}function Yn(t,e){for(var n=t.length;n--;)if($a(t[n][0],e))return n;return-1}function Gn(t,e,n,i){return uh(t,function(t,o,r){e(i,t,n(t),r)}),i}function Qn(t,e){return t&&Lo(e,Rl(e),t)}function Kn(t,e){return t&&Lo(e,Bl(e),t)}function Xn(t,e,n){"__proto__"==e&&Iu?Iu(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Zn(t,e){for(var n=-1,i=e.length,o=Zc(i),r=null==t;++n<i;)o[n]=r?X:Dl(t,e[n]);return o}function Jn(t,e,n){return t===t&&(n!==X&&(t=t<=n?t:n),e!==X&&(t=t>=e?t:e)),t}function ti(t,e,i,o,r,s){var a,l=e&ot,c=e&rt,u=e&st;if(i&&(a=r?i(t,o,r,s):i(t)),a!==X)return a;if(!tl(t))return t;var h=dd(t);if(h){if(a=kr(t),!l)return Do(t,a)}else{var d=Ch(t),p=d==Ut||d==$t;if(fd(t))return xo(t,l);if(d==zt||d==Dt||p&&!r){if(a=c||p?{}:Sr(t),!l)return c?Ro(t,Kn(a,t)):jo(t,Qn(a,t))}else{if(!mn[d])return r?t:{};a=Er(t,d,l)}}s||(s=new xn);var f=s.get(t);if(f)return f;s.set(t,a),yd(t)?t.forEach(function(n){a.add(ti(n,e,i,n,t,s))}):md(t)&&t.forEach(function(n,o){a.set(o,ti(n,e,i,o,t,s))});var g=u?c?fr:pr:c?Bl:Rl,m=h?X:g(t);return n(m||t,function(n,o){m&&(o=n,n=t[o]),Wn(a,o,ti(n,e,i,o,t,s))}),a}function ei(t){var e=Rl(t);return function(n){return ni(n,t,e)}}function ni(t,e,n){var i=n.length;if(null==t)return!i;for(t=iu(t);i--;){var o=n[i],r=e[o],s=t[o];if(s===X&&!(o in t)||!r(s))return!1}return!0}function ii(t,e,n){if("function"!=typeof t)throw new su(tt);return kh(function(){t.apply(X,n)},e)}function oi(t,e,n,i){var o=-1,r=s,c=!0,u=t.length,h=[],d=e.length;if(!u)return h;n&&(e=l(e,P(n))),i?(r=a,c=!1):e.length>=Z&&(r=I,c=!1,e=new yn(e));t:for(;++o<u;){var p=t[o],f=null==n?p:n(p);if(p=i||0!==p?p:0,c&&f===f){for(var g=d;g--;)if(e[g]===f)continue t;h.push(p)}else r(e,f,i)||h.push(p)}return h}function ri(t,e){var n=!0;return uh(t,function(t,i,o){return n=!!e(t,i,o)}),n}function si(t,e,n){for(var i=-1,o=t.length;++i<o;){var r=t[i],s=e(r)
;if(null!=s&&(a===X?s===s&&!dl(s):n(s,a)))var a=s,l=r}return l}function ai(t,e,n,i){var o=t.length;for(n=yl(n),n<0&&(n=-n>o?0:o+n),i=i===X||i>o?o:yl(i),i<0&&(i+=o),i=n>i?0:bl(i);n<i;)t[n++]=e;return t}function li(t,e){var n=[];return uh(t,function(t,i,o){e(t,i,o)&&n.push(t)}),n}function ci(t,e,n,i,o){var r=-1,s=t.length;for(n||(n=Ar),o||(o=[]);++r<s;){var a=t[r];e>0&&n(a)?e>1?ci(a,e-1,n,i,o):c(o,a):i||(o[o.length]=a)}return o}function ui(t,e){return t&&dh(t,e,Rl)}function hi(t,e){return t&&ph(t,e,Rl)}function di(t,e){return r(e,function(e){return Xa(t[e])})}function pi(t,e){e=wo(e,t);for(var n=0,i=e.length;null!=t&&n<i;)t=t[Qr(e[n++])];return n&&n==i?t:X}function fi(t,e,n){var i=e(t);return dd(t)?i:c(i,n(t))}function gi(t){return null==t?t===X?Xt:Vt:Au&&Au in iu(t)?wr(t):$r(t)}function mi(t,e){return t>e}function vi(t,e){return null!=t&&du.call(t,e)}function yi(t,e){return null!=t&&e in iu(t)}function bi(t,e,n){return t>=qu(e,n)&&t<$u(e,n)}function _i(t,e,n){for(var i=n?a:s,o=t[0].length,r=t.length,c=r,u=Zc(r),h=1/0,d=[];c--;){var p=t[c];c&&e&&(p=l(p,P(e))),h=qu(p.length,h),u[c]=!n&&(e||o>=120&&p.length>=120)?new yn(c&&p):X}p=t[0];var f=-1,g=u[0];t:for(;++f<o&&d.length<h;){var m=p[f],v=e?e(m):m;if(m=n||0!==m?m:0,!(g?I(g,v):i(d,v,n))){for(c=r;--c;){var y=u[c];if(!(y?I(y,v):i(t[c],v,n)))continue t}g&&g.push(v),d.push(m)}}return d}function wi(t,e,n,i){return ui(t,function(t,o,r){e(i,n(t),o,r)}),i}function Ci(e,n,i){n=wo(n,e),e=Hr(e,n);var o=null==e?e:e[Qr(vs(n))];return null==o?X:t(o,e,i)}function xi(t){return el(t)&&gi(t)==Dt}function Ti(t){return el(t)&&gi(t)==te}function ki(t){return el(t)&&gi(t)==Bt}function Si(t,e,n,i,o){return t===e||(null==t||null==e||!el(t)&&!el(e)?t!==t&&e!==e:Ei(t,e,n,i,Si,o))}function Ei(t,e,n,i,o,r){var s=dd(t),a=dd(e),l=s?Lt:Ch(t),c=a?Lt:Ch(e);l=l==Dt?zt:l,c=c==Dt?zt:c;var u=l==zt,h=c==zt,d=l==c;if(d&&fd(t)){if(!fd(e))return!1;s=!0,u=!1}if(d&&!u)return r||(r=new xn),s||bd(t)?cr(t,e,n,i,o,r):ur(t,e,l,n,i,o,r);if(!(n&at)){var p=u&&du.call(t,"__wrapped__"),f=h&&du.call(e,"__wrapped__");if(p||f){var g=p?t.value():t,m=f?e.value():e;return r||(r=new xn),o(g,m,n,i,r)}}return!!d&&(r||(r=new xn),hr(t,e,n,i,o,r))}function Pi(t){return el(t)&&Ch(t)==qt}function Ai(t,e,n,i){var o=n.length,r=o,s=!i;if(null==t)return!r;for(t=iu(t);o--;){var a=n[o];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<r;){a=n[o];var l=a[0],c=t[l],u=a[1];if(s&&a[2]){if(c===X&&!(l in t))return!1}else{var h=new xn;if(i)var d=i(c,u,l,t,e,h);if(!(d===X?Si(u,c,at|lt,i,h):d))return!1}}return!0}function Ii(t){return!(!tl(t)||jr(t))&&(Xa(t)?yu:Fe).test(Kr(t))}function Oi(t){return el(t)&&gi(t)==Yt}function Mi(t){return el(t)&&Ch(t)==Gt}function Di(t){return el(t)&&Ja(t.length)&&!!gn[gi(t)]}function Li(t){return"function"==typeof t?t:null==t?Sc:"object"==typeof t?dd(t)?Ui(t[0],t[1]):Ni(t):Lc(t)}function ji(t){if(!Rr(t))return Uu(t);var e=[];for(var n in iu(t))du.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Ri(t){if(!tl(t))return Ur(t);var e=Rr(t),n=[];for(var i in t)("constructor"!=i||!e&&du.call(t,i))&&n.push(i);return n}function Bi(t,e){return t<e}function Fi(t,e){var n=-1,i=qa(t)?Zc(t.length):[];return uh(t,function(t,o,r){i[++n]=e(t,o,r)}),i}function Ni(t){var e=br(t);return 1==e.length&&e[0][2]?Fr(e[0][0],e[0][1]):function(n){return n===t||Ai(n,t,e)}}function Ui(t,e){return Mr(t)&&Br(e)?Fr(Qr(t),e):function(n){var i=Dl(n,t);return i===X&&i===e?jl(n,t):Si(e,i,at|lt)}}function $i(t,e,n,i,o){t!==e&&dh(e,function(r,s){if(o||(o=new xn),tl(r))qi(t,e,s,n,$i,i,o);else{var a=i?i(zr(t,s),r,s+"",t,e,o):X;a===X&&(a=r),zn(t,s,a)}},Bl)}function qi(t,e,n,i,o,r,s){var a=zr(t,n),l=zr(e,n),c=s.get(l);if(c)return void zn(t,n,c);var u=r?r(a,l,n+"",t,e,s):X,h=u===X;if(h){var d=dd(l),p=!d&&fd(l),f=!d&&!p&&bd(l);u=l,d||p||f?dd(a)?u=a:Ha(a)?u=Do(a):p?(h=!1,u=xo(l,!0)):f?(h=!1,u=Po(l,!0)):u=[]:cl(l)||hd(l)?(u=a,hd(a)?u=wl(a):tl(a)&&!Xa(a)||(u=Sr(l))):h=!1}h&&(s.set(l,u),o(u,l,i,r,s),s.delete(l)),zn(t,n,u)}function Hi(t,e){var n=t.length;if(n)return e+=e<0?n:0,Ir(e,n)?t[e]:X}function Vi(t,e,n){var i=-1;return e=l(e.length?e:[Sc],P(vr())),T(Fi(t,function(t,n,o){return{criteria:l(e,function(e){return e(t)}),index:++i,value:t}}),function(t,e){return Io(t,e,n)})}function zi(t,e){return Wi(t,e,function(e,n){return jl(t,n)})}function Wi(t,e,n){for(var i=-1,o=e.length,r={};++i<o;){var s=e[i],a=pi(t,s);n(a,s)&&no(r,wo(s,t),a)}return r}function Yi(t){return function(e){return pi(e,t)}}function Gi(t,e,n,i){var o=i?y:v,r=-1,s=e.length,a=t;for(t===e&&(e=Do(e)),n&&(a=l(t,P(n)));++r<s;)for(var c=0,u=e[r],h=n?n(u):u;(c=o(a,h,c,i))>-1;)a!==t&&Su.call(a,c,1),Su.call(t,c,1);return t}function Qi(t,e){for(var n=t?e.length:0,i=n-1;n--;){var o=e[n];if(n==i||o!==r){var r=o;Ir(o)?Su.call(t,o,1):po(t,o)}}return t}function Ki(t,e){return t+ju(zu()*(e-t+1))}function Xi(t,e,n,i){for(var o=-1,r=$u(Lu((e-t)/(n||1)),0),s=Zc(r);r--;)s[i?r:++o]=t,t+=n;return s}function Zi(t,e){var n="";if(!t||e<1||e>St)return n;do{e%2&&(n+=t),(e=ju(e/2))&&(t+=t)}while(e);return n}function Ji(t,e){return Sh(qr(t,e,Sc),t+"")}function to(t){return qn(Ql(t))}function eo(t,e){var n=Ql(t);return Gr(n,Jn(e,0,n.length))}function no(t,e,n,i){if(!tl(t))return t;e=wo(e,t);for(var o=-1,r=e.length,s=r-1,a=t;null!=a&&++o<r;){var l=Qr(e[o]),c=n;if(o!=s){var u=a[l];c=i?i(u,l,a):X,c===X&&(c=tl(u)?u:Ir(e[o+1])?[]:{})}Wn(a,l,c),a=a[l]}return t}function io(t){return Gr(Ql(t))}function oo(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),n=n>o?o:n,n<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var r=Zc(o);++i<o;)r[i]=t[i+e];return r}function ro(t,e){var n;return uh(t,function(t,i,o){return!(n=e(t,i,o))}),!!n}function so(t,e,n){var i=0,o=null==t?i:t.length;if("number"==typeof e&&e===e&&o<=Ot){for(;i<o;){var r=i+o>>>1,s=t[r];null!==s&&!dl(s)&&(n?s<=e:s<e)?i=r+1:o=r}return o}return ao(t,e,Sc,n)}function ao(t,e,n,i){e=n(e);for(var o=0,r=null==t?0:t.length,s=e!==e,a=null===e,l=dl(e),c=e===X;o<r;){var u=ju((o+r)/2),h=n(t[u]),d=h!==X,p=null===h,f=h===h,g=dl(h);if(s)var m=i||f;else m=c?f&&(i||d):a?f&&d&&(i||!p):l?f&&d&&!p&&(i||!g):!p&&!g&&(i?h<=e:h<e);m?o=u+1:r=u}return qu(r,It)}function lo(t,e){for(var n=-1,i=t.length,o=0,r=[];++n<i;){var s=t[n],a=e?e(s):s;if(!n||!$a(a,l)){var l=a;r[o++]=0===s?0:s}}return r}function co(t){return"number"==typeof t?t:dl(t)?Pt:+t}function uo(t){if("string"==typeof t)return t;if(dd(t))return l(t,uo)+"";if(dl(t))return lh?lh.call(t):"";var e=t+"";return"0"==e&&1/t==-kt?"-0":e}function ho(t,e,n){var i=-1,o=s,r=t.length,l=!0,c=[],u=c;if(n)l=!1,o=a;else if(r>=Z){var h=e?null:yh(t);if(h)return q(h);l=!1,o=I,u=new yn}else u=e?[]:c;t:for(;++i<r;){var d=t[i],p=e?e(d):d;if(d=n||0!==d?d:0,l&&p===p){for(var f=u.length;f--;)if(u[f]===p)continue t;e&&u.push(p),c.push(d)}else o(u,p,n)||(u!==c&&u.push(p),c.push(d))}return c}function po(t,e){return e=wo(e,t),null==(t=Hr(t,e))||delete t[Qr(vs(e))]}function fo(t,e,n,i){return no(t,e,n(pi(t,e)),i)}function go(t,e,n,i){for(var o=t.length,r=i?o:-1;(i?r--:++r<o)&&e(t[r],r,t););return n?oo(t,i?0:r,i?r+1:o):oo(t,i?r+1:0,i?o:r)}function mo(t,e){var n=t;return n instanceof Me&&(n=n.value()),u(e,function(t,e){return e.func.apply(e.thisArg,c([t],e.args))},n)}function vo(t,e,n){var i=t.length;if(i<2)return i?ho(t[0]):[];for(var o=-1,r=Zc(i);++o<i;)for(var s=t[o],a=-1;++a<i;)a!=o&&(r[o]=oi(r[o]||s,t[a],e,n));return ho(ci(r,1),e,n)}function yo(t,e,n){for(var i=-1,o=t.length,r=e.length,s={};++i<o;){var a=i<r?e[i]:X;n(s,t[i],a)}return s}function bo(t){return Ha(t)?t:[]}function _o(t){return"function"==typeof t?t:Sc}function wo(t,e){return dd(t)?t:Mr(t,e)?[t]:Eh(xl(t))}function Co(t,e,n){var i=t.length;return n=n===X?i:n,!e&&n>=i?t:oo(t,e,n)}function xo(t,e){if(e)return t.slice();var n=t.length,i=Cu?Cu(n):new t.constructor(n);return t.copy(i),i}function To(t){var e=new t.constructor(t.byteLength);return new wu(e).set(new wu(t)),e}function ko(t,e){var n=e?To(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function So(t){var e=new t.constructor(t.source,je.exec(t));return e.lastIndex=t.lastIndex,e}function Eo(t){return ah?iu(ah.call(t)):{}}function Po(t,e){var n=e?To(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ao(t,e){if(t!==e){var n=t!==X,i=null===t,o=t===t,r=dl(t),s=e!==X,a=null===e,l=e===e,c=dl(e);if(!a&&!c&&!r&&t>e||r&&s&&l&&!a&&!c||i&&s&&l||!n&&l||!o)return 1;if(!i&&!r&&!c&&t<e||c&&n&&o&&!i&&!r||a&&n&&o||!s&&o||!l)return-1}return 0}function Io(t,e,n){for(var i=-1,o=t.criteria,r=e.criteria,s=o.length,a=n.length;++i<s;){var l=Ao(o[i],r[i]);if(l){if(i>=a)return l;return l*("desc"==n[i]?-1:1)}}return t.index-e.index}function Oo(t,e,n,i){for(var o=-1,r=t.length,s=n.length,a=-1,l=e.length,c=$u(r-s,0),u=Zc(l+c),h=!i;++a<l;)u[a]=e[a];for(;++o<s;)(h||o<r)&&(u[n[o]]=t[o]);for(;c--;)u[a++]=t[o++];return u}function Mo(t,e,n,i){for(var o=-1,r=t.length,s=-1,a=n.length,l=-1,c=e.length,u=$u(r-a,0),h=Zc(u+c),d=!i;++o<u;)h[o]=t[o];for(var p=o;++l<c;)h[p+l]=e[l];for(;++s<a;)(d||o<r)&&(h[p+n[s]]=t[o++]);return h}function Do(t,e){var n=-1,i=t.length;for(e||(e=Zc(i));++n<i;)e[n]=t[n];return e}function Lo(t,e,n,i){var o=!n;n||(n={});for(var r=-1,s=e.length;++r<s;){var a=e[r],l=i?i(n[a],t[a],a,n,t):X;l===X&&(l=t[a]),o?Xn(n,a,l):Wn(n,a,l)}return n}function jo(t,e){return Lo(t,_h(t),e)}function Ro(t,e){return Lo(t,wh(t),e)}function Bo(t,n){return function(i,o){var r=dd(i)?e:Gn,s=n?n():{};return r(i,t,vr(o,2),s)}}function Fo(t){return Ji(function(e,n){var i=-1,o=n.length,r=o>1?n[o-1]:X,s=o>2?n[2]:X;for(r=t.length>3&&"function"==typeof r?(o--,r):X,s&&Or(n[0],n[1],s)&&(r=o<3?X:r,o=1),e=iu(e);++i<o;){var a=n[i];a&&t(e,a,i,r)}return e})}function No(t,e){return function(n,i){if(null==n)return n;if(!qa(n))return t(n,i);for(var o=n.length,r=e?o:-1,s=iu(n);(e?r--:++r<o)&&!1!==i(s[r],r,s););return n}}function Uo(t){return function(e,n,i){for(var o=-1,r=iu(e),s=i(e),a=s.length;a--;){var l=s[t?a:++o];if(!1===n(r[l],l,r))break}return e}}function $o(t,e,n){function i(){return(this&&this!==kn&&this instanceof i?r:t).apply(o?n:this,arguments)}var o=e&ct,r=Vo(t);return i}function qo(t){return function(e){e=xl(e);var n=R(e)?Y(e):X,i=n?n[0]:e.charAt(0),o=n?Co(n,1).join(""):e.slice(1);return i[t]()+o}}function Ho(t){return function(e){return u(wc(ec(e).replace(an,"")),t,"")}}function Vo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=ch(t.prototype),i=t.apply(n,e);return tl(i)?i:n}}function zo(e,n,i){function o(){for(var s=arguments.length,a=Zc(s),l=s,c=mr(o);l--;)a[l]=arguments[l];var u=s<3&&a[0]!==c&&a[s-1]!==c?[]:$(a,c);return(s-=u.length)<i?nr(e,n,Go,o.placeholder,X,a,u,X,X,i-s):t(this&&this!==kn&&this instanceof o?r:e,this,a)}var r=Vo(e);return o}function Wo(t){return function(e,n,i){var o=iu(e);if(!qa(e)){var r=vr(n,3);e=Rl(e),n=function(t){return r(o[t],t,o)}}var s=t(e,n,i);return s>-1?o[r?e[s]:s]:X}}function Yo(t){return dr(function(e){var n=e.length,i=n,o=Q.prototype.thru;for(t&&e.reverse();i--;){var r=e[i];if("function"!=typeof r)throw new su(tt);if(o&&!s&&"wrapper"==gr(r))var s=new Q([],!0)}for(i=s?i:n;++i<n;){r=e[i];var a=gr(r),l="wrapper"==a?bh(r):X;s=l&&Lr(l[0])&&l[1]==(mt|dt|ft|vt)&&!l[4].length&&1==l[9]?s[gr(l[0])].apply(s,l[3]):1==r.length&&Lr(r)?s[a]():s.thru(r)}return function(){var t=arguments,i=t[0];if(s&&1==t.length&&dd(i))return s.plant(i).value();for(var o=0,r=n?e[o].apply(this,t):i;++o<n;)r=e[o].call(this,r);return r}})}function Go(t,e,n,i,o,r,s,a,l,c){function u(){for(var v=arguments.length,y=Zc(v),b=v;b--;)y[b]=arguments[b];if(f)var _=mr(u),w=D(y,_);if(i&&(y=Oo(y,i,o,f)),r&&(y=Mo(y,r,s,f)),v-=w,f&&v<c){var C=$(y,_);return nr(t,e,Go,u.placeholder,n,y,C,a,l,c-v)}var x=d?n:this,T=p?x[t]:t;return v=y.length,a?y=Vr(y,a):g&&v>1&&y.reverse(),h&&l<v&&(y.length=l),this&&this!==kn&&this instanceof u&&(T=m||Vo(T)),T.apply(x,y)}var h=e&mt,d=e&ct,p=e&ut,f=e&(dt|pt),g=e&yt,m=p?X:Vo(t);return u}function Qo(t,e){return function(n,i){return wi(n,t,e(i),{})}}function Ko(t,e){return function(n,i){var o;if(n===X&&i===X)return e;if(n!==X&&(o=n),i!==X){if(o===X)return i;"string"==typeof n||"string"==typeof i?(n=uo(n),i=uo(i)):(n=co(n),i=co(i)),o=t(n,i)}return o}}function Xo(e){return dr(function(n){return n=l(n,P(vr())),Ji(function(i){var o=this;return e(n,function(e){return t(e,o,i)})})})}function Zo(t,e){e=e===X?" ":uo(e);var n=e.length;if(n<2)return n?Zi(e,t):e;var i=Zi(e,Lu(t/W(e)));return R(e)?Co(Y(i),0,t).join(""):i.slice(0,t)}function Jo(e,n,i,o){function r(){for(var n=-1,l=arguments.length,c=-1,u=o.length,h=Zc(u+l),d=this&&this!==kn&&this instanceof r?a:e;++c<u;)h[c]=o[c];for(;l--;)h[c++]=arguments[++n];return t(d,s?i:this,h)}var s=n&ct,a=Vo(e);return r}function tr(t){return function(e,n,i){return i&&"number"!=typeof i&&Or(e,n,i)&&(n=i=X),e=vl(e),n===X?(n=e,e=0):n=vl(n),i=i===X?e<n?1:-1:vl(i),Xi(e,n,i,t)}}function er(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=_l(e),n=_l(n)),t(e,n)}}function nr(t,e,n,i,o,r,s,a,l,c){var u=e&dt,h=u?s:X,d=u?X:s,p=u?r:X,f=u?X:r;e|=u?ft:gt,(e&=~(u?gt:ft))&ht||(e&=~(ct|ut));var g=[t,e,o,p,h,f,d,a,l,c],m=n.apply(X,g);return Lr(t)&&Th(m,g),m.placeholder=i,Wr(m,t,e)}function ir(t){var e=nu[t];return function(t,n){if(t=_l(t),(n=null==n?0:qu(yl(n),292))&&Fu(t)){var i=(xl(t)+"e").split("e");return i=(xl(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return e(t)}}function or(t){return function(e){var n=Ch(e);return n==qt?N(e):n==Gt?H(e):E(e,t(e))}}function rr(t,e,n,i,o,r,s,a){var l=e&ut;if(!l&&"function"!=typeof t)throw new su(tt);var c=i?i.length:0;if(c||(e&=~(ft|gt),i=o=X),s=s===X?s:$u(yl(s),0),a=a===X?a:yl(a),c-=o?o.length:0,e&gt){var u=i,h=o;i=o=X}var d=l?X:bh(t),p=[t,e,n,i,o,u,h,r,s,a];if(d&&Nr(p,d),t=p[0],e=p[1],n=p[2],i=p[3],o=p[4],a=p[9]=p[9]===X?l?0:t.length:$u(p[9]-c,0),!a&&e&(dt|pt)&&(e&=~(dt|pt)),e&&e!=ct)f=e==dt||e==pt?zo(t,e,a):e!=ft&&e!=(ct|ft)||o.length?Go.apply(X,p):Jo(t,e,n,i);else var f=$o(t,e,n);return Wr((d?fh:Th)(f,p),t,e)}function sr(t,e,n,i){return t===X||$a(t,cu[n])&&!du.call(i,n)?e:t}function ar(t,e,n,i,o,r){return tl(t)&&tl(e)&&(r.set(e,t),$i(t,e,X,ar,r),r.delete(e)),t}function lr(t){return cl(t)?X:t}function cr(t,e,n,i,o,r){var s=n&at,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=r.get(t);if(c&&r.get(e))return c==e;var u=-1,h=!0,p=n&lt?new yn:X;for(r.set(t,e),r.set(e,t);++u<a;){var f=t[u],g=e[u];if(i)var m=s?i(g,f,u,e,t,r):i(f,g,u,t,e,r);if(m!==X){if(m)continue;h=!1;break}if(p){if(!d(e,function(t,e){if(!I(p,e)&&(f===t||o(f,t,n,i,r)))return p.push(e)})){h=!1;break}}else if(f!==g&&!o(f,g,n,i,r)){h=!1;break}}return r.delete(t),r.delete(e),h}function ur(t,e,n,i,o,r,s){switch(n){case ee:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case te:return!(t.byteLength!=e.byteLength||!r(new wu(t),new wu(e)));case Rt:case Bt:case Ht:return $a(+t,+e);case Nt:return t.name==e.name&&t.message==e.message;case Yt:case Qt:return t==e+"";case qt:var a=N;case Gt:var l=i&at;if(a||(a=q),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;i|=lt,s.set(t,e);var u=cr(a(t),a(e),i,o,r,s);return s.delete(t),u;case Kt:if(ah)return ah.call(t)==ah.call(e)}return!1}function hr(t,e,n,i,o,r){var s=n&at,a=pr(t),l=a.length;if(l!=pr(e).length&&!s)return!1;for(var c=l;c--;){var u=a[c];if(!(s?u in e:du.call(e,u)))return!1}var h=r.get(t);if(h&&r.get(e))return h==e;var d=!0;r.set(t,e),r.set(e,t);for(var p=s;++c<l;){u=a[c];var f=t[u],g=e[u];if(i)var m=s?i(g,f,u,e,t,r):i(f,g,u,t,e,r);if(!(m===X?f===g||o(f,g,n,i,r):m)){d=!1;break}p||(p="constructor"==u)}if(d&&!p){var v=t.constructor,y=e.constructor;v!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y)&&(d=!1)}return r.delete(t),r.delete(e),d}function dr(t){return Sh(qr(t,X,cs),t+"")}function pr(t){return fi(t,Rl,_h)}function fr(t){return fi(t,Bl,wh)}function gr(t){for(var e=t.name+"",n=th[e],i=du.call(th,e)?n.length:0;i--;){var o=n[i],r=o.func;if(null==r||r==t)return o.name}return e}function mr(t){return(du.call(V,"placeholder")?V:t).placeholder}function vr(){var t=V.iteratee||Ec;return t=t===Ec?Li:t,arguments.length?t(arguments[0],arguments[1]):t}function yr(t,e){var n=t.__data__;return Dr(e)?n["string"==typeof e?"string":"hash"]:n.map}function br(t){for(var e=Rl(t),n=e.length;n--;){var i=e[n],o=t[i];e[n]=[i,o,Br(o)]}return e}function _r(t,e){var n=j(t,e);return Ii(n)?n:X}function wr(t){var e=du.call(t,Au),n=t[Au];try{t[Au]=X;var i=!0}catch(t){}var o=gu.call(t);return i&&(e?t[Au]=n:delete t[Au]),o}function Cr(t,e,n){for(var i=-1,o=n.length;++i<o;){var r=n[i],s=r.size;switch(r.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=qu(e,t+s);break;case"takeRight":t=$u(t,e-s)}}return{start:t,end:e}}function xr(t){var e=t.match(Ie);return e?e[1].split(Oe):[]}function Tr(t,e,n){e=wo(e,t);for(var i=-1,o=e.length,r=!1;++i<o;){var s=Qr(e[i]);if(!(r=null!=t&&n(t,s)))break;t=t[s]}return r||++i!=o?r:!!(o=null==t?0:t.length)&&Ja(o)&&Ir(s,o)&&(dd(t)||hd(t))}function kr(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&du.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Sr(t){return"function"!=typeof t.constructor||Rr(t)?{}:ch(xu(t))}function Er(t,e,n){var i=t.constructor;switch(e){case te:return To(t);case Rt:case Bt:return new i(+t);case ee:return ko(t,n);case ne:case ie:case oe:case re:case se:case ae:case le:case ce:case ue:return Po(t,n);case qt:return new i;case Ht:case Qt:return new i(t);case Yt:return So(t);case Gt:return new i;case Kt:return Eo(t)}}function Pr(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(Ae,"{\n/* [wrapped with "+e+"] */\n")}function Ar(t){return dd(t)||hd(t)||!!(Eu&&t&&t[Eu])}function Ir(t,e){var n=typeof t;return!!(e=null==e?St:e)&&("number"==n||"symbol"!=n&&Ue.test(t))&&t>-1&&t%1==0&&t<e}function Or(t,e,n){if(!tl(n))return!1;var i=typeof e;return!!("number"==i?qa(n)&&Ir(e,n.length):"string"==i&&e in n)&&$a(n[e],t)}function Mr(t,e){if(dd(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!dl(t))||(Ce.test(t)||!we.test(t)||null!=e&&t in iu(e))}function Dr(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Lr(t){var e=gr(t),n=V[e];if("function"!=typeof n||!(e in Me.prototype))return!1;if(t===n)return!0;var i=bh(n);return!!i&&t===i[0]}function jr(t){return!!fu&&fu in t}function Rr(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||cu)}function Br(t){return t===t&&!tl(t)}function Fr(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==X||t in iu(n)))}}function Nr(t,e){var n=t[1],i=e[1],o=n|i,r=o<(ct|ut|mt),s=i==mt&&n==dt||i==mt&&n==vt&&t[7].length<=e[8]||i==(mt|vt)&&e[7].length<=e[8]&&n==dt;if(!r&&!s)return t;i&ct&&(t[2]=e[2],o|=n&ct?0:ht);var a=e[3];if(a){var l=t[3];t[3]=l?Oo(l,a,e[4]):a,t[4]=l?$(t[3],it):e[4]}return a=e[5],a&&(l=t[5],t[5]=l?Mo(l,a,e[6]):a,t[6]=l?$(t[5],it):e[6]),a=e[7],a&&(t[7]=a),i&mt&&(t[8]=null==t[8]?e[8]:qu(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t}function Ur(t){var e=[];if(null!=t)for(var n in iu(t))e.push(n);return e}function $r(t){return gu.call(t)}function qr(e,n,i){return n=$u(n===X?e.length-1:n,0),function(){for(var o=arguments,r=-1,s=$u(o.length-n,0),a=Zc(s);++r<s;)a[r]=o[n+r];r=-1;for(var l=Zc(n+1);++r<n;)l[r]=o[r];return l[n]=i(a),t(e,this,l)}}function Hr(t,e){return e.length<2?t:pi(t,oo(e,0,-1))}function Vr(t,e){for(var n=t.length,i=qu(e.length,n),o=Do(t);i--;){var r=e[i];t[i]=Ir(r,n)?o[r]:X}return t}function zr(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function Wr(t,e,n){var i=e+"";return Sh(t,Pr(i,Xr(xr(i),n)))}function Yr(t){var e=0,n=0;return function(){var i=Hu(),o=Ct-(i-n);if(n=i,o>0){if(++e>=wt)return arguments[0]}else e=0;return t.apply(X,arguments)}}function Gr(t,e){var n=-1,i=t.length,o=i-1;for(e=e===X?i:e;++n<e;){var r=Ki(n,o),s=t[r];t[r]=t[n],t[n]=s}return t.length=e,t}function Qr(t){if("string"==typeof t||dl(t))return t;var e=t+"";return"0"==e&&1/t==-kt?"-0":e}function Kr(t){if(null!=t){try{return hu.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Xr(t,e){return n(Mt,function(n){var i="_."+n[0];e&n[1]&&!s(t,i)&&t.push(i)}),t.sort()}function Zr(t){if(t instanceof Me)return t.clone();var e=new Q(t.__wrapped__,t.__chain__);return e.__actions__=Do(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Jr(t,e,n){e=(n?Or(t,e,n):e===X)?1:$u(yl(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,r=0,s=Zc(Lu(i/e));o<i;)s[r++]=oo(t,o,o+=e);return s}function ts(t){for(var e=-1,n=null==t?0:t.length,i=0,o=[];++e<n;){var r=t[e];r&&(o[i++]=r)}return o}function es(){var t=arguments.length;if(!t)return[];for(var e=Zc(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return c(dd(n)?Do(n):[n],ci(e,1))}function ns(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===X?1:yl(e),oo(t,e<0?0:e,i)):[]}function is(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===X?1:yl(e),e=i-e,oo(t,0,e<0?0:e)):[]}function os(t,e){return t&&t.length?go(t,vr(e,3),!0,!0):[]}function rs(t,e){return t&&t.length?go(t,vr(e,3),!0):[]}function ss(t,e,n,i){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&Or(t,e,n)&&(n=0,i=o),ai(t,e,n,i)):[]}function as(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=null==n?0:yl(n);return o<0&&(o=$u(i+o,0)),m(t,vr(e,3),o)}function ls(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return n!==X&&(o=yl(n),o=n<0?$u(i+o,0):qu(o,i-1)),m(t,vr(e,3),o,!0)}function cs(t){return(null==t?0:t.length)?ci(t,1):[]}function us(t){return(null==t?0:t.length)?ci(t,kt):[]}function hs(t,e){return(null==t?0:t.length)?(e=e===X?1:yl(e),ci(t,e)):[]}function ds(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var o=t[e];i[o[0]]=o[1]}return i}function ps(t){return t&&t.length?t[0]:X}function fs(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=null==n?0:yl(n);return o<0&&(o=$u(i+o,0)),v(t,e,o)}function gs(t){return(null==t?0:t.length)?oo(t,0,-1):[]}function ms(t,e){return null==t?"":Nu.call(t,e)}function vs(t){var e=null==t?0:t.length;return e?t[e-1]:X}function ys(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i;return n!==X&&(o=yl(n),o=o<0?$u(i+o,0):qu(o,i-1)),e===e?z(t,e,o):m(t,b,o,!0)}function bs(t,e){return t&&t.length?Hi(t,yl(e)):X}function _s(t,e){return t&&t.length&&e&&e.length?Gi(t,e):t}function ws(t,e,n){return t&&t.length&&e&&e.length?Gi(t,e,vr(n,2)):t}function Cs(t,e,n){return t&&t.length&&e&&e.length?Gi(t,e,X,n):t}function xs(t,e){var n=[];if(!t||!t.length)return n;var i=-1,o=[],r=t.length;for(e=vr(e,3);++i<r;){var s=t[i];e(s,i,t)&&(n.push(s),o.push(i))}return Qi(t,o),n}function Ts(t){return null==t?t:Wu.call(t)}function ks(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Or(t,e,n)?(e=0,n=i):(e=null==e?0:yl(e),n=n===X?i:yl(n)),oo(t,e,n)):[]}function Ss(t,e){return so(t,e)}function Es(t,e,n){return ao(t,e,vr(n,2))}function Ps(t,e){var n=null==t?0:t.length;if(n){var i=so(t,e);if(i<n&&$a(t[i],e))return i}return-1}function As(t,e){return so(t,e,!0)}function Is(t,e,n){return ao(t,e,vr(n,2),!0)}function Os(t,e){if(null==t?0:t.length){var n=so(t,e,!0)-1;if($a(t[n],e))return n}return-1}function Ms(t){return t&&t.length?lo(t):[]}function Ds(t,e){return t&&t.length?lo(t,vr(e,2)):[]}function Ls(t){var e=null==t?0:t.length;return e?oo(t,1,e):[]}function js(t,e,n){return t&&t.length?(e=n||e===X?1:yl(e),oo(t,0,e<0?0:e)):[]}function Rs(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===X?1:yl(e),e=i-e,oo(t,e<0?0:e,i)):[]}function Bs(t,e){return t&&t.length?go(t,vr(e,3),!1,!0):[]}function Fs(t,e){return t&&t.length?go(t,vr(e,3)):[]}function Ns(t){return t&&t.length?ho(t):[]}function Us(t,e){return t&&t.length?ho(t,vr(e,2)):[]}function $s(t,e){return e="function"==typeof e?e:X,t&&t.length?ho(t,X,e):[]}function qs(t){if(!t||!t.length)return[];var e=0;return t=r(t,function(t){if(Ha(t))return e=$u(t.length,e),!0}),S(e,function(e){return l(t,w(e))})}function Hs(e,n){if(!e||!e.length)return[];var i=qs(e);return null==n?i:l(i,function(e){return t(n,X,e)})}function Vs(t,e){return yo(t||[],e||[],Wn)}function zs(t,e){return yo(t||[],e||[],no)}function Ws(t){var e=V(t);return e.__chain__=!0,e}function Ys(t,e){return e(t),t}function Gs(t,e){return e(t)}function Qs(){return Ws(this)}function Ks(){return new Q(this.value(),this.__chain__)}function Xs(){this.__values__===X&&(this.__values__=ml(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?X:this.__values__[this.__index__++]}}function Zs(){return this}function Js(t){for(var e,n=this;n instanceof G;){var i=Zr(n);i.__index__=0,i.__values__=X,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e}function ta(){var t=this.__wrapped__;if(t instanceof Me){var e=t;return this.__actions__.length&&(e=new Me(this)),e=e.reverse(),e.__actions__.push({func:Gs,args:[Ts],thisArg:X}),new Q(e,this.__chain__)}return this.thru(Ts)}function ea(){return mo(this.__wrapped__,this.__actions__)}function na(t,e,n){var i=dd(t)?o:ri;return n&&Or(t,e,n)&&(e=X),i(t,vr(e,3))}function ia(t,e){return(dd(t)?r:li)(t,vr(e,3))}function oa(t,e){return ci(ua(t,e),1)}function ra(t,e){return ci(ua(t,e),kt)}function sa(t,e,n){return n=n===X?1:yl(n),ci(ua(t,e),n)}function aa(t,e){return(dd(t)?n:uh)(t,vr(e,3))}function la(t,e){return(dd(t)?i:hh)(t,vr(e,3))}function ca(t,e,n,i){t=qa(t)?t:Ql(t),n=n&&!i?yl(n):0;var o=t.length;return n<0&&(n=$u(o+n,0)),hl(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&v(t,e,n)>-1}function ua(t,e){return(dd(t)?l:Fi)(t,vr(e,3))}function ha(t,e,n,i){return null==t?[]:(dd(e)||(e=null==e?[]:[e]),n=i?X:n,dd(n)||(n=null==n?[]:[n]),Vi(t,e,n))}function da(t,e,n){var i=dd(t)?u:x,o=arguments.length<3;return i(t,vr(e,4),n,o,uh)}function pa(t,e,n){var i=dd(t)?h:x,o=arguments.length<3;return i(t,vr(e,4),n,o,hh)}function fa(t,e){return(dd(t)?r:li)(t,Pa(vr(e,3)))}function ga(t){return(dd(t)?qn:to)(t)}function ma(t,e,n){return e=(n?Or(t,e,n):e===X)?1:yl(e),(dd(t)?Hn:eo)(t,e)}function va(t){return(dd(t)?Vn:io)(t)}function ya(t){if(null==t)return 0;if(qa(t))return hl(t)?W(t):t.length;var e=Ch(t);return e==qt||e==Gt?t.size:ji(t).length}function ba(t,e,n){var i=dd(t)?d:ro;return n&&Or(t,e,n)&&(e=X),i(t,vr(e,3))}function _a(t,e){if("function"!=typeof e)throw new su(tt);return t=yl(t),function(){if(--t<1)return e.apply(this,arguments)}}function wa(t,e,n){return e=n?X:e,e=t&&null==e?t.length:e,rr(t,mt,X,X,X,X,e)}function Ca(t,e){var n;if("function"!=typeof e)throw new su(tt);return t=yl(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=X),n}}function xa(t,e,n){e=n?X:e;var i=rr(t,dt,X,X,X,X,X,e);return i.placeholder=xa.placeholder,i}function Ta(t,e,n){e=n?X:e;var i=rr(t,pt,X,X,X,X,X,e);return i.placeholder=Ta.placeholder,i}function ka(t,e,n){function i(e){var n=d,i=p;return d=p=X,y=e,g=t.apply(i,n)}function o(t){return y=t,m=kh(a,e),b?i(t):g}function r(t){var n=t-v,i=t-y,o=e-n;return _?qu(o,f-i):o}function s(t){var n=t-v,i=t-y;return v===X||n>=e||n<0||_&&i>=f}function a(){var t=td();if(s(t))return l(t);m=kh(a,r(t))}function l(t){return m=X,w&&d?i(t):(d=p=X,g)}function c(){m!==X&&vh(m),y=0,d=v=p=m=X}function u(){return m===X?g:l(td())}function h(){var t=td(),n=s(t);if(d=arguments,p=this,v=t,n){if(m===X)return o(v);if(_)return vh(m),m=kh(a,e),i(v)}return m===X&&(m=kh(a,e)),g}var d,p,f,g,m,v,y=0,b=!1,_=!1,w=!0;if("function"!=typeof t)throw new su(tt);return e=_l(e)||0,tl(n)&&(b=!!n.leading,_="maxWait"in n,f=_?$u(_l(n.maxWait)||0,e):f,w="trailing"in n?!!n.trailing:w),h.cancel=c,h.flush=u,h}function Sa(t){return rr(t,yt)}function Ea(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new su(tt);var n=function(){var i=arguments,o=e?e.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var s=t.apply(this,i);return n.cache=r.set(o,s)||r,s};return n.cache=new(Ea.Cache||sn),n}function Pa(t){if("function"!=typeof t)throw new su(tt);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Aa(t){return Ca(2,t)}function Ia(t,e){if("function"!=typeof t)throw new su(tt);return e=e===X?e:yl(e),Ji(t,e)}function Oa(e,n){if("function"!=typeof e)throw new su(tt);return n=null==n?0:$u(yl(n),0),Ji(function(i){var o=i[n],r=Co(i,0,n);return o&&c(r,o),t(e,this,r)})}function Ma(t,e,n){var i=!0,o=!0;if("function"!=typeof t)throw new su(tt);return tl(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),ka(t,e,{leading:i,maxWait:e,trailing:o})}function Da(t){return wa(t,1)}function La(t,e){return sd(_o(e),t)}function ja(){if(!arguments.length)return[];var t=arguments[0];return dd(t)?t:[t]}function Ra(t){return ti(t,st)}function Ba(t,e){return e="function"==typeof e?e:X,ti(t,st,e)}function Fa(t){return ti(t,ot|st)}function Na(t,e){return e="function"==typeof e?e:X,ti(t,ot|st,e)}function Ua(t,e){return null==e||ni(t,e,Rl(e))}function $a(t,e){return t===e||t!==t&&e!==e}function qa(t){return null!=t&&Ja(t.length)&&!Xa(t)}function Ha(t){return el(t)&&qa(t)}function Va(t){return!0===t||!1===t||el(t)&&gi(t)==Rt}function za(t){return el(t)&&1===t.nodeType&&!cl(t)}function Wa(t){if(null==t)return!0;if(qa(t)&&(dd(t)||"string"==typeof t||"function"==typeof t.splice||fd(t)||bd(t)||hd(t)))return!t.length;var e=Ch(t);if(e==qt||e==Gt)return!t.size;if(Rr(t))return!ji(t).length;for(var n in t)if(du.call(t,n))return!1;return!0}function Ya(t,e){return Si(t,e)}function Ga(t,e,n){n="function"==typeof n?n:X;var i=n?n(t,e):X;return i===X?Si(t,e,X,n):!!i}function Qa(t){if(!el(t))return!1;var e=gi(t);return e==Nt||e==Ft||"string"==typeof t.message&&"string"==typeof t.name&&!cl(t)}function Ka(t){return"number"==typeof t&&Fu(t)}function Xa(t){if(!tl(t))return!1;var e=gi(t);return e==Ut||e==$t||e==jt||e==Wt}function Za(t){return"number"==typeof t&&t==yl(t)}function Ja(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=St}function tl(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function el(t){return null!=t&&"object"==typeof t}function nl(t,e){return t===e||Ai(t,e,br(e))}function il(t,e,n){return n="function"==typeof n?n:X,Ai(t,e,br(e),n)}function ol(t){return ll(t)&&t!=+t}function rl(t){if(xh(t))throw new tu(J);return Ii(t)}function sl(t){return null===t}function al(t){return null==t}function ll(t){return"number"==typeof t||el(t)&&gi(t)==Ht}function cl(t){if(!el(t)||gi(t)!=zt)return!1;var e=xu(t);if(null===e)return!0;var n=du.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&hu.call(n)==mu}function ul(t){return Za(t)&&t>=-St&&t<=St}function hl(t){return"string"==typeof t||!dd(t)&&el(t)&&gi(t)==Qt}function dl(t){return"symbol"==typeof t||el(t)&&gi(t)==Kt}function pl(t){return t===X}function fl(t){return el(t)&&Ch(t)==Zt}function gl(t){return el(t)&&gi(t)==Jt}function ml(t){if(!t)return[];if(qa(t))return hl(t)?Y(t):Do(t);if(Pu&&t[Pu])return F(t[Pu]());var e=Ch(t);return(e==qt?N:e==Gt?q:Ql)(t)}function vl(t){if(!t)return 0===t?t:0;if((t=_l(t))===kt||t===-kt){return(t<0?-1:1)*Et}return t===t?t:0}function yl(t){var e=vl(t),n=e%1;return e===e?n?e-n:e:0}function bl(t){return t?Jn(yl(t),0,At):0}function _l(t){if("number"==typeof t)return t;if(dl(t))return Pt;if(tl(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=tl(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Se,"");var n=Be.test(t);return n||Ne.test(t)?Cn(t.slice(2),n?2:8):Re.test(t)?Pt:+t}function wl(t){return Lo(t,Bl(t))}function Cl(t){return t?Jn(yl(t),-St,St):0===t?t:0}function xl(t){return null==t?"":uo(t)}function Tl(t,e){var n=ch(t);return null==e?n:Qn(n,e)}function kl(t,e){return g(t,vr(e,3),ui)}function Sl(t,e){return g(t,vr(e,3),hi)}function El(t,e){return null==t?t:dh(t,vr(e,3),Bl)}
function Pl(t,e){return null==t?t:ph(t,vr(e,3),Bl)}function Al(t,e){return t&&ui(t,vr(e,3))}function Il(t,e){return t&&hi(t,vr(e,3))}function Ol(t){return null==t?[]:di(t,Rl(t))}function Ml(t){return null==t?[]:di(t,Bl(t))}function Dl(t,e,n){var i=null==t?X:pi(t,e);return i===X?n:i}function Ll(t,e){return null!=t&&Tr(t,e,vi)}function jl(t,e){return null!=t&&Tr(t,e,yi)}function Rl(t){return qa(t)?Bn(t):ji(t)}function Bl(t){return qa(t)?Bn(t,!0):Ri(t)}function Fl(t,e){var n={};return e=vr(e,3),ui(t,function(t,i,o){Xn(n,e(t,i,o),t)}),n}function Nl(t,e){var n={};return e=vr(e,3),ui(t,function(t,i,o){Xn(n,i,e(t,i,o))}),n}function Ul(t,e){return $l(t,Pa(vr(e)))}function $l(t,e){if(null==t)return{};var n=l(fr(t),function(t){return[t]});return e=vr(e),Wi(t,n,function(t,n){return e(t,n[0])})}function ql(t,e,n){e=wo(e,t);var i=-1,o=e.length;for(o||(o=1,t=X);++i<o;){var r=null==t?X:t[Qr(e[i])];r===X&&(i=o,r=n),t=Xa(r)?r.call(t):r}return t}function Hl(t,e,n){return null==t?t:no(t,e,n)}function Vl(t,e,n,i){return i="function"==typeof i?i:X,null==t?t:no(t,e,n,i)}function zl(t,e,i){var o=dd(t),r=o||fd(t)||bd(t);if(e=vr(e,4),null==i){var s=t&&t.constructor;i=r?o?new s:[]:tl(t)&&Xa(s)?ch(xu(t)):{}}return(r?n:ui)(t,function(t,n,o){return e(i,t,n,o)}),i}function Wl(t,e){return null==t||po(t,e)}function Yl(t,e,n){return null==t?t:fo(t,e,_o(n))}function Gl(t,e,n,i){return i="function"==typeof i?i:X,null==t?t:fo(t,e,_o(n),i)}function Ql(t){return null==t?[]:A(t,Rl(t))}function Kl(t){return null==t?[]:A(t,Bl(t))}function Xl(t,e,n){return n===X&&(n=e,e=X),n!==X&&(n=_l(n),n=n===n?n:0),e!==X&&(e=_l(e),e=e===e?e:0),Jn(_l(t),e,n)}function Zl(t,e,n){return e=vl(e),n===X?(n=e,e=0):n=vl(n),t=_l(t),bi(t,e,n)}function Jl(t,e,n){if(n&&"boolean"!=typeof n&&Or(t,e,n)&&(e=n=X),n===X&&("boolean"==typeof e?(n=e,e=X):"boolean"==typeof t&&(n=t,t=X)),t===X&&e===X?(t=0,e=1):(t=vl(t),e===X?(e=t,t=0):e=vl(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=zu();return qu(t+o*(e-t+wn("1e-"+((o+"").length-1))),e)}return Ki(t,e)}function tc(t){return zd(xl(t).toLowerCase())}function ec(t){return(t=xl(t))&&t.replace($e,Fn).replace(ln,"")}function nc(t,e,n){t=xl(t),e=uo(e);var i=t.length;n=n===X?i:Jn(yl(n),0,i);var o=n;return(n-=e.length)>=0&&t.slice(n,o)==e}function ic(t){return t=xl(t),t&&ve.test(t)?t.replace(ge,Nn):t}function oc(t){return t=xl(t),t&&ke.test(t)?t.replace(Te,"\\$&"):t}function rc(t,e,n){t=xl(t),e=yl(e);var i=e?W(t):0;if(!e||i>=e)return t;var o=(e-i)/2;return Zo(ju(o),n)+t+Zo(Lu(o),n)}function sc(t,e,n){t=xl(t),e=yl(e);var i=e?W(t):0;return e&&i<e?t+Zo(e-i,n):t}function ac(t,e,n){t=xl(t),e=yl(e);var i=e?W(t):0;return e&&i<e?Zo(e-i,n)+t:t}function lc(t,e,n){return n||null==e?e=0:e&&(e=+e),Vu(xl(t).replace(Ee,""),e||0)}function cc(t,e,n){return e=(n?Or(t,e,n):e===X)?1:yl(e),Zi(xl(t),e)}function uc(){var t=arguments,e=xl(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function hc(t,e,n){return n&&"number"!=typeof n&&Or(t,e,n)&&(e=n=X),(n=n===X?At:n>>>0)?(t=xl(t),t&&("string"==typeof e||null!=e&&!vd(e))&&!(e=uo(e))&&R(t)?Co(Y(t),0,n):t.split(e,n)):[]}function dc(t,e,n){return t=xl(t),n=null==n?0:Jn(yl(n),0,t.length),e=uo(e),t.slice(n,n+e.length)==e}function pc(t,e,n){var i=V.templateSettings;n&&Or(t,e,n)&&(e=X),t=xl(t),e=Td({},e,i,sr);var o,r,s=Td({},e.imports,i.imports,sr),a=Rl(s),l=A(s,a),c=0,u=e.interpolate||qe,h="__p += '",d=ou((e.escape||qe).source+"|"+u.source+"|"+(u===_e?Le:qe).source+"|"+(e.evaluate||qe).source+"|$","g"),p="//# sourceURL="+(du.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++fn+"]")+"\n";t.replace(d,function(e,n,i,s,a,l){return i||(i=s),h+=t.slice(c,l).replace(He,L),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),a&&(r=!0,h+="';\n"+a+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+e.length,e}),h+="';\n";var f=du.call(e,"variable")&&e.variable;f||(h="with (obj) {\n"+h+"\n}\n"),h=(r?h.replace(he,""):h).replace(de,"$1").replace(pe,"$1;"),h="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Wd(function(){return eu(a,p+"return "+h).apply(X,l)});if(g.source=h,Qa(g))throw g;return g}function fc(t){return xl(t).toLowerCase()}function gc(t){return xl(t).toUpperCase()}function mc(t,e,n){if((t=xl(t))&&(n||e===X))return t.replace(Se,"");if(!t||!(e=uo(e)))return t;var i=Y(t),o=Y(e);return Co(i,O(i,o),M(i,o)+1).join("")}function vc(t,e,n){if((t=xl(t))&&(n||e===X))return t.replace(Pe,"");if(!t||!(e=uo(e)))return t;var i=Y(t);return Co(i,0,M(i,Y(e))+1).join("")}function yc(t,e,n){if((t=xl(t))&&(n||e===X))return t.replace(Ee,"");if(!t||!(e=uo(e)))return t;var i=Y(t);return Co(i,O(i,Y(e))).join("")}function bc(t,e){var n=bt,i=_t;if(tl(e)){var o="separator"in e?e.separator:o;n="length"in e?yl(e.length):n,i="omission"in e?uo(e.omission):i}t=xl(t);var r=t.length;if(R(t)){var s=Y(t);r=s.length}if(n>=r)return t;var a=n-W(i);if(a<1)return i;var l=s?Co(s,0,a).join(""):t.slice(0,a);if(o===X)return l+i;if(s&&(a+=l.length-a),vd(o)){if(t.slice(a).search(o)){var c,u=l;for(o.global||(o=ou(o.source,xl(je.exec(o))+"g")),o.lastIndex=0;c=o.exec(u);)var h=c.index;l=l.slice(0,h===X?a:h)}}else if(t.indexOf(uo(o),a)!=a){var d=l.lastIndexOf(o);d>-1&&(l=l.slice(0,d))}return l+i}function _c(t){return t=xl(t),t&&me.test(t)?t.replace(fe,Un):t}function wc(t,e,n){return t=xl(t),e=n?X:e,e===X?B(t)?K(t):f(t):t.match(e)||[]}function Cc(e){var n=null==e?0:e.length,i=vr();return e=n?l(e,function(t){if("function"!=typeof t[1])throw new su(tt);return[i(t[0]),t[1]]}):[],Ji(function(i){for(var o=-1;++o<n;){var r=e[o];if(t(r[0],this,i))return t(r[1],this,i)}})}function xc(t){return ei(ti(t,ot))}function Tc(t){return function(){return t}}function kc(t,e){return null==t||t!==t?e:t}function Sc(t){return t}function Ec(t){return Li("function"==typeof t?t:ti(t,ot))}function Pc(t){return Ni(ti(t,ot))}function Ac(t,e){return Ui(t,ti(e,ot))}function Ic(t,e,i){var o=Rl(e),r=di(e,o);null!=i||tl(e)&&(r.length||!o.length)||(i=e,e=t,t=this,r=di(e,Rl(e)));var s=!(tl(i)&&"chain"in i&&!i.chain),a=Xa(t);return n(r,function(n){var i=e[n];t[n]=i,a&&(t.prototype[n]=function(){var e=this.__chain__;if(s||e){var n=t(this.__wrapped__);return(n.__actions__=Do(this.__actions__)).push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,c([this.value()],arguments))})}),t}function Oc(){return kn._===this&&(kn._=vu),this}function Mc(){}function Dc(t){return t=yl(t),Ji(function(e){return Hi(e,t)})}function Lc(t){return Mr(t)?w(Qr(t)):Yi(t)}function jc(t){return function(e){return null==t?X:pi(t,e)}}function Rc(){return[]}function Bc(){return!1}function Fc(){return{}}function Nc(){return""}function Uc(){return!0}function $c(t,e){if((t=yl(t))<1||t>St)return[];var n=At,i=qu(t,At);e=vr(e),t-=At;for(var o=S(i,e);++n<t;)e(n);return o}function qc(t){return dd(t)?l(t,Qr):dl(t)?[t]:Do(Eh(xl(t)))}function Hc(t){var e=++pu;return xl(t)+e}function Vc(t){return t&&t.length?si(t,Sc,mi):X}function zc(t,e){return t&&t.length?si(t,vr(e,2),mi):X}function Wc(t){return _(t,Sc)}function Yc(t,e){return _(t,vr(e,2))}function Gc(t){return t&&t.length?si(t,Sc,Bi):X}function Qc(t,e){return t&&t.length?si(t,vr(e,2),Bi):X}function Kc(t){return t&&t.length?k(t,Sc):0}function Xc(t,e){return t&&t.length?k(t,vr(e,2)):0}C=null==C?kn:$n.defaults(kn.Object(),C,$n.pick(kn,pn));var Zc=C.Array,Jc=C.Date,tu=C.Error,eu=C.Function,nu=C.Math,iu=C.Object,ou=C.RegExp,ru=C.String,su=C.TypeError,au=Zc.prototype,lu=eu.prototype,cu=iu.prototype,uu=C["__core-js_shared__"],hu=lu.toString,du=cu.hasOwnProperty,pu=0,fu=function(){var t=/[^.]+$/.exec(uu&&uu.keys&&uu.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),gu=cu.toString,mu=hu.call(iu),vu=kn._,yu=ou("^"+hu.call(du).replace(Te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bu=Pn?C.Buffer:X,_u=C.Symbol,wu=C.Uint8Array,Cu=bu?bu.allocUnsafe:X,xu=U(iu.getPrototypeOf,iu),Tu=iu.create,ku=cu.propertyIsEnumerable,Su=au.splice,Eu=_u?_u.isConcatSpreadable:X,Pu=_u?_u.iterator:X,Au=_u?_u.toStringTag:X,Iu=function(){try{var t=_r(iu,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ou=C.clearTimeout!==kn.clearTimeout&&C.clearTimeout,Mu=Jc&&Jc.now!==kn.Date.now&&Jc.now,Du=C.setTimeout!==kn.setTimeout&&C.setTimeout,Lu=nu.ceil,ju=nu.floor,Ru=iu.getOwnPropertySymbols,Bu=bu?bu.isBuffer:X,Fu=C.isFinite,Nu=au.join,Uu=U(iu.keys,iu),$u=nu.max,qu=nu.min,Hu=Jc.now,Vu=C.parseInt,zu=nu.random,Wu=au.reverse,Yu=_r(C,"DataView"),Gu=_r(C,"Map"),Qu=_r(C,"Promise"),Ku=_r(C,"Set"),Xu=_r(C,"WeakMap"),Zu=_r(iu,"create"),Ju=Xu&&new Xu,th={},eh=Kr(Yu),nh=Kr(Gu),ih=Kr(Qu),oh=Kr(Ku),rh=Kr(Xu),sh=_u?_u.prototype:X,ah=sh?sh.valueOf:X,lh=sh?sh.toString:X,ch=function(){function t(){}return function(e){if(!tl(e))return{};if(Tu)return Tu(e);t.prototype=e;var n=new t;return t.prototype=X,n}}();V.templateSettings={escape:ye,evaluate:be,interpolate:_e,variable:"",imports:{_:V}},V.prototype=G.prototype,V.prototype.constructor=V,Q.prototype=ch(G.prototype),Q.prototype.constructor=Q,Me.prototype=ch(G.prototype),Me.prototype.constructor=Me,Ye.prototype.clear=Ge,Ye.prototype.delete=Qe,Ye.prototype.get=Ke,Ye.prototype.has=Xe,Ye.prototype.set=Ze,Je.prototype.clear=tn,Je.prototype.delete=en,Je.prototype.get=nn,Je.prototype.has=on,Je.prototype.set=rn,sn.prototype.clear=cn,sn.prototype.delete=un,sn.prototype.get=hn,sn.prototype.has=dn,sn.prototype.set=vn,yn.prototype.add=yn.prototype.push=bn,yn.prototype.has=_n,xn.prototype.clear=Tn,xn.prototype.delete=Sn,xn.prototype.get=En,xn.prototype.has=An,xn.prototype.set=In;var uh=No(ui),hh=No(hi,!0),dh=Uo(),ph=Uo(!0),fh=Ju?function(t,e){return Ju.set(t,e),t}:Sc,gh=Iu?function(t,e){return Iu(t,"toString",{configurable:!0,enumerable:!1,value:Tc(e),writable:!0})}:Sc,mh=Ji,vh=Ou||function(t){return kn.clearTimeout(t)},yh=Ku&&1/q(new Ku([,-0]))[1]==kt?function(t){return new Ku(t)}:Mc,bh=Ju?function(t){return Ju.get(t)}:Mc,_h=Ru?function(t){return null==t?[]:(t=iu(t),r(Ru(t),function(e){return ku.call(t,e)}))}:Rc,wh=Ru?function(t){for(var e=[];t;)c(e,_h(t)),t=xu(t);return e}:Rc,Ch=gi;(Yu&&Ch(new Yu(new ArrayBuffer(1)))!=ee||Gu&&Ch(new Gu)!=qt||Qu&&"[object Promise]"!=Ch(Qu.resolve())||Ku&&Ch(new Ku)!=Gt||Xu&&Ch(new Xu)!=Zt)&&(Ch=function(t){var e=gi(t),n=e==zt?t.constructor:X,i=n?Kr(n):"";if(i)switch(i){case eh:return ee;case nh:return qt;case ih:return"[object Promise]";case oh:return Gt;case rh:return Zt}return e});var xh=uu?Xa:Bc,Th=Yr(fh),kh=Du||function(t,e){return kn.setTimeout(t,e)},Sh=Yr(gh),Eh=function(t){var e=Ea(t,function(t){return n.size===nt&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(xe,function(t,n,i,o){e.push(i?o.replace(De,"$1"):n||t)}),e}),Ph=Ji(function(t,e){return Ha(t)?oi(t,ci(e,1,Ha,!0)):[]}),Ah=Ji(function(t,e){var n=vs(e);return Ha(n)&&(n=X),Ha(t)?oi(t,ci(e,1,Ha,!0),vr(n,2)):[]}),Ih=Ji(function(t,e){var n=vs(e);return Ha(n)&&(n=X),Ha(t)?oi(t,ci(e,1,Ha,!0),X,n):[]}),Oh=Ji(function(t){var e=l(t,bo);return e.length&&e[0]===t[0]?_i(e):[]}),Mh=Ji(function(t){var e=vs(t),n=l(t,bo);return e===vs(n)?e=X:n.pop(),n.length&&n[0]===t[0]?_i(n,vr(e,2)):[]}),Dh=Ji(function(t){var e=vs(t),n=l(t,bo);return e="function"==typeof e?e:X,e&&n.pop(),n.length&&n[0]===t[0]?_i(n,X,e):[]}),Lh=Ji(_s),jh=dr(function(t,e){var n=null==t?0:t.length,i=Zn(t,e);return Qi(t,l(e,function(t){return Ir(t,n)?+t:t}).sort(Ao)),i}),Rh=Ji(function(t){return ho(ci(t,1,Ha,!0))}),Bh=Ji(function(t){var e=vs(t);return Ha(e)&&(e=X),ho(ci(t,1,Ha,!0),vr(e,2))}),Fh=Ji(function(t){var e=vs(t);return e="function"==typeof e?e:X,ho(ci(t,1,Ha,!0),X,e)}),Nh=Ji(function(t,e){return Ha(t)?oi(t,e):[]}),Uh=Ji(function(t){return vo(r(t,Ha))}),$h=Ji(function(t){var e=vs(t);return Ha(e)&&(e=X),vo(r(t,Ha),vr(e,2))}),qh=Ji(function(t){var e=vs(t);return e="function"==typeof e?e:X,vo(r(t,Ha),X,e)}),Hh=Ji(qs),Vh=Ji(function(t){var e=t.length,n=e>1?t[e-1]:X;return n="function"==typeof n?(t.pop(),n):X,Hs(t,n)}),zh=dr(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return Zn(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Me&&Ir(n)?(i=i.slice(n,+n+(e?1:0)),i.__actions__.push({func:Gs,args:[o],thisArg:X}),new Q(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(X),t})):this.thru(o)}),Wh=Bo(function(t,e,n){du.call(t,n)?++t[n]:Xn(t,n,1)}),Yh=Wo(as),Gh=Wo(ls),Qh=Bo(function(t,e,n){du.call(t,n)?t[n].push(e):Xn(t,n,[e])}),Kh=Ji(function(e,n,i){var o=-1,r="function"==typeof n,s=qa(e)?Zc(e.length):[];return uh(e,function(e){s[++o]=r?t(n,e,i):Ci(e,n,i)}),s}),Xh=Bo(function(t,e,n){Xn(t,n,e)}),Zh=Bo(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Jh=Ji(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Or(t,e[0],e[1])?e=[]:n>2&&Or(e[0],e[1],e[2])&&(e=[e[0]]),Vi(t,ci(e,1),[])}),td=Mu||function(){return kn.Date.now()},ed=Ji(function(t,e,n){var i=ct;if(n.length){var o=$(n,mr(ed));i|=ft}return rr(t,i,e,n,o)}),nd=Ji(function(t,e,n){var i=ct|ut;if(n.length){var o=$(n,mr(nd));i|=ft}return rr(e,i,t,n,o)}),id=Ji(function(t,e){return ii(t,1,e)}),od=Ji(function(t,e,n){return ii(t,_l(e)||0,n)});Ea.Cache=sn;var rd=mh(function(e,n){n=1==n.length&&dd(n[0])?l(n[0],P(vr())):l(ci(n,1),P(vr()));var i=n.length;return Ji(function(o){for(var r=-1,s=qu(o.length,i);++r<s;)o[r]=n[r].call(this,o[r]);return t(e,this,o)})}),sd=Ji(function(t,e){var n=$(e,mr(sd));return rr(t,ft,X,e,n)}),ad=Ji(function(t,e){var n=$(e,mr(ad));return rr(t,gt,X,e,n)}),ld=dr(function(t,e){return rr(t,vt,X,X,X,e)}),cd=er(mi),ud=er(function(t,e){return t>=e}),hd=xi(function(){return arguments}())?xi:function(t){return el(t)&&du.call(t,"callee")&&!ku.call(t,"callee")},dd=Zc.isArray,pd=On?P(On):Ti,fd=Bu||Bc,gd=Mn?P(Mn):ki,md=Dn?P(Dn):Pi,vd=Ln?P(Ln):Oi,yd=jn?P(jn):Mi,bd=Rn?P(Rn):Di,_d=er(Bi),wd=er(function(t,e){return t<=e}),Cd=Fo(function(t,e){if(Rr(e)||qa(e))return void Lo(e,Rl(e),t);for(var n in e)du.call(e,n)&&Wn(t,n,e[n])}),xd=Fo(function(t,e){Lo(e,Bl(e),t)}),Td=Fo(function(t,e,n,i){Lo(e,Bl(e),t,i)}),kd=Fo(function(t,e,n,i){Lo(e,Rl(e),t,i)}),Sd=dr(Zn),Ed=Ji(function(t,e){t=iu(t);var n=-1,i=e.length,o=i>2?e[2]:X;for(o&&Or(e[0],e[1],o)&&(i=1);++n<i;)for(var r=e[n],s=Bl(r),a=-1,l=s.length;++a<l;){var c=s[a],u=t[c];(u===X||$a(u,cu[c])&&!du.call(t,c))&&(t[c]=r[c])}return t}),Pd=Ji(function(e){return e.push(X,ar),t(Dd,X,e)}),Ad=Qo(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=gu.call(e)),t[e]=n},Tc(Sc)),Id=Qo(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=gu.call(e)),du.call(t,e)?t[e].push(n):t[e]=[n]},vr),Od=Ji(Ci),Md=Fo(function(t,e,n){$i(t,e,n)}),Dd=Fo(function(t,e,n,i){$i(t,e,n,i)}),Ld=dr(function(t,e){var n={};if(null==t)return n;var i=!1;e=l(e,function(e){return e=wo(e,t),i||(i=e.length>1),e}),Lo(t,fr(t),n),i&&(n=ti(n,ot|rt|st,lr));for(var o=e.length;o--;)po(n,e[o]);return n}),jd=dr(function(t,e){return null==t?{}:zi(t,e)}),Rd=or(Rl),Bd=or(Bl),Fd=Ho(function(t,e,n){return e=e.toLowerCase(),t+(n?tc(e):e)}),Nd=Ho(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Ud=Ho(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),$d=qo("toLowerCase"),qd=Ho(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Hd=Ho(function(t,e,n){return t+(n?" ":"")+zd(e)}),Vd=Ho(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),zd=qo("toUpperCase"),Wd=Ji(function(e,n){try{return t(e,X,n)}catch(t){return Qa(t)?t:new tu(t)}}),Yd=dr(function(t,e){return n(e,function(e){e=Qr(e),Xn(t,e,ed(t[e],t))}),t}),Gd=Yo(),Qd=Yo(!0),Kd=Ji(function(t,e){return function(n){return Ci(n,t,e)}}),Xd=Ji(function(t,e){return function(n){return Ci(t,n,e)}}),Zd=Xo(l),Jd=Xo(o),tp=Xo(d),ep=tr(),np=tr(!0),ip=Ko(function(t,e){return t+e},0),op=ir("ceil"),rp=Ko(function(t,e){return t/e},1),sp=ir("floor"),ap=Ko(function(t,e){return t*e},1),lp=ir("round"),cp=Ko(function(t,e){return t-e},0);return V.after=_a,V.ary=wa,V.assign=Cd,V.assignIn=xd,V.assignInWith=Td,V.assignWith=kd,V.at=Sd,V.before=Ca,V.bind=ed,V.bindAll=Yd,V.bindKey=nd,V.castArray=ja,V.chain=Ws,V.chunk=Jr,V.compact=ts,V.concat=es,V.cond=Cc,V.conforms=xc,V.constant=Tc,V.countBy=Wh,V.create=Tl,V.curry=xa,V.curryRight=Ta,V.debounce=ka,V.defaults=Ed,V.defaultsDeep=Pd,V.defer=id,V.delay=od,V.difference=Ph,V.differenceBy=Ah,V.differenceWith=Ih,V.drop=ns,V.dropRight=is,V.dropRightWhile=os,V.dropWhile=rs,V.fill=ss,V.filter=ia,V.flatMap=oa,V.flatMapDeep=ra,V.flatMapDepth=sa,V.flatten=cs,V.flattenDeep=us,V.flattenDepth=hs,V.flip=Sa,V.flow=Gd,V.flowRight=Qd,V.fromPairs=ds,V.functions=Ol,V.functionsIn=Ml,V.groupBy=Qh,V.initial=gs,V.intersection=Oh,V.intersectionBy=Mh,V.intersectionWith=Dh,V.invert=Ad,V.invertBy=Id,V.invokeMap=Kh,V.iteratee=Ec,V.keyBy=Xh,V.keys=Rl,V.keysIn=Bl,V.map=ua,V.mapKeys=Fl,V.mapValues=Nl,V.matches=Pc,V.matchesProperty=Ac,V.memoize=Ea,V.merge=Md,V.mergeWith=Dd,V.method=Kd,V.methodOf=Xd,V.mixin=Ic,V.negate=Pa,V.nthArg=Dc,V.omit=Ld,V.omitBy=Ul,V.once=Aa,V.orderBy=ha,V.over=Zd,V.overArgs=rd,V.overEvery=Jd,V.overSome=tp,V.partial=sd,V.partialRight=ad,V.partition=Zh,V.pick=jd,V.pickBy=$l,V.property=Lc,V.propertyOf=jc,V.pull=Lh,V.pullAll=_s,V.pullAllBy=ws,V.pullAllWith=Cs,V.pullAt=jh,V.range=ep,V.rangeRight=np,V.rearg=ld,V.reject=fa,V.remove=xs,V.rest=Ia,V.reverse=Ts,V.sampleSize=ma,V.set=Hl,V.setWith=Vl,V.shuffle=va,V.slice=ks,V.sortBy=Jh,V.sortedUniq=Ms,V.sortedUniqBy=Ds,V.split=hc,V.spread=Oa,V.tail=Ls,V.take=js,V.takeRight=Rs,V.takeRightWhile=Bs,V.takeWhile=Fs,V.tap=Ys,V.throttle=Ma,V.thru=Gs,V.toArray=ml,V.toPairs=Rd,V.toPairsIn=Bd,V.toPath=qc,V.toPlainObject=wl,V.transform=zl,V.unary=Da,V.union=Rh,V.unionBy=Bh,V.unionWith=Fh,V.uniq=Ns,V.uniqBy=Us,V.uniqWith=$s,V.unset=Wl,V.unzip=qs,V.unzipWith=Hs,V.update=Yl,V.updateWith=Gl,V.values=Ql,V.valuesIn=Kl,V.without=Nh,V.words=wc,V.wrap=La,V.xor=Uh,V.xorBy=$h,V.xorWith=qh,V.zip=Hh,V.zipObject=Vs,V.zipObjectDeep=zs,V.zipWith=Vh,V.entries=Rd,V.entriesIn=Bd,V.extend=xd,V.extendWith=Td,Ic(V,V),V.add=ip,V.attempt=Wd,V.camelCase=Fd,V.capitalize=tc,V.ceil=op,V.clamp=Xl,V.clone=Ra,V.cloneDeep=Fa,V.cloneDeepWith=Na,V.cloneWith=Ba,V.conformsTo=Ua,V.deburr=ec,V.defaultTo=kc,V.divide=rp,V.endsWith=nc,V.eq=$a,V.escape=ic,V.escapeRegExp=oc,V.every=na,V.find=Yh,V.findIndex=as,V.findKey=kl,V.findLast=Gh,V.findLastIndex=ls,V.findLastKey=Sl,V.floor=sp,V.forEach=aa,V.forEachRight=la,V.forIn=El,V.forInRight=Pl,V.forOwn=Al,V.forOwnRight=Il,V.get=Dl,V.gt=cd,V.gte=ud,V.has=Ll,V.hasIn=jl,V.head=ps,V.identity=Sc,V.includes=ca,V.indexOf=fs,V.inRange=Zl,V.invoke=Od,V.isArguments=hd,V.isArray=dd,V.isArrayBuffer=pd,V.isArrayLike=qa,V.isArrayLikeObject=Ha,V.isBoolean=Va,V.isBuffer=fd,V.isDate=gd,V.isElement=za,V.isEmpty=Wa,V.isEqual=Ya,V.isEqualWith=Ga,V.isError=Qa,V.isFinite=Ka,V.isFunction=Xa,V.isInteger=Za,V.isLength=Ja,V.isMap=md,V.isMatch=nl,V.isMatchWith=il,V.isNaN=ol,V.isNative=rl,V.isNil=al,V.isNull=sl,V.isNumber=ll,V.isObject=tl,V.isObjectLike=el,V.isPlainObject=cl,V.isRegExp=vd,V.isSafeInteger=ul,V.isSet=yd,V.isString=hl,V.isSymbol=dl,V.isTypedArray=bd,V.isUndefined=pl,V.isWeakMap=fl,V.isWeakSet=gl,V.join=ms,V.kebabCase=Nd,V.last=vs,V.lastIndexOf=ys,V.lowerCase=Ud,V.lowerFirst=$d,V.lt=_d,V.lte=wd,V.max=Vc,V.maxBy=zc,V.mean=Wc,V.meanBy=Yc,V.min=Gc,V.minBy=Qc,V.stubArray=Rc,V.stubFalse=Bc,V.stubObject=Fc,V.stubString=Nc,V.stubTrue=Uc,V.multiply=ap,V.nth=bs,V.noConflict=Oc,V.noop=Mc,V.now=td,V.pad=rc,V.padEnd=sc,V.padStart=ac,V.parseInt=lc,V.random=Jl,V.reduce=da,V.reduceRight=pa,V.repeat=cc,V.replace=uc,V.result=ql,V.round=lp,V.runInContext=p,V.sample=ga,V.size=ya,V.snakeCase=qd,V.some=ba,V.sortedIndex=Ss,V.sortedIndexBy=Es,V.sortedIndexOf=Ps,V.sortedLastIndex=As,V.sortedLastIndexBy=Is,V.sortedLastIndexOf=Os,V.startCase=Hd,V.startsWith=dc,V.subtract=cp,V.sum=Kc,V.sumBy=Xc,V.template=pc,V.times=$c,V.toFinite=vl,V.toInteger=yl,V.toLength=bl,V.toLower=fc,V.toNumber=_l,V.toSafeInteger=Cl,V.toString=xl,V.toUpper=gc,V.trim=mc,V.trimEnd=vc,V.trimStart=yc,V.truncate=bc,V.unescape=_c,V.uniqueId=Hc,V.upperCase=Vd,V.upperFirst=zd,V.each=aa,V.eachRight=la,V.first=ps,Ic(V,function(){var t={};return ui(V,function(e,n){du.call(V.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),V.VERSION="4.17.15",n(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){V[t].placeholder=V}),n(["drop","take"],function(t,e){Me.prototype[t]=function(n){n=n===X?1:$u(yl(n),0);var i=this.__filtered__&&!e?new Me(this):this.clone();return i.__filtered__?i.__takeCount__=qu(n,i.__takeCount__):i.__views__.push({size:qu(n,At),type:t+(i.__dir__<0?"Right":"")}),i},Me.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),n(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==xt||3==n;Me.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:vr(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),n(["head","last"],function(t,e){var n="take"+(e?"Right":"");Me.prototype[t]=function(){return this[n](1).value()[0]}}),n(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Me.prototype[t]=function(){return this.__filtered__?new Me(this):this[n](1)}}),Me.prototype.compact=function(){return this.filter(Sc)},Me.prototype.find=function(t){return this.filter(t).head()},Me.prototype.findLast=function(t){return this.reverse().find(t)},Me.prototype.invokeMap=Ji(function(t,e){return"function"==typeof t?new Me(this):this.map(function(n){return Ci(n,t,e)})}),Me.prototype.reject=function(t){return this.filter(Pa(vr(t)))},Me.prototype.slice=function(t,e){t=yl(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Me(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==X&&(e=yl(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},Me.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Me.prototype.toArray=function(){return this.take(At)},ui(Me.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=V[i?"take"+("last"==e?"Right":""):e],r=i||/^find/.test(e);o&&(V.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,a=e instanceof Me,l=s[0],u=a||dd(e),h=function(t){var e=o.apply(V,c([t],s));return i&&d?e[0]:e};u&&n&&"function"==typeof l&&1!=l.length&&(a=u=!1);var d=this.__chain__,p=!!this.__actions__.length,f=r&&!d,g=a&&!p;if(!r&&u){e=g?e:new Me(this);var m=t.apply(e,s);return m.__actions__.push({func:Gs,args:[h],thisArg:X}),new Q(m,d)}return f&&g?t.apply(this,s):(m=this.thru(h),f?i?m.value()[0]:m.value():m)})}),n(["pop","push","shift","sort","splice","unshift"],function(t){var e=au[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);V.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var o=this.value();return e.apply(dd(o)?o:[],t)}return this[n](function(n){return e.apply(dd(n)?n:[],t)})}}),ui(Me.prototype,function(t,e){var n=V[e];if(n){var i=n.name+"";du.call(th,i)||(th[i]=[]),th[i].push({name:e,func:n})}}),th[Go(X,ut).name]=[{name:"wrapper",func:X}],Me.prototype.clone=Ve,Me.prototype.reverse=ze,Me.prototype.value=We,V.prototype.at=zh,V.prototype.chain=Qs,V.prototype.commit=Ks,V.prototype.next=Xs,V.prototype.plant=Js,V.prototype.reverse=ta,V.prototype.toJSON=V.prototype.valueOf=V.prototype.value=ea,V.prototype.first=V.prototype.head,Pu&&(V.prototype[Pu]=Zs),V}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(kn._=$n,define("lodash",[],function(){return $n})):En?((En.exports=$n)._=$n,Sn._=$n):kn._=$n}.call(this),define("vsef/utils/PathUtils",["require","exports","lodash"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.getFileExtension=function(t){return t.split(".").pop()},t.getFilePath=function(t){var e=t.lastIndexOf(".");return-1===e||"."===t.charAt(e-1)?t:t.substr(0,e)},t.swapExtension=function(e,n){return t.getFilePath(e)+n},t.resolveNS=function(t,e,n){for(var i=e.split(".");t&&i[0];){var o=t[i.shift()];t=void 0===o?void 0:o}return void 0===t?n:t},t.createNS=function(t,e,n){for(var i=e.split(".");t&&i.length>1;){var o=i.shift();t=t[o]||(t[o]={})}return t[i.shift()]=n},t.getQueryStrings=function(){var t=[];window.location.search&&(t=window.location.search.substring(1).split("&"));for(var e={},n=0;n<t.length;n++){var i=t[n].split("=");e[i[0]]=i[1]}return e},t.getQueryString=function(e){return t.getQueryStrings()[e]},t.readMediaPath=function(e,n,i){var o=e.find(n).text().trim();return o?t.isAbsolutePath(o)?o:i+o:""},t.ensurePathEndSeparator=function(t){return t&&t.length&&"/"!==t.charAt(t.length-1)?t+"/":t},t.isAbsolutePath=function(t){return/^https?:\/\//i.test(t)},t.getBasePath=function(t){if(!t||!t.length)return t;var e=t.lastIndexOf("/");return-1===e?t:t.substr(0,e+1)},t.normalizePath=function(t){if(!t||!t.length)return t;for(var e=t.split("/"),n=[],i=0;i<e.length;i++)".."===e[i]?n.pop():"."!==e[i]&&n.push(e[i]);return n.join("/")},t.resolveRelativePathFromTo=function(e,i){e=t.normalizePath(e),i=t.normalizePath(i);var o,r=n.without(e.split("/"),""),s=n.without(i.split("/"),""),a=Math.min(r.length,s.length);for(o=0;o<a&&r[o]===s[o];o++);return(r.length>o?n.fill(Array(r.length-o),"../").join(""):"")+(s.length>o?s.slice(o-s.length).join("/"):"")},t.getDocBasePath=function(){return t.getBasePath(window.location.pathname)},t}();e.PathUtils=i});var baseUrl="";window.context&&(baseUrl=window.context.engineApi.getEnginesBaseUrl());var subproj=getQueryString("subproj"),vcsRoot=subproj?"vcs/src/":"",skinRoot="skins/vcs";window.context&&(skinRoot=window.context.engineApi.getSkinsBaseUrl());var vstPageLoadEventData;if(window.VST&&window.VST.once("page:load",function(t,e){vstPageLoadEventData=e}),requirejs.config({baseUrl:baseUrl,paths:{text:vcsRoot+"vendor/npm/requirejs-text/text",jquery:vcsRoot+"vendor/npm/jquery/dist/jquery","jquery-ui":vcsRoot+"vendor/npm/jquery-ui-dist/jquery-ui","jquery-private":vcsRoot+"vendor/jquery-private",lodash:vcsRoot+"vendor/npm/lodash/lodash",autosize:vcsRoot+"vendor/autosize",hammerjs:vcsRoot+"vendor/npm/hammerjs/hammer",log4javascript:vcsRoot+"vendor/log4javascript",promise:vcsRoot+"vendor/npm/es6-promise/dist/es6-promise",videojs:vcsRoot+"vendor/video-js/video","videojs-errors":vcsRoot+"vendor/video-js/plugins/videojs-errors",enginesRoot:vcsRoot+"engines/scripts",editorsRoot:vcsRoot+"editors/scripts",vsef:vcsRoot+"vsef",skinRoot:skinRoot,"touch-punch":vcsRoot+"vendor/touch-punch","vst-score-utils":vcsRoot+"vendor/vsm-score-utils"},shim:{"jquery-ui":{deps:["jquery"]},"touch-punch":{deps:["jquery-ui"]}},map:{"*":{jquery:"jquery-private"},"jquery-private":{jquery:"jquery"}},xhtml:!0}),subproj){var extraPaths={};extraPaths["enginesRoot"+subproj.toUpperCase()]="engines/scripts",requirejs.config({paths:extraPaths})}require(["jquery","touch-punch","promise","vsef/utils/PathUtils","jquery-ui"],function(t,e,n,i){n.polyfill();var o=getQueryString("font-size");o&&t("html").css("font-size",o),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),t(document).ready(function(){var t=i.PathUtils.getQueryString("eid");t||(t="SCREEN"),"SCREEN"===t?require(["editorsRoot/App"],function(t){new t.App(vstPageLoadEventData)}):require(["enginesRoot/App"],function(t){new t.App})})}),define("main",function(){}),define("text",["module"],function(t){"use strict";function e(t,e){return void 0===t||""===t?e:t}function n(t,n,i,o){if(n===o)return!0;if(t===i){if("http"===t)return e(n,"80")===e(o,"80");if("https"===t)return e(n,"443")===e(o,"443")}return!1}var i,o,r,s,a,l=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],c=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,h="undefined"!=typeof location&&location.href,d=h&&location.protocol&&location.protocol.replace(/\:/,""),p=h&&location.hostname,f=h&&(location.port||void 0),g={},m=t.config&&t.config()||{};return i={version:"2.0.15",strip:function(t){if(t){t=t.replace(c,"");var e=t.match(u);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var t,e,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;e<3;e+=1){n=l[e];try{t=new ActiveXObject(n)}catch(t){}if(t){l=[n];break}}return t},parseName:function(t){var e,n,i,o=!1,r=t.lastIndexOf("."),s=0===t.indexOf("./")||0===t.indexOf("../");return-1!==r&&(!s||r>1)?(e=t.substring(0,r),n=t.substring(r+1)):e=t,i=n||e,r=i.indexOf("!"),-1!==r&&(o="strip"===i.substring(r+1),i=i.substring(0,r),n?n=i:e=i),{moduleName:e,ext:n,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,e,o,r){var s,a,l,c=i.xdRegExp.exec(t);return!c||(s=c[2],a=c[3],a=a.split(":"),l=a[1],a=a[0],(!s||s===e)&&(!a||a.toLowerCase()===o.toLowerCase())&&(!l&&!a||n(s,l,e,r)))},finishLoad:function(t,e,n,o){n=e?i.strip(n):n,m.isBuild&&(g[t]=n),o(n)},load:function(t,e,n,o){if(o&&o.isBuild&&!o.inlineText)return void n();m.isBuild=o&&o.isBuild;var r=i.parseName(t),s=r.moduleName+(r.ext?"."+r.ext:""),a=e.toUrl(s),l=m.useXhr||i.useXhr;if(0===a.indexOf("empty:"))return void n();!h||l(a,d,p,f)?i.get(a,function(e){i.finishLoad(t,r.strip,e,n)},function(t){n.error&&n.error(t)}):e([s],function(t){i.finishLoad(r.moduleName+"."+r.ext,r.strip,t,n)})},write:function(t,e,n,o){if(g.hasOwnProperty(e)){var r=i.jsEscape(g[e]);n.asModule(t+"!"+e,"define(function () { return '"+r+"';});\n")}},writeFile:function(t,e,n,o,r){var s=i.parseName(e),a=s.ext?"."+s.ext:"",l=s.moduleName+a,c=n.toUrl(s.moduleName+a)+".js";i.load(l,n,function(e){var n=function(t){return o(c,t)};n.asModule=function(t,e){return o.asModule(t,c,e)},i.write(t,l,n,r)},r)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(o=require.nodeRequire("fs"),i.get=function(t,e,n){try{var i=o.readFileSync(t,"utf8");"\ufeff"===i[0]&&(i=i.substring(1)),e(i)}catch(t){n&&n(t)}}):"xhr"===m.env||!m.env&&i.createXhr()?i.get=function(t,e,n,o){var r,s=i.createXhr();if(s.open("GET",t,!0),o)for(r in o)o.hasOwnProperty(r)&&s.setRequestHeader(r.toLowerCase(),o[r]);m.onXhr&&m.onXhr(s,t),s.onreadystatechange=function(i){var o,r;4===s.readyState&&(o=s.status||0,o>399&&o<600?(r=new Error(t+" HTTP status: "+o),r.xhr=s,n&&n(r)):e(s.responseText),m.onXhrComplete&&m.onXhrComplete(s,t))},s.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?i.get=function(t,e){var n,i,o=new java.io.File(t),r=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),"utf-8")),a="";try{for(n=new java.lang.StringBuffer,i=s.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=s.readLine());)n.append(r),n.append(i);a=String(n.toString())}finally{s.close()}e(a)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,s=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),a="@mozilla.org/windows-registry-key;1"in r,i.get=function(t,e){var n,i,o,l={};a&&(t=t.replace(/\//g,"\\")),o=new FileUtils.File(t);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream),n.init(o,1,0,!1),i=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream),i.init(n,"utf-8",n.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),i.readString(n.available(),l),i.close(),n.close(),e(l.value)}catch(t){throw new Error((o&&o.path||"")+": "+t)}}),i}),define("jquery-private",["jquery"],function(t){return t.noConflict(!0)}),define("vsef/Theme",["require","exports","jquery","lodash"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o;!function(t){t[t.None=0]="None",t[t.UrlEncode=1]="UrlEncode"
}(o=e.ThemeValueEncoding||(e.ThemeValueEncoding={}));var r=function(){function t(t){n.extend(this,t)}return t.prototype.getStacksCSS=function(t){for(var e=i.template("\n\t\t<% var fontFacePath = path + family.toLowerCase().replace(/ /g,\"_\");%>\n\t\t@font-face {\n\t\t\tfont-family: '<%=family%>';\n\t\t\tsrc: url('<%=fontFacePath%>/<%=face%>.woff2') format('woff2'),\n\t\t\t\turl('<%=fontFacePath%>/<%=face%>.woff') format('woff');\n\t\t\tfont-weight: <%=weight%>;\n\t\t\tfont-style: <%=style%>;\n\t\t}\n\t\t"),o="",r=0,s=this.faces;r<s.length;r++){var a=s[r];o+=e(n.extend({path:t},a))}return o},t.prototype.insertIntoCSS=function(t,e){var n=this.getStacksCSS(e),i=t.lastIndexOf("@import");if(-1!==i){var o=t.indexOf(";",i);return t.substring(0,o+1)+n+t.substring(o+1)}return n+t},t}(),s=function(){function t(){}return t}();e.ThemeData=s;var a=function(){function t(t,e,i){for(var o={},s=this.getHighestExclusiveFontIndex(t,e,i),a=e.split("+"),l=0,c=a;l<c.length;l++){var u=c[l],h=this.getThemeDataForThemeSpec(t,u,i);h.fonts&&h.fonts.exclusive&&a.indexOf(u)!==s||(o.fonts&&o.fonts.faces&&h.fonts&&h.fonts.faces&&(o.fonts.faces=o.fonts.faces.concat(h.fonts.faces),h.fonts.faces=void 0),n.extend(!0,o,h))}n.extend(this,o),this.fonts=new r(this.fonts)}return t.prototype.lookup=function(t,e){void 0===e&&(e=o.None);var n=this.elements[t];if(!n)throw new Error("Missing theme element: "+t);for(;n&&"$"===n.charAt(0);){var i=n.substr(1);if(!(n=this.definitions[i]))throw new Error("Missing theme element definition: $"+i+" missing for "+t)}return e===o.None?n:encodeURIComponent(n)},t.prototype.getHighestExclusiveFontIndex=function(t,e,n){for(var i=e.split("+"),o=0,r=i.slice(0).reverse();o<r.length;o++){var s=r[o],a=this.getThemeDataForThemeSpec(t,s,n);if(a.fonts&&a.fonts.exclusive)return i.indexOf(s)}return-1},t.prototype.getThemeDataForThemeSpec=function(t,e,i){var o=e.split(":"),r=2===o.length?o[0]:t,s=2===o.length?o[1]:o[0],a=i(r,s);if(a.include){for(var l=a.include.split(","),c=0,u=l;c<u.length;c++){var h=u[c];n.extend(!0,a,this.getThemeDataForThemeSpec(t,h.trim(),i))}delete a.include}return a},t}();e.Theme=a}),define("vsef/utils/Environment",["require","exports","./PathUtils","lodash"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.isPrerendering=function(){return"prerendering"===n.PathUtils.getQueryString("reason")},t.isPrintFrame=function(){return t.isPrintBlockFrame()||t.isPrintScreenFrame()},t.isPrintBlockFrame=function(){return"printBlock"===n.PathUtils.getQueryString("reason")},t.isPrintScreenFrame=function(){return"printScreen"===n.PathUtils.getQueryString("reason")},t.isReadOnly=function(){var t=!1;try{t=window.EPUB.Studio.readonly}catch(t){}return"readonly"===n.PathUtils.getQueryString("reason")||t},t.storageAvailable=function(t){try{var e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),!0}catch(t){return!1}},t.isCrossDomainIframe=function(){try{return!window.parent.document}catch(t){return!0}}(),t.isBookshelf=function(){try{return!(!window.VST&&!parent.window.VST)}catch(t){return!1}}(),t.isScoreCenter=function(){try{return!(!window.ScoreCenter&&!parent.window.ScoreCenter)}catch(t){return!1}}(),t.isBookshelfDesktop=function(){try{var t=window.epubReadingSystem?window.epubReadingSystem:parent.window.epubReadingSystem;return!!t&&t.isDesktop()}catch(t){return!1}}(),t.isUnitTest=i.isArray(window.testErrorLog),t.isPC=-1!==navigator.appVersion.indexOf("Win"),t.isMac=-1!==navigator.platform.toUpperCase().indexOf("MAC"),t.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t.isiOS=/iPhone|iPad|iPod/i.test(navigator.userAgent),t.isAndroid=/android/i.test(navigator.userAgent),t.localStorageAvailable=function(){return t.storageAvailable("localStorage")}(),t.isVcsEditor=function(){try{return parent&&parent.VcsEditorApi}catch(t){return!1}}(),t}();e.Environment=o}),define("vsef/utils/MiscUtils",["require","exports","jquery","lodash","./PathUtils","../Theme","./Environment"],function(t,e,n,i,o,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(){}return t.getFloeString=function(t){return 0===t.replace(/<p>|&#160;| |<\/p>/gi,"").length&&(t=""),t.trim()},t.unencodeString=function(t){return t.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(e)})},t.stripLineFeeds=function(t){return t.replace(/\r?\n|\r/g,"")},t.removeHtmlWhitespace=function(t){return t.trim().replace(/\n/g," ").replace(/\t|\r/g,"")},t.XMLtoJSON=function(e){var i=n(e);return t.createObjectFromXML(i)["#document"]},t.includeCSSfile=function(t){var e=document.getElementsByTagName("head")[0],n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",t),e.appendChild(n)},t.repathCSSAssets=function(t,e,n){return t.replace(/url\(.*?\)/gi,function(t){var i=t.replace(/url|\(|"|'|\)/gi,"");if(0===i.trim().indexOf("data:")||o.PathUtils.isAbsolutePath(i))return t;e=o.PathUtils.getBasePath(e),n=o.PathUtils.getBasePath(n);var r=o.PathUtils.resolveRelativePathFromTo(e,n);return r&&(r=o.PathUtils.ensurePathEndSeparator(r)),'url("'+(r+i)+'")'})},t.themeCSS=function(t,e){return t.replace(/var\(--vcs-theme-.*?\)/gi,function(t){var n=t.replace(/,\s*urlencode\s*/,"").trim(),i=n.length!==t.length;return n=n.slice(16,-1),e.lookup(n,i?r.ThemeValueEncoding.UrlEncode:r.ThemeValueEncoding.None)})},t.includeCSSInline=function(t,e){if(!n("head style#"+e).length){var i=document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.id=e,o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t)),i.appendChild(o)}},t.includeJSfile=function(t,e){var n=document.createElement("script");return n.type="text/javascript",n.src=t,n.async=!1,n.defer=!1,document.getElementsByTagName("head")[0].appendChild(n),this.waitFor(e)},t.makeRandomSequence=function(t){var e=i.range(t);return i.shuffle(e)},t.getDefaultFontSize=function(t){var e=document.body,n=document.createElement("div");n.style.cssText="display:inline-block; padding:0; line-height:1; position:absolute; visibility:hidden; font-size:1em",n.appendChild(document.createTextNode(t)),e.appendChild(n);var i=n.offsetWidth;return e.removeChild(n),i},t.getWidestDefaultText=function(e){for(var n="string"==typeof e?[e]:e,i=Number.MIN_VALUE,o=0,r=n;o<r.length;o++){var s=r[o];i=Math.max(i,t.getDefaultFontSize(s))}return i},t.getRemValue=function(){var t=document.getElementsByTagName("html")[0];return parseInt(window.getComputedStyle(t).fontSize,10)},t.remToPx=function(e){return parseInt(e,10)*t.getRemValue()},t.pxToRem=function(e){return e/t.getRemValue()},t.remScaledPx=function(e){return e/16*t.getRemValue()},t.getElementCSSInt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=0,r=0;r<e.length;r++){var s=parseInt(t.css(e[r]),10);o+=i.isNaN(s)?0:s}return o},t.randomSequence=function(t){var e="number"==typeof t?t:t.length,n="number"==typeof t?"":t.join(",");if(e<2)return 1===e?[1]:[];var o=void 0;do{o=i.shuffle(i.range(e))}while(o.join(",")===n);return o},t.reorderArray=function(t,e){for(var n=[],i=0;i<t.length;i++)n.push(t[e[i]]);return n},t.swapArrayElements=function(t,e,n){var i=t[n];t[n]=t[e],t[e]=i},t.repositionArrayItem=function(t,e,n){var i=t[e];t.splice(e,1),t.splice(n,0,i)},t.whenImageLoaded=function(t){return new Promise(function(e,n){if(t.complete)e(!0);else{var i=function(n){t.removeEventListener("error",i),t.removeEventListener("load",i),e("load"===n.type)};t.addEventListener("error",i),t.addEventListener("load",i)}})},t.whenAllImagesLoaded=function(e){var i=n(e).find("img");return new Promise(function(e,n){i.length||e(!0);for(var o=[],r=0;r<i.length;r++)o.push(t.whenImageLoaded(i.eq(r).get(0)));Promise.all(o).then(function(){e(!0)})})},t.containsMath=function(t){return null!==t.match(/<math.*?>/i)},t.updateMath=function(e,n,i){function o(t){return new Promise(function(n,o){t?(t.Hub.Config({showMathMenu:!1,CommonHTML:{scale:i,mtextFontInherit:!0},menuSettings:{zoom:"None"},AssistiveMML:{disabled:!0}}),t.Hub.Queue(["Typeset",t.Hub,e]),t.Hub.Queue(function(){n()})):n()})}return function(){return new Promise(function(e,i){s.Environment.isBookshelf?e(window.MathJax||parent.window.MathJax):t.includeJSfile(n,function(){return window.MathJax}).then(function(t){e(t)})})}().then(function(t){return o(t)})},t.waitFor=function(e,n,i){return void 0===n&&(n=t.FOREVER),void 0===i&&(i=20),e?new Promise(function(o,r){var s,a=function(){s&&clearInterval(s)},l=Date.now(),c=!1,u=function(){var i=e.call(window);i?(c=!0,a(),o(i)):n!==t.FOREVER&&Date.now()-l>n&&(a(),r())};u(),c||(s=setInterval(u,i))}):Promise.resolve(null)},t.callPrerenderUtil=function(t,e){"function"==typeof window.callPhantom&&window.callPhantom({message:t,content:e})},t.getRequireJSRootPath=function(){var t=n("script[data-main]").attr("data-main")||"";return t?(t=t.split("/").slice(0,-1).join("/"),t&&(t+="/"),t):""},t.arraysMatch=function(t,e,n){void 0===n&&(n=!0);var i;return i=n?function(t,n){return e[n]===t}:function(t,n){return-1!==e.indexOf(t)},t.length===e.length&&t.every(i)},t.objectHasSameProps=function(t,e){for(var n in t)if(!e.hasOwnProperty(n))return!1;return!0},t.getObjectByProperty=function(t,e,n){var o=t.map(function(t){return i.has(t,e)?t[e]:null}).indexOf(n);return-1===o?null:t[o]},t.createObjectFromXML=function(e){var i={},o=e.get(0),r=o.nodeName,s=e.children();return i[r]={},0===s.length?o.attributes.length>0?i[r].__text=e.text():i[r]=e.text():s.length>1?s.each(function(e,o){var s=t.createObjectFromXML(n(o));for(var a in s)if(i[r][a])if(i[r][a]instanceof Array)i[r][a].append(s[a]);else{var l=i[r][a];i[r][a]=[l,s[a]]}else i[r][a]=s[a]}):i[r]=t.createObjectFromXML(s.first()),n(o.attributes).each(function(t,e){i[r]["_"+e.nodeName]=e.nodeValue}),i},t.FOREVER=-1,t}();e.MiscUtils=a;var l=function(){function t(){this.inputDetected=this.started=!1,this.inputEvent=this.inputEvent.bind(this)}return t.prototype.start=function(){this.started||(n(document).on("keydown",this.inputEvent),n(document).on("mousedown",this.inputEvent)),this.inputDetected=!1,this.started=!0},t.prototype.stop=function(){this.started&&(n(document).off("keydown",this.inputEvent),n(document).off("mousedown",this.inputEvent),this.started=!1)},t.prototype.inputEvent=function(){this.inputDetected=!0},t}();e.InputDetector=l}),define("vsef/EventListener",["require","exports","lodash"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.listeningTo=[]}return t.prototype.listenTo=function(t,e){this.addListener(t,e,-1)},t.prototype.listenOnce=function(t,e){this.addListener(t,e,1)},t.prototype.waitForAll=function(t,e,n){var i=this;n&&setTimeout(function(){e(new Error("Waiter timed out after "+n+"ms"))},n),Promise.all(t.map(function(t){return new Promise(function(e,n){i.listenOnce(t,function(){e()})})})).then(function(){e()})},t.prototype.stopListening=function(t,e){function n(n){return!(!t||n===t)||(n.removeListener(this,e),!1)}this.listeningTo=this.listeningTo.filter(n,this)},t.prototype.addListener=function(t,e,i){var o;o=n.isArray(t)?t:[t];for(var r=0,s=o;r<s.length;r++){var a=s[r];-1===this.listeningTo.indexOf(a)&&this.listeningTo.push(a),a.addListener(e,this,i)}},t}();e.EventListener=i}),define("vsef/EventDispatcher",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n){void 0===n&&(n=-1),this.triggerCount=0,this.callback=t,this.object=e,this.maxListens=n}return t}(),i=function(){function t(t){this.listeners=[],this.listeners=[],this.object=t}return t.prototype.trigger=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,i=this.listeners;n<i.length;n++){var o=i[n];(o.maxListens<=0||o.maxListens>0&&o.triggerCount<o.maxListens)&&(o.callback.apply(o.object,[this.object].concat(t)),o.triggerCount++),o.maxListens===o.triggerCount&&this.removeListener(o.object,o.callback)}},t.prototype.addListener=function(t,e,i){void 0===i&&(i=-1),this.listeners.filter(function(n){return n.object===e&&n.callback===t}).length>0||this.listeners.push(new n(t,e,i))},t.prototype.removeListener=function(t,e){for(var n=[],i=0;i<this.listeners.length;i++)(e&&this.listeners[i].callback!==e||this.listeners[i].object!==t)&&n.push(this.listeners[i]);this.listeners=n},t}();e.EventDispatcher=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/Observable",["require","exports","./EventListener","./EventDispatcher"],function(t,e,n,i){"use strict";function o(t,e){var n=t.observables||(t.observables=[]);-1===n.indexOf(e)&&n.push(e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=t.call(this)||this;e.silent=!1,e._force=!1,e.onChange=new i.EventDispatcher(e);var n=e.observables;if(n&&n.length)for(var o=0,r=n;o<r.length;o++){var s=r[o];!function(t){!function(){var n=/^\$/.test(t)?t.charAt(0):"",o=n?t.substr(1):t,r="on"+n+o.charAt(0).toUpperCase()+o.substr(1)+"Change",s=e[r]||(e[r]=new i.EventDispatcher(e)),a=t,l=e[t];Object.defineProperty(e,t,{get:function(){return l},set:function(t){var e=l;(e!==t||this._force)&&(l=t,!this.silent&&this.onChange&&(this.onChange.trigger(a),s.trigger(t,e)))}})}()}(s)}return e}return __extends(e,t),e.prototype.silently=function(t){this.silent=!0,t(),this.silent=!1},e.prototype.defer=function(t){setTimeout(t,0)},e.prototype.force=function(t){this._force=!0,t(),this._force=!1},e.prototype.isSilent=function(){return this.silent},e}(n.EventListener);e.Observable=r,e.observable=o}),function(t,e){"function"==typeof define&&define.amd?define("log4javascript",t):"undefined"!=typeof module&&"object"==typeof exports?module.exports=t():e.log4javascript=t()}(function(){function isUndefined(t){return void 0===t}function EventSupport(){}function Log4JavaScript(){}function toStr(t){return t&&t.toString?t.toString():String(t)}function getExceptionMessage(t){return t.message?t.message:t.description?t.description:toStr(t)}function getUrlFileName(t){var e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return t.substr(e+1)}function getExceptionStringRep(t){if(t){var e="Exception: "+getExceptionMessage(t);try{t.lineNumber&&(e+=" on line number "+t.lineNumber),t.fileName&&(e+=" in file "+getUrlFileName(t.fileName))}catch(t){logLog.warn("Unable to obtain file and line information for error")}return showStackTraces&&t.stack&&(e+=newLine+"Stack trace:"+newLine+t.stack),e}return null}function bool(t){return Boolean(t)}function trim(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")}function splitIntoLines(t){return t.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n")}function array_remove(t,e){for(var n=-1,i=0,o=t.length;i<o;i++)if(t[i]===e){n=i;break}return n>=0&&(t.splice(n,1),!0)}function array_contains(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]==e)return!0;return!1}function extractBooleanFromParam(t,e){return isUndefined(t)?e:bool(t)}function extractStringFromParam(t,e){return isUndefined(t)?e:String(t)}function extractIntFromParam(t,e){if(isUndefined(t))return e;try{var n=parseInt(t,10);return isNaN(n)?e:n}catch(n){return logLog.warn("Invalid int param "+t,n),e}}function extractFunctionFromParam(t,e){return"function"==typeof t?t:e}function isError(t){return t instanceof Error}function handleError(t,e){logLog.error(t,e),log4javascript.dispatchEvent("error",{message:t,exception:e})}function Timer(t,e){this.name=t,this.level=isUndefined(e)?Level.INFO:e,this.start=new Date}function Logger(t){this.name=t,this.parent=null,this.children=[];var e=[],n=null,i=this.name===rootLoggerName,o=this.name===nullLoggerName,r=null,s=!1;this.addChild=function(t){this.children.push(t),t.parent=this,t.invalidateAppenderCache()};var a=!0;this.getAdditivity=function(){return a},this.setAdditivity=function(t){var e=a!=t;a=t,e&&this.invalidateAppenderCache()},this.addAppender=function(t){o?handleError("Logger.addAppender: you may not add an appender to the null logger"):t instanceof log4javascript.Appender?array_contains(e,t)||(e.push(t),t.setAddedToLogger(this),this.invalidateAppenderCache()):handleError("Logger.addAppender: appender supplied ('"+toStr(t)+"') is not a subclass of Appender")},this.removeAppender=function(t){array_remove(e,t),t.setRemovedFromLogger(this),this.invalidateAppenderCache()},this.removeAllAppenders=function(){var t=e.length;if(t>0){for(var n=0;n<t;n++)e[n].setRemovedFromLogger(this);e.length=0,this.invalidateAppenderCache()}},this.getEffectiveAppenders=function(){if(null===r||s){var t=i||!this.getAdditivity()?[]:this.parent.getEffectiveAppenders();r=t.concat(e),s=!1}return r},this.invalidateAppenderCache=function(){s=!0;for(var t=0,e=this.children.length;t<e;t++)this.children[t].invalidateAppenderCache()},this.log=function(t,e){if(enabled&&t.isGreaterOrEqual(this.getEffectiveLevel())){var n,i=e.length-1,o=e[i];e.length>1&&isError(o)&&(n=o,i--);for(var r=[],s=0;s<=i;s++)r[s]=e[s];var a=new LoggingEvent(this,new Date,t,r,n);this.callAppenders(a)}},this.callAppenders=function(t){for(var e=this.getEffectiveAppenders(),n=0,i=e.length;n<i;n++)e[n].doAppend(t)},this.setLevel=function(t){i&&null===t?handleError("Logger.setLevel: you cannot set the level of the root logger to null"):t instanceof Level?n=t:handleError("Logger.setLevel: level supplied to logger "+this.name+" is not an instance of log4javascript.Level")},this.getLevel=function(){return n},this.getEffectiveLevel=function(){for(var t=this;null!==t;t=t.parent){var e=t.getLevel();if(null!==e)return e}},this.group=function(t,e){if(enabled)for(var n=this.getEffectiveAppenders(),i=0,o=n.length;i<o;i++)n[i].group(t,e)},this.groupEnd=function(){if(enabled)for(var t=this.getEffectiveAppenders(),e=0,n=t.length;e<n;e++)t[e].groupEnd()};var l={};this.time=function(t,e){enabled&&(isUndefined(t)?handleError("Logger.time: a name for the timer must be supplied"):!e||e instanceof Level?l[t]=new Timer(t,e):handleError("Logger.time: level supplied to timer "+t+" is not an instance of log4javascript.Level"))},this.timeEnd=function(t){if(enabled)if(isUndefined(t))handleError("Logger.timeEnd: a name for the timer must be supplied");else if(l[t]){var e=l[t],n=e.getElapsedTime();this.log(e.level,["Timer "+toStr(t)+" completed in "+n+"ms"]),delete l[t]}else logLog.warn("Logger.timeEnd: no timer found with name "+t)},this.assert=function(t){if(enabled&&!t){for(var e=[],n=1,i=arguments.length;n<i;n++)e.push(arguments[n]);e=e.length>0?e:["Assertion Failure"],e.push(newLine),e.push(t),this.log(Level.ERROR,e)}},this.toString=function(){return"Logger["+this.name+"]"}}function SimpleLayout(){this.customFields=[]}function NullLayout(){this.customFields=[]}function XmlLayout(t){this.combineMessages=extractBooleanFromParam(t,!0),this.customFields=[]}function escapeNewLines(t){return t.replace(/\r\n|\r|\n/g,"\\r\\n")}function JsonLayout(t,e){this.readable=extractBooleanFromParam(t,!1),this.combineMessages=extractBooleanFromParam(e,!0),this.batchHeader=this.readable?"["+newLine:"[",this.batchFooter=this.readable?"]"+newLine:"]",this.batchSeparator=this.readable?","+newLine:",",this.setKeys(),this.colon=this.readable?": ":":",this.tab=this.readable?"\t":"",this.lineBreak=this.readable?newLine:"",this.customFields=[]}function HttpPostDataLayout(){this.setKeys(),this.customFields=[],this.returnsPostData=!0}function formatObjectExpansion(t,e,n){function i(t,e,n){function r(t){for(var e=splitIntoLines(t),i=1,o=e.length;i<o;i++)e[i]=n+e[i];return e.join(newLine)}var s,a,l,c,u,h,d;if(n||(n=""),null===t)return"null";if(void 0===t)return"undefined";if("string"==typeof t)return r(t);if("object"==typeof t&&array_contains(o,t)){try{h=toStr(t)}catch(t){h="Error formatting property. Details: "+getExceptionStringRep(t)}return h+" [already expanded]"}if(t instanceof Array&&e>0){for(o.push(t),h="["+newLine,l=e-1,c=n+"  ",u=[],s=0,a=t.length;s<a;s++)try{d=i(t[s],l,c),u.push(c+d)}catch(t){u.push(c+"Error formatting array member. Details: "+getExceptionStringRep(t))}return h+=u.join(","+newLine)+newLine+n+"]"}if("[object Date]"==Object.prototype.toString.call(t))return t.toString();if("object"==typeof t&&e>0){o.push(t),h="{"+newLine,l=e-1,c=n+"  ",u=[];for(s in t)try{d=i(t[s],l,c),u.push(c+s+": "+d)}catch(t){u.push(c+s+": Error formatting property. Details: "+getExceptionStringRep(t))}return h+=u.join(","+newLine)+newLine+n+"}"}return r(toStr(t))}var o=[];return i(t,e,n)}function PatternLayout(t){this.pattern=t||PatternLayout.DEFAULT_CONVERSION_PATTERN,this.customFields=[]}function AlertAppender(){}function BrowserConsoleAppender(){}function isHttpRequestSuccessful(t){return isUndefined(t.status)||0===t.status||t.status>=200&&t.status<300||1223==t.status}function AjaxAppender(t,e){function n(t){return!S||(handleError("AjaxAppender: configuration option '"+t+"' may not be set after the appender has been initialized"),!1)}function i(){if(h&&enabled){k=!0;var t;if(p)x.length>0?(t=x.shift(),l(r(t),i)):(k=!1,d&&s());else{for(;t=x.shift();)l(r(t));k=!1,d&&s()}}}function o(){var t=!1;if(h&&enabled){for(var e,n=u.getLayout().allowBatching()?f:1,o=[];e=C.shift();)o.push(e),C.length>=n&&(x.push(o),o=[]);o.length>0&&x.push(o),t=x.length>0,p=!1,d=!1,i()}return t}function r(t){for(var e,n=[],i="";e=t.shift();)n.push(u.getLayout().formatWithException(e));return i=1==t.length?n.join(""):u.getLayout().batchHeader+n.join(u.getLayout().batchSeparator)+u.getLayout().batchFooter,_==u.defaults.contentType&&(i=u.getLayout().returnsPostData?i:urlEncode(y)+"="+urlEncode(i),i.length>0&&(i+="&"),i+="layout="+urlEncode(u.getLayout().toString())),i}function s(){window.setTimeout(i,g)}function a(){var t="AjaxAppender: could not create XMLHttpRequest object. AjaxAppender disabled";handleError(t),h=!1,v&&v(t)}function l(n,i){try{var o=getXmlHttp(a);if(h){o.onreadystatechange=function(){if(4==o.readyState){if(isHttpRequestSuccessful(o))m&&m(o),i&&i(o);else{var e="AjaxAppender.append: XMLHttpRequest request to URL "+t+" returned status code "+o.status;handleError(e),v&&v(e)}o.onreadystatechange=emptyFunction,o=null}},o.open("POST",t,!0),e&&withCredentialsSupported&&(o.withCredentials=!0);try{for(var r,s=0;r=T[s++];)o.setRequestHeader(r.name,r.value);o.setRequestHeader("Content-Type",_)}catch(t){var l="AjaxAppender.append: your browser's XMLHttpRequest implementation does not support setRequestHeader, therefore cannot post data. AjaxAppender disabled";return handleError(l),h=!1,void(v&&v(l))}o.send(n)}}catch(e){var c="AjaxAppender.append: error sending log message to "+t;handleError(c,e),h=!1,v&&v(c+". Details: "+getExceptionStringRep(e))}}function c(){if(S=!0,b){var t=window.onbeforeunload;window.onbeforeunload=function(){t&&t(),o()}}d&&s()}var u=this,h=!0;t||(handleError("AjaxAppender: URL must be specified in constructor"),h=!1);var d=this.defaults.timed,p=this.defaults.waitForResponse,f=this.defaults.batchSize,g=this.defaults.timerInterval,m=this.defaults.requestSuccessCallback,v=this.defaults.failCallback,y=this.defaults.postVarName,b=this.defaults.sendAllOnUnload,_=this.defaults.contentType,w=null,C=[],x=[],T=[],k=!1,S=!1;this.getSessionId=function(){return w},this.setSessionId=function(t){w=extractStringFromParam(t,null),this.layout.setCustomField("sessionid",w)},this.setLayout=function(t){n("layout")&&(this.layout=t,null!==w&&this.setSessionId(w))},this.isTimed=function(){return d},this.setTimed=function(t){n("timed")&&(d=bool(t))},this.getTimerInterval=function(){return g},this.setTimerInterval=function(t){n("timerInterval")&&(g=extractIntFromParam(t,g))},this.isWaitForResponse=function(){return p},this.setWaitForResponse=function(t){n("waitForResponse")&&(p=bool(t))},this.getBatchSize=function(){return f},this.setBatchSize=function(t){n("batchSize")&&(f=extractIntFromParam(t,f))},this.isSendAllOnUnload=function(){return b},this.setSendAllOnUnload=function(t){n("sendAllOnUnload")&&(b=extractBooleanFromParam(t,b))},this.setRequestSuccessCallback=function(t){m=extractFunctionFromParam(t,m)},this.setFailCallback=function(t){v=extractFunctionFromParam(t,v)},this.getPostVarName=function(){return y},this.setPostVarName=function(t){n("postVarName")&&(y=extractStringFromParam(t,y))},this.getHeaders=function(){return T},this.addHeader=function(t,e){"content-type"==t.toLowerCase()?_=e:T.push({name:t,value:e})},this.sendAll=i,this.sendAllRemaining=o,this.append=function(t){if(h){S||c(),C.push(t);var e=this.getLayout().allowBatching()?f:1;if(C.length>=e){for(var n,o=[];n=C.shift();)o.push(n);x.push(o),d||p&&(!p||k)||i()}}}}function setCookie(t,e,n,i){var o;if(i=i?"; path="+i:"",n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),o="; expires="+r.toGMTString()}else o="";document.cookie=escape(t)+"="+escape(e)+o+i}function getCookie(t){for(var e=escape(t)+"=",n=document.cookie.split(";"),i=0,o=n.length;i<o;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(e))return unescape(r.substring(e.length,r.length))}return null}function getBaseUrl(){for(var t=document.getElementsByTagName("script"),e=0,n=t.length;e<n;++e)if(-1!=t[e].src.indexOf("log4javascript")){var i=t[e].src.lastIndexOf("/");return-1==i?"":t[e].src.substr(0,i+1)}return null}function isLoaded(t){try{return bool(t.loaded)}catch(t){return!1}}function padWithSpaces(t,e){if(t.length<e){for(var n=[],i=Math.max(0,e-t.length),o=0;o<i;o++)n[o]=" ";t+=n.join("")}return t}function createDefaultLogger(){var t=log4javascript.getLogger(defaultLoggerName),e=new log4javascript.PopUpAppender;return t.addAppender(e),t}Array.prototype.push||(Array.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)this[this.length]=arguments[t];return this.length}),Array.prototype.shift||(Array.prototype.shift=function(){if(this.length>0){for(var t=this[0],e=0,n=this.length-1;e<n;e++)this[e]=this[e+1];return this.length=this.length-1,t}}),Array.prototype.splice||(Array.prototype.splice=function(t,e){var n=this.slice(t+e),i=this.slice(t,t+e);this.length=t;for(var o=[],r=0,s=arguments.length;r<s;r++)o[r]=arguments[r];var a=o.length>2?n=o.slice(2).concat(n):n;for(r=0,s=a.length;r<s;r++)this.push(a[r]);return i}),EventSupport.prototype={eventTypes:[],eventListeners:{},setEventTypes:function(t){if(t instanceof Array){this.eventTypes=t,this.eventListeners={};for(var e=0,n=this.eventTypes.length;e<n;e++)this.eventListeners[this.eventTypes[e]]=[]}else handleError("log4javascript.EventSupport ["+this+"]: setEventTypes: eventTypes parameter must be an Array")},addEventListener:function(t,e){"function"==typeof e?(array_contains(this.eventTypes,t)||handleError("log4javascript.EventSupport ["+this+"]: addEventListener: no event called '"+t+"'"),this.eventListeners[t].push(e)):handleError("log4javascript.EventSupport ["+this+"]: addEventListener: listener must be a function")},removeEventListener:function(t,e){"function"==typeof e?(array_contains(this.eventTypes,t)||handleError("log4javascript.EventSupport ["+this+"]: removeEventListener: no event called '"+t+"'"),array_remove(this.eventListeners[t],e)):handleError("log4javascript.EventSupport ["+this+"]: removeEventListener: listener must be a function")},dispatchEvent:function(t,e){if(array_contains(this.eventTypes,t))for(var n=this.eventListeners[t],i=0,o=n.length;i<o;i++)n[i](this,t,e);else handleError("log4javascript.EventSupport ["+this+"]: dispatchEvent: no event called '"+t+"'")}};var applicationStartDate=new Date,uniqueId="log4javascript_"+applicationStartDate.getTime()+"_"+Math.floor(1e8*Math.random()),emptyFunction=function(){},newLine="\r\n",pageLoaded=!1;Log4JavaScript.prototype=new EventSupport;var log4javascript=new Log4JavaScript;log4javascript.version="1.4.13",log4javascript.edition="log4javascript";var urlEncode=void 0!==window.encodeURIComponent?function(t){return encodeURIComponent(t)}:function(t){return escape(t).replace(/\+/g,"%2B").replace(/"/g,"%22").replace(/'/g,"%27").replace(/\//g,"%2F").replace(/=/g,"%3D")};Function.prototype.apply||(Function.prototype.apply=function(obj,args){var methodName="__apply__";void 0!==obj[methodName]&&(methodName+=String(Math.random()).substr(2)),obj[methodName]=this;for(var argsStrings=[],i=0,len=args.length;i<len;i++)argsStrings[i]="args["+i+"]";var script="obj."+methodName+"("+argsStrings.join(",")+")",returnValue=eval(script);return delete obj[methodName],returnValue}),Function.prototype.call||(Function.prototype.call=function(t){for(var e=[],n=1,i=arguments.length;n<i;n++)e[n-1]=arguments[n];return this.apply(t,e)});var logLog={quietMode:!1,debugMessages:[],setQuietMode:function(t){this.quietMode=bool(t)},numberOfErrors:0,alertAllErrors:!1,setAlertAllErrors:function(t){this.alertAllErrors=t},debug:function(t){this.debugMessages.push(t)},displayDebug:function(){alert(this.debugMessages.join(newLine))},warn:function(t,e){},error:function(t,e){if((1==++this.numberOfErrors||this.alertAllErrors)&&!this.quietMode){var n="log4javascript error: "+t;e&&(n+=newLine+newLine+"Original error: "+getExceptionStringRep(e)),alert(n)}}};log4javascript.logLog=logLog,log4javascript.setEventTypes(["load","error"]),log4javascript.handleError=handleError;var enabled=!("undefined"!=typeof log4javascript_disabled&&log4javascript_disabled);log4javascript.setEnabled=function(t){enabled=bool(t)},log4javascript.isEnabled=function(){return enabled};var useTimeStampsInMilliseconds=!0;log4javascript.setTimeStampsInMilliseconds=function(t){useTimeStampsInMilliseconds=bool(t)},log4javascript.isTimeStampsInMilliseconds=function(){return useTimeStampsInMilliseconds},log4javascript.evalInScope=function(expr){return eval(expr)};var showStackTraces=!1;log4javascript.setShowStackTraces=function(t){showStackTraces=bool(t)};var Level=function(t,e){this.level=t,this.name=e};Level.prototype={toString:function(){return this.name},equals:function(t){return this.level==t.level},isGreaterOrEqual:function(t){return this.level>=t.level}},Level.ALL=new Level(Number.MIN_VALUE,"ALL"),Level.TRACE=new Level(1e4,"TRACE"),Level.DEBUG=new Level(2e4,"DEBUG"),Level.INFO=new Level(3e4,"INFO"),Level.WARN=new Level(4e4,"WARN"),Level.ERROR=new Level(5e4,"ERROR"),Level.FATAL=new Level(6e4,"FATAL"),Level.OFF=new Level(Number.MAX_VALUE,"OFF"),log4javascript.Level=Level,Timer.prototype.getElapsedTime=function(){return(new Date).getTime()-this.start.getTime()};var anonymousLoggerName="[anonymous]",defaultLoggerName="[default]",nullLoggerName="[null]",rootLoggerName="root";Logger.prototype={trace:function(){this.log(Level.TRACE,arguments)},debug:function(){this.log(Level.DEBUG,arguments)},info:function(){this.log(Level.INFO,arguments)},warn:function(){this.log(Level.WARN,arguments)},error:function(){this.log(Level.ERROR,arguments)},fatal:function(){this.log(Level.FATAL,arguments)},isEnabledFor:function(t){return t.isGreaterOrEqual(this.getEffectiveLevel())},isTraceEnabled:function(){return this.isEnabledFor(Level.TRACE)},isDebugEnabled:function(){return this.isEnabledFor(Level.DEBUG)},isInfoEnabled:function(){return this.isEnabledFor(Level.INFO)},isWarnEnabled:function(){return this.isEnabledFor(Level.WARN)},isErrorEnabled:function(){return this.isEnabledFor(Level.ERROR)},isFatalEnabled:function(){return this.isEnabledFor(Level.FATAL)}},Logger.prototype.trace.isEntryPoint=!0,Logger.prototype.debug.isEntryPoint=!0,Logger.prototype.info.isEntryPoint=!0,Logger.prototype.warn.isEntryPoint=!0,Logger.prototype.error.isEntryPoint=!0,Logger.prototype.fatal.isEntryPoint=!0;var loggers={},loggerNames=[],ROOT_LOGGER_DEFAULT_LEVEL=Level.DEBUG,rootLogger=new Logger(rootLoggerName);rootLogger.setLevel(ROOT_LOGGER_DEFAULT_LEVEL),log4javascript.getRootLogger=function(){return rootLogger},log4javascript.getLogger=function(t){
if("string"!=typeof t&&(t=anonymousLoggerName,logLog.warn("log4javascript.getLogger: non-string logger name "+toStr(t)+" supplied, returning anonymous logger")),t==rootLoggerName&&handleError("log4javascript.getLogger: root logger may not be obtained by name"),!loggers[t]){var e=new Logger(t);loggers[t]=e,loggerNames.push(t);var n,i=t.lastIndexOf(".");if(i>-1){var o=t.substring(0,i);n=log4javascript.getLogger(o)}else n=rootLogger;n.addChild(e)}return loggers[t]};var defaultLogger=null;log4javascript.getDefaultLogger=function(){return defaultLogger||(defaultLogger=createDefaultLogger()),defaultLogger};var nullLogger=null;log4javascript.getNullLogger=function(){return nullLogger||(nullLogger=new Logger(nullLoggerName),nullLogger.setLevel(Level.OFF)),nullLogger},log4javascript.resetConfiguration=function(){rootLogger.setLevel(ROOT_LOGGER_DEFAULT_LEVEL),loggers={}};var LoggingEvent=function(t,e,n,i,o){this.logger=t,this.timeStamp=e,this.timeStampInMilliseconds=e.getTime(),this.timeStampInSeconds=Math.floor(this.timeStampInMilliseconds/1e3),this.milliseconds=this.timeStamp.getMilliseconds(),this.level=n,this.messages=i,this.exception=o};LoggingEvent.prototype={getThrowableStrRep:function(){return this.exception?getExceptionStringRep(this.exception):""},getCombinedMessages:function(){return 1==this.messages.length?this.messages[0]:this.messages.join(newLine)},toString:function(){return"LoggingEvent["+this.level+"]"}},log4javascript.LoggingEvent=LoggingEvent;var Layout=function(){};Layout.prototype={defaults:{loggerKey:"logger",timeStampKey:"timestamp",millisecondsKey:"milliseconds",levelKey:"level",messageKey:"message",exceptionKey:"exception",urlKey:"url"},loggerKey:"logger",timeStampKey:"timestamp",millisecondsKey:"milliseconds",levelKey:"level",messageKey:"message",exceptionKey:"exception",urlKey:"url",batchHeader:"",batchFooter:"",batchSeparator:"",returnsPostData:!1,overrideTimeStampsSetting:!1,useTimeStampsInMilliseconds:null,format:function(){handleError("Layout.format: layout supplied has no format() method")},ignoresThrowable:function(){handleError("Layout.ignoresThrowable: layout supplied has no ignoresThrowable() method")},getContentType:function(){return"text/plain"},allowBatching:function(){return!0},setTimeStampsInMilliseconds:function(t){this.overrideTimeStampsSetting=!0,this.useTimeStampsInMilliseconds=bool(t)},isTimeStampsInMilliseconds:function(){return this.overrideTimeStampsSetting?this.useTimeStampsInMilliseconds:useTimeStampsInMilliseconds},getTimeStampValue:function(t){return this.isTimeStampsInMilliseconds()?t.timeStampInMilliseconds:t.timeStampInSeconds},getDataValues:function(t,e){var n=[[this.loggerKey,t.logger.name],[this.timeStampKey,this.getTimeStampValue(t)],[this.levelKey,t.level.name],[this.urlKey,window.location.href],[this.messageKey,e?t.getCombinedMessages():t.messages]];if(this.isTimeStampsInMilliseconds()||n.push([this.millisecondsKey,t.milliseconds]),t.exception&&n.push([this.exceptionKey,getExceptionStringRep(t.exception)]),this.hasCustomFields())for(var i=0,o=this.customFields.length;i<o;i++){var r=this.customFields[i].value;"function"==typeof r&&(r=r(this,t)),n.push([this.customFields[i].name,r])}return n},setKeys:function(t,e,n,i,o,r,s){this.loggerKey=extractStringFromParam(t,this.defaults.loggerKey),this.timeStampKey=extractStringFromParam(e,this.defaults.timeStampKey),this.levelKey=extractStringFromParam(n,this.defaults.levelKey),this.messageKey=extractStringFromParam(i,this.defaults.messageKey),this.exceptionKey=extractStringFromParam(o,this.defaults.exceptionKey),this.urlKey=extractStringFromParam(r,this.defaults.urlKey),this.millisecondsKey=extractStringFromParam(s,this.defaults.millisecondsKey)},setCustomField:function(t,e){for(var n=!1,i=0,o=this.customFields.length;i<o;i++)this.customFields[i].name===t&&(this.customFields[i].value=e,n=!0);n||this.customFields.push({name:t,value:e})},hasCustomFields:function(){return this.customFields.length>0},formatWithException:function(t){var e=this.format(t);return t.exception&&this.ignoresThrowable()&&(e+=t.getThrowableStrRep()),e},toString:function(){handleError("Layout.toString: all layouts must override this method")}},log4javascript.Layout=Layout;var Appender=function(){};Appender.prototype=new EventSupport,Appender.prototype.layout=new PatternLayout,Appender.prototype.threshold=Level.ALL,Appender.prototype.loggers=[],Appender.prototype.doAppend=function(t){enabled&&t.level.level>=this.threshold.level&&this.append(t)},Appender.prototype.append=function(t){},Appender.prototype.setLayout=function(t){t instanceof Layout?this.layout=t:handleError("Appender.setLayout: layout supplied to "+this.toString()+" is not a subclass of Layout")},Appender.prototype.getLayout=function(){return this.layout},Appender.prototype.setThreshold=function(t){t instanceof Level?this.threshold=t:handleError("Appender.setThreshold: threshold supplied to "+this.toString()+" is not a subclass of Level")},Appender.prototype.getThreshold=function(){return this.threshold},Appender.prototype.setAddedToLogger=function(t){this.loggers.push(t)},Appender.prototype.setRemovedFromLogger=function(t){array_remove(this.loggers,t)},Appender.prototype.group=emptyFunction,Appender.prototype.groupEnd=emptyFunction,Appender.prototype.toString=function(){handleError("Appender.toString: all appenders must override this method")},log4javascript.Appender=Appender,SimpleLayout.prototype=new Layout,SimpleLayout.prototype.format=function(t){return t.level.name+" - "+t.getCombinedMessages()},SimpleLayout.prototype.ignoresThrowable=function(){return!0},SimpleLayout.prototype.toString=function(){return"SimpleLayout"},log4javascript.SimpleLayout=SimpleLayout,NullLayout.prototype=new Layout,NullLayout.prototype.format=function(t){return t.messages},NullLayout.prototype.ignoresThrowable=function(){return!0},NullLayout.prototype.formatWithException=function(t){var e=t.messages,n=t.exception;return n?e.concat([n]):e},NullLayout.prototype.toString=function(){return"NullLayout"},log4javascript.NullLayout=NullLayout,XmlLayout.prototype=new Layout,XmlLayout.prototype.isCombinedMessages=function(){return this.combineMessages},XmlLayout.prototype.getContentType=function(){return"text/xml"},XmlLayout.prototype.escapeCdata=function(t){return t.replace(/\]\]>/,"]]>]]&gt;<![CDATA[")},XmlLayout.prototype.format=function(t){function e(t){return t="string"==typeof t?t:toStr(t),"<log4javascript:message><![CDATA["+o.escapeCdata(t)+"]]></log4javascript:message>"}var n,i,o=this,r='<log4javascript:event logger="'+t.logger.name+'" timestamp="'+this.getTimeStampValue(t)+'"';if(this.isTimeStampsInMilliseconds()||(r+=' milliseconds="'+t.milliseconds+'"'),r+=' level="'+t.level.name+'">'+newLine,this.combineMessages)r+=e(t.getCombinedMessages());else{for(r+="<log4javascript:messages>"+newLine,n=0,i=t.messages.length;n<i;n++)r+=e(t.messages[n])+newLine;r+="</log4javascript:messages>"+newLine}if(this.hasCustomFields())for(n=0,i=this.customFields.length;n<i;n++)r+='<log4javascript:customfield name="'+this.customFields[n].name+'"><![CDATA['+this.customFields[n].value.toString()+"]]></log4javascript:customfield>"+newLine;return t.exception&&(r+="<log4javascript:exception><![CDATA["+getExceptionStringRep(t.exception)+"]]></log4javascript:exception>"+newLine),r+="</log4javascript:event>"+newLine+newLine},XmlLayout.prototype.ignoresThrowable=function(){return!1},XmlLayout.prototype.toString=function(){return"XmlLayout"},log4javascript.XmlLayout=XmlLayout,JsonLayout.prototype=new Layout,JsonLayout.prototype.isReadable=function(){return this.readable},JsonLayout.prototype.isCombinedMessages=function(){return this.combineMessages},JsonLayout.prototype.format=function(t){function e(t,n,i){var r,s=typeof t;if(t instanceof Date)r=String(t.getTime());else if(i&&t instanceof Array){r="["+o.lineBreak;for(var a=0,l=t.length;a<l;a++){var c=n+o.tab;r+=c+e(t[a],c,!1),a<t.length-1&&(r+=","),r+=o.lineBreak}r+=n+"]"}else r="number"!==s&&"boolean"!==s?'"'+escapeNewLines(toStr(t).replace(/\"/g,'\\"'))+'"':t;return r}var n,i,o=this,r=this.getDataValues(t,this.combineMessages),s="{"+this.lineBreak;for(n=0,i=r.length-1;n<=i;n++)s+=this.tab+'"'+r[n][0]+'"'+this.colon+e(r[n][1],this.tab,!0),n<i&&(s+=","),s+=this.lineBreak;return s+="}"+this.lineBreak},JsonLayout.prototype.ignoresThrowable=function(){return!1},JsonLayout.prototype.toString=function(){return"JsonLayout"},JsonLayout.prototype.getContentType=function(){return"application/json"},log4javascript.JsonLayout=JsonLayout,HttpPostDataLayout.prototype=new Layout,HttpPostDataLayout.prototype.allowBatching=function(){return!1},HttpPostDataLayout.prototype.format=function(t){for(var e=this.getDataValues(t),n=[],i=0,o=e.length;i<o;i++){var r=e[i][1]instanceof Date?String(e[i][1].getTime()):e[i][1];n.push(urlEncode(e[i][0])+"="+urlEncode(r))}return n.join("&")},HttpPostDataLayout.prototype.ignoresThrowable=function(t){return!1},HttpPostDataLayout.prototype.toString=function(){return"HttpPostDataLayout"},log4javascript.HttpPostDataLayout=HttpPostDataLayout;var SimpleDateFormat;!function(){var t=/('[^']*')|(G+|y+|M+|w+|W+|D+|d+|F+|E+|a+|H+|k+|K+|h+|m+|s+|S+|Z+)|([a-zA-Z]+)|([^a-zA-Z']+)/,e=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i={G:0,y:3,M:4,w:2,W:2,D:2,d:2,F:2,E:1,a:0,H:2,k:2,K:2,h:2,m:2,s:2,S:2,Z:5},o=function(t,e,n){var i=new Date(t,e,n,0,0,0);return i.setMilliseconds(0),i};Date.prototype.getDifference=function(t){return this.getTime()-t.getTime()},Date.prototype.isBefore=function(t){return this.getTime()<t.getTime()},Date.prototype.getUTCTime=function(){return Date.UTC(this.getFullYear(),this.getMonth(),this.getDate(),this.getHours(),this.getMinutes(),this.getSeconds(),this.getMilliseconds())},Date.prototype.getTimeSince=function(t){return this.getUTCTime()-t.getUTCTime()},Date.prototype.getPreviousSunday=function(){var t=new Date(this.getFullYear(),this.getMonth(),this.getDate(),12,0,0),e=new Date(t.getTime()-864e5*this.getDay());return o(e.getFullYear(),e.getMonth(),e.getDate())},Date.prototype.getWeekInYear=function(t){isUndefined(this.minimalDaysInFirstWeek)&&(t=1);var e=this.getPreviousSunday(),n=o(this.getFullYear(),0,1),i=e.isBefore(n)?0:1+Math.floor(e.getTimeSince(n)/6048e5),r=7-n.getDay(),s=i;return r<t&&s--,s},Date.prototype.getWeekInMonth=function(t){isUndefined(this.minimalDaysInFirstWeek)&&(t=1);var e=this.getPreviousSunday(),n=o(this.getFullYear(),this.getMonth(),1),i=e.isBefore(n)?0:1+Math.floor(e.getTimeSince(n)/6048e5),r=7-n.getDay(),s=i;return r>=t&&s++,s},Date.prototype.getDayInYear=function(){var t=o(this.getFullYear(),0,1);return 1+Math.floor(this.getTimeSince(t)/864e5)},SimpleDateFormat=function(t){this.formatString=t},SimpleDateFormat.prototype.setMinimalDaysInFirstWeek=function(t){this.minimalDaysInFirstWeek=t},SimpleDateFormat.prototype.getMinimalDaysInFirstWeek=function(){return isUndefined(this.minimalDaysInFirstWeek)?1:this.minimalDaysInFirstWeek};var r=function(t,e){for(;t.length<e;)t="0"+t;return t},s=function(t,e,n){return e>=4?t:t.substr(0,Math.max(n,e))},a=function(t,e){return r(""+t,e)};SimpleDateFormat.prototype.format=function(o){for(var l,c="",u=this.formatString;l=t.exec(u);){var h=l[1],d=l[2],p=l[3],f=l[4];if(h)c+="''"==h?"'":h.substring(1,h.length-1);else if(p);else if(f)c+=f;else if(d){var g=d.charAt(0),m=d.length,v="";switch(g){case"G":v="AD";break;case"y":v=o.getFullYear();break;case"M":v=o.getMonth();break;case"w":v=o.getWeekInYear(this.getMinimalDaysInFirstWeek());break;case"W":v=o.getWeekInMonth(this.getMinimalDaysInFirstWeek());break;case"D":v=o.getDayInYear();break;case"d":v=o.getDate();break;case"F":v=1+Math.floor((o.getDate()-1)/7);break;case"E":v=n[o.getDay()];break;case"a":v=o.getHours()>=12?"PM":"AM";break;case"H":v=o.getHours();break;case"k":v=o.getHours()||24;break;case"K":v=o.getHours()%12;break;case"h":v=o.getHours()%12||12;break;case"m":v=o.getMinutes();break;case"s":v=o.getSeconds();break;case"S":v=o.getMilliseconds();break;case"Z":v=o.getTimezoneOffset()}switch(i[g]){case 0:c+=s(v,m,2);break;case 1:c+=s(v,m,3);break;case 2:c+=a(v,m);break;case 3:if(m<=3){var y=""+v;c+=y.substr(2,2)}else c+=a(v,m);break;case 4:c+=m>=3?s(e[v],m,m):a(v+1,m);break;case 5:var b=v>0,_=b?"-":"+",w=Math.abs(v),C=""+Math.floor(w/60);C=r(C,2);var x=""+w%60;x=r(x,2),c+=_+C+x}}u=u.substr(l.index+l[0].length)}return c}}(),log4javascript.SimpleDateFormat=SimpleDateFormat,PatternLayout.TTCC_CONVERSION_PATTERN="%r %p %c - %m%n",PatternLayout.DEFAULT_CONVERSION_PATTERN="%m%n",PatternLayout.ISO8601_DATEFORMAT="yyyy-MM-dd HH:mm:ss,SSS",PatternLayout.DATETIME_DATEFORMAT="dd MMM yyyy HH:mm:ss,SSS",PatternLayout.ABSOLUTETIME_DATEFORMAT="HH:mm:ss,SSS",PatternLayout.prototype=new Layout,PatternLayout.prototype.format=function(t){for(var e,n=/%(-?[0-9]+)?(\.?[0-9]+)?([acdfmMnpr%])(\{([^\}]+)\})?|([^%]+)/,i="",o=this.pattern;e=n.exec(o);){var r=e[0],s=e[1],a=e[2],l=e[3],c=e[5],u=e[6];if(u)i+=""+u;else{var h="";switch(l){case"a":case"m":var d=0;c&&(d=parseInt(c,10),isNaN(d)&&(handleError("PatternLayout.format: invalid specifier '"+c+"' for conversion character '"+l+"' - should be a number"),d=0));for(var p="a"===l?t.messages[0]:t.messages,f=0,g=p.length;f<g;f++)f>0&&" "!==h.charAt(h.length-1)&&(h+=" "),h+=0===d?p[f]:formatObjectExpansion(p[f],d);break;case"c":var m=t.logger.name;if(c){var v=parseInt(c,10),y=t.logger.name.split(".");h=v>=y.length?m:y.slice(y.length-v).join(".")}else h=m;break;case"d":var b=PatternLayout.ISO8601_DATEFORMAT;c&&(b=c,"ISO8601"==b?b=PatternLayout.ISO8601_DATEFORMAT:"ABSOLUTE"==b?b=PatternLayout.ABSOLUTETIME_DATEFORMAT:"DATE"==b&&(b=PatternLayout.DATETIME_DATEFORMAT)),h=new SimpleDateFormat(b).format(t.timeStamp);break;case"f":if(this.hasCustomFields()){var _=0;c&&(_=parseInt(c,10),isNaN(_)?handleError("PatternLayout.format: invalid specifier '"+c+"' for conversion character 'f' - should be a number"):0===_?handleError("PatternLayout.format: invalid specifier '"+c+"' for conversion character 'f' - must be greater than zero"):_>this.customFields.length?handleError("PatternLayout.format: invalid specifier '"+c+"' for conversion character 'f' - there aren't that many custom fields"):_-=1);var w=this.customFields[_].value;"function"==typeof w&&(w=w(this,t)),h=w}break;case"n":h=newLine;break;case"p":h=t.level.name;break;case"r":h=""+t.timeStamp.getDifference(applicationStartDate);break;case"%":h="%";break;default:h=r}var C;if(a){C=parseInt(a.substr(1),10);var x=h.length;C<x&&(h=h.substring(x-C,x))}if(s)if("-"==s.charAt(0))for(C=parseInt(s.substr(1),10);h.length<C;)h+=" ";else for(C=parseInt(s,10);h.length<C;)h=" "+h;i+=h}o=o.substr(e.index+e[0].length)}return i},PatternLayout.prototype.ignoresThrowable=function(){return!0},PatternLayout.prototype.toString=function(){return"PatternLayout"},log4javascript.PatternLayout=PatternLayout,AlertAppender.prototype=new Appender,AlertAppender.prototype.layout=new SimpleLayout,AlertAppender.prototype.append=function(t){alert(this.getLayout().formatWithException(t))},AlertAppender.prototype.toString=function(){return"AlertAppender"},log4javascript.AlertAppender=AlertAppender,BrowserConsoleAppender.prototype=new log4javascript.Appender,BrowserConsoleAppender.prototype.layout=new NullLayout,BrowserConsoleAppender.prototype.threshold=Level.DEBUG,BrowserConsoleAppender.prototype.append=function(t){var e=this,n=function(n){var i=e.getLayout().formatWithException(t);return"string"==typeof i?n?i:[i]:n?i.join(" "):i},i=window.console;if(i&&i.log){var o;o=i.debug&&Level.DEBUG.isGreaterOrEqual(t.level)?"debug":i.info&&Level.INFO.equals(t.level)?"info":i.warn&&Level.WARN.equals(t.level)?"warn":i.error&&t.level.isGreaterOrEqual(Level.ERROR)?"error":"log","function"==typeof i[o].apply?i[o].apply(i,n(!1)):i[o](n(!0))}else"undefined"!=typeof opera&&opera.postError&&opera.postError(n(!0))},BrowserConsoleAppender.prototype.group=function(t){window.console&&window.console.group&&window.console.group(t)},BrowserConsoleAppender.prototype.groupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},BrowserConsoleAppender.prototype.toString=function(){return"BrowserConsoleAppender"},log4javascript.BrowserConsoleAppender=BrowserConsoleAppender;var xhrFactory=function(){return new XMLHttpRequest},xmlHttpFactories=[xhrFactory,function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],withCredentialsSupported=!1,getXmlHttp=function(t){for(var e,n=null,i=0,o=xmlHttpFactories.length;i<o;i++){e=xmlHttpFactories[i];try{return n=e(),withCredentialsSupported=e==xhrFactory&&"withCredentials"in n,getXmlHttp=e,n}catch(t){}}t?t():handleError("getXmlHttp: unable to obtain XMLHttpRequest object")};AjaxAppender.prototype=new Appender,AjaxAppender.prototype.defaults={waitForResponse:!1,timed:!1,timerInterval:1e3,batchSize:1,sendAllOnUnload:!1,requestSuccessCallback:null,failCallback:null,postVarName:"data",contentType:"application/x-www-form-urlencoded"},AjaxAppender.prototype.layout=new HttpPostDataLayout,AjaxAppender.prototype.toString=function(){return"AjaxAppender"},log4javascript.AjaxAppender=AjaxAppender;var ConsoleAppender;if(function(){function t(t,e,n,i,o){this.create(!1,null,t,e,n,i,o,this.defaults.focusPopUp)}function e(t,e,n,i,o,r){this.create(!0,t,e,n,i,o,r,!1)}var n=function(){
return['<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">','<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">',"\t<head>","\t\t<title>log4javascript</title>",'\t\t<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />',"\t\t\x3c!-- Make IE8 behave like IE7, having gone to all the trouble of making IE work --\x3e",'\t\t<meta http-equiv="X-UA-Compatible" content="IE=7" />','\t\t<script type="text/javascript">var isIe = false, isIePre7 = false;<\/script>','\t\t\x3c!--[if IE]><script type="text/javascript">isIe = true<\/script><![endif]--\x3e','\t\t\x3c!--[if lt IE 7]><script type="text/javascript">isIePre7 = true<\/script><![endif]--\x3e','\t\t<script type="text/javascript">',"\t\t\t//<![CDATA[","\t\t\tvar loggingEnabled = true;","\t\t\tvar logQueuedEventsTimer = null;","\t\t\tvar logEntries = [];","\t\t\tvar logEntriesAndSeparators = [];","\t\t\tvar logItems = [];","\t\t\tvar renderDelay = 100;","\t\t\tvar unrenderedLogItemsExist = false;","\t\t\tvar rootGroup, currentGroup = null;","\t\t\tvar loaded = false;","\t\t\tvar currentLogItem = null;","\t\t\tvar logMainContainer;","","\t\t\tfunction copyProperties(obj, props) {","\t\t\t\tfor (var i in props) {","\t\t\t\t\tobj[i] = props[i];","\t\t\t\t}","\t\t\t}","","\t\t\t/*----------------------------------------------------------------*/","","\t\t\tfunction LogItem() {","\t\t\t}","","\t\t\tLogItem.prototype = {","\t\t\t\tmainContainer: null,","\t\t\t\twrappedContainer: null,","\t\t\t\tunwrappedContainer: null,","\t\t\t\tgroup: null,","","\t\t\t\tappendToLog: function() {","\t\t\t\t\tfor (var i = 0, len = this.elementContainers.length; i < len; i++) {","\t\t\t\t\t\tthis.elementContainers[i].appendToLog();","\t\t\t\t\t}","\t\t\t\t\tthis.group.update();","\t\t\t\t},","","\t\t\t\tdoRemove: function(doUpdate, removeFromGroup) {","\t\t\t\t\tif (this.rendered) {","\t\t\t\t\t\tfor (var i = 0, len = this.elementContainers.length; i < len; i++) {","\t\t\t\t\t\t\tthis.elementContainers[i].remove();","\t\t\t\t\t\t}","\t\t\t\t\t\tthis.unwrappedElementContainer = null;","\t\t\t\t\t\tthis.wrappedElementContainer = null;","\t\t\t\t\t\tthis.mainElementContainer = null;","\t\t\t\t\t}","\t\t\t\t\tif (this.group && removeFromGroup) {","\t\t\t\t\t\tthis.group.removeChild(this, doUpdate);","\t\t\t\t\t}","\t\t\t\t\tif (this === currentLogItem) {","\t\t\t\t\t\tcurrentLogItem = null;","\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\tremove: function(doUpdate, removeFromGroup) {","\t\t\t\t\tthis.doRemove(doUpdate, removeFromGroup);","\t\t\t\t},","","\t\t\t\trender: function() {},","","\t\t\t\taccept: function(visitor) {","\t\t\t\t\tvisitor.visit(this);","\t\t\t\t},","","\t\t\t\tgetUnwrappedDomContainer: function() {","\t\t\t\t\treturn this.group.unwrappedElementContainer.contentDiv;","\t\t\t\t},","","\t\t\t\tgetWrappedDomContainer: function() {","\t\t\t\t\treturn this.group.wrappedElementContainer.contentDiv;","\t\t\t\t},","","\t\t\t\tgetMainDomContainer: function() {","\t\t\t\t\treturn this.group.mainElementContainer.contentDiv;","\t\t\t\t}","\t\t\t};","","\t\t\tLogItem.serializedItemKeys = {LOG_ENTRY: 0, GROUP_START: 1, GROUP_END: 2};","","\t\t\t/*----------------------------------------------------------------*/","","\t\t\tfunction LogItemContainerElement() {","\t\t\t}","","\t\t\tLogItemContainerElement.prototype = {","\t\t\t\tappendToLog: function() {","\t\t\t\t\tvar insertBeforeFirst = (newestAtTop && this.containerDomNode.hasChildNodes());","\t\t\t\t\tif (insertBeforeFirst) {","\t\t\t\t\t\tthis.containerDomNode.insertBefore(this.mainDiv, this.containerDomNode.firstChild);","\t\t\t\t\t} else {","\t\t\t\t\t\tthis.containerDomNode.appendChild(this.mainDiv);","\t\t\t\t\t}","\t\t\t\t}","\t\t\t};","","\t\t\t/*----------------------------------------------------------------*/","","\t\t\tfunction SeparatorElementContainer(containerDomNode) {","\t\t\t\tthis.containerDomNode = containerDomNode;",'\t\t\t\tthis.mainDiv = document.createElement("div");','\t\t\t\tthis.mainDiv.className = "separator";','\t\t\t\tthis.mainDiv.innerHTML = "&nbsp;";',"\t\t\t}","","\t\t\tSeparatorElementContainer.prototype = new LogItemContainerElement();","","\t\t\tSeparatorElementContainer.prototype.remove = function() {","\t\t\t\tthis.mainDiv.parentNode.removeChild(this.mainDiv);","\t\t\t\tthis.mainDiv = null;","\t\t\t};","","\t\t\t/*----------------------------------------------------------------*/","","\t\t\tfunction Separator() {","\t\t\t\tthis.rendered = false;","\t\t\t}","","\t\t\tSeparator.prototype = new LogItem();","","\t\t\tcopyProperties(Separator.prototype, {","\t\t\t\trender: function() {","\t\t\t\t\tvar containerDomNode = this.group.contentDiv;","\t\t\t\t\tif (isIe) {","\t\t\t\t\t\tthis.unwrappedElementContainer = new SeparatorElementContainer(this.getUnwrappedDomContainer());","\t\t\t\t\t\tthis.wrappedElementContainer = new SeparatorElementContainer(this.getWrappedDomContainer());","\t\t\t\t\t\tthis.elementContainers = [this.unwrappedElementContainer, this.wrappedElementContainer];","\t\t\t\t\t} else {","\t\t\t\t\t\tthis.mainElementContainer = new SeparatorElementContainer(this.getMainDomContainer());","\t\t\t\t\t\tthis.elementContainers = [this.mainElementContainer];","\t\t\t\t\t}","\t\t\t\t\tthis.content = this.formattedMessage;","\t\t\t\t\tthis.rendered = true;","\t\t\t\t}","\t\t\t});","","\t\t\t/*----------------------------------------------------------------*/","","\t\t\tfunction GroupElementContainer(group, containerDomNode, isRoot, isWrapped) {","\t\t\t\tthis.group = group;","\t\t\t\tthis.containerDomNode = containerDomNode;","\t\t\t\tthis.isRoot = isRoot;","\t\t\t\tthis.isWrapped = isWrapped;","\t\t\t\tthis.expandable = false;","","\t\t\t\tif (this.isRoot) {","\t\t\t\t\tif (isIe) {",'\t\t\t\t\t\tthis.contentDiv = logMainContainer.appendChild(document.createElement("div"));','\t\t\t\t\t\tthis.contentDiv.id = this.isWrapped ? "log_wrapped" : "log_unwrapped";',"\t\t\t\t\t} else {","\t\t\t\t\t\tthis.contentDiv = logMainContainer;","\t\t\t\t\t}","\t\t\t\t} else {","\t\t\t\t\tvar groupElementContainer = this;","",'\t\t\t\t\tthis.mainDiv = document.createElement("div");','\t\t\t\t\tthis.mainDiv.className = "group";',"",'\t\t\t\t\tthis.headingDiv = this.mainDiv.appendChild(document.createElement("div"));','\t\t\t\t\tthis.headingDiv.className = "groupheading";',"",'\t\t\t\t\tthis.expander = this.headingDiv.appendChild(document.createElement("span"));','\t\t\t\t\tthis.expander.className = "expander unselectable greyedout";',"\t\t\t\t\tthis.expander.unselectable = true;",'\t\t\t\t\tvar expanderText = this.group.expanded ? "-" : "+";',"\t\t\t\t\tthis.expanderTextNode = this.expander.appendChild(document.createTextNode(expanderText));","",'\t\t\t\t\tthis.headingDiv.appendChild(document.createTextNode(" " + this.group.name));',"",'\t\t\t\t\tthis.contentDiv = this.mainDiv.appendChild(document.createElement("div"));','\t\t\t\t\tvar contentCssClass = this.group.expanded ? "expanded" : "collapsed";','\t\t\t\t\tthis.contentDiv.className = "groupcontent " + contentCssClass;',"","\t\t\t\t\tthis.expander.onclick = function() {","\t\t\t\t\t\tif (groupElementContainer.group.expandable) {","\t\t\t\t\t\t\tgroupElementContainer.group.toggleExpanded();","\t\t\t\t\t\t}","\t\t\t\t\t};","\t\t\t\t}","\t\t\t}","","\t\t\tGroupElementContainer.prototype = new LogItemContainerElement();","","\t\t\tcopyProperties(GroupElementContainer.prototype, {","\t\t\t\ttoggleExpanded: function() {","\t\t\t\t\tif (!this.isRoot) {","\t\t\t\t\t\tvar oldCssClass, newCssClass, expanderText;","\t\t\t\t\t\tif (this.group.expanded) {",'\t\t\t\t\t\t\tnewCssClass = "expanded";','\t\t\t\t\t\t\toldCssClass = "collapsed";','\t\t\t\t\t\t\texpanderText = "-";',"\t\t\t\t\t\t} else {",'\t\t\t\t\t\t\tnewCssClass = "collapsed";','\t\t\t\t\t\t\toldCssClass = "expanded";','\t\t\t\t\t\t\texpanderText = "+";',"\t\t\t\t\t\t}","\t\t\t\t\t\treplaceClass(this.contentDiv, newCssClass, oldCssClass);","\t\t\t\t\t\tthis.expanderTextNode.nodeValue = expanderText;","\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\tremove: function() {","\t\t\t\t\tif (!this.isRoot) {","\t\t\t\t\t\tthis.headingDiv = null;","\t\t\t\t\t\tthis.expander.onclick = null;","\t\t\t\t\t\tthis.expander = null;","\t\t\t\t\t\tthis.expanderTextNode = null;","\t\t\t\t\t\tthis.contentDiv = null;","\t\t\t\t\t\tthis.containerDomNode = null;","\t\t\t\t\t\tthis.mainDiv.parentNode.removeChild(this.mainDiv);","\t\t\t\t\t\tthis.mainDiv = null;","\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\treverseChildren: function() {","\t\t\t\t\t// Invert the order of the log entries","\t\t\t\t\tvar node = null;","","\t\t\t\t\t// Remove all the log container nodes","\t\t\t\t\tvar childDomNodes = [];","\t\t\t\t\twhile ((node = this.contentDiv.firstChild)) {","\t\t\t\t\t\tthis.contentDiv.removeChild(node);","\t\t\t\t\t\tchildDomNodes.push(node);","\t\t\t\t\t}","","\t\t\t\t\t// Put them all back in reverse order","\t\t\t\t\twhile ((node = childDomNodes.pop())) {","\t\t\t\t\t\tthis.contentDiv.appendChild(node);","\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\tupdate: function() {","\t\t\t\t\tif (!this.isRoot) {","\t\t\t\t\t\tif (this.group.expandable) {",'\t\t\t\t\t\t\tremoveClass(this.expander, "greyedout");',"\t\t\t\t\t\t} else {",'\t\t\t\t\t\t\taddClass(this.expander, "greyedout");',"\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\tclear: function() {","\t\t\t\t\tif (this.isRoot) {",'\t\t\t\t\t\tthis.contentDiv.innerHTML = "";',"\t\t\t\t\t}","\t\t\t\t}","\t\t\t});","","\t\t\t/*----------------------------------------------------------------*/","","\t\t\tfunction Group(name, isRoot, initiallyExpanded) {","\t\t\t\tthis.name = name;","\t\t\t\tthis.group = null;","\t\t\t\tthis.isRoot = isRoot;","\t\t\t\tthis.initiallyExpanded = initiallyExpanded;","\t\t\t\tthis.elementContainers = [];","\t\t\t\tthis.children = [];","\t\t\t\tthis.expanded = initiallyExpanded;","\t\t\t\tthis.rendered = false;","\t\t\t\tthis.expandable = false;","\t\t\t}","","\t\t\tGroup.prototype = new LogItem();","","\t\t\tcopyProperties(Group.prototype, {","\t\t\t\taddChild: function(logItem) {","\t\t\t\t\tthis.children.push(logItem);","\t\t\t\t\tlogItem.group = this;","\t\t\t\t},","","\t\t\t\trender: function() {","\t\t\t\t\tif (isIe) {","\t\t\t\t\t\tvar unwrappedDomContainer, wrappedDomContainer;","\t\t\t\t\t\tif (this.isRoot) {","\t\t\t\t\t\t\tunwrappedDomContainer = logMainContainer;","\t\t\t\t\t\t\twrappedDomContainer = logMainContainer;","\t\t\t\t\t\t} else {","\t\t\t\t\t\t\tunwrappedDomContainer = this.getUnwrappedDomContainer();","\t\t\t\t\t\t\twrappedDomContainer = this.getWrappedDomContainer();","\t\t\t\t\t\t}","\t\t\t\t\t\tthis.unwrappedElementContainer = new GroupElementContainer(this, unwrappedDomContainer, this.isRoot, false);","\t\t\t\t\t\tthis.wrappedElementContainer = new GroupElementContainer(this, wrappedDomContainer, this.isRoot, true);","\t\t\t\t\t\tthis.elementContainers = [this.unwrappedElementContainer, this.wrappedElementContainer];","\t\t\t\t\t} else {","\t\t\t\t\t\tvar mainDomContainer = this.isRoot ? logMainContainer : this.getMainDomContainer();","\t\t\t\t\t\tthis.mainElementContainer = new GroupElementContainer(this, mainDomContainer, this.isRoot, false);","\t\t\t\t\t\tthis.elementContainers = [this.mainElementContainer];","\t\t\t\t\t}","\t\t\t\t\tthis.rendered = true;","\t\t\t\t},","","\t\t\t\ttoggleExpanded: function() {","\t\t\t\t\tthis.expanded = !this.expanded;","\t\t\t\t\tfor (var i = 0, len = this.elementContainers.length; i < len; i++) {","\t\t\t\t\t\tthis.elementContainers[i].toggleExpanded();","\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\texpand: function() {","\t\t\t\t\tif (!this.expanded) {","\t\t\t\t\t\tthis.toggleExpanded();","\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\taccept: function(visitor) {","\t\t\t\t\tvisitor.visitGroup(this);","\t\t\t\t},","","\t\t\t\treverseChildren: function() {","\t\t\t\t\tif (this.rendered) {","\t\t\t\t\t\tfor (var i = 0, len = this.elementContainers.length; i < len; i++) {","\t\t\t\t\t\t\tthis.elementContainers[i].reverseChildren();","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\tupdate: function() {","\t\t\t\t\tvar previouslyExpandable = this.expandable;","\t\t\t\t\tthis.expandable = (this.children.length !== 0);","\t\t\t\t\tif (this.expandable !== previouslyExpandable) {","\t\t\t\t\t\tfor (var i = 0, len = this.elementContainers.length; i < len; i++) {","\t\t\t\t\t\t\tthis.elementContainers[i].update();","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\tflatten: function() {","\t\t\t\t\tvar visitor = new GroupFlattener();","\t\t\t\t\tthis.accept(visitor);","\t\t\t\t\treturn visitor.logEntriesAndSeparators;","\t\t\t\t},","","\t\t\t\tremoveChild: function(child, doUpdate) {","\t\t\t\t\tarray_remove(this.children, child);","\t\t\t\t\tchild.group = null;","\t\t\t\t\tif (doUpdate) {","\t\t\t\t\t\tthis.update();","\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\tremove: function(doUpdate, removeFromGroup) {","\t\t\t\t\tfor (var i = 0, len = this.children.length; i < len; i++) {","\t\t\t\t\t\tthis.children[i].remove(false, false);","\t\t\t\t\t}","\t\t\t\t\tthis.children = [];","\t\t\t\t\tthis.update();","\t\t\t\t\tif (this === currentGroup) {","\t\t\t\t\t\tcurrentGroup = this.group;","\t\t\t\t\t}","\t\t\t\t\tthis.doRemove(doUpdate, removeFromGroup);","\t\t\t\t},","","\t\t\t\tserialize: function(items) {","\t\t\t\t\titems.push([LogItem.serializedItemKeys.GROUP_START, this.name]);","\t\t\t\t\tfor (var i = 0, len = this.children.length; i < len; i++) {","\t\t\t\t\t\tthis.children[i].serialize(items);","\t\t\t\t\t}","\t\t\t\t\tif (this !== currentGroup) {","\t\t\t\t\t\titems.push([LogItem.serializedItemKeys.GROUP_END]);","\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\tclear: function() {","\t\t\t\t\tfor (var i = 0, len = this.elementContainers.length; i < len; i++) {","\t\t\t\t\t\tthis.elementContainers[i].clear();","\t\t\t\t\t}","\t\t\t\t}","\t\t\t});","","\t\t\t/*----------------------------------------------------------------*/","","\t\t\tfunction LogEntryElementContainer() {","\t\t\t}","","\t\t\tLogEntryElementContainer.prototype = new LogItemContainerElement();","","\t\t\tcopyProperties(LogEntryElementContainer.prototype, {","\t\t\t\tremove: function() {","\t\t\t\t\tthis.doRemove();","\t\t\t\t},","","\t\t\t\tdoRemove: function() {","\t\t\t\t\tthis.mainDiv.parentNode.removeChild(this.mainDiv);","\t\t\t\t\tthis.mainDiv = null;","\t\t\t\t\tthis.contentElement = null;","\t\t\t\t\tthis.containerDomNode = null;","\t\t\t\t},","","\t\t\t\tsetContent: function(content, wrappedContent) {","\t\t\t\t\tif (content === this.formattedMessage) {",'\t\t\t\t\t\tthis.contentElement.innerHTML = "";',"\t\t\t\t\t\tthis.contentElement.appendChild(document.createTextNode(this.formattedMessage));","\t\t\t\t\t} else {","\t\t\t\t\t\tthis.contentElement.innerHTML = content;","\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\tsetSearchMatch: function(isMatch) {",'\t\t\t\t\tvar oldCssClass = isMatch ? "searchnonmatch" : "searchmatch";','\t\t\t\t\tvar newCssClass = isMatch ? "searchmatch" : "searchnonmatch";',"\t\t\t\t\treplaceClass(this.mainDiv, newCssClass, oldCssClass);","\t\t\t\t},","","\t\t\t\tclearSearch: function() {",'\t\t\t\t\tremoveClass(this.mainDiv, "searchmatch");','\t\t\t\t\tremoveClass(this.mainDiv, "searchnonmatch");',"\t\t\t\t}","\t\t\t});","","\t\t\t/*----------------------------------------------------------------*/","","\t\t\tfunction LogEntryWrappedElementContainer(logEntry, containerDomNode) {","\t\t\t\tthis.logEntry = logEntry;","\t\t\t\tthis.containerDomNode = containerDomNode;",'\t\t\t\tthis.mainDiv = document.createElement("div");',"\t\t\t\tthis.mainDiv.appendChild(document.createTextNode(this.logEntry.formattedMessage));",'\t\t\t\tthis.mainDiv.className = "logentry wrapped " + this.logEntry.level;',"\t\t\t\tthis.contentElement = this.mainDiv;","\t\t\t}","","\t\t\tLogEntryWrappedElementContainer.prototype = new LogEntryElementContainer();","","\t\t\tLogEntryWrappedElementContainer.prototype.setContent = function(content, wrappedContent) {","\t\t\t\tif (content === this.formattedMessage) {",'\t\t\t\t\tthis.contentElement.innerHTML = "";',"\t\t\t\t\tthis.contentElement.appendChild(document.createTextNode(this.formattedMessage));","\t\t\t\t} else {","\t\t\t\t\tthis.contentElement.innerHTML = wrappedContent;","\t\t\t\t}","\t\t\t};","","\t\t\t/*----------------------------------------------------------------*/","","\t\t\tfunction LogEntryUnwrappedElementContainer(logEntry, containerDomNode) {","\t\t\t\tthis.logEntry = logEntry;","\t\t\t\tthis.containerDomNode = containerDomNode;",'\t\t\t\tthis.mainDiv = document.createElement("div");','\t\t\t\tthis.mainDiv.className = "logentry unwrapped " + this.logEntry.level;','\t\t\t\tthis.pre = this.mainDiv.appendChild(document.createElement("pre"));',"\t\t\t\tthis.pre.appendChild(document.createTextNode(this.logEntry.formattedMessage));",'\t\t\t\tthis.pre.className = "unwrapped";',"\t\t\t\tthis.contentElement = this.pre;","\t\t\t}","","\t\t\tLogEntryUnwrappedElementContainer.prototype = new LogEntryElementContainer();","","\t\t\tLogEntryUnwrappedElementContainer.prototype.remove = function() {","\t\t\t\tthis.doRemove();","\t\t\t\tthis.pre = null;","\t\t\t};","","\t\t\t/*----------------------------------------------------------------*/","","\t\t\tfunction LogEntryMainElementContainer(logEntry, containerDomNode) {","\t\t\t\tthis.logEntry = logEntry;","\t\t\t\tthis.containerDomNode = containerDomNode;",'\t\t\t\tthis.mainDiv = document.createElement("div");','\t\t\t\tthis.mainDiv.className = "logentry nonielogentry " + this.logEntry.level;','\t\t\t\tthis.contentElement = this.mainDiv.appendChild(document.createElement("span"));',"\t\t\t\tthis.contentElement.appendChild(document.createTextNode(this.logEntry.formattedMessage));","\t\t\t}","","\t\t\tLogEntryMainElementContainer.prototype = new LogEntryElementContainer();","","\t\t\t/*----------------------------------------------------------------*/","","\t\t\tfunction LogEntry(level, formattedMessage) {","\t\t\t\tthis.level = level;","\t\t\t\tthis.formattedMessage = formattedMessage;","\t\t\t\tthis.rendered = false;","\t\t\t}","","\t\t\tLogEntry.prototype = new LogItem();","","\t\t\tcopyProperties(LogEntry.prototype, {","\t\t\t\trender: function() {","\t\t\t\t\tvar logEntry = this;","\t\t\t\t\tvar containerDomNode = this.group.contentDiv;","","\t\t\t\t\t// Support for the CSS attribute white-space in IE for Windows is","\t\t\t\t\t// non-existent pre version 6 and slightly odd in 6, so instead","\t\t\t\t\t// use two different HTML elements","\t\t\t\t\tif (isIe) {",'\t\t\t\t\t\tthis.formattedMessage = this.formattedMessage.replace(/\\r\\n/g, "\\r"); // Workaround for IE\'s treatment of white space',"\t\t\t\t\t\tthis.unwrappedElementContainer = new LogEntryUnwrappedElementContainer(this, this.getUnwrappedDomContainer());","\t\t\t\t\t\tthis.wrappedElementContainer = new LogEntryWrappedElementContainer(this, this.getWrappedDomContainer());","\t\t\t\t\t\tthis.elementContainers = [this.unwrappedElementContainer, this.wrappedElementContainer];","\t\t\t\t\t} else {","\t\t\t\t\t\tthis.mainElementContainer = new LogEntryMainElementContainer(this, this.getMainDomContainer());","\t\t\t\t\t\tthis.elementContainers = [this.mainElementContainer];","\t\t\t\t\t}","\t\t\t\t\tthis.content = this.formattedMessage;","\t\t\t\t\tthis.rendered = true;","\t\t\t\t},","","\t\t\t\tsetContent: function(content, wrappedContent) {","\t\t\t\t\tif (content != this.content) {","\t\t\t\t\t\tif (isIe && (content !== this.formattedMessage)) {",'\t\t\t\t\t\t\tcontent = content.replace(/\\r\\n/g, "\\r"); // Workaround for IE\'s treatment of white space',"\t\t\t\t\t\t}","\t\t\t\t\t\tfor (var i = 0, len = this.elementContainers.length; i < len; i++) {","\t\t\t\t\t\t\tthis.elementContainers[i].setContent(content, wrappedContent);","\t\t\t\t\t\t}","\t\t\t\t\t\tthis.content = content;","\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\tgetSearchMatches: function() {","\t\t\t\t\tvar matches = [];","\t\t\t\t\tvar i, len;","\t\t\t\t\tif (isIe) {",'\t\t\t\t\t\tvar unwrappedEls = getElementsByClass(this.unwrappedElementContainer.mainDiv, "searchterm", "span");','\t\t\t\t\t\tvar wrappedEls = getElementsByClass(this.wrappedElementContainer.mainDiv, "searchterm", "span");',"\t\t\t\t\t\tfor (i = 0, len = unwrappedEls.length; i < len; i++) {","\t\t\t\t\t\t\tmatches[i] = new Match(this.level, null, unwrappedEls[i], wrappedEls[i]);","\t\t\t\t\t\t}","\t\t\t\t\t} else {",'\t\t\t\t\t\tvar els = getElementsByClass(this.mainElementContainer.mainDiv, "searchterm", "span");',"\t\t\t\t\t\tfor (i = 0, len = els.length; i < len; i++) {","\t\t\t\t\t\t\tmatches[i] = new Match(this.level, els[i]);","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t\treturn matches;","\t\t\t\t},","","\t\t\t\tsetSearchMatch: function(isMatch) {","\t\t\t\t\tfor (var i = 0, len = this.elementContainers.length; i < len; i++) {","\t\t\t\t\t\tthis.elementContainers[i].setSearchMatch(isMatch);","\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\tclearSearch: function() {","\t\t\t\t\tfor (var i = 0, len = this.elementContainers.length; i < len; i++) {","\t\t\t\t\t\tthis.elementContainers[i].clearSearch();","\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\taccept: function(visitor) {","\t\t\t\t\tvisitor.visitLogEntry(this);","\t\t\t\t},","","\t\t\t\tserialize: function(items) {","\t\t\t\t\titems.push([LogItem.serializedItemKeys.LOG_ENTRY, this.level, this.formattedMessage]);","\t\t\t\t}","\t\t\t});","","\t\t\t/*----------------------------------------------------------------*/","","\t\t\tfunction LogItemVisitor() {","\t\t\t}","","\t\t\tLogItemVisitor.prototype = {","\t\t\t\tvisit: function(logItem) {","\t\t\t\t},","","\t\t\t\tvisitParent: function(logItem) {","\t\t\t\t\tif (logItem.group) {","\t\t\t\t\t\tlogItem.group.accept(this);","\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\tvisitChildren: function(logItem) {","\t\t\t\t\tfor (var i = 0, len = logItem.children.length; i < len; i++) {","\t\t\t\t\t\tlogItem.children[i].accept(this);","\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\tvisitLogEntry: function(logEntry) {","\t\t\t\t\tthis.visit(logEntry);","\t\t\t\t},","","\t\t\t\tvisitSeparator: function(separator) {","\t\t\t\t\tthis.visit(separator);","\t\t\t\t},","","\t\t\t\tvisitGroup: function(group) {","\t\t\t\t\tthis.visit(group);","\t\t\t\t}","\t\t\t};","","\t\t\t/*----------------------------------------------------------------*/","","\t\t\tfunction GroupFlattener() {","\t\t\t\tthis.logEntriesAndSeparators = [];","\t\t\t}","","\t\t\tGroupFlattener.prototype = new LogItemVisitor();","","\t\t\tGroupFlattener.prototype.visitGroup = function(group) {","\t\t\t\tthis.visitChildren(group);","\t\t\t};","","\t\t\tGroupFlattener.prototype.visitLogEntry = function(logEntry) {","\t\t\t\tthis.logEntriesAndSeparators.push(logEntry);","\t\t\t};","","\t\t\tGroupFlattener.prototype.visitSeparator = function(separator) {","\t\t\t\tthis.logEntriesAndSeparators.push(separator);","\t\t\t};","","\t\t\t/*----------------------------------------------------------------*/","","\t\t\twindow.onload = function() {","\t\t\t\t// Sort out document.domain","\t\t\t\tif (location.search) {",'\t\t\t\t\tvar queryBits = unescape(location.search).substr(1).split("&"), nameValueBits;',"\t\t\t\t\tfor (var i = 0, len = queryBits.length; i < len; i++) {",'\t\t\t\t\t\tnameValueBits = queryBits[i].split("=");','\t\t\t\t\t\tif (nameValueBits[0] == "log4javascript_domain") {',"\t\t\t\t\t\t\tdocument.domain = nameValueBits[1];","\t\t\t\t\t\t\tbreak;","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t}","","\t\t\t\t// Create DOM objects",'\t\t\t\tlogMainContainer = $("log");',"\t\t\t\tif (isIePre7) {",'\t\t\t\t\taddClass(logMainContainer, "oldIe");',"\t\t\t\t}","",'\t\t\t\trootGroup = new Group("root", true);',"\t\t\t\trootGroup.render();","\t\t\t\tcurrentGroup = rootGroup;","","\t\t\t\tsetCommandInputWidth();","\t\t\t\tsetLogContainerHeight();","\t\t\t\ttoggleLoggingEnabled();","\t\t\t\ttoggleSearchEnabled();","\t\t\t\ttoggleSearchFilter();","\t\t\t\ttoggleSearchHighlight();","\t\t\t\tapplyFilters();","\t\t\t\tcheckAllLevels();","\t\t\t\ttoggleWrap();","\t\t\t\ttoggleNewestAtTop();","\t\t\t\ttoggleScrollToLatest();","\t\t\t\trenderQueuedLogItems();","\t\t\t\tloaded = true;",'\t\t\t\t$("command").value = "";','\t\t\t\t$("command").autocomplete = "off";','\t\t\t\t$("command").onkeydown = function(evt) {',"\t\t\t\t\tevt = getEvent(evt);","\t\t\t\t\tif (evt.keyCode == 10 || evt.keyCode == 13) { // Return/Enter","\t\t\t\t\t\tevalCommandLine();","\t\t\t\t\t\tstopPropagation(evt);","\t\t\t\t\t} else if (evt.keyCode == 27) { // Escape",'\t\t\t\t\t\tthis.value = "";',"\t\t\t\t\t\tthis.focus();","\t\t\t\t\t} else if (evt.keyCode == 38 && commandHistory.length > 0) { // Up","\t\t\t\t\t\tcurrentCommandIndex = Math.max(0, currentCommandIndex - 1);","\t\t\t\t\t\tthis.value = commandHistory[currentCommandIndex];","\t\t\t\t\t\tmoveCaretToEnd(this);","\t\t\t\t\t} else if (evt.keyCode == 40 && commandHistory.length > 0) { // Down","\t\t\t\t\t\tcurrentCommandIndex = Math.min(commandHistory.length - 1, currentCommandIndex + 1);","\t\t\t\t\t\tthis.value = commandHistory[currentCommandIndex];","\t\t\t\t\t\tmoveCaretToEnd(this);","\t\t\t\t\t}","\t\t\t\t};","","\t\t\t\t// Prevent the keypress moving the caret in Firefox",'\t\t\t\t$("command").onkeypress = function(evt) {',"\t\t\t\t\tevt = getEvent(evt);","\t\t\t\t\tif (evt.keyCode == 38 && commandHistory.length > 0 && evt.preventDefault) { // Up","\t\t\t\t\t\tevt.preventDefault();","\t\t\t\t\t}","\t\t\t\t};","","\t\t\t\t// Prevent the keyup event blurring the input in Opera",'\t\t\t\t$("command").onkeyup = function(evt) {',"\t\t\t\t\tevt = getEvent(evt);","\t\t\t\t\tif (evt.keyCode == 27 && evt.preventDefault) { // Up","\t\t\t\t\t\tevt.preventDefault();","\t\t\t\t\t\tthis.focus();","\t\t\t\t\t}","\t\t\t\t};","","\t\t\t\t// Add document keyboard shortcuts","\t\t\t\tdocument.onkeydown = function keyEventHandler(evt) {","\t\t\t\t\tevt = getEvent(evt);","\t\t\t\t\tswitch (evt.keyCode) {","\t\t\t\t\t\tcase 69: // Ctrl + shift + E: re-execute last command","\t\t\t\t\t\t\tif (evt.shiftKey && (evt.ctrlKey || evt.metaKey)) {","\t\t\t\t\t\t\t\tevalLastCommand();","\t\t\t\t\t\t\t\tcancelKeyEvent(evt);","\t\t\t\t\t\t\t\treturn false;","\t\t\t\t\t\t\t}","\t\t\t\t\t\t\tbreak;","\t\t\t\t\t\tcase 75: // Ctrl + shift + K: focus search","\t\t\t\t\t\t\tif (evt.shiftKey && (evt.ctrlKey || evt.metaKey)) {","\t\t\t\t\t\t\t\tfocusSearch();","\t\t\t\t\t\t\t\tcancelKeyEvent(evt);","\t\t\t\t\t\t\t\treturn false;","\t\t\t\t\t\t\t}","\t\t\t\t\t\t\tbreak;","\t\t\t\t\t\tcase 40: // Ctrl + shift + down arrow: focus command line","\t\t\t\t\t\tcase 76: // Ctrl + shift + L: focus command line","\t\t\t\t\t\t\tif (evt.shiftKey && (evt.ctrlKey || evt.metaKey)) {","\t\t\t\t\t\t\t\tfocusCommandLine();","\t\t\t\t\t\t\t\tcancelKeyEvent(evt);","\t\t\t\t\t\t\t\treturn false;","\t\t\t\t\t\t\t}","\t\t\t\t\t\t\tbreak;","\t\t\t\t\t}","\t\t\t\t};","","\t\t\t\t// Workaround to make sure log div starts at the correct size","\t\t\t\tsetTimeout(setLogContainerHeight, 20);","","\t\t\t\tsetShowCommandLine(showCommandLine);","\t\t\t\tdoSearch();","\t\t\t};","","\t\t\twindow.onunload = function() {","\t\t\t\tif (mainWindowExists()) {","\t\t\t\t\tappender.unload();","\t\t\t\t}","\t\t\t\tappender = null;","\t\t\t};","","\t\t\t/*----------------------------------------------------------------*/","","\t\t\tfunction toggleLoggingEnabled() {",'\t\t\t\tsetLoggingEnabled($("enableLogging").checked);',"\t\t\t}","","\t\t\tfunction setLoggingEnabled(enable) {","\t\t\t\tloggingEnabled = enable;","\t\t\t}","","\t\t\tvar appender = null;","","\t\t\tfunction setAppender(appenderParam) {","\t\t\t\tappender = appenderParam;","\t\t\t}","","\t\t\tfunction setShowCloseButton(showCloseButton) {",'\t\t\t\t$("closeButton").style.display = showCloseButton ? "inline" : "none";',"\t\t\t}","","\t\t\tfunction setShowHideButton(showHideButton) {",'\t\t\t\t$("hideButton").style.display = showHideButton ? "inline" : "none";',"\t\t\t}","","\t\t\tvar newestAtTop = false;","","\t\t\t/*----------------------------------------------------------------*/","","\t\t\tfunction LogItemContentReverser() {","\t\t\t}","","\t\t\tLogItemContentReverser.prototype = new LogItemVisitor();","","\t\t\tLogItemContentReverser.prototype.visitGroup = function(group) {","\t\t\t\tgroup.reverseChildren();","\t\t\t\tthis.visitChildren(group);","\t\t\t};","","\t\t\t/*----------------------------------------------------------------*/","","\t\t\tfunction setNewestAtTop(isNewestAtTop) {","\t\t\t\tvar oldNewestAtTop = newestAtTop;","\t\t\t\tvar i, iLen, j, jLen;","\t\t\t\tnewestAtTop = Boolean(isNewestAtTop);","\t\t\t\tif (oldNewestAtTop != newestAtTop) {","\t\t\t\t\tvar visitor = new LogItemContentReverser();","\t\t\t\t\trootGroup.accept(visitor);","","\t\t\t\t\t// Reassemble the matches array","\t\t\t\t\tif (currentSearch) {","\t\t\t\t\t\tvar currentMatch = currentSearch.matches[currentMatchIndex];","\t\t\t\t\t\tvar matchIndex = 0;","\t\t\t\t\t\tvar matches = [];","\t\t\t\t\t\tvar actOnLogEntry = function(logEntry) {","\t\t\t\t\t\t\tvar logEntryMatches = logEntry.getSearchMatches();","\t\t\t\t\t\t\tfor (j = 0, jLen = logEntryMatches.length; j < jLen; j++) {","\t\t\t\t\t\t\t\tmatches[matchIndex] = logEntryMatches[j];","\t\t\t\t\t\t\t\tif (currentMatch && logEntryMatches[j].equals(currentMatch)) {","\t\t\t\t\t\t\t\t\tcurrentMatchIndex = matchIndex;","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\tmatchIndex++;","\t\t\t\t\t\t\t}","\t\t\t\t\t\t};","\t\t\t\t\t\tif (newestAtTop) {","\t\t\t\t\t\t\tfor (i = logEntries.length - 1; i >= 0; i--) {","\t\t\t\t\t\t\t\tactOnLogEntry(logEntries[i]);","\t\t\t\t\t\t\t}","\t\t\t\t\t\t} else {","\t\t\t\t\t\t\tfor (i = 0, iLen = logEntries.length; i < iLen; i++) {","\t\t\t\t\t\t\t\tactOnLogEntry(logEntries[i]);","\t\t\t\t\t\t\t}","\t\t\t\t\t\t}","\t\t\t\t\t\tcurrentSearch.matches = matches;","\t\t\t\t\t\tif (currentMatch) {","\t\t\t\t\t\t\tcurrentMatch.setCurrent();","\t\t\t\t\t\t}","\t\t\t\t\t} else if (scrollToLatest) {","\t\t\t\t\t\tdoScrollToLatest();","\t\t\t\t\t}","\t\t\t\t}",'\t\t\t\t$("newestAtTop").checked = isNewestAtTop;',"\t\t\t}","","\t\t\tfunction toggleNewestAtTop() {",'\t\t\t\tvar isNewestAtTop = $("newestAtTop").checked;',"\t\t\t\tsetNewestAtTop(isNewestAtTop);","\t\t\t}","","\t\t\tvar scrollToLatest = true;","","\t\t\tfunction setScrollToLatest(isScrollToLatest) {","\t\t\t\tscrollToLatest = isScrollToLatest;","\t\t\t\tif (scrollToLatest) {","\t\t\t\t\tdoScrollToLatest();","\t\t\t\t}",'\t\t\t\t$("scrollToLatest").checked = isScrollToLatest;',"\t\t\t}","","\t\t\tfunction toggleScrollToLatest() {",'\t\t\t\tvar isScrollToLatest = $("scrollToLatest").checked;',"\t\t\t\tsetScrollToLatest(isScrollToLatest);","\t\t\t}","","\t\t\tfunction doScrollToLatest() {","\t\t\t\tvar l = logMainContainer;",'\t\t\t\tif (typeof l.scrollTop != "undefined") {',"\t\t\t\t\tif (newestAtTop) {","\t\t\t\t\t\tl.scrollTop = 0;","\t\t\t\t\t} else {","\t\t\t\t\t\tvar latestLogEntry = l.lastChild;","\t\t\t\t\t\tif (latestLogEntry) {","\t\t\t\t\t\t\tl.scrollTop = l.scrollHeight;","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t}","\t\t\t}","","\t\t\tvar closeIfOpenerCloses = true;","","\t\t\tfunction setCloseIfOpenerCloses(isCloseIfOpenerCloses) {","\t\t\t\tcloseIfOpenerCloses = isCloseIfOpenerCloses;","\t\t\t}","","\t\t\tvar maxMessages = null;","","\t\t\tfunction setMaxMessages(max) {","\t\t\t\tmaxMessages = max;","\t\t\t\tpruneLogEntries();","\t\t\t}","","\t\t\tvar showCommandLine = false;","","\t\t\tfunction setShowCommandLine(isShowCommandLine) {","\t\t\t\tshowCommandLine = isShowCommandLine;","\t\t\t\tif (loaded) {",'\t\t\t\t\t$("commandLine").style.display = showCommandLine ? "block" : "none";',"\t\t\t\t\tsetCommandInputWidth();","\t\t\t\t\tsetLogContainerHeight();","\t\t\t\t}","\t\t\t}","","\t\t\tfunction focusCommandLine() {","\t\t\t\tif (loaded) {",'\t\t\t\t\t$("command").focus();',"\t\t\t\t}","\t\t\t}","","\t\t\tfunction focusSearch() {","\t\t\t\tif (loaded) {",'\t\t\t\t\t$("searchBox").focus();',"\t\t\t\t}","\t\t\t}","","\t\t\tfunction getLogItems() {","\t\t\t\tvar items = [];","\t\t\t\tfor (var i = 0, len = logItems.length; i < len; i++) {","\t\t\t\t\tlogItems[i].serialize(items);","\t\t\t\t}","\t\t\t\treturn items;","\t\t\t}","","\t\t\tfunction setLogItems(items) {","\t\t\t\tvar loggingReallyEnabled = loggingEnabled;","\t\t\t\t// Temporarily turn logging on","\t\t\t\tloggingEnabled = true;","\t\t\t\tfor (var i = 0, len = items.length; i < len; i++) {","\t\t\t\t\tswitch (items[i][0]) {","\t\t\t\t\t\tcase LogItem.serializedItemKeys.LOG_ENTRY:","\t\t\t\t\t\t\tlog(items[i][1], items[i][2]);","\t\t\t\t\t\t\tbreak;","\t\t\t\t\t\tcase LogItem.serializedItemKeys.GROUP_START:","\t\t\t\t\t\t\tgroup(items[i][1]);","\t\t\t\t\t\t\tbreak;","\t\t\t\t\t\tcase LogItem.serializedItemKeys.GROUP_END:","\t\t\t\t\t\t\tgroupEnd();","\t\t\t\t\t\t\tbreak;","\t\t\t\t\t}","\t\t\t\t}","\t\t\t\tloggingEnabled = loggingReallyEnabled;","\t\t\t}","","\t\t\tfunction log(logLevel, formattedMessage) {","\t\t\t\tif (loggingEnabled) {","\t\t\t\t\tvar logEntry = new LogEntry(logLevel, formattedMessage);","\t\t\t\t\tlogEntries.push(logEntry);","\t\t\t\t\tlogEntriesAndSeparators.push(logEntry);","\t\t\t\t\tlogItems.push(logEntry);","\t\t\t\t\tcurrentGroup.addChild(logEntry);","\t\t\t\t\tif (loaded) {","\t\t\t\t\t\tif (logQueuedEventsTimer !== null) {","\t\t\t\t\t\t\tclearTimeout(logQueuedEventsTimer);","\t\t\t\t\t\t}","\t\t\t\t\t\tlogQueuedEventsTimer = setTimeout(renderQueuedLogItems, renderDelay);","\t\t\t\t\t\tunrenderedLogItemsExist = true;","\t\t\t\t\t}","\t\t\t\t}","\t\t\t}","","\t\t\tfunction renderQueuedLogItems() {","\t\t\t\tlogQueuedEventsTimer = null;","\t\t\t\tvar pruned = pruneLogEntries();","","\t\t\t\t// Render any unrendered log entries and apply the current search to them","\t\t\t\tvar initiallyHasMatches = currentSearch ? currentSearch.hasMatches() : false;","\t\t\t\tfor (var i = 0, len = logItems.length; i < len; i++) {","\t\t\t\t\tif (!logItems[i].rendered) {","\t\t\t\t\t\tlogItems[i].render();","\t\t\t\t\t\tlogItems[i].appendToLog();","\t\t\t\t\t\tif (currentSearch && (logItems[i] instanceof LogEntry)) {","\t\t\t\t\t\t\tcurrentSearch.applyTo(logItems[i]);","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t}","\t\t\t\tif (currentSearch) {","\t\t\t\t\tif (pruned) {","\t\t\t\t\t\tif (currentSearch.hasVisibleMatches()) {","\t\t\t\t\t\t\tif (currentMatchIndex === null) {","\t\t\t\t\t\t\t\tsetCurrentMatchIndex(0);","\t\t\t\t\t\t\t}","\t\t\t\t\t\t\tdisplayMatches();","\t\t\t\t\t\t} else {","\t\t\t\t\t\t\tdisplayNoMatches();","\t\t\t\t\t\t}","\t\t\t\t\t} else if (!initiallyHasMatches && currentSearch.hasVisibleMatches()) {","\t\t\t\t\t\tsetCurrentMatchIndex(0);","\t\t\t\t\t\tdisplayMatches();","\t\t\t\t\t}","\t\t\t\t}","\t\t\t\tif (scrollToLatest) {","\t\t\t\t\tdoScrollToLatest();","\t\t\t\t}","\t\t\t\tunrenderedLogItemsExist = false;","\t\t\t}","","\t\t\tfunction pruneLogEntries() {","\t\t\t\tif ((maxMessages !== null) && (logEntriesAndSeparators.length > maxMessages)) {","\t\t\t\t\tvar numberToDelete = logEntriesAndSeparators.length - maxMessages;","\t\t\t\t\tvar prunedLogEntries = logEntriesAndSeparators.slice(0, numberToDelete);","\t\t\t\t\tif (currentSearch) {","\t\t\t\t\t\tcurrentSearch.removeMatches(prunedLogEntries);","\t\t\t\t\t}","\t\t\t\t\tvar group;","\t\t\t\t\tfor (var i = 0; i < numberToDelete; i++) {","\t\t\t\t\t\tgroup = logEntriesAndSeparators[i].group;","\t\t\t\t\t\tarray_remove(logItems, logEntriesAndSeparators[i]);","\t\t\t\t\t\tarray_remove(logEntries, logEntriesAndSeparators[i]);","\t\t\t\t\t\tlogEntriesAndSeparators[i].remove(true, true);","\t\t\t\t\t\tif (group.children.length === 0 && group !== currentGroup && group !== rootGroup) {","\t\t\t\t\t\t\tarray_remove(logItems, group);","\t\t\t\t\t\t\tgroup.remove(true, true);","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t\tlogEntriesAndSeparators = array_removeFromStart(logEntriesAndSeparators, numberToDelete);","\t\t\t\t\treturn true;","\t\t\t\t}","\t\t\t\treturn false;","\t\t\t}","","\t\t\tfunction group(name, startExpanded) {","\t\t\t\tif (loggingEnabled) {",'\t\t\t\t\tinitiallyExpanded = (typeof startExpanded === "undefined") ? true : Boolean(startExpanded);',"\t\t\t\t\tvar newGroup = new Group(name, false, initiallyExpanded);","\t\t\t\t\tcurrentGroup.addChild(newGroup);","\t\t\t\t\tcurrentGroup = newGroup;","\t\t\t\t\tlogItems.push(newGroup);","\t\t\t\t\tif (loaded) {","\t\t\t\t\t\tif (logQueuedEventsTimer !== null) {","\t\t\t\t\t\t\tclearTimeout(logQueuedEventsTimer);","\t\t\t\t\t\t}","\t\t\t\t\t\tlogQueuedEventsTimer = setTimeout(renderQueuedLogItems, renderDelay);","\t\t\t\t\t\tunrenderedLogItemsExist = true;","\t\t\t\t\t}","\t\t\t\t}","\t\t\t}","","\t\t\tfunction groupEnd() {","\t\t\t\tcurrentGroup = (currentGroup === rootGroup) ? rootGroup : currentGroup.group;","\t\t\t}","","\t\t\tfunction mainPageReloaded() {","\t\t\t\tcurrentGroup = rootGroup;","\t\t\t\tvar separator = new Separator();","\t\t\t\tlogEntriesAndSeparators.push(separator);","\t\t\t\tlogItems.push(separator);","\t\t\t\tcurrentGroup.addChild(separator);","\t\t\t}","","\t\t\tfunction closeWindow() {","\t\t\t\tif (appender && mainWindowExists()) {","\t\t\t\t\tappender.close(true);","\t\t\t\t} else {","\t\t\t\t\twindow.close();","\t\t\t\t}","\t\t\t}","","\t\t\tfunction hide() {","\t\t\t\tif (appender && mainWindowExists()) {","\t\t\t\t\tappender.hide();","\t\t\t\t}","\t\t\t}","","\t\t\tvar mainWindow = window;",'\t\t\tvar windowId = "log4javascriptConsoleWindow_" + new Date().getTime() + "_" + ("" + Math.random()).substr(2);',"","\t\t\tfunction setMainWindow(win) {","\t\t\t\tmainWindow = win;","\t\t\t\tmainWindow[windowId] = window;","\t\t\t\t// If this is a pop-up, poll the opener to see if it's closed","\t\t\t\tif (opener && closeIfOpenerCloses) {","\t\t\t\t\tpollOpener();","\t\t\t\t}","\t\t\t}","","\t\t\tfunction pollOpener() {","\t\t\t\tif (closeIfOpenerCloses) {","\t\t\t\t\tif (mainWindowExists()) {","\t\t\t\t\t\tsetTimeout(pollOpener, 500);","\t\t\t\t\t} else {","\t\t\t\t\t\tcloseWindow();","\t\t\t\t\t}","\t\t\t\t}","\t\t\t}","","\t\t\tfunction mainWindowExists() {","\t\t\t\ttry {","\t\t\t\t\treturn (mainWindow && !mainWindow.closed &&","\t\t\t\t\t\tmainWindow[windowId] == window);","\t\t\t\t} catch (ex) {}","\t\t\t\treturn false;","\t\t\t}","",'\t\t\tvar logLevels = ["TRACE", "DEBUG", "INFO", "WARN", "ERROR", "FATAL"];',"","\t\t\tfunction getCheckBox(logLevel) {",'\t\t\t\treturn $("switch_" + logLevel);',"\t\t\t}","","\t\t\tfunction getIeWrappedLogContainer() {",'\t\t\t\treturn $("log_wrapped");',"\t\t\t}","","\t\t\tfunction getIeUnwrappedLogContainer() {",'\t\t\t\treturn $("log_unwrapped");',"\t\t\t}","","\t\t\tfunction applyFilters() {","\t\t\t\tfor (var i = 0; i < logLevels.length; i++) {","\t\t\t\t\tif (getCheckBox(logLevels[i]).checked) {","\t\t\t\t\t\taddClass(logMainContainer, logLevels[i]);","\t\t\t\t\t} else {","\t\t\t\t\t\tremoveClass(logMainContainer, logLevels[i]);","\t\t\t\t\t}","\t\t\t\t}","\t\t\t\tupdateSearchFromFilters();","\t\t\t}","","\t\t\tfunction toggleAllLevels() {",'\t\t\t\tvar turnOn = $("switch_ALL").checked;',"\t\t\t\tfor (var i = 0; i < logLevels.length; i++) {","\t\t\t\t\tgetCheckBox(logLevels[i]).checked = turnOn;","\t\t\t\t\tif (turnOn) {","\t\t\t\t\t\taddClass(logMainContainer, logLevels[i]);","\t\t\t\t\t} else {","\t\t\t\t\t\tremoveClass(logMainContainer, logLevels[i]);","\t\t\t\t\t}","\t\t\t\t}","\t\t\t}","","\t\t\tfunction checkAllLevels() {","\t\t\t\tfor (var i = 0; i < logLevels.length; i++) {","\t\t\t\t\tif (!getCheckBox(logLevels[i]).checked) {",'\t\t\t\t\t\tgetCheckBox("ALL").checked = false;',"\t\t\t\t\t\treturn;","\t\t\t\t\t}","\t\t\t\t}",'\t\t\t\tgetCheckBox("ALL").checked = true;',"\t\t\t}","","\t\t\tfunction clearLog() {","\t\t\t\trootGroup.clear();","\t\t\t\tcurrentGroup = rootGroup;","\t\t\t\tlogEntries = [];","\t\t\t\tlogItems = [];","\t\t\t\tlogEntriesAndSeparators = [];"," \t\t\t\tdoSearch();","\t\t\t}","","\t\t\tfunction toggleWrap() {",'\t\t\t\tvar enable = $("wrap").checked;',"\t\t\t\tif (enable) {",'\t\t\t\t\taddClass(logMainContainer, "wrap");',"\t\t\t\t} else {",'\t\t\t\t\tremoveClass(logMainContainer, "wrap");',"\t\t\t\t}","\t\t\t\trefreshCurrentMatch();","\t\t\t}","","\t\t\t/* ------------------------------------------------------------------- */","","\t\t\t// Search","","\t\t\tvar searchTimer = null;","","\t\t\tfunction scheduleSearch() {","\t\t\t\ttry {","\t\t\t\t\tclearTimeout(searchTimer);","\t\t\t\t} catch (ex) {","\t\t\t\t\t// Do nothing","\t\t\t\t}","\t\t\t\tsearchTimer = setTimeout(doSearch, 500);","\t\t\t}","","\t\t\tfunction Search(searchTerm, isRegex, searchRegex, isCaseSensitive) {","\t\t\t\tthis.searchTerm = searchTerm;","\t\t\t\tthis.isRegex = isRegex;","\t\t\t\tthis.searchRegex = searchRegex;","\t\t\t\tthis.isCaseSensitive = isCaseSensitive;","\t\t\t\tthis.matches = [];","\t\t\t}","","\t\t\tSearch.prototype = {","\t\t\t\thasMatches: function() {","\t\t\t\t\treturn this.matches.length > 0;","\t\t\t\t},","","\t\t\t\thasVisibleMatches: function() {","\t\t\t\t\tif (this.hasMatches()) {","\t\t\t\t\t\tfor (var i = 0; i < this.matches.length; i++) {","\t\t\t\t\t\t\tif (this.matches[i].isVisible()) {","\t\t\t\t\t\t\t\treturn true;","\t\t\t\t\t\t\t}","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t\treturn false;","\t\t\t\t},","","\t\t\t\tmatch: function(logEntry) {","\t\t\t\t\tvar entryText = String(logEntry.formattedMessage);","\t\t\t\t\tvar matchesSearch = false;","\t\t\t\t\tif (this.isRegex) {","\t\t\t\t\t\tmatchesSearch = this.searchRegex.test(entryText);","\t\t\t\t\t} else if (this.isCaseSensitive) {","\t\t\t\t\t\tmatchesSearch = (entryText.indexOf(this.searchTerm) > -1);","\t\t\t\t\t} else {","\t\t\t\t\t\tmatchesSearch = (entryText.toLowerCase().indexOf(this.searchTerm.toLowerCase()) > -1);","\t\t\t\t\t}","\t\t\t\t\treturn matchesSearch;","\t\t\t\t},","","\t\t\t\tgetNextVisibleMatchIndex: function() {","\t\t\t\t\tfor (var i = currentMatchIndex + 1; i < this.matches.length; i++) {","\t\t\t\t\t\tif (this.matches[i].isVisible()) {","\t\t\t\t\t\t\treturn i;","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t\t// Start again from the first match","\t\t\t\t\tfor (i = 0; i <= currentMatchIndex; i++) {","\t\t\t\t\t\tif (this.matches[i].isVisible()) {","\t\t\t\t\t\t\treturn i;","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t\treturn -1;","\t\t\t\t},","","\t\t\t\tgetPreviousVisibleMatchIndex: function() {","\t\t\t\t\tfor (var i = currentMatchIndex - 1; i >= 0; i--) {","\t\t\t\t\t\tif (this.matches[i].isVisible()) {","\t\t\t\t\t\t\treturn i;","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t\t// Start again from the last match","\t\t\t\t\tfor (var i = this.matches.length - 1; i >= currentMatchIndex; i--) {","\t\t\t\t\t\tif (this.matches[i].isVisible()) {","\t\t\t\t\t\t\treturn i;","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t\treturn -1;","\t\t\t\t},","","\t\t\t\tapplyTo: function(logEntry) {","\t\t\t\t\tvar doesMatch = this.match(logEntry);","\t\t\t\t\tif (doesMatch) {","\t\t\t\t\t\tlogEntry.group.expand();","\t\t\t\t\t\tlogEntry.setSearchMatch(true);","\t\t\t\t\t\tvar logEntryContent;","\t\t\t\t\t\tvar wrappedLogEntryContent;",'\t\t\t\t\t\tvar searchTermReplacementStartTag = "<span class=\\"searchterm\\">";','\t\t\t\t\t\tvar searchTermReplacementEndTag = "<" + "/span>";','\t\t\t\t\t\tvar preTagName = isIe ? "pre" : "span";','\t\t\t\t\t\tvar preStartTag = "<" + preTagName + " class=\\"pre\\">";','\t\t\t\t\t\tvar preEndTag = "<" + "/" + preTagName + ">";',"\t\t\t\t\t\tvar startIndex = 0;","\t\t\t\t\t\tvar searchIndex, matchedText, textBeforeMatch;","\t\t\t\t\t\tif (this.isRegex) {",'\t\t\t\t\t\t\tvar flags = this.isCaseSensitive ? "g" : "gi";','\t\t\t\t\t\t\tvar capturingRegex = new RegExp("(" + this.searchRegex.source + ")", flags);',"","\t\t\t\t\t\t\t// Replace the search term with temporary tokens for the start and end tags",'\t\t\t\t\t\t\tvar rnd = ("" + Math.random()).substr(2);','\t\t\t\t\t\t\tvar startToken = "%%s" + rnd + "%%";','\t\t\t\t\t\t\tvar endToken = "%%e" + rnd + "%%";','\t\t\t\t\t\t\tlogEntryContent = logEntry.formattedMessage.replace(capturingRegex, startToken + "$1" + endToken);',"","\t\t\t\t\t\t\t// Escape the HTML to get rid of angle brackets","\t\t\t\t\t\t\tlogEntryContent = escapeHtml(logEntryContent);","","\t\t\t\t\t\t\t// Substitute the proper HTML back in for the search match","\t\t\t\t\t\t\tvar result;","\t\t\t\t\t\t\tvar searchString = logEntryContent;",'\t\t\t\t\t\t\tlogEntryContent = "";','\t\t\t\t\t\t\twrappedLogEntryContent = "";',"\t\t\t\t\t\t\twhile ((searchIndex = searchString.indexOf(startToken, startIndex)) > -1) {","\t\t\t\t\t\t\t\tvar endTokenIndex = searchString.indexOf(endToken, searchIndex);","\t\t\t\t\t\t\t\tmatchedText = searchString.substring(searchIndex + startToken.length, endTokenIndex);","\t\t\t\t\t\t\t\ttextBeforeMatch = searchString.substring(startIndex, searchIndex);","\t\t\t\t\t\t\t\tlogEntryContent += preStartTag + textBeforeMatch + preEndTag;","\t\t\t\t\t\t\t\tlogEntryContent += searchTermReplacementStartTag + preStartTag + matchedText +","\t\t\t\t\t\t\t\t\tpreEndTag + searchTermReplacementEndTag;","\t\t\t\t\t\t\t\tif (isIe) {","\t\t\t\t\t\t\t\t\twrappedLogEntryContent += textBeforeMatch + searchTermReplacementStartTag +","\t\t\t\t\t\t\t\t\t\tmatchedText + searchTermReplacementEndTag;","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\tstartIndex = endTokenIndex + endToken.length;","\t\t\t\t\t\t\t}","\t\t\t\t\t\t\tlogEntryContent += preStartTag + searchString.substr(startIndex) + preEndTag;","\t\t\t\t\t\t\tif (isIe) {","\t\t\t\t\t\t\t\twrappedLogEntryContent += searchString.substr(startIndex);","\t\t\t\t\t\t\t}","\t\t\t\t\t\t} else {",'\t\t\t\t\t\t\tlogEntryContent = "";','\t\t\t\t\t\t\twrappedLogEntryContent = "";',"\t\t\t\t\t\t\tvar searchTermReplacementLength = searchTermReplacementStartTag.length +","\t\t\t\t\t\t\t\tthis.searchTerm.length + searchTermReplacementEndTag.length;","\t\t\t\t\t\t\tvar searchTermLength = this.searchTerm.length;","\t\t\t\t\t\t\tvar searchTermLowerCase = this.searchTerm.toLowerCase();","\t\t\t\t\t\t\tvar logTextLowerCase = logEntry.formattedMessage.toLowerCase();","\t\t\t\t\t\t\twhile ((searchIndex = logTextLowerCase.indexOf(searchTermLowerCase, startIndex)) > -1) {","\t\t\t\t\t\t\t\tmatchedText = escapeHtml(logEntry.formattedMessage.substr(searchIndex, this.searchTerm.length));","\t\t\t\t\t\t\t\ttextBeforeMatch = escapeHtml(logEntry.formattedMessage.substring(startIndex, searchIndex));","\t\t\t\t\t\t\t\tvar searchTermReplacement = searchTermReplacementStartTag +","\t\t\t\t\t\t\t\t\tpreStartTag + matchedText + preEndTag + searchTermReplacementEndTag;","\t\t\t\t\t\t\t\tlogEntryContent += preStartTag + textBeforeMatch + preEndTag + searchTermReplacement;","\t\t\t\t\t\t\t\tif (isIe) {","\t\t\t\t\t\t\t\t\twrappedLogEntryContent += textBeforeMatch + searchTermReplacementStartTag +","\t\t\t\t\t\t\t\t\t\tmatchedText + searchTermReplacementEndTag;","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\tstartIndex = searchIndex + searchTermLength;","\t\t\t\t\t\t\t}","\t\t\t\t\t\t\tvar textAfterLastMatch = escapeHtml(logEntry.formattedMessage.substr(startIndex));","\t\t\t\t\t\t\tlogEntryContent += preStartTag + textAfterLastMatch + preEndTag;","\t\t\t\t\t\t\tif (isIe) {","\t\t\t\t\t\t\t\twrappedLogEntryContent += textAfterLastMatch;","\t\t\t\t\t\t\t}","\t\t\t\t\t\t}","\t\t\t\t\t\tlogEntry.setContent(logEntryContent, wrappedLogEntryContent);","\t\t\t\t\t\tvar logEntryMatches = logEntry.getSearchMatches();","\t\t\t\t\t\tthis.matches = this.matches.concat(logEntryMatches);","\t\t\t\t\t} else {","\t\t\t\t\t\tlogEntry.setSearchMatch(false);","\t\t\t\t\t\tlogEntry.setContent(logEntry.formattedMessage, logEntry.formattedMessage);","\t\t\t\t\t}","\t\t\t\t\treturn doesMatch;","\t\t\t\t},","","\t\t\t\tremoveMatches: function(logEntries) {","\t\t\t\t\tvar matchesToRemoveCount = 0;","\t\t\t\t\tvar currentMatchRemoved = false;","\t\t\t\t\tvar matchesToRemove = [];","\t\t\t\t\tvar i, iLen, j, jLen;","","\t\t\t\t\t// Establish the list of matches to be removed","\t\t\t\t\tfor (i = 0, iLen = this.matches.length; i < iLen; i++) {","\t\t\t\t\t\tfor (j = 0, jLen = logEntries.length; j < jLen; j++) {","\t\t\t\t\t\t\tif (this.matches[i].belongsTo(logEntries[j])) {","\t\t\t\t\t\t\t\tmatchesToRemove.push(this.matches[i]);","\t\t\t\t\t\t\t\tif (i === currentMatchIndex) {","\t\t\t\t\t\t\t\t\tcurrentMatchRemoved = true;","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t}","\t\t\t\t\t\t}","\t\t\t\t\t}","","\t\t\t\t\t// Set the new current match index if the current match has been deleted","\t\t\t\t\t// This will be the first match that appears after the first log entry being","\t\t\t\t\t// deleted, if one exists; otherwise, it's the first match overall","\t\t\t\t\tvar newMatch = currentMatchRemoved ? null : this.matches[currentMatchIndex];","\t\t\t\t\tif (currentMatchRemoved) {","\t\t\t\t\t\tfor (i = currentMatchIndex, iLen = this.matches.length; i < iLen; i++) {","\t\t\t\t\t\t\tif (this.matches[i].isVisible() && !array_contains(matchesToRemove, this.matches[i])) {","\t\t\t\t\t\t\t\tnewMatch = this.matches[i];","\t\t\t\t\t\t\t\tbreak;","\t\t\t\t\t\t\t}","\t\t\t\t\t\t}","\t\t\t\t\t}","","\t\t\t\t\t// Remove the matches","\t\t\t\t\tfor (i = 0, iLen = matchesToRemove.length; i < iLen; i++) {","\t\t\t\t\t\tarray_remove(this.matches, matchesToRemove[i]);","\t\t\t\t\t\tmatchesToRemove[i].remove();","\t\t\t\t\t}","","\t\t\t\t\t// Set the new match, if one exists","\t\t\t\t\tif (this.hasVisibleMatches()) {","\t\t\t\t\t\tif (newMatch === null) {","\t\t\t\t\t\t\tsetCurrentMatchIndex(0);","\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t// Get the index of the new match","\t\t\t\t\t\t\tvar newMatchIndex = 0;","\t\t\t\t\t\t\tfor (i = 0, iLen = this.matches.length; i < iLen; i++) {","\t\t\t\t\t\t\t\tif (newMatch === this.matches[i]) {","\t\t\t\t\t\t\t\t\tnewMatchIndex = i;","\t\t\t\t\t\t\t\t\tbreak;","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t}","\t\t\t\t\t\t\tsetCurrentMatchIndex(newMatchIndex);","\t\t\t\t\t\t}","\t\t\t\t\t} else {","\t\t\t\t\t\tcurrentMatchIndex = null;","\t\t\t\t\t\tdisplayNoMatches();","\t\t\t\t\t}","\t\t\t\t}","\t\t\t};","","\t\t\tfunction getPageOffsetTop(el, container) {","\t\t\t\tvar currentEl = el;","\t\t\t\tvar y = 0;","\t\t\t\twhile (currentEl && currentEl != container) {","\t\t\t\t\ty += currentEl.offsetTop;","\t\t\t\t\tcurrentEl = currentEl.offsetParent;","\t\t\t\t}","\t\t\t\treturn y;","\t\t\t}","","\t\t\tfunction scrollIntoView(el) {","\t\t\t\tvar logContainer = logMainContainer;","\t\t\t\t// Check if the whole width of the element is visible and centre if not",'\t\t\t\tif (!$("wrap").checked) {',"\t\t\t\t\tvar logContainerLeft = logContainer.scrollLeft;","\t\t\t\t\tvar logContainerRight = logContainerLeft  + logContainer.offsetWidth;","\t\t\t\t\tvar elLeft = el.offsetLeft;","\t\t\t\t\tvar elRight = elLeft + el.offsetWidth;","\t\t\t\t\tif (elLeft < logContainerLeft || elRight > logContainerRight) {","\t\t\t\t\t\tlogContainer.scrollLeft = elLeft - (logContainer.offsetWidth - el.offsetWidth) / 2;","\t\t\t\t\t}","\t\t\t\t}","\t\t\t\t// Check if the whole height of the element is visible and centre if not","\t\t\t\tvar logContainerTop = logContainer.scrollTop;","\t\t\t\tvar logContainerBottom = logContainerTop  + logContainer.offsetHeight;","\t\t\t\tvar elTop = getPageOffsetTop(el) - getToolBarsHeight();","\t\t\t\tvar elBottom = elTop + el.offsetHeight;","\t\t\t\tif (elTop < logContainerTop || elBottom > logContainerBottom) {","\t\t\t\t\tlogContainer.scrollTop = elTop - (logContainer.offsetHeight - el.offsetHeight) / 2;","\t\t\t\t}","\t\t\t}","","\t\t\tfunction Match(logEntryLevel, spanInMainDiv, spanInUnwrappedPre, spanInWrappedDiv) {","\t\t\t\tthis.logEntryLevel = logEntryLevel;","\t\t\t\tthis.spanInMainDiv = spanInMainDiv;","\t\t\t\tif (isIe) {","\t\t\t\t\tthis.spanInUnwrappedPre = spanInUnwrappedPre;","\t\t\t\t\tthis.spanInWrappedDiv = spanInWrappedDiv;","\t\t\t\t}","\t\t\t\tthis.mainSpan = isIe ? spanInUnwrappedPre : spanInMainDiv;","\t\t\t}","","\t\t\tMatch.prototype = {","\t\t\t\tequals: function(match) {","\t\t\t\t\treturn this.mainSpan === match.mainSpan;","\t\t\t\t},","","\t\t\t\tsetCurrent: function() {","\t\t\t\t\tif (isIe) {",'\t\t\t\t\t\taddClass(this.spanInUnwrappedPre, "currentmatch");','\t\t\t\t\t\taddClass(this.spanInWrappedDiv, "currentmatch");',"\t\t\t\t\t\t// Scroll the visible one into view",'\t\t\t\t\t\tvar elementToScroll = $("wrap").checked ? this.spanInWrappedDiv : this.spanInUnwrappedPre;',"\t\t\t\t\t\tscrollIntoView(elementToScroll);","\t\t\t\t\t} else {",'\t\t\t\t\t\taddClass(this.spanInMainDiv, "currentmatch");',"\t\t\t\t\t\tscrollIntoView(this.spanInMainDiv);","\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\tbelongsTo: function(logEntry) {","\t\t\t\t\tif (isIe) {","\t\t\t\t\t\treturn isDescendant(this.spanInUnwrappedPre, logEntry.unwrappedPre);","\t\t\t\t\t} else {","\t\t\t\t\t\treturn isDescendant(this.spanInMainDiv, logEntry.mainDiv);","\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\tsetNotCurrent: function() {","\t\t\t\t\tif (isIe) {",'\t\t\t\t\t\tremoveClass(this.spanInUnwrappedPre, "currentmatch");','\t\t\t\t\t\tremoveClass(this.spanInWrappedDiv, "currentmatch");',"\t\t\t\t\t} else {",'\t\t\t\t\t\tremoveClass(this.spanInMainDiv, "currentmatch");',"\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\tisOrphan: function() {","\t\t\t\t\treturn isOrphan(this.mainSpan);","\t\t\t\t},","","\t\t\t\tisVisible: function() {","\t\t\t\t\treturn getCheckBox(this.logEntryLevel).checked;","\t\t\t\t},","","\t\t\t\tremove: function() {","\t\t\t\t\tif (isIe) {","\t\t\t\t\t\tthis.spanInUnwrappedPre = null;","\t\t\t\t\t\tthis.spanInWrappedDiv = null;","\t\t\t\t\t} else {","\t\t\t\t\t\tthis.spanInMainDiv = null;","\t\t\t\t\t}","\t\t\t\t}","\t\t\t};","","\t\t\tvar currentSearch = null;","\t\t\tvar currentMatchIndex = null;","","\t\t\tfunction doSearch() {",'\t\t\t\tvar searchBox = $("searchBox");',"\t\t\t\tvar searchTerm = searchBox.value;",'\t\t\t\tvar isRegex = $("searchRegex").checked;','\t\t\t\tvar isCaseSensitive = $("searchCaseSensitive").checked;',"\t\t\t\tvar i;","",'\t\t\t\tif (searchTerm === "") {','\t\t\t\t\t$("searchReset").disabled = true;','\t\t\t\t\t$("searchNav").style.display = "none";','\t\t\t\t\tremoveClass(document.body, "searching");','\t\t\t\t\tremoveClass(searchBox, "hasmatches");','\t\t\t\t\tremoveClass(searchBox, "nomatches");',"\t\t\t\t\tfor (i = 0; i < logEntries.length; i++) {","\t\t\t\t\t\tlogEntries[i].clearSearch();","\t\t\t\t\t\tlogEntries[i].setContent(logEntries[i].formattedMessage, logEntries[i].formattedMessage);","\t\t\t\t\t}","\t\t\t\t\tcurrentSearch = null;","\t\t\t\t\tsetLogContainerHeight();","\t\t\t\t} else {",'\t\t\t\t\t$("searchReset").disabled = false;','\t\t\t\t\t$("searchNav").style.display = "block";',"\t\t\t\t\tvar searchRegex;","\t\t\t\t\tvar regexValid;","\t\t\t\t\tif (isRegex) {","\t\t\t\t\t\ttry {",'\t\t\t\t\t\t\tsearchRegex = isCaseSensitive ? new RegExp(searchTerm, "g") : new RegExp(searchTerm, "gi");',"\t\t\t\t\t\t\tregexValid = true;",'\t\t\t\t\t\t\treplaceClass(searchBox, "validregex", "invalidregex");','\t\t\t\t\t\t\tsearchBox.title = "Valid regex";',"\t\t\t\t\t\t} catch (ex) {","\t\t\t\t\t\t\tregexValid = false;",'\t\t\t\t\t\t\treplaceClass(searchBox, "invalidregex", "validregex");','\t\t\t\t\t\t\tsearchBox.title = "Invalid regex: " + (ex.message ? ex.message : (ex.description ? ex.description : "unknown error"));',"\t\t\t\t\t\t\treturn;","\t\t\t\t\t\t}","\t\t\t\t\t} else {",'\t\t\t\t\t\tsearchBox.title = "";','\t\t\t\t\t\tremoveClass(searchBox, "validregex");','\t\t\t\t\t\tremoveClass(searchBox, "invalidregex");',"\t\t\t\t\t}",'\t\t\t\t\taddClass(document.body, "searching");',"\t\t\t\t\tcurrentSearch = new Search(searchTerm, isRegex, searchRegex, isCaseSensitive);","\t\t\t\t\tfor (i = 0; i < logEntries.length; i++) {","\t\t\t\t\t\tcurrentSearch.applyTo(logEntries[i]);","\t\t\t\t\t}","\t\t\t\t\tsetLogContainerHeight();","","\t\t\t\t\t// Highlight the first search match","\t\t\t\t\tif (currentSearch.hasVisibleMatches()) {","\t\t\t\t\t\tsetCurrentMatchIndex(0);","\t\t\t\t\t\tdisplayMatches();","\t\t\t\t\t} else {","\t\t\t\t\t\tdisplayNoMatches();","\t\t\t\t\t}","\t\t\t\t}","\t\t\t}","","\t\t\tfunction updateSearchFromFilters() {","\t\t\t\tif (currentSearch) {","\t\t\t\t\tif (currentSearch.hasMatches()) {","\t\t\t\t\t\tif (currentMatchIndex === null) {","\t\t\t\t\t\t\tcurrentMatchIndex = 0;","\t\t\t\t\t\t}","\t\t\t\t\t\tvar currentMatch = currentSearch.matches[currentMatchIndex];","\t\t\t\t\t\tif (currentMatch.isVisible()) {","\t\t\t\t\t\t\tdisplayMatches();","\t\t\t\t\t\t\tsetCurrentMatchIndex(currentMatchIndex);","\t\t\t\t\t\t} else {","\t\t\t\t\t\t\tcurrentMatch.setNotCurrent();","\t\t\t\t\t\t\t// Find the next visible match, if one exists","\t\t\t\t\t\t\tvar nextVisibleMatchIndex = currentSearch.getNextVisibleMatchIndex();","\t\t\t\t\t\t\tif (nextVisibleMatchIndex > -1) {","\t\t\t\t\t\t\t\tsetCurrentMatchIndex(nextVisibleMatchIndex);","\t\t\t\t\t\t\t\tdisplayMatches();","\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\tdisplayNoMatches();","\t\t\t\t\t\t\t}","\t\t\t\t\t\t}","\t\t\t\t\t} else {","\t\t\t\t\t\tdisplayNoMatches();","\t\t\t\t\t}","\t\t\t\t}","\t\t\t}","","\t\t\tfunction refreshCurrentMatch() {","\t\t\t\tif (currentSearch && currentSearch.hasVisibleMatches()) {","\t\t\t\t\tsetCurrentMatchIndex(currentMatchIndex);","\t\t\t\t}","\t\t\t}","","\t\t\tfunction displayMatches() {",'\t\t\t\treplaceClass($("searchBox"), "hasmatches", "nomatches");','\t\t\t\t$("searchBox").title = "" + currentSearch.matches.length + " matches found";','\t\t\t\t$("searchNav").style.display = "block";',"\t\t\t\tsetLogContainerHeight();","\t\t\t}","","\t\t\tfunction displayNoMatches() {",'\t\t\t\treplaceClass($("searchBox"), "nomatches", "hasmatches");','\t\t\t\t$("searchBox").title = "No matches found";','\t\t\t\t$("searchNav").style.display = "none";',"\t\t\t\tsetLogContainerHeight();","\t\t\t}","","\t\t\tfunction toggleSearchEnabled(enable) {",'\t\t\t\tenable = (typeof enable == "undefined") ? !$("searchDisable").checked : enable;','\t\t\t\t$("searchBox").disabled = !enable;','\t\t\t\t$("searchReset").disabled = !enable;','\t\t\t\t$("searchRegex").disabled = !enable;','\t\t\t\t$("searchNext").disabled = !enable;','\t\t\t\t$("searchPrevious").disabled = !enable;','\t\t\t\t$("searchCaseSensitive").disabled = !enable;','\t\t\t\t$("searchNav").style.display = (enable && ($("searchBox").value !== "") &&',"\t\t\t\t\t\tcurrentSearch && currentSearch.hasVisibleMatches()) ?",'\t\t\t\t\t"block" : "none";',"\t\t\t\tif (enable) {",'\t\t\t\t\tremoveClass($("search"), "greyedout");','\t\t\t\t\taddClass(document.body, "searching");','\t\t\t\t\tif ($("searchHighlight").checked) {','\t\t\t\t\t\taddClass(logMainContainer, "searchhighlight");',"\t\t\t\t\t} else {",'\t\t\t\t\t\tremoveClass(logMainContainer, "searchhighlight");',"\t\t\t\t\t}",'\t\t\t\t\tif ($("searchFilter").checked) {','\t\t\t\t\t\taddClass(logMainContainer, "searchfilter");',"\t\t\t\t\t} else {",'\t\t\t\t\t\tremoveClass(logMainContainer, "searchfilter");',"\t\t\t\t\t}",'\t\t\t\t\t$("searchDisable").checked = !enable;',"\t\t\t\t} else {",'\t\t\t\t\taddClass($("search"), "greyedout");','\t\t\t\t\tremoveClass(document.body, "searching");','\t\t\t\t\tremoveClass(logMainContainer, "searchhighlight");','\t\t\t\t\tremoveClass(logMainContainer, "searchfilter");',"\t\t\t\t}","\t\t\t\tsetLogContainerHeight();","\t\t\t}","","\t\t\tfunction toggleSearchFilter() {",'\t\t\t\tvar enable = $("searchFilter").checked;',"\t\t\t\tif (enable) {",'\t\t\t\t\taddClass(logMainContainer, "searchfilter");',"\t\t\t\t} else {",'\t\t\t\t\tremoveClass(logMainContainer, "searchfilter");',"\t\t\t\t}","\t\t\t\trefreshCurrentMatch();","\t\t\t}","","\t\t\tfunction toggleSearchHighlight() {",'\t\t\t\tvar enable = $("searchHighlight").checked;',"\t\t\t\tif (enable) {",'\t\t\t\t\taddClass(logMainContainer, "searchhighlight");',"\t\t\t\t} else {",'\t\t\t\t\tremoveClass(logMainContainer, "searchhighlight");',"\t\t\t\t}","\t\t\t}","","\t\t\tfunction clearSearch() {",'\t\t\t\t$("searchBox").value = "";',"\t\t\t\tdoSearch();","\t\t\t}","","\t\t\tfunction searchNext() {","\t\t\t\tif (currentSearch !== null && currentMatchIndex !== null) {","\t\t\t\t\tcurrentSearch.matches[currentMatchIndex].setNotCurrent();","\t\t\t\t\tvar nextMatchIndex = currentSearch.getNextVisibleMatchIndex();",'\t\t\t\t\tif (nextMatchIndex > currentMatchIndex || confirm("Reached the end of the page. Start from the top?")) {',"\t\t\t\t\t\tsetCurrentMatchIndex(nextMatchIndex);","\t\t\t\t\t}","\t\t\t\t}","\t\t\t}","","\t\t\tfunction searchPrevious() {","\t\t\t\tif (currentSearch !== null && currentMatchIndex !== null) {","\t\t\t\t\tcurrentSearch.matches[currentMatchIndex].setNotCurrent();","\t\t\t\t\tvar previousMatchIndex = currentSearch.getPreviousVisibleMatchIndex();",'\t\t\t\t\tif (previousMatchIndex < currentMatchIndex || confirm("Reached the start of the page. Continue from the bottom?")) {',"\t\t\t\t\t\tsetCurrentMatchIndex(previousMatchIndex);","\t\t\t\t\t}","\t\t\t\t}","\t\t\t}","","\t\t\tfunction setCurrentMatchIndex(index) {","\t\t\t\tcurrentMatchIndex = index;","\t\t\t\tcurrentSearch.matches[currentMatchIndex].setCurrent();","\t\t\t}","","\t\t\t/* ------------------------------------------------------------------------- */","","\t\t\t// CSS Utilities","","\t\t\tfunction addClass(el, cssClass) {","\t\t\t\tif (!hasClass(el, cssClass)) {","\t\t\t\t\tif (el.className) {",'\t\t\t\t\t\tel.className += " " + cssClass;',"\t\t\t\t\t} else {","\t\t\t\t\t\tel.className = cssClass;","\t\t\t\t\t}","\t\t\t\t}","\t\t\t}","","\t\t\tfunction hasClass(el, cssClass) {","\t\t\t\tif (el.className) {",'\t\t\t\t\tvar classNames = el.className.split(" ");',"\t\t\t\t\treturn array_contains(classNames, cssClass);","\t\t\t\t}","\t\t\t\treturn false;","\t\t\t}","","\t\t\tfunction removeClass(el, cssClass) {","\t\t\t\tif (hasClass(el, cssClass)) {","\t\t\t\t\t// Rebuild the className property",'\t\t\t\t\tvar existingClasses = el.className.split(" ");',"\t\t\t\t\tvar newClasses = [];","\t\t\t\t\tfor (var i = 0, len = existingClasses.length; i < len; i++) {","\t\t\t\t\t\tif (existingClasses[i] != cssClass) {","\t\t\t\t\t\t\tnewClasses[newClasses.length] = existingClasses[i];","\t\t\t\t\t\t}","\t\t\t\t\t}",'\t\t\t\t\tel.className = newClasses.join(" ");',"\t\t\t\t}","\t\t\t}","","\t\t\tfunction replaceClass(el, newCssClass, oldCssClass) {","\t\t\t\tremoveClass(el, oldCssClass);","\t\t\t\taddClass(el, newCssClass);","\t\t\t}","","\t\t\t/* ------------------------------------------------------------------------- */","","\t\t\t// Other utility functions","","\t\t\tfunction getElementsByClass(el, cssClass, tagName) {","\t\t\t\tvar elements = el.getElementsByTagName(tagName);","\t\t\t\tvar matches = [];","\t\t\t\tfor (var i = 0, len = elements.length; i < len; i++) {","\t\t\t\t\tif (hasClass(elements[i], cssClass)) {","\t\t\t\t\t\tmatches.push(elements[i]);","\t\t\t\t\t}","\t\t\t\t}","\t\t\t\treturn matches;","\t\t\t}","","\t\t\t// Syntax borrowed from Prototype library","\t\t\tfunction $(id) {","\t\t\t\treturn document.getElementById(id);","\t\t\t}","","\t\t\tfunction isDescendant(node, ancestorNode) {","\t\t\t\twhile (node != null) {","\t\t\t\t\tif (node === ancestorNode) {","\t\t\t\t\t\treturn true;","\t\t\t\t\t}","\t\t\t\t\tnode = node.parentNode;","\t\t\t\t}","\t\t\t\treturn false;","\t\t\t}","","\t\t\tfunction isOrphan(node) {","\t\t\t\tvar currentNode = node;","\t\t\t\twhile (currentNode) {","\t\t\t\t\tif (currentNode == document.body) {","\t\t\t\t\t\treturn false;","\t\t\t\t\t}","\t\t\t\t\tcurrentNode = currentNode.parentNode;","\t\t\t\t}","\t\t\t\treturn true;","\t\t\t}","","\t\t\tfunction escapeHtml(str) {",'\t\t\t\treturn str.replace(/&/g, "&amp;").replace(/[<]/g, "&lt;").replace(/>/g, "&gt;");',"\t\t\t}","","\t\t\tfunction getWindowWidth() {","\t\t\t\tif (window.innerWidth) {","\t\t\t\t\treturn window.innerWidth;","\t\t\t\t} else if (document.documentElement && document.documentElement.clientWidth) {","\t\t\t\t\treturn document.documentElement.clientWidth;","\t\t\t\t} else if (document.body) {","\t\t\t\t\treturn document.body.clientWidth;","\t\t\t\t}","\t\t\t\treturn 0;","\t\t\t}","","\t\t\tfunction getWindowHeight() {","\t\t\t\tif (window.innerHeight) {","\t\t\t\t\treturn window.innerHeight;","\t\t\t\t} else if (document.documentElement && document.documentElement.clientHeight) {","\t\t\t\t\treturn document.documentElement.clientHeight;","\t\t\t\t} else if (document.body) {","\t\t\t\t\treturn document.body.clientHeight;","\t\t\t\t}","\t\t\t\treturn 0;","\t\t\t}","","\t\t\tfunction getToolBarsHeight() {",'\t\t\t\treturn $("switches").offsetHeight;',"\t\t\t}","","\t\t\tfunction getChromeHeight() {","\t\t\t\tvar height = getToolBarsHeight();","\t\t\t\tif (showCommandLine) {",'\t\t\t\t\theight += $("commandLine").offsetHeight;',"\t\t\t\t}","\t\t\t\treturn height;","\t\t\t}","","\t\t\tfunction setLogContainerHeight() {","\t\t\t\tif (logMainContainer) {","\t\t\t\t\tvar windowHeight = getWindowHeight();",'\t\t\t\t\t$("body").style.height = getWindowHeight() + "px";','\t\t\t\t\tlogMainContainer.style.height = "" +','\t\t\t\t\t\tMath.max(0, windowHeight - getChromeHeight()) + "px";',"\t\t\t\t}","\t\t\t}","","\t\t\tfunction setCommandInputWidth() {","\t\t\t\tif (showCommandLine) {",'\t\t\t\t\t$("command").style.width = "" + Math.max(0, $("commandLineContainer").offsetWidth -','\t\t\t\t\t\t($("evaluateButton").offsetWidth + 13)) + "px";',"\t\t\t\t}","\t\t\t}","","\t\t\twindow.onresize = function() {","\t\t\t\tsetCommandInputWidth();","\t\t\t\tsetLogContainerHeight();","\t\t\t};","","\t\t\tif (!Array.prototype.push) {","\t\t\t\tArray.prototype.push = function() {","\t\t\t\t\tfor (var i = 0, len = arguments.length; i < len; i++){","\t\t\t\t\t\tthis[this.length] = arguments[i];","\t\t\t\t\t}","\t\t\t\t\treturn this.length;","\t\t\t\t};","\t\t\t}","","\t\t\tif (!Array.prototype.pop) {","\t\t\t\tArray.prototype.pop = function() {","\t\t\t\t\tif (this.length > 0) {","\t\t\t\t\t\tvar val = this[this.length - 1];","\t\t\t\t\t\tthis.length = this.length - 1;","\t\t\t\t\t\treturn val;","\t\t\t\t\t}","\t\t\t\t};","\t\t\t}","","\t\t\tif (!Array.prototype.shift) {","\t\t\t\tArray.prototype.shift = function() {","\t\t\t\t\tif (this.length > 0) {","\t\t\t\t\t\tvar firstItem = this[0];","\t\t\t\t\t\tfor (var i = 0, len = this.length - 1; i < len; i++) {","\t\t\t\t\t\t\tthis[i] = this[i + 1];","\t\t\t\t\t\t}","\t\t\t\t\t\tthis.length = this.length - 1;","\t\t\t\t\t\treturn firstItem;","\t\t\t\t\t}","\t\t\t\t};","\t\t\t}","","\t\t\tif (!Array.prototype.splice) {","\t\t\t\tArray.prototype.splice = function(startIndex, deleteCount) {","\t\t\t\t\tvar itemsAfterDeleted = this.slice(startIndex + deleteCount);","\t\t\t\t\tvar itemsDeleted = this.slice(startIndex, startIndex + deleteCount);","\t\t\t\t\tthis.length = startIndex;","\t\t\t\t\t// Copy the arguments into a proper Array object","\t\t\t\t\tvar argumentsArray = [];","\t\t\t\t\tfor (var i = 0, len = arguments.length; i < len; i++) {","\t\t\t\t\t\targumentsArray[i] = arguments[i];","\t\t\t\t\t}","\t\t\t\t\tvar itemsToAppend = (argumentsArray.length > 2) ?","\t\t\t\t\t\titemsAfterDeleted = argumentsArray.slice(2).concat(itemsAfterDeleted) : itemsAfterDeleted;","\t\t\t\t\tfor (i = 0, len = itemsToAppend.length; i < len; i++) {","\t\t\t\t\t\tthis.push(itemsToAppend[i]);","\t\t\t\t\t}","\t\t\t\t\treturn itemsDeleted;","\t\t\t\t};","\t\t\t}","","\t\t\tfunction array_remove(arr, val) {","\t\t\t\tvar index = -1;","\t\t\t\tfor (var i = 0, len = arr.length; i < len; i++) {","\t\t\t\t\tif (arr[i] === val) {","\t\t\t\t\t\tindex = i;","\t\t\t\t\t\tbreak;","\t\t\t\t\t}","\t\t\t\t}","\t\t\t\tif (index >= 0) {","\t\t\t\t\tarr.splice(index, 1);","\t\t\t\t\treturn index;","\t\t\t\t} else {","\t\t\t\t\treturn false;","\t\t\t\t}","\t\t\t}","","\t\t\tfunction array_removeFromStart(array, numberToRemove) {","\t\t\t\tif (Array.prototype.splice) {","\t\t\t\t\tarray.splice(0, numberToRemove);","\t\t\t\t} else {","\t\t\t\t\tfor (var i = numberToRemove, len = array.length; i < len; i++) {","\t\t\t\t\t\tarray[i - numberToRemove] = array[i];","\t\t\t\t\t}","\t\t\t\t\tarray.length = array.length - numberToRemove;","\t\t\t\t}","\t\t\t\treturn array;","\t\t\t}","","\t\t\tfunction array_contains(arr, val) {","\t\t\t\tfor (var i = 0, len = arr.length; i < len; i++) {","\t\t\t\t\tif (arr[i] == val) {","\t\t\t\t\t\treturn true;","\t\t\t\t\t}","\t\t\t\t}","\t\t\t\treturn false;","\t\t\t}","","\t\t\tfunction getErrorMessage(ex) {","\t\t\t\tif (ex.message) {","\t\t\t\t\treturn ex.message;","\t\t\t\t} else if (ex.description) {","\t\t\t\t\treturn ex.description;","\t\t\t\t}",'\t\t\t\treturn "" + ex;',"\t\t\t}","","\t\t\tfunction moveCaretToEnd(input) {","\t\t\t\tif (input.setSelectionRange) {","\t\t\t\t\tinput.focus();","\t\t\t\t\tvar length = input.value.length;","\t\t\t\t\tinput.setSelectionRange(length, length);","\t\t\t\t} else if (input.createTextRange) {","\t\t\t\t\tvar range = input.createTextRange();","\t\t\t\t\trange.collapse(false);","\t\t\t\t\trange.select();","\t\t\t\t}","\t\t\t\tinput.focus();","\t\t\t}","","\t\t\tfunction stopPropagation(evt) {","\t\t\t\tif (evt.stopPropagation) {","\t\t\t\t\tevt.stopPropagation();",'\t\t\t\t} else if (typeof evt.cancelBubble != "undefined") {',"\t\t\t\t\tevt.cancelBubble = true;","\t\t\t\t}","\t\t\t}","","\t\t\tfunction getEvent(evt) {","\t\t\t\treturn evt ? evt : event;","\t\t\t}","","\t\t\tfunction getTarget(evt) {","\t\t\t\treturn evt.target ? evt.target : evt.srcElement;","\t\t\t}","","\t\t\tfunction getRelatedTarget(evt) {","\t\t\t\tif (evt.relatedTarget) {","\t\t\t\t\treturn evt.relatedTarget;","\t\t\t\t} else if (evt.srcElement) {","\t\t\t\t\tswitch(evt.type) {",'\t\t\t\t\t\tcase "mouseover":',"\t\t\t\t\t\t\treturn evt.fromElement;",'\t\t\t\t\t\tcase "mouseout":',"\t\t\t\t\t\t\treturn evt.toElement;","\t\t\t\t\t\tdefault:","\t\t\t\t\t\t\treturn evt.srcElement;","\t\t\t\t\t}","\t\t\t\t}","\t\t\t}","","\t\t\tfunction cancelKeyEvent(evt) {","\t\t\t\tevt.returnValue = false;","\t\t\t\tstopPropagation(evt);","\t\t\t}","","\t\t\tfunction evalCommandLine() {",'\t\t\t\tvar expr = $("command").value;',"\t\t\t\tevalCommand(expr);",'\t\t\t\t$("command").value = "";',"\t\t\t}","","\t\t\tfunction evalLastCommand() {","\t\t\t\tif (lastCommand != null) {","\t\t\t\t\tevalCommand(lastCommand);","\t\t\t\t}","\t\t\t}","","\t\t\tvar lastCommand = null;","\t\t\tvar commandHistory = [];","\t\t\tvar currentCommandIndex = 0;","","\t\t\tfunction evalCommand(expr) {","\t\t\t\tif (appender) {","\t\t\t\t\tappender.evalCommandAndAppend(expr);","\t\t\t\t} else {",'\t\t\t\t\tvar prefix = ">>> " + expr + "\\r\\n";',"\t\t\t\t\ttry {",'\t\t\t\t\t\tlog("INFO", prefix + eval(expr));',"\t\t\t\t\t} catch (ex) {",'\t\t\t\t\t\tlog("ERROR", prefix + "Error: " + getErrorMessage(ex));',"\t\t\t\t\t}","\t\t\t\t}","\t\t\t\t// Update command history","\t\t\t\tif (expr != commandHistory[commandHistory.length - 1]) {","\t\t\t\t\tcommandHistory.push(expr);","\t\t\t\t\t// Update the appender","\t\t\t\t\tif (appender) {","\t\t\t\t\t\tappender.storeCommandHistory(commandHistory);","\t\t\t\t\t}","\t\t\t\t}","\t\t\t\tcurrentCommandIndex = (expr == commandHistory[currentCommandIndex]) ? currentCommandIndex + 1 : commandHistory.length;","\t\t\t\tlastCommand = expr;","\t\t\t}","\t\t\t//]]>","\t\t<\/script>",'\t\t<style type="text/css">',"\t\t\tbody {","\t\t\t\tbackground-color: white;","\t\t\t\tcolor: black;","\t\t\t\tpadding: 0;","\t\t\t\tmargin: 0;","\t\t\t\tfont-family: tahoma, verdana, arial, helvetica, sans-serif;","\t\t\t\toverflow: hidden;","\t\t\t}","","\t\t\tdiv#switchesContainer input {","\t\t\t\tmargin-bottom: 0;","\t\t\t}","","\t\t\tdiv.toolbar {","\t\t\t\tborder-top: solid #ffffff 1px;","\t\t\t\tborder-bottom: solid #aca899 1px;","\t\t\t\tbackground-color: #f1efe7;","\t\t\t\tpadding: 3px 5px;","\t\t\t\tfont-size: 68.75%;","\t\t\t}","","\t\t\tdiv.toolbar, div#search input {","\t\t\t\tfont-family: tahoma, verdana, arial, helvetica, sans-serif;","\t\t\t}","","\t\t\tdiv.toolbar input.button {","\t\t\t\tpadding: 0 5px;","\t\t\t\tfont-size: 100%;","\t\t\t}","","\t\t\tdiv.toolbar input.hidden {","\t\t\t\tdisplay: none;","\t\t\t}","","\t\t\tdiv#switches input#clearButton {","\t\t\t\tmargin-left: 20px;","\t\t\t}","","\t\t\tdiv#levels label {","\t\t\t\tfont-weight: bold;","\t\t\t}","","\t\t\tdiv#levels label, div#options label {","\t\t\t\tmargin-right: 5px;","\t\t\t}","","\t\t\tdiv#levels label#wrapLabel {","\t\t\t\tfont-weight: normal;","\t\t\t}","","\t\t\tdiv#search label {","\t\t\t\tmargin-right: 10px;","\t\t\t}","","\t\t\tdiv#search label.searchboxlabel {","\t\t\t\tmargin-right: 0;","\t\t\t}","","\t\t\tdiv#search input {","\t\t\t\tfont-size: 100%;","\t\t\t}","","\t\t\tdiv#search input.validregex {","\t\t\t\tcolor: green;","\t\t\t}","","\t\t\tdiv#search input.invalidregex {","\t\t\t\tcolor: red;","\t\t\t}","","\t\t\tdiv#search input.nomatches {","\t\t\t\tcolor: white;","\t\t\t\tbackground-color: #ff6666;","\t\t\t}","","\t\t\tdiv#search input.nomatches {","\t\t\t\tcolor: white;","\t\t\t\tbackground-color: #ff6666;","\t\t\t}","","\t\t\tdiv#searchNav {","\t\t\t\tdisplay: none;","\t\t\t}","","\t\t\tdiv#commandLine {","\t\t\t\tdisplay: none;","\t\t\t}","","\t\t\tdiv#commandLine input#command {","\t\t\t\tfont-size: 100%;","\t\t\t\tfont-family: Courier New, Courier;","\t\t\t}","","\t\t\tdiv#commandLine input#evaluateButton {","\t\t\t}","","\t\t\t*.greyedout {","\t\t\t\tcolor: gray !important;","\t\t\t\tborder-color: gray !important;","\t\t\t}","","\t\t\t*.greyedout *.alwaysenabled { color: black; }","","\t\t\t*.unselectable {","\t\t\t\t-khtml-user-select: none;","\t\t\t\t-moz-user-select: none;","\t\t\t\tuser-select: none;","\t\t\t}","","\t\t\tdiv#log {","\t\t\t\tfont-family: Courier New, Courier;","\t\t\t\tfont-size: 75%;","\t\t\t\twidth: 100%;","\t\t\t\toverflow: auto;","\t\t\t\tclear: both;","\t\t\t\tposition: relative;","\t\t\t}","","\t\t\tdiv.group {","\t\t\t\tborder-color: #cccccc;","\t\t\t\tborder-style: solid;","\t\t\t\tborder-width: 1px 0 1px 1px;","\t\t\t\toverflow: visible;","\t\t\t}","","\t\t\tdiv.oldIe div.group, div.oldIe div.group *, div.oldIe *.logentry {","\t\t\t\theight: 1%;","\t\t\t}","","\t\t\tdiv.group div.groupheading span.expander {","\t\t\t\tborder: solid black 1px;","\t\t\t\tfont-family: Courier New, Courier;","\t\t\t\tfont-size: 0.833em;","\t\t\t\tbackground-color: #eeeeee;","\t\t\t\tposition: relative;","\t\t\t\ttop: -1px;","\t\t\t\tcolor: black;","\t\t\t\tpadding: 0 2px;","\t\t\t\tcursor: pointer;","\t\t\t\tcursor: hand;","\t\t\t\theight: 1%;","\t\t\t}","","\t\t\tdiv.group div.groupcontent {","\t\t\t\tmargin-left: 10px;","\t\t\t\tpadding-bottom: 2px;","\t\t\t\toverflow: visible;","\t\t\t}","","\t\t\tdiv.group div.expanded {","\t\t\t\tdisplay: block;","\t\t\t}","","\t\t\tdiv.group div.collapsed {","\t\t\t\tdisplay: none;","\t\t\t}","","\t\t\t*.logentry {","\t\t\t\toverflow: visible;","\t\t\t\tdisplay: none;","\t\t\t\twhite-space: pre;","\t\t\t}","","\t\t\tspan.pre {","\t\t\t\twhite-space: pre;","\t\t\t}","","\t\t\tpre.unwrapped {","\t\t\t\tdisplay: inline !important;","\t\t\t}","","\t\t\tpre.unwrapped pre.pre, div.wrapped pre.pre {","\t\t\t\tdisplay: inline;","\t\t\t}","","\t\t\tdiv.wrapped pre.pre {","\t\t\t\twhite-space: normal;","\t\t\t}","","\t\t\tdiv.wrapped {","\t\t\t\tdisplay: none;","\t\t\t}","","\t\t\tbody.searching *.logentry span.currentmatch {","\t\t\t\tcolor: white !important;","\t\t\t\tbackground-color: green !important;","\t\t\t}","","\t\t\tbody.searching div.searchhighlight *.logentry span.searchterm {","\t\t\t\tcolor: black;","\t\t\t\tbackground-color: yellow;","\t\t\t}","","\t\t\tdiv.wrap *.logentry {","\t\t\t\twhite-space: normal !important;","\t\t\t\tborder-width: 0 0 1px 0;","\t\t\t\tborder-color: #dddddd;","\t\t\t\tborder-style: dotted;","\t\t\t}","","\t\t\tdiv.wrap #log_wrapped, #log_unwrapped {","\t\t\t\tdisplay: block;","\t\t\t}","","\t\t\tdiv.wrap #log_unwrapped, #log_wrapped {","\t\t\t\tdisplay: none;","\t\t\t}","","\t\t\tdiv.wrap *.logentry span.pre {","\t\t\t\toverflow: visible;","\t\t\t\twhite-space: normal;","\t\t\t}","","\t\t\tdiv.wrap *.logentry pre.unwrapped {","\t\t\t\tdisplay: none;","\t\t\t}","","\t\t\tdiv.wrap *.logentry span.wrapped {","\t\t\t\tdisplay: inline;","\t\t\t}","","\t\t\tdiv.searchfilter *.searchnonmatch {","\t\t\t\tdisplay: none !important;","\t\t\t}","","\t\t\tdiv#log *.TRACE, label#label_TRACE {","\t\t\t\tcolor: #666666;","\t\t\t}","","\t\t\tdiv#log *.DEBUG, label#label_DEBUG {","\t\t\t\tcolor: green;","\t\t\t}","","\t\t\tdiv#log *.INFO, label#label_INFO {","\t\t\t\tcolor: #000099;","\t\t\t}","","\t\t\tdiv#log *.WARN, label#label_WARN {","\t\t\t\tcolor: #999900;","\t\t\t}","","\t\t\tdiv#log *.ERROR, label#label_ERROR {","\t\t\t\tcolor: red;","\t\t\t}","","\t\t\tdiv#log *.FATAL, label#label_FATAL {","\t\t\t\tcolor: #660066;","\t\t\t}","","\t\t\tdiv.TRACE#log *.TRACE,","\t\t\tdiv.DEBUG#log *.DEBUG,","\t\t\tdiv.INFO#log *.INFO,","\t\t\tdiv.WARN#log *.WARN,","\t\t\tdiv.ERROR#log *.ERROR,","\t\t\tdiv.FATAL#log *.FATAL {","\t\t\t\tdisplay: block;","\t\t\t}","","\t\t\tdiv#log div.separator {","\t\t\t\tbackground-color: #cccccc;","\t\t\t\tmargin: 5px 0;","\t\t\t\tline-height: 1px;","\t\t\t}","\t\t</style>","\t</head>","",'\t<body id="body">','\t\t<div id="switchesContainer">','\t\t\t<div id="switches">','\t\t\t\t<div id="levels" class="toolbar">',"\t\t\t\t\tFilters:",'\t\t\t\t\t<input type="checkbox" id="switch_TRACE" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide trace messages" /><label for="switch_TRACE" id="label_TRACE">trace</label>','\t\t\t\t\t<input type="checkbox" id="switch_DEBUG" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide debug messages" /><label for="switch_DEBUG" id="label_DEBUG">debug</label>','\t\t\t\t\t<input type="checkbox" id="switch_INFO" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide info messages" /><label for="switch_INFO" id="label_INFO">info</label>','\t\t\t\t\t<input type="checkbox" id="switch_WARN" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide warn messages" /><label for="switch_WARN" id="label_WARN">warn</label>','\t\t\t\t\t<input type="checkbox" id="switch_ERROR" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide error messages" /><label for="switch_ERROR" id="label_ERROR">error</label>','\t\t\t\t\t<input type="checkbox" id="switch_FATAL" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide fatal messages" /><label for="switch_FATAL" id="label_FATAL">fatal</label>','\t\t\t\t\t<input type="checkbox" id="switch_ALL" onclick="toggleAllLevels(); applyFilters()" checked="checked" title="Show/hide all messages" /><label for="switch_ALL" id="label_ALL">all</label>',"\t\t\t\t</div>",'\t\t\t\t<div id="search" class="toolbar">','\t\t\t\t\t<label for="searchBox" class="searchboxlabel">Search:</label> <input type="text" id="searchBox" onclick="toggleSearchEnabled(true)" onkeyup="scheduleSearch()" size="20" />','\t\t\t\t\t<input type="button" id="searchReset" disabled="disabled" value="Reset" onclick="clearSearch()" class="button" title="Reset the search" />','\t\t\t\t\t<input type="checkbox" id="searchRegex" onclick="doSearch()" title="If checked, search is treated as a regular expression" /><label for="searchRegex">Regex</label>','\t\t\t\t\t<input type="checkbox" id="searchCaseSensitive" onclick="doSearch()" title="If checked, search is case sensitive" /><label for="searchCaseSensitive">Match case</label>','\t\t\t\t\t<input type="checkbox" id="searchDisable" onclick="toggleSearchEnabled()" title="Enable/disable search" /><label for="searchDisable" class="alwaysenabled">Disable</label>','\t\t\t\t\t<div id="searchNav">','\t\t\t\t\t\t<input type="button" id="searchNext" disabled="disabled" value="Next" onclick="searchNext()" class="button" title="Go to the next matching log entry" />','\t\t\t\t\t\t<input type="button" id="searchPrevious" disabled="disabled" value="Previous" onclick="searchPrevious()" class="button" title="Go to the previous matching log entry" />','\t\t\t\t\t\t<input type="checkbox" id="searchFilter" onclick="toggleSearchFilter()" title="If checked, non-matching log entries are filtered out" /><label for="searchFilter">Filter</label>','\t\t\t\t\t\t<input type="checkbox" id="searchHighlight" onclick="toggleSearchHighlight()" title="Highlight matched search terms" /><label for="searchHighlight" class="alwaysenabled">Highlight all</label>',"\t\t\t\t\t</div>","\t\t\t\t</div>",'\t\t\t\t<div id="options" class="toolbar">',"\t\t\t\t\tOptions:",'\t\t\t\t\t<input type="checkbox" id="enableLogging" onclick="toggleLoggingEnabled()" checked="checked" title="Enable/disable logging" /><label for="enableLogging" id="enableLoggingLabel">Log</label>','\t\t\t\t\t<input type="checkbox" id="wrap" onclick="toggleWrap()" title="Enable / disable word wrap" /><label for="wrap" id="wrapLabel">Wrap</label>','\t\t\t\t\t<input type="checkbox" id="newestAtTop" onclick="toggleNewestAtTop()" title="If checked, causes newest messages to appear at the top" /><label for="newestAtTop" id="newestAtTopLabel">Newest at the top</label>','\t\t\t\t\t<input type="checkbox" id="scrollToLatest" onclick="toggleScrollToLatest()" checked="checked" title="If checked, window automatically scrolls to a new message when it is added" /><label for="scrollToLatest" id="scrollToLatestLabel">Scroll to latest</label>','\t\t\t\t\t<input type="button" id="clearButton" value="Clear" onclick="clearLog()" class="button" title="Clear all log messages"  />','\t\t\t\t\t<input type="button" id="hideButton" value="Hide" onclick="hide()" class="button" title="Hide the console" />','\t\t\t\t\t<input type="button" id="closeButton" value="Close" onclick="closeWindow()" class="hidden button" title="Close the window" />',"\t\t\t\t</div>","\t\t\t</div>","\t\t</div>",'\t\t<div id="log" class="TRACE DEBUG INFO WARN ERROR FATAL"></div>','\t\t<div id="commandLine" class="toolbar">','\t\t\t<div id="commandLineContainer">','\t\t\t\t<input type="text" id="command" title="Enter a JavaScript command here and hit return or press \'Evaluate\'" />','\t\t\t\t<input type="button" id="evaluateButton" value="Evaluate" class="button" title="Evaluate the command" onclick="evalCommandLine()" />',"\t\t\t</div>","\t\t</div>","\t</body>","</html>",""]
},i=[];ConsoleAppender=function(){};var o=1;ConsoleAppender.prototype=new Appender,ConsoleAppender.prototype.create=function(t,e,r,s,a,l,c,u){function h(t,e){this.loggingEvent=t,this.levelName=t.level.name,this.formattedMessage=e}function d(t,e){this.name=t,this.initiallyExpanded=e}function p(){}var f=this,g=!1,m=!1,v=!1,y=!1,b=[],_=!0,w=o++;s=extractBooleanFromParam(s,this.defaults.initiallyMinimized),r=extractBooleanFromParam(r,this.defaults.lazyInit),a=extractBooleanFromParam(a,this.defaults.useDocumentWrite);var C=this.defaults.newestMessageAtTop,x=this.defaults.scrollToLatestMessage;l=l||this.defaults.width,c=c||this.defaults.height;var T=this.defaults.maxMessages,k=this.defaults.showCommandLine,S=this.defaults.commandLineObjectExpansionDepth,E=this.defaults.showHideButton,P=this.defaults.showCloseButton;this.setLayout(this.defaults.layout);var A,I,O,M,D,L=t?"InPageAppender":"PopUpAppender",j=function(t){return!m||(handleError(L+": configuration option '"+t+"' may not be set after the appender has been initialized"),!1)},R=function(){return v&&_&&!y};this.isNewestMessageAtTop=function(){return C},this.setNewestMessageAtTop=function(t){C=bool(t),R()&&M().setNewestAtTop(C)},this.isScrollToLatestMessage=function(){return x},this.setScrollToLatestMessage=function(t){x=bool(t),R()&&M().setScrollToLatest(x)},this.getWidth=function(){return l},this.setWidth=function(t){j("width")&&(l=extractStringFromParam(t,l))},this.getHeight=function(){return c},this.setHeight=function(t){j("height")&&(c=extractStringFromParam(t,c))},this.getMaxMessages=function(){return T},this.setMaxMessages=function(t){T=extractIntFromParam(t,T),R()&&M().setMaxMessages(T)},this.isShowCommandLine=function(){return k},this.setShowCommandLine=function(t){k=bool(t),R()&&M().setShowCommandLine(k)},this.isShowHideButton=function(){return E},this.setShowHideButton=function(t){E=bool(t),R()&&M().setShowHideButton(E)},this.isShowCloseButton=function(){return P},this.setShowCloseButton=function(t){P=bool(t),R()&&M().setShowCloseButton(P)},this.getCommandLineObjectExpansionDepth=function(){return S},this.setCommandLineObjectExpansionDepth=function(t){S=extractIntFromParam(t,S)};var B=s;this.isInitiallyMinimized=function(){return s},this.setInitiallyMinimized=function(t){j("initiallyMinimized")&&(s=bool(t),B=s)},this.isUseDocumentWrite=function(){return a},this.setUseDocumentWrite=function(t){j("useDocumentWrite")&&(a=bool(t))},h.prototype.append=function(){M().log(this.levelName,this.formattedMessage)},d.prototype.append=function(){M().group(this.name,this.initiallyExpanded)},p.prototype.append=function(){M().groupEnd()};var F=function(){O(),g?y&&tt&&I():A(),O()&&N()};this.append=function(t){if(_){var e=f.getLayout().formatWithException(t);b.push(new h(t,e)),F()}},this.group=function(t,e){_&&(b.push(new d(t,e)),F())},this.groupEnd=function(){_&&(b.push(new p),F())};var N=function(){for(;b.length>0;)b.shift().append();u&&M().focus()};this.setAddedToLogger=function(t){this.loggers.push(t),enabled&&!r&&A()},this.clear=function(){R()&&M().clearLog(),b.length=0},this.focus=function(){R()&&M().focus()},this.focusCommandLine=function(){R()&&M().focusCommandLine()},this.focusSearch=function(){R()&&M().focusSearch()};var U=window;this.getCommandWindow=function(){return U},this.setCommandWindow=function(t){U=t},this.executeLastCommand=function(){R()&&M().evalLastCommand()};var $=new PatternLayout("%m");this.getCommandLayout=function(){return $},this.setCommandLayout=function(t){$=t},this.evalCommandAndAppend=function(t){var e={appendResult:!0,isError:!1},n="";try{var i,o;!U.eval&&U.execScript&&U.execScript("null");var r={};for(o=0,len=q.length;o<len;o++)r[q[o][0]]=q[o][1];var s=[],a=function(t){s.push([t,U[t]])};a("appender"),U.appender=f,a("commandReturnValue"),U.commandReturnValue=e,a("commandLineFunctionsHash"),U.commandLineFunctionsHash=r;for(o=0,len=q.length;o<len;o++)!function(t){a(t),U[t]=function(){return this.commandLineFunctionsHash[t](f,arguments,e)}}(q[o][0]);for(U===window&&U.execScript?(a("evalExpr"),a("result"),window.evalExpr=t,U.execScript("window.result=eval(window.evalExpr);"),i=window.result):i=U.eval(t),n=isUndefined(i)?i:formatObjectExpansion(i,S),o=0,len=s.length;o<len;o++)U[s[o][0]]=s[o][1]}catch(t){n="Error evaluating command: "+getExceptionStringRep(t),e.isError=!0}if(e.appendResult){var l=">>> "+t;isUndefined(n)||(l+=newLine+n);var c=e.isError?Level.ERROR:Level.INFO,u=new LoggingEvent(null,new Date,c,[l],null),h=this.getLayout();this.setLayout($),this.append(u),this.setLayout(h)}};var q=i.concat([]);this.addCommandLineFunction=function(t,e){q.push([t,e])};this.storeCommandHistory=function(t){setCookie("log4javascriptCommandHistory",t.join(","))};var H=function(t){var e=n();t.open();for(var i=0,o=e.length;i<o;i++)t.writeln(e[i]);t.close()};this.setEventTypes(["load","unload"]);var V=function(){var t=M();t.setAppender(f),t.setNewestAtTop(C),t.setScrollToLatest(x),t.setMaxMessages(T),t.setShowCommandLine(k),t.setShowHideButton(E),t.setShowCloseButton(P),t.setMainWindow(window);var e=getCookie("log4javascriptCommandHistory");e&&(t.commandHistory=e.split(","),t.currentCommandIndex=t.commandHistory.length),f.dispatchEvent("load",{win:t})};this.unload=function(){logLog.debug("unload "+this+", caller: "+this.unload.caller),y||(logLog.debug("really doing unload "+this),y=!0,v=!1,m=!1,f.dispatchEvent("unload",{}))};var z=function(t,e,n,i){function o(){try{y&&clearInterval(r),t(M())&&(clearInterval(r),n())}catch(t){clearInterval(r),_=!1,handleError(i,t)}}var r=setInterval(o,e)},W=function(){var t=document.domain!=location.hostname;return a?"":getBaseUrl()+"console_uncompressed.html"+(t?"?log4javascript_domain="+escape(document.domain):"")};if(t){var Y=null,G=[];this.addCssProperty=function(t,e){j("cssProperties")&&G.push([t,e])};var Q,K=!1,X=uniqueId+"_InPageAppender_"+w;this.hide=function(){g&&m&&(R()&&M().$("command").blur(),Q.style.display="none",B=!0)},this.show=function(){g&&(m?(Q.style.display="block",this.setShowCommandLine(k),B=!1):K||I(!0))},this.isVisible=function(){return!B&&!y},this.close=function(t){y||t&&!confirm("This will permanently remove the console from the page. No more messages will be logged. Do you wish to continue?")||(Q.parentNode.removeChild(Q),this.unload())},D=function(){function t(){try{s||f.show(),V(),v=!0,N()}catch(t){_=!1,handleError(n,t)}}function e(){try{var e=function(t){return isLoaded(t)};a&&H(M().document),e(M())?t():z(e,100,t,n)}catch(t){_=!1,handleError(n,t)}}var n="InPageAppender.open: unable to create console iframe";B=!1,Q=Y.appendChild(document.createElement("div")),Q.style.width=l,Q.style.height=c,Q.style.border="solid gray 1px";for(var i=0,o=G.length;i<o;i++)Q.style[G[i][0]]=G[i][1];var r=a?"":" src='"+W()+"'";Q.innerHTML="<iframe id='"+X+"' name='"+X+"' width='100%' height='100%' frameborder='0'"+r+" scrolling='no'></iframe>",y=!1;var u=function(t){try{return bool(t)&&bool(t.document)}catch(t){return!1}};u(M())?e():z(u,100,e,n),m=!0},I=function(t){if(t||!s){var n=function(){if(e)try{var t=document.getElementById(e);1==t.nodeType&&(Y=t),D()}catch(t){handleError("InPageAppender.init: invalid container element '"+e+"' supplied",t)}else Y=document.createElement("div"),Y.style.position="fixed",Y.style.left="0",Y.style.right="0",Y.style.bottom="0",document.body.appendChild(Y),f.addCssProperty("borderWidth","1px 0 0 0"),f.addCssProperty("zIndex",1e6),D()};pageLoaded&&e&&e.appendChild?(Y=e,D()):pageLoaded?n():log4javascript.addEventListener("load",n),K=!0}},A=function(){I(),g=!0},M=function(){var t=window.frames[X];if(t)return t},O=function(){return!(!_||y)&&(m&&!v&&M()&&isLoaded(M())&&(v=!0),v)}}else{var Z=f.defaults.useOldPopUp,J=f.defaults.complainAboutPopUpBlocking,tt=this.defaults.reopenWhenClosed;this.isUseOldPopUp=function(){return Z},this.setUseOldPopUp=function(t){j("useOldPopUp")&&(Z=bool(t))},this.isComplainAboutPopUpBlocking=function(){return J},this.setComplainAboutPopUpBlocking=function(t){j("complainAboutPopUpBlocking")&&(J=bool(t))},this.isFocusPopUp=function(){return u},this.setFocusPopUp=function(t){u=bool(t)},this.isReopenWhenClosed=function(){return tt},this.setReopenWhenClosed=function(t){tt=bool(t)},this.close=function(){logLog.debug("close "+this);try{et.close(),this.unload()}catch(t){}},this.hide=function(){logLog.debug("hide "+this),R()&&this.close()},this.show=function(){logLog.debug("show "+this),m||D()},this.isVisible=function(){return O()};var et;D=function(){function t(){M().setCloseIfOpenerCloses(!Z||!a),V(),v=!0,N(),z(r,500,s,"PopUpAppender.checkPopUpClosed: error checking pop-up window")}var e="width="+l+",height="+c+",status,resizable",n="";try{var i=window.frameElement;i&&(n="_"+i.tagName+"_"+(i.name||i.id||""))}catch(t){n="_inaccessibleParentFrame"}var o="PopUp_"+location.host.replace(/[^a-z0-9]/gi,"_")+"_"+w+n;Z&&a||(o=o+"_"+uniqueId);var r=function(t){if(y)return!0;try{return bool(t)&&t.closed}catch(t){}return!1},s=function(){y||f.unload()};try{if(et=window.open(W(),o,e),y=!1,m=!0,et&&et.document)if(a&&Z&&isLoaded(et))et.mainPageReloaded(),t();else{a&&H(et.document);var u=function(t){return bool(t)&&isLoaded(t)};isLoaded(et)?t():z(u,100,t,"PopUpAppender.init: unable to create console window")}else _=!1,logLog.warn("PopUpAppender.init: pop-ups blocked, please unblock to use PopUpAppender"),J&&handleError("log4javascript: pop-up windows appear to be blocked. Please unblock them to use pop-up logging.")}catch(t){handleError("PopUpAppender.init: error creating pop-up",t)}},I=function(){s||D()},A=function(){I(),g=!0},M=function(){return et},O=function(){if(_&&!isUndefined(et)&&!y){if(et.closed||v&&isUndefined(et.closed))return f.unload(),logLog.debug("PopUpAppender: pop-up closed"),!1;!v&&isLoaded(et)&&(v=!0)}return _&&v&&!y}}this.getConsoleWindow=M},ConsoleAppender.addGlobalCommandLineFunction=function(t,e){i.push([t,e])},t.prototype=new ConsoleAppender,t.prototype.defaults={layout:new PatternLayout("%d{HH:mm:ss} %-5p - %m{1}%n"),initiallyMinimized:!1,focusPopUp:!1,lazyInit:!0,useOldPopUp:!0,complainAboutPopUpBlocking:!0,newestMessageAtTop:!1,scrollToLatestMessage:!0,width:"600",height:"400",reopenWhenClosed:!1,maxMessages:null,showCommandLine:!0,commandLineObjectExpansionDepth:1,showHideButton:!1,showCloseButton:!0,useDocumentWrite:!0},t.prototype.toString=function(){return"PopUpAppender"},log4javascript.PopUpAppender=t,e.prototype=new ConsoleAppender,e.prototype.defaults={layout:new PatternLayout("%d{HH:mm:ss} %-5p - %m{1}%n"),initiallyMinimized:!1,lazyInit:!0,newestMessageAtTop:!1,scrollToLatestMessage:!0,width:"100%",height:"300px",maxMessages:null,showCommandLine:!0,commandLineObjectExpansionDepth:1,showHideButton:!0,showCloseButton:!1,showLogEntryDeleteButtons:!0,useDocumentWrite:!0},e.prototype.toString=function(){return"InPageAppender"},log4javascript.InPageAppender=e,log4javascript.InlineAppender=e}(),function(){function t(t){var e=0;for(var n in t)e=Math.max(toStr(n).length,e);var i=[];for(n in t){var o,r="  "+padWithSpaces(toStr(n),e+2);try{o=splitIntoLines(toStr(t[n])).join(padWithSpaces(newLine,e+6))}catch(t){o="[Error obtaining property. Details: "+getExceptionMessage(t)+"]"}i.push(r+o)}return i.join(newLine)}function e(t,n,a,l,c){function u(t){for(var e=t.style.cssText.split(";"),n="",i=0,o=e.length;i<o;i++){var r=e[i].split(":"),s=[];/^\s*$/.test(r[0])||s.push(trim(r[0]).toLowerCase()+":"+trim(r[1])),n=s.join(";")}return n}n=void 0===n||!!n,"string"!=typeof a&&(a=""),l=!!l,c=!!c;var h,d,p;if(!n||t.nodeType==i.DOCUMENT_FRAGMENT_NODE){for(h="",d=0,p=t.childNodes.length;d<p;d++)h+=e(t.childNodes[d],!0,a+s);return h}switch(t.nodeType){case i.ELEMENT_NODE:var f=t.tagName.toLowerCase();h=l?newLine+a:"",h+="<";var g=function(t){if(t.prefix)return t.prefix;if(t.outerHTML){if(new RegExp("<([^:]+):"+t.tagName+"[^>]*>","i").test(t.outerHTML))return RegExp.$1.toLowerCase()}return""}(t),m=!!g;for(m&&(h+=g+":"),h+=f,d=0,p=t.attributes.length;d<p;d++){var v=t.attributes[d];v.specified&&null!==v.nodeValue&&"style"!==v.nodeName.toLowerCase()&&"string"==typeof v.nodeValue&&0!==v.nodeName.indexOf("_moz")&&(h+=" "+v.nodeName.toLowerCase()+'="',h+=function(t){return t.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}(v.nodeValue),h+='"')}if(t.style.cssText){""!==u(t)&&(h+=' style="'+u(t)+'"')}if(array_contains(r,f)||m&&!t.hasChildNodes())h+="/>";else{h+=">";var y=!(1===t.childNodes.length&&t.childNodes[0].nodeType===i.TEXT_NODE),b=array_contains(o,f);for(d=0,p=t.childNodes.length;d<p;d++)h+=e(t.childNodes[d],!0,a+s,y,b);var _="</"+f+">";h+=y?newLine+a+_:_}return h;case i.TEXT_NODE:if(function(t){return t.nodeType==i.TEXT_NODE&&/^[ \t\r\n]*$/.test(t.nodeValue)}(t))h="";else{if(c)h=t.nodeValue;else{var w=splitIntoLines(trim(t.nodeValue)),C=[];for(d=0,p=w.length;d<p;d++)C[d]=trim(w[d]);h=C.join(newLine+a)}l&&(h=newLine+a+h)}return h;case i.CDATA_SECTION_NODE:return"<![CDATA["+t.nodeValue+"]]>"+newLine;case i.DOCUMENT_NODE:for(h="",d=0,p=t.childNodes.length;d<p;d++)h+=e(t.childNodes[d],!0,a);return h;default:return""}}function n(){ConsoleAppender.addGlobalCommandLineFunction("$",function(t,e,n){return document.getElementById(e[0])}),ConsoleAppender.addGlobalCommandLineFunction("dir",function(e,n,i){for(var o=[],r=0,s=n.length;r<s;r++)o[r]=t(n[r]);return o.join(newLine+newLine)}),ConsoleAppender.addGlobalCommandLineFunction("dirxml",function(t,n,i){for(var o=[],r=0,s=n.length;r<s;r++)o[r]=e(n[r]);return o.join(newLine+newLine)}),ConsoleAppender.addGlobalCommandLineFunction("cd",function(t,e,n){var i,o;return 0===e.length||""===e[0]?(i=window,o="Command line set to run in main window"):e[0].window==e[0]?(i=e[0],o="Command line set to run in frame '"+e[0].name+"'"):(i=window.frames[e[0]],i?o="Command line set to run in frame '"+e[0]+"'":(n.isError=!0,o="Frame '"+e[0]+"' does not exist",i=t.getCommandWindow())),t.setCommandWindow(i),o}),ConsoleAppender.addGlobalCommandLineFunction("clear",function(t,e,n){n.appendResult=!1,t.clear()}),ConsoleAppender.addGlobalCommandLineFunction("keys",function(t,e,n){var i=[];for(var o in e[0])i.push(o);return i}),ConsoleAppender.addGlobalCommandLineFunction("values",function(t,e,n){var i=[];for(var o in e[0])try{i.push(e[0][o])}catch(t){logLog.warn("values(): Unable to obtain value for key "+o+". Details: "+getExceptionMessage(t))}return i}),ConsoleAppender.addGlobalCommandLineFunction("expansionDepth",function(t,e,n){var i=parseInt(e[0],10);return isNaN(i)||i<0?(n.isError=!0,e[0]+" is not a valid expansion depth"):(t.setCommandLineObjectExpansionDepth(i),"Object expansion depth set to "+i)})}var i={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},o=["script","pre"],r=["br","img","hr","param","link","area","input","col","base","meta"],s="  ";!function(){n()}()}(),log4javascript.setDocumentReady=function(){pageLoaded=!0,log4javascript.dispatchEvent("load",{})},window.addEventListener)window.addEventListener("load",log4javascript.setDocumentReady,!1);else if(window.attachEvent)window.attachEvent("onload",log4javascript.setDocumentReady);else{var oldOnload=window.onload;"function"!=typeof window.onload?window.onload=log4javascript.setDocumentReady:window.onload=function(t){oldOnload&&oldOnload(t),log4javascript.setDocumentReady()}}return log4javascript},this),define("vsef/Log",["require","exports","log4javascript"],function(t,e,n){"use strict";function i(){}function o(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];window.console&&window.console;g&&p.trace(t)}function r(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];g&&p.info(t)}function s(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];g&&p.warn(t)}function a(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];g&&p.error(t)}function l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]}function c(t,e){if("inline"===t){g=!0,u(e),n.setDocumentReady(),p=n.getLogger("vcs");var i=p.getEffectiveAppenders();if(null===i||0===i.length){var o=new n.InPageAppender;p.addAppender(o),p.setLevel(n.Level.ALL)}else i[0].show();p.debug("logger started")}}function u(t){switch(m=!0,t){case e.LEVEL_ERROR:h([v.error]);break;case e.LEVEL_WARNING:h([v.error,v.warn]);break;case e.LEVEL_INFO:h([v.error,v.warn,v.note]);break;case e.LEVEL_DEFAULT:h([v.error,v.warn,v.note,v.log,v.noteDir]);break;case e.LEVEL_NONE:h([]),m=!1}}function h(t){for(var e=["log","note","warn","error","noteDir"],n=window.console?window.console:{},o=0,r=e;o<r.length;o++){var s=r[o],a="error"===s?"error":"noteDir"===s?"dir":"log";g?-1!==t.indexOf(e.indexOf(s))&&d(s):Function.prototype.bind?f[s]=Function.prototype.bind.call(n[a],n):f[s]=Function.prototype.apply.call(n[a],n,arguments),-1===t.indexOf(e.indexOf(s))&&(f[s]=i)}}function d(t){switch(t){case"log":f[t]=o;break;case"note":f[t]=r;break;case"error":f[t]=a;break;case"warn":f[t]=s;break;case"notedir":f[t]=l}}Object.defineProperty(e,"__esModule",{value:!0});var p,f=e,g=!1,m=!1;e.LEVEL_DEFAULT=0,e.LEVEL_INFO=1,e.LEVEL_WARNING=2,e.LEVEL_ERROR=3,e.LEVEL_NONE=4;var v;!function(t){t[t.log=0]="log",t[t.note=1]="note",t[t.warn=2]="warn",t[t.error=3]="error",t[t.noteDir=4]="noteDir"}(v=e.LogLevel||(e.LogLevel={})),e.log=o,e.note=r,e.warn=s,e.error=a,e.noteDir=l,e.showJSConsole=c,e.setLogLevelValue=u,e.setLogLevel=h,e.bindLogging=d,function(){for(var t=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],e=window.console?window.console:{},n=0,o=t;n<o.length;n++){var r=o[n];e[r]||(e[r]=i)}h([v.log,v.note,v.warn,v.error,v.noteDir])}()});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/Model",["require","exports","./Observable","./Log"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return i.note("created vsef model"),t.call(this)||this}return __extends(e,t),e}(n.Observable);e.Model=o});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/Types",["require","exports","./utils/MiscUtils","./Model"],function(t,e,n,i){"use strict";function o(t){return"center"===t.toLowerCase()?u.Center:"right"===t.toLowerCase()?u.Right:u.Left}function r(t){return["left","center","right"][t]}function s(t){return t&&"stacked"===t.toLowerCase()?h.Stacked:h.Paged}function a(t){return t&&"below"===t.toLowerCase()?d.Below:d.Above}function l(t){return t&&"case-insensitive"===t.toLowerCase()?p.CaseInsensitive:p.ExactMatch}function c(t,e){return void 0===e&&(e=!1),"string"!=typeof t?e:-1!==["1","true","on","yes"].indexOf(t.toLowerCase())||-1===["0","false","off","no"].indexOf(t.toLowerCase())&&e}Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Above=2]="Above",t[t.Below=3]="Below"}(e.DisplayPosition||(e.DisplayPosition={}));!function(t){t[t.Normal=0]="Normal",t[t.Prerendering=1]="Prerendering",t[t.Prerendered=2]="Prerendered",t[t.Print=3]="Print"}(e.RenderReason||(e.RenderReason={}));!function(t){t[t.EngineStatic=0]="EngineStatic",t[t.EngineActivity=1]="EngineActivity"}(e.EngineType||(e.EngineType={}));!function(t){t[t.Basic=0]="Basic",t[t.ActivityPaged=1]="ActivityPaged",t[t.ActivityStacked=2]="ActivityStacked"}(e.CommonUIType||(e.CommonUIType={})),e.RTL_STYLE="rtl",e.EMPTY_STYLE="empty";var u;!function(t){t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right"}(u=e.Alignment||(e.Alignment={})),e.stringToAlignment=o,e.alignmentToString=r;var h;!function(t){t[t.Paged=0]="Paged",t[t.Stacked=1]="Stacked"}(h=e.QuestionLayout||(e.QuestionLayout={})),e.stringToQuestionLayout=s;var d;!function(t){t[t.Above=0]="Above",t[t.Below=1]="Below"}(d=e.StimulusPlacement||(e.StimulusPlacement={})),e.stringToStimulusPlacement=a;var p;!function(t){t[t.ExactMatch=0]="ExactMatch",t[t.CaseInsensitive=1]="CaseInsensitive"}(p=e.TypedAnswerSensitivity||(e.TypedAnswerSensitivity={})),e.stringToTypedAnswerSensitivity=l,e.stringOptionToBool=c;var f=function(t){function e(e){var n=t.call(this)||this;return n.text="",n.audio="",n.audioTranscriptText="",n.audioTranscriptExt="",n.audioAlt="",n.image="",n.imageAlt="",n.imageCaption="",n.video="",n.videoPoster="",n.videoCaption="",n.videoInfo="",n.videoTranscriptText="",n.videoTranscriptExt="",e&&n.setData(e),n}return __extends(e,t),Object.defineProperty(e.prototype,"hasAudio",{get:function(){return!!(this.audio&&this.audio.length>0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasAudioTranscript",{get:function(){return!!(this.audioTranscriptText&&this.audioTranscriptText.length>0||this.audioTranscriptExt&&this.audioTranscriptExt.length>0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAudioTranscriptExternal",{get:function(){return!!(this.hasVideoTranscript&&this.audioTranscriptExt&&this.audioTranscriptExt.length>0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioTranscript",{get:function(){return this.hasAudioTranscript?this.isAudioTranscriptExternal?this.audioTranscriptExt:this.audioTranscriptText:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasImage",{get:function(){return!!(this.image&&this.image.length>0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasImageCaption",{get:function(){return!!(this.imageCaption&&this.imageCaption.length>0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasText",{get:function(){return!!(this.text&&this.text.length>0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasVideo",{get:function(){return!!(this.video&&this.video.length>0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasEmbeddedVideo",{get:function(){return!!(this.embeddedVideo&&this.embeddedVideo.length>0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasVideoInfo",{get:function(){return!!(this.videoInfo&&this.videoInfo.length>0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasVideoTranscript",{get:function(){return!!(this.videoTranscriptText&&this.videoTranscriptText.length>0||this.videoTranscriptExt&&this.videoTranscriptExt.length>0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVideoTranscriptExternal",{get:function(){return!!(this.hasVideoTranscript&&this.videoTranscriptExt&&this.videoTranscriptExt.length>0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"videoTranscript",{get:function(){return this.hasVideoTranscript?this.isVideoTranscriptExternal?this.videoTranscriptExt:this.videoTranscriptText:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return!(this.hasAudio||this.hasImage||this.hasText||this.hasEmbeddedVideo||this.hasVideo)},enumerable:!0,configurable:!0}),e.prototype.setData=function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]="string"==typeof t[e]?n.MiscUtils.getFloeString(t[e]):t[e])},e}(i.Model);e.StimulusElement=f;!function(t){t[t.pixels=0]="pixels",t[t.percentage=1]="percentage"}(e.DimensionUnit||(e.DimensionUnit={}));var g=function(){function t(){this.kind="None"}return t}();e.None=g;!function(t){t[t.Graded=0]="Graded",t[t.Submitted=1]="Submitted",t[t.None=2]="None"}(e.ActivityEvaluation||(e.ActivityEvaluation={}));!function(t){t[t.modeEdit=0]="modeEdit",t[t.modePreview=1]="modePreview"}(e.ScreenEditorMode||(e.ScreenEditorMode={}));!function(t){t[t.Content=0]="Content",t[t.Scored=1]="Scored"}(e.ScreenType||(e.ScreenType={}));!function(t){t[t.Printable=0]="Printable"}(e.ScreenActivityAttribute||(e.ScreenActivityAttribute={}))}),define("vsef/AssetLoader",["require","exports","jquery","lodash","./utils/PathUtils"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.assets=t,this.assetsList=e}return t.prototype.get=function(t){if("string"!=typeof t){for(var e=[],n=t,i=0,o=n;i<o.length;i++){var r=o[i];e.push(this.assets[r])}return e}return this.assets[t]},t.prototype.getUrl=function(t){try{return this.assetsList.filter(function(e){return e.id===t})[0].url}catch(t){return null}},Object.defineProperty(t.prototype,"urls",{get:function(){for(var t=[],e=0,n=this.assetsList;e<n.length;e++){var i=n[e];t.push(i.url)}return t},enumerable:!0,configurable:!0}),t.prototype.assetsByExtension=function(t){return this.assetsList.filter(function(e){return o.PathUtils.getFileExtension(e.url).toLowerCase()===t})},t.prototype.idsFromAssets=function(t){return i.map(t,"id")},t}();e.AssetsLoaded=r;var s=function(){function e(){}return e.load=function(t){return(new e).load(t)},e.prototype.load=function(e){if(!e.length)return Promise.resolve(new r({},e));var i=0,o=this.assets={},s=function(t,s,a,l){var c=t.url.substr(t.url.lastIndexOf(".")).toLowerCase();if(".xml"===c){var u=t.settings&&"text"===t.settings.dataType;"string"!=typeof s||u||(s=n.parseXML(s))}else".json"===c&&"string"==typeof s&&(s=s.length?JSON.parse(s):{});s||!0===t.optional?(o[t.id]=s,i++):l(new Error("missing asset "+t.id+" "+t.url)),i===e.length&&a(new r(o,e))};return new Promise(function(n,i){for(var o=0;o<e.length;o++)!function(o){t(["text!"+e[o].url],function(t){s(e[o],t,n,i)})}(o)})},e}();e.AssetLoader=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("vsef/EngineModel",["require","exports","jquery","./Log","./Model","./Observable"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,n){var o=this;return i.note("created EngineModel"),o=t.call(this)||this,e&&o.parse(e,n),o}return __extends(e,t),e.prototype.parse=function(t,e){i.note("EngineModel parse activity data"),"string"==typeof t&&(t=n.parseXML(t)),this.$data=n(t),this.paths=e,this.readData()},__decorate([r.observable],e.prototype,"initialized",void 0),__decorate([r.observable],e.prototype,"state",void 0),e}(o.Model);e.EngineModel=s}),define("vsef/Flags",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._flags=[],this.add(t)}return Object.defineProperty(t.prototype,"data",{get:function(){return this._flags.slice()},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return-1!==this._flags.indexOf(t)},t.prototype.lacks=function(t){return!this.has(t)},t.prototype.add=function(t){if(void 0!==t){for(var e=[].concat(t),n=0,i=e;n<i.length;n++){var o=i[n];this.has(o)||this._flags.push(o)}return this}},t.prototype.remove=function(t){if(void 0===t)return!1;for(var e=[].concat(t),n=0,i=0,o=e;i<o.length;i++){var r=o[i];this.has(r)&&(this._flags.splice(this._flags.indexOf(r),1),n++)}return 0!==n},t}();e.Flags=n});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("vsef/BlockAPI",["require","exports","./EventDispatcher","./Observable","./Flags"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=t.call(this)||this;return e.onCompleteChange=new n.EventDispatcher(e),e.onEngineInitialized=new n.EventDispatcher(e),e.onEngineChangeSize=new n.EventDispatcher(e),e.onInvalidState=new n.EventDispatcher(e),e.onAlert=new n.EventDispatcher(e),e.attributes=new o.Flags,e}return __extends(e,t),e.prototype.reset=function(){},e.prototype.setFocus=function(){},__decorate([i.observable],e.prototype,"complete",void 0),__decorate([i.observable],e.prototype,"state",void 0),e}(i.Observable);e.default=r}),define("vsef/contexts/Context",["require","exports","../Flags","../EventDispatcher","../Types","../BlockAPI","../utils/Environment"],function(t,e,n,i,o,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.Default=0]="Default",t[t.Floe=1]="Floe",t[t.ScreenBlock=2]="ScreenBlock"}(e.ContextType||(e.ContextType={}));var a;!function(t){t[t.HandlesBackend=0]="HandlesBackend",t[t.HandlesAlerts=1]="HandlesAlerts"}(a=e.ParentAttribute||(e.ParentAttribute={}));!function(t){t[t.StandAlone=0]="StandAlone",t[t.DontLoadCss=1]="DontLoadCss",t[t.DynamicPrintScreen=2]="DynamicPrintScreen"}(e.ContextAttribute||(e.ContextAttribute={}));var l=function(){function t(){this.parentAttributes=new o.None,this.setType(),this.defineAttributes(),this.id="ScreenBlockContext_"+t.idTemplate++,this.onBlockApiInitialized=new i.EventDispatcher(this),this._blockAPI=new r.default}return t.prototype.setSkin=function(t){},t.prototype.setContentPath=function(t){t||(t=this.paths.basePath+"activities/")},Object.defineProperty(t.prototype,"blockAPI",{get:function(){return this._blockAPI},set:function(t){this._blockAPI=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPrerendering",{get:function(){return this.reason===o.RenderReason.Prerendering},enumerable:!0,configurable:!0}),t.prototype.hasParent=function(){return"None"!==this.parentAttributes.kind},t.prototype.hasParentBackend=function(){switch(this.parentAttributes.kind){case"ScoredScreen":case"ContentScreen":return this.parentAttributes.attributes.has(a.HandlesBackend);default:return!1}},t.prototype.hasOwnBackend=function(){return!this.hasParentBackend()&&!!this.backend},t.prototype.saveState=function(t){return this.hasOwnBackend()&&!s.Environment.isReadOnly()?this.backend.saveState([t]):Promise.resolve()},t.prototype.loadState=function(t){return this.hasOwnBackend()?this.backend.loadState([t]).then(function(t){return Array.isArray(t)&&t.length>0?t[0]:null}):Promise.resolve(null)},t.prototype.submitResult=function(t){this.backend.submitResult([t])},t.prototype.defineAttributes=function(){this.attributes=new n.Flags},t.prototype.getEngineClass=function(t){return t},t.prototype.remapEngineID=function(t,e){var n;return e&&e.architecture.mappings&&(n=e.architecture.mappings[t]),n},t.prototype.setupEngineName=function(t,e){var n=this.remapEngineID(t,e);n&&(this.engineNativeID=t,this.engineNativeClass=this.getEngineClass(t),this.engineNativeClassLower=this.engineNativeClass.toLowerCase(),t=n),this.engineID=t,this.engineClass=this.getEngineClass(t),
this.engineClassLower=this.engineClass.toLowerCase()},t.idTemplate=0,t}();e.Context=l});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/contexts/ScreenBlockContext",["require","exports","./Context"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,i,o,r){var s=t.call(this)||this;s.engineID=e,s.activityData=n,s.setupEngineName(e,o),s.paths=i,s.subproj=r;var a="enginesRoot";return s.subproj&&e.substr(0,r.length)===r&&(a+=r.toUpperCase()),s.engineCode=a+"/engines/"+s.engineID+"/"+s.engineID+"Engine",s}return __extends(e,t),e.prototype.init=function(){return Promise.resolve(void 0)},e.prototype.getActivityData=function(){return Promise.resolve(this.activityData)},e.prototype.setType=function(){this.type=n.ContextType.ScreenBlock},e}(n.Context);e.ScreenBlockContext=i}),define("vsef/utils/StringUtils",["require","exports","jquery"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i;!function(t){t[t.ID=0]="ID",t[t.Text=1]="Text"}(i=e.HtmlToTextMode||(e.HtmlToTextMode={}));var o=function(){function t(){}return t.removeBlankLines=function(t){return"string"==typeof t?t.replace(/^\s*[\r\n]/gm,""):t},t.normalizePunctuation=function(t){return t.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"')},t.strToCharCodes=function(t){for(var e="",n=0;n<t.length;n++)e+=t.charCodeAt(n)+" ";return e},t.htmlToText=function(t,e){return void 0===e&&(e=i.ID),e===i.Text&&(t=t.replace(/<br\s*\/>/gi,"\n")),"<"!==t.trim().charAt(0)&&(t="<span>"+t+"</span>"),n(t).text()},t.htmlPtoBr=function(t){return t.replace(/<p.*?>/gi,"").replace(/<\s*\/p\s*>/gi,"<br/>")},t.extractStyle=function(t){return t.match(/(style="([^"]*)")/g)?t.match(/(style="([^"]*)")/g)[0]:""},t.removeStyle=function(t){return t.replace(/(style="([^"]*)")/g,"")},t}();e.default=o}),define("vsef/utils/IntraTemplateUtils",["require","exports","lodash","../Types","./StringUtils"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.conditionalAttribute=function(t,e,n){return t?" "+e+'="'+n+'"':""},t.dirltr=function(){return"rtl"===document.documentElement.getAttribute("dir")?' dir="ltr" ':""},t.htmlPtoBr=function(t){return o.default.htmlPtoBr(t)},t.extractStyle=function(t){return o.default.extractStyle(t)},t.removeStyle=function(t){return o.default.removeStyle(t)},t.isLegacyImg=function(t){return!t.imageControls||!t.imageControls.imageAlignment||!t.imageControls.imageAlignment._value||"legacy-hidden"===t.imageControls.imageAlignment._value},t.createImg=function(e){if(!e)return"";if(t.isLegacyImg(e))return t.createLegacyImg(e);var r=e.imageControls,s=i.stringOptionToBool(r.enableZoom._value),a=i.stringOptionToBool(r.searchableImage._value),l=!1;r.enableBorder&&(l=i.stringOptionToBool(r.enableBorder._value,!1));var c=e.figcaptionPos||"bottom",u="top"===c,h=["fig"],d={"full-screen":"fig--100","3-4-screen":"fig--75","1-2-screen":"fig--50","1-4-screen":"fig--25"}[r.imageScale._value]||"fig--100";h.push(d);var p={left:"fig--left",center:"fig--center",right:"fig--right"}[r.imageAlignment._value]||"fig--center";h.push(p),p="fig--100"===d?"fig--center":p;var f=a?"figure":"div",g=a?"figcaption":"div",m=e.isFloating?" fig__caption--keep-margin":"",v='class="fig-caption fig__caption--'+(u?"top":"bottom")+m+'"',y="<"+g+" "+v+">"+e.imageCaption+"</"+g+">",b=n.escape(e.imageAlt),_=s?"":'<div class="image-holder">',w=s?"":"</div>",C=[];s&&C.push("zoomable-image"),l&&h.push("has-border"),e.isFloating&&"fig--center"!==p&&"fig--100"!==d&&h.push("fig--float");var x="<"+f+' class="'+h.join(" ")+'">\n\t\t    '+(u?y:"")+"\n\t\t    "+_+'<img class="'+C.join(" ")+' vst-click" src="'+e.image+'" alt="'+b+'"/>'+w+"\n\t\t    "+(u?"":y)+"\n\t\t</"+f+">";return o.default.removeBlankLines(x)},t.createLegacyImg=function(t){var e=["fig"],o=!1;t.imageControls.enableZoom&&(o=i.stringOptionToBool(t.imageControls.enableZoom._value));var r=!1;t.imageControls.searchableImage&&(r=i.stringOptionToBool(t.imageControls.searchableImage._value));t.imageControls.enableBorder&&i.stringOptionToBool(t.imageControls.enableBorder._value,!1)&&e.push("has-border");var s=r?"figure":"div",a=r?"figcaption":"div",l=n.escape(t.imageAlt);t.isLegacyDynamic?e.push("figure"):e.push("fig-legacy"),t.isFloating&&e.push("fig--float-left");var c="";return c=t.isLegacyDynamic?' class="figcaption"':' class="fig__caption--bottom '+(t.isFloating?"screen__margin--mobile":"screen__margin")+'"',"<"+s+' class="'+e.join(" ")+'">\n\t\t\t<img class="'+(o?"zoomable-image":"")+' vst-click" src="'+t.image+'" alt="'+l+'"/>\n\t\t\t<'+a+c+">"+t.imageCaption+"</"+a+">\n\t\t\t</"+s+">"},t}();e.default=r}),define("vsef/Templates",["require","exports","lodash","./utils/IntraTemplateUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o;!function(t){t[t.Screen=0]="Screen",t[t.Print=1]="Print"}(o=e.TemplateMediaType||(e.TemplateMediaType={}));var r;!function(t){t[t.Inner=0]="Inner",t[t.Outer=1]="Outer"}(r=e.TemplateContent||(e.TemplateContent={}));var s=function(){function t(t,e,n,i){void 0===e&&(e="en"),void 0===n&&(n=o.Screen);var r=t;"string"==typeof t&&(r=[t]),this.templates=r.join("\n"),this.locale=e,this.media=n,this.options=i||{}}return t.removeOuter=function(t){return t.replace(/<script.*>|<\/script>/g,"")},Object.defineProperty(t.prototype,"isPrint",{get:function(){return this.media===o.Print},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.templates},enumerable:!0,configurable:!0}),t.prototype.getText=function(t,e){void 0===e&&(e=!1);var n;return"en"!==this.locale&&(n=this.retrieveTemplate("id",t+"-"+this.locale,!0)),n||(n=this.retrieveTemplate("id",t,e)),n=n.replace(/^\r?\n|^\r|\r?\n$|^\r$/g,"")},t.prototype.getTextsByAttribute=function(t,e,n){return void 0===n&&(n=r.Inner),this.retrieveTemplates(t,e,!0,n)},t.prototype.get=function(t){return n.template(this.getText(t),{imports:{itu:i.default,options:this.options}})},t.prototype.retrieveTemplate=function(t,e,n,i){void 0===i&&(i=r.Inner);var o=this.retrieveTemplates(t,e,n,i);return o.length?o[0]:null},t.prototype.retrieveTemplates=function(e,n,i,o){void 0===o&&(o=r.Inner);for(var s,a=new RegExp('<script type="text\\/template".*'+e+'="'+n+'".*>[\\s\\S]*?<\\/script>',"g"),l=[],c=!1;!c;)s=a.exec(this.templates),null===s?c=!0:l.push(s[0]);if(!l.length){if(i)return null;throw new Error("Missing template with "+e+" of "+n)}if(o===r.Inner)for(var u=0;u<l.length;u++)l[u]=t.removeOuter(l[u]);for(var u=0;u<l.length;u++)l[u]=l[u].replace(/&nbsp;/gi,"&#160;");return l},t}();e.Templates=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/commonUI/model/CommonUIModel",["require","exports","../../Model"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(n.Model);e.CommonUIModel=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("vsef/commonUI/model/CommonUIActivityModel",["require","exports","../../Observable","../../EventDispatcher","./CommonUIModel","../../Flags"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e){var n=t.call(this)||this;return n.submitted=!1,n.complete=!1,n.revealAnswer=!1,n.showFeedback=!1,n.title="",n.isActivityCollapsed=!0,n.attributes=new r.Flags,n.id=e,n.onPrint=new i.EventDispatcher(n),n.onResetAnswers=new i.EventDispatcher(n),n}return __extends(e,t),__decorate([n.observable],e.prototype,"submitted",void 0),__decorate([n.observable],e.prototype,"complete",void 0),__decorate([n.observable],e.prototype,"revealAnswer",void 0),__decorate([n.observable],e.prototype,"showFeedback",void 0),__decorate([n.observable],e.prototype,"instructions",void 0),__decorate([n.observable],e.prototype,"instructionsMobile",void 0),__decorate([n.observable],e.prototype,"title",void 0),__decorate([n.observable],e.prototype,"globalFeedback",void 0),__decorate([n.observable],e.prototype,"globalFeedbackTitle",void 0),e}(o.CommonUIModel);e.CommonUIActivityModel=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("vsef/commonUI/model/CommonUIPagedModel",["require","exports","../../EventDispatcher","./CommonUIActivityModel","../../Observable"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var i=t.call(this,e)||this;return i.onShowPageFeedback=new n.EventDispatcher(i),i.onHidePageFeedback=new n.EventDispatcher(i),i.onSubmitPageAnswers=new n.EventDispatcher(i),i.onCheckPageAnswers=new n.EventDispatcher(i),i.onRevealPageAnswers=new n.EventDispatcher(i),i.onResetPageAnswers=new n.EventDispatcher(i),i.onHidePageAnswers=new n.EventDispatcher(i),i.onNextPage=new n.EventDispatcher(i),i.onShowPageFeedback=new n.EventDispatcher(i),i.onHidePageFeedback=new n.EventDispatcher(i),i}return __extends(e,t),Object.defineProperty(e.prototype,"atEndPage",{get:function(){return this.pageIndex===this.pages.length-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"atStartPage",{get:function(){return 0===this.pageIndex},enumerable:!0,configurable:!0}),e.prototype.requestPreviousPage=function(){this.requestPage(this.pageIndex-1)},e.prototype.requestNextPage=function(){this.requestPage(this.pageIndex+1)},e.prototype.requestFirstPage=function(){this.requestPage(0)},e.prototype.requestLastPage=function(){this.requestPage(this.pages.length-1)},e.prototype.requestPage=function(t){t=Math.max(t,0),t=Math.min(t,this.pages.length-1),this.requestedPageIndex=t},__decorate([o.observable],e.prototype,"pageIndex",void 0),__decorate([o.observable],e.prototype,"pages",void 0),__decorate([o.observable],e.prototype,"requestedPageIndex",void 0),__decorate([o.observable],e.prototype,"pageSelectBarVisible",void 0),e}(i.CommonUIActivityModel);e.CommonUIPagedModel=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/View",["require","exports","jquery","lodash","./EventListener","./utils/Environment"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,o,r,s){var a=t.call(this)||this;return s&&s instanceof n&&0===s.length&&(s=void 0),a.model=e,a.templates=o,r&&(a.template=o.get(r)),a._$el=s,a.cid=i.uniqueId("c"),s&&a.delegateEvents(),a}return __extends(e,t),e.extendEvents=function(t,e){return i.extend({},t,e)},Object.defineProperty(e.prototype,"$el",{get:function(){return this._$el},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"el",{get:function(){return this._$el&&this._$el[0]?this._$el[0]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPrerendered",{get:function(){return this.$el&&this.$el.hasClass("rendered")},enumerable:!0,configurable:!0}),e.prototype.getEvents=function(){return{}},e.prototype.$=function(t){return this.$el.find(t)},e.prototype.render=function(){if(!r.Environment.isPrerendering()&&this.$el&&this.$el.hasClass(e.RENDERED))return this;if(this.template){var t={isPrint:this.templates.isPrint},o=this.template(i.extend(this.model,t));this.$el?this.$el.html(o):(this._$el=n(o),this.delegateEvents()),r.Environment.isPrerendering()&&this.$el.addClass(e.RENDERED)}return this},e.prototype.hide=function(){return this.$el&&this.$el.hide(),this},e.prototype.show=function(){return this.$el&&this.$el.show(),this},e.prototype.remove=function(){return this.$el&&this.$el.remove(),this.stopListening(),this.undelegateEvents(),this},e.prototype.clear=function(){return this.$el.empty(),this.stopListening(),this.undelegateEvents(),this},e.prototype.setElement=function(t){return this.undelegateEvents(),this._$el=t instanceof n?t:n(t),this.delegateEvents(),this},e.prototype.appendChildView=function(t,e,n){return void 0===n&&(n=!0),e.length?(t.setElement(e),n&&t.render()):t.render().$el.appendTo(this.$el),this},e.prototype.delegateEvents=function(t){if(this.$el){if(!(t=t||this.getEvents()))return this;this.undelegateEvents();for(var n in t)if(t.hasOwnProperty(n)){var o=t[n],r=n.match(e.delegateEventSplitter);this.delegate(r[1],r[2],i.bind(o,this))}return this}},e.prototype.delegate=function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},e.prototype.undelegateEvents=function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},e.RENDERED="rendered",e.delegateEventSplitter=/^(\S+)\s*(.*)$/,e}(o.EventListener);e.View=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/commonUI/view/CommonUIActivityBaseView",["require","exports","../../View"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,i,o,r){var s=t.call(this,e,n,o,r)||this;return s.btnsID=i,s.listenTo(s.model.onTitleChange,s.renderTitle),s.listenTo([s.model.onInstructionsChange,s.model.onInstructionsMobileChange],s.renderInstructions),s.listenTo(s.model.onGlobalFeedbackChange,s.renderGlobalFeedback),s.listenTo(s.model.onGlobalFeedbackTitleChange,s.renderGlobalFeedbackTitle),s}return __extends(e,t),e.prototype.getEvents=function(){return n.View.extendEvents(t.prototype.getEvents.call(this),{"click button[data-function='print']":this.printBtnClick})},Object.defineProperty(e.prototype,"$activityEl",{get:function(){return this.$el?this.$(".activity"):void 0},enumerable:!0,configurable:!0}),e.prototype.render=function(){return t.prototype.render.call(this),this.renderButtons(),this},e.prototype.updateLastButton=function(){this.$("button").removeClass("last-button"),this.$("button:visible").last().addClass("last-button")},e.prototype.printBtnClick=function(){this.model.onPrint.trigger()},e}(n.View);e.CommonUIActivityBaseView=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/commonUI/view/CommonUIActivityView",["require","exports","./CommonUIActivityBaseView","../../utils/Environment"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n,i,o){return t.call(this,e,n,i,"common-ui-activity-template",o)||this}return __extends(e,t),e.prototype.focusGlobalFeedback=function(){this.$(".global-feedback").focus()},e.prototype.renderButtons=function(){if(!this.$el.hasClass("rendered")||i.Environment.isPrerendering()){var t=this.templates.get(this.btnsID)({});this.$(".control-btns").append(t)}},e.prototype.renderInstructions=function(){this.$(".instructions-holder").html(this.model.instructions),this.$(".instructions-mobile-holder").html(this.model.instructionsMobile),this.$el.toggleClass("no-instructions",!this.model.instructions.length)},e.prototype.renderTitle=function(){this.$(".title").html(this.model.title),this.$(".header-area").toggleClass("has-title",this.model.hasCustomTitle),this.$el.toggleClass("no-instructions",!this.model.instructions.length)},e.prototype.renderGlobalFeedback=function(){this.$(".global-feedback .global-feedback-holder").empty().html(this.model.globalFeedback)},e.prototype.renderGlobalFeedbackTitle=function(){this.$(".global-feedback .global-feedback-title").empty().html(this.model.globalFeedbackTitle)},e}(n.CommonUIActivityBaseView);e.CommonUIActivityView=o}),define("vsef/utils/Keyboard",["require","exports","../Flags"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.isBackward=function(e,n){return void 0===n&&(n=!1),(n&&t.HORZ_ARROW.has(e)?t.FORWARD:t.BACKWARD).has(e)},t.isForward=function(e,n){return void 0===n&&(n=!1),(n&&t.HORZ_ARROW.has(e)?t.BACKWARD:t.FORWARD).has(e)},t.BACKSPACE=8,t.TAB=9,t.ENTER=13,t.SHIFT=16,t.CTRL=17,t.ALT=18,t.PAUSE=19,t.CAPSLOCK=20,t.ESCAPE=27,t.SPACE=32,t.PAGE_UP=33,t.PAGE_DOWN=34,t.END=35,t.HOME=36,t.LEFT_ARROW=37,t.UP_ARROW=38,t.RIGHT_ARROW=39,t.DOWN_ARROW=40,t.INSERT=45,t.DELETE=46,t.SQUARE_BRACKET_OPEN=219,t.SQUARE_BRACKET_CLOSED=221,t.P=80,t.R=82,t.F1=112,t.F2=113,t.F3=114,t.F4=115,t.F5=116,t.F6=117,t.F7=118,t.F8=119,t.F9=120,t.F10=121,t.F11=122,t.F12=123,t.BACKWARD=new n.Flags([t.LEFT_ARROW,t.UP_ARROW]),t.FORWARD=new n.Flags([t.RIGHT_ARROW,t.DOWN_ARROW]),t.HORZ_ARROW=new n.Flags([t.LEFT_ARROW,t.RIGHT_ARROW]),t}();e.Keyboard=i}),define("vsef/utils/DisplayUtils",["require","exports","jquery","../Types"],function(t,e,n,i){"use strict";function o(t){return l[t].toLowerCase()}function r(t){return c[t].toLowerCase()}Object.defineProperty(e,"__esModule",{value:!0});var s;!function(t){t[t.Normal=0]="Normal",t[t.Inner=1]="Inner",t[t.Outer=2]="Outer",t[t.OuterMargin=3]="OuterMargin"}(s=e.RectExtentType||(e.RectExtentType={}));var a;!function(t){t[t.Contain=0]="Contain"}(a=e.DisplayFitSize||(e.DisplayFitSize={}));var l;!function(t){t[t.Top=0]="Top",t[t.Center=1]="Center",t[t.Bottom=2]="Bottom"}(l=e.DisplayVertPos||(e.DisplayVertPos={})),e.DisplayVertPosToCssString=o;var c;!function(t){t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right"}(c=e.DisplayHorzPos||(e.DisplayHorzPos={})),e.DisplayHorzPosToCssString=r;var u=function(){function t(t,e,n,i){"number"==typeof t?(this.left=t,this.top=e,this.width=n,this.height=i):this.getFromElement(t,e)}return Object.defineProperty(t.prototype,"centerY",{get:function(){return this.top+this.height/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerX",{get:function(){return this.left+this.width/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.top+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.left+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return{left:this.left,top:this.top}},enumerable:!0,configurable:!0}),t.prototype.getFromElement=function(t,e){var n=t.offset();this.left=n.left,this.top=n.top,e=void 0===e?s.Normal:e,e===s.Normal?(this.width=t.width(),this.height=t.height()):e===s.Inner?(this.width=t.innerWidth(),this.height=t.innerHeight()):(this.width=t.outerWidth(e===s.OuterMargin),this.height=t.outerHeight(e===s.OuterMargin))},t.prototype.applyToElement=function(t){t.css("left",this.left+"px"),t.css("top",this.top+"px"),t.width(this.width),t.height(this.height)},t.prototype.scale=function(e,n,i,o){void 0===n&&(n=a.Contain),void 0===i&&(i=l.Center),void 0===o&&(o=c.Center);var r=this.width/e.width,s=this.height/e.height,u=r>s?s:r,h=new t(0,0,e.width*u,e.height*u),d=0;d=i===l.Bottom?this.bottom-h.height:(this.height-h.height)/2,h.top=d;var p=0;return p=o===c.Right?this.right-h.width:(this.width-h.width)/2,h.left=p,h},t.prototype.toString=function(){return"Rectangle:"+this.left+","+this.top+","+this.width+","+this.height},t}();e.Rectangle=u;var h=function(){function t(t,e){if("number"==typeof t)this.left=t,this.top=e;else{var n=t.offset();this.left=n.left,this.top=n.top}}return Object.defineProperty(t.prototype,"offset",{get:function(){return{left:this.left,top:this.top}},enumerable:!0,configurable:!0}),t.prototype.add=function(t){return this.left+=t.left,this.top+=t.top,this},t}();e.Point=h;var d=function(){function t(){}return t.scrollIntoView=function(e){function i(t){return t?t.scrollTop():(t=n("html, body"),n(document).scrollTop())}var o=e.$to,r=e.$associated,s=e.$focusCtl,a=e.maxDuration,l=e.$container,c=e.pxPerMs,u=e.margin,h=e.animate,d=e.offset,p=l;l||(l=n("html, body"));var f=i(p);u=void 0===u?10:u;var g=o.offset().top,m=0;if(r&&r.offset().top+r.height()>f+n(window).height()&&(m=r.offset().top+r.height()-n(window).height()+u),g=Math.max(g-u,0),d=void 0===d?0:d,f<=g&&!m){var v=n(window).height();return void(s&&(s.focus(),e.forceFocus&&t.forceFocus(s),l.scrollTop(g-v/2)))}if(s){var y=f-g;s.focus(),e.forceFocus&&t.forceFocus(s),d&&(f=o.offset().top+Math.min(y,d)),l.scrollTop(f),f=i(p),f=Math.max(f,o.offset().top)}m&&g>m&&(g=m);var b=f-g;c=c||2;var _=Math.abs(b)*c;_=Math.min(_,void 0===a?500:a),h=void 0===h||h,h?l.animate({scrollTop:g},_):l.scrollTop(g)},t.getCssWidth=function(e){var n=e.parent();if(n){n.hide();var i=e.css("width");return n.show(),"0px"===i&&(i=e.width().toString()),t.cssToDimension(i)}return null},t.cssToDimension=function(t){return t.match(/^\d+%$/)?{unit:i.DimensionUnit.percentage,value:parseInt(t.replace("%",""),10)}:{unit:i.DimensionUnit.pixels,value:parseInt(t.replace("px",""),10)}},t.forceFocus=function(t){if(!t.is(":focus")){t.attr("tabindex")||(t.attr("tabindex","-1"),t.focus(),t.blur(function(){t.removeAttr("tabindex"),t.off("blur")}))}},t}();e.DisplayUtils=d});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/commonUI/view/CommonUIPageNavView",["require","exports","jquery","lodash","../../View","../../utils/Keyboard","../../utils/DisplayUtils","../../utils/MiscUtils","../../utils/Environment"],function(t,e,n,i,o,r,s,a,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(e,i,o){for(var r=t.call(this,e,i,"common-ui-page-nav-template",o)||this,s=0,a=r.model.pages;s<a.length;s++){var c=a[s];r.listenTo(c.onChange,r.renderBtnStatus)}if(r.listenTo(r.model.onPageIndexChange,r.pageIndexChange),r.listenTo(r.model.onPageSelectBarVisibleChange,r.pageSelectBarVisibleChange),n(window).resize(function(){r.handleResize()}),l.Environment.isBookshelf){new MutationObserver(function(t){r.handleResize()}).observe(n("html").get(0),{attributes:!0})}return r}return __extends(e,t),e.prototype.getEvents=function(){return o.View.extendEvents(t.prototype.getEvents.call(this),{"click .page-btn":this.pageBtnClick,"click .previous-page-btn":this.previousPageBtnClick,"click .next-page-btn":this.nextPageBtnClick,"click .page-dropdown-btn":this.pageDropDownBtnClick,"click .page-bar-btn":this.pageSelectBarBtnClick,keydown:this.keydown,keyup:this.keyup})},e.prototype.render=function(){var e=this;return t.prototype.render.call(this),this.$(".ellipsis-left-btn, .ellipsis-right-btn").prop("disabled",!0),this.renderBtnLayout(),i.defer(function(){e.renderBtnLayout()}),this},e.prototype.renderBtnStatus=function(t){var e=this.model.pages.indexOf(t),n=this.getButton(e);n.removeClass("correct incorrect"),!0===t.correct?n.addClass("correct"):!1===t.correct&&n.addClass("incorrect"),t.complete&&n.addClass("complete")},e.prototype.renderBtnLayout=function(){var t=this.$(".ellipsis-left-btn, .ellipsis-right-btn"),e=this.$(".previous-page-btn, .next-page-btn"),n=this.$(".main-nav .page-btn");t.hide(),n.show();var i=this.model.pageIndex,o=this.$el.width(),r=e.eq(0).outerWidth(!0)+e.eq(1).outerWidth(!0),s=t.eq(1).outerWidth(!0);if(o<n.outerWidth(!0)*n.length+r){var l=n.outerWidth(!0),c=Math.floor((o-s-r)/l);if(i<c-1)t.eq(1).show(),t.eq(1).insertBefore(n.eq(c-1)),n.slice(c-1,-1).hide();else if(i>n.length-c)t.eq(0).show(),t.eq(0).insertAfter(n.eq(0)),n.slice(1,n.length-(c-1)).hide();else{var u=c-3;t.show(),t.eq(0).insertAfter(n.first()),t.eq(1).insertBefore(n.last());var h=Math.ceil(u/2),d=u-h;n.slice(1,i+1-h).hide(),n.slice(i+1+d,n.length-1).hide()}}this.$el.removeClass("compact extra-compact super-compact");var p=this.$el.width();p<=a.MiscUtils.remScaledPx(198)&&this.$el.addClass("extra-compact"),p<=a.MiscUtils.remScaledPx(400)&&this.$el.addClass("compact"),r+this.$(".page-dropdown-btn").outerWidth()+5>this.$el.width()&&this.$el.addClass("super-compact"),this.scrollBarButtonIntoView(this.model.pageIndex)},e.prototype.renderBtnState=function(){this.$(".previous-page-btn").prop("disabled",this.model.atStartPage),this.$(".next-page-btn").prop("disabled",this.model.atEndPage),this.$(".previous-page-btn").toggleClass("enabled",!this.model.atStartPage),this.$(".next-page-btn").toggleClass("enabled",!this.model.atEndPage);var t=this.$(".page-btn, .page-bar-btn"),e=this.getButton(this.model.pageIndex);t.removeClass("selected").attr({tabindex:"-1","aria-selected":"false"}),e.addClass("selected").attr({tabindex:"0","aria-selected":"true"})},e.prototype.keydown=function(t){var e=this.model.pageIndex,n=this.model.isRTL;r.Keyboard.isBackward(t.keyCode,n)?this.model.requestPreviousPage():r.Keyboard.isForward(t.keyCode,n)?this.model.requestNextPage():t.keyCode===r.Keyboard.HOME?this.model.requestFirstPage():t.keyCode===r.Keyboard.END&&this.model.requestLastPage(),e!==this.model.pageIndex&&(this.scrollBarButtonIntoView(this.model.pageIndex),this.focusButton(this.model.pageIndex),t.stopPropagation(),t.preventDefault())},e.prototype.keyup=function(t){t.keyCode!==r.Keyboard.LEFT_ARROW&&t.keyCode!==r.Keyboard.RIGHT_ARROW||t.stopPropagation()},e.prototype.pageBtnClick=function(t){var e=this.$(".page-btn").index(t.currentTarget);this.changePage(e)},e.prototype.previousPageBtnClick=function(t){this.model.requestPreviousPage()},e.prototype.nextPageBtnClick=function(t){this.model.requestNextPage()},e.prototype.pageDropDownBtnClick=function(t){this.model.pageSelectBarVisible=!this.model.pageSelectBarVisible},e.prototype.pageSelectBarBtnClick=function(t){var e=this.$(".page-bar-btn").index(t.currentTarget);this.changePage(e)},e.prototype.pageIndexChange=function(){this.renderBtnState(),this.renderBtnLayout();var t=this.templates.get("common-ui-text-page-display"),e=t({index:this.model.pageIndex+1,total:this.model.pages.length});this.$(".page-dropdown-text").html(e),this.scrollBarButtonIntoView(this.model.pageIndex)},e.prototype.pageSelectBarVisibleChange=function(){var t=this.$(".page-select-bar");this.model.pageSelectBarVisible?(t.slideDown("fast"),this.scrollBarButtonIntoView(this.model.pageIndex),this.focusButton(this.model.pageIndex)):t.slideUp("fast"),this.$(".page-dropdown-btn").attr("aria-expanded",this.model.pageSelectBarVisible?"true":"false")},e.prototype.handleResize=function(){this.renderBtnLayout()},e.prototype.changePage=function(t){this.model.requestedPageIndex=t},e.prototype.getButton=function(t){return this.$(".page-btn").eq(t).add(this.$(".page-bar-btn").eq(t))},e.prototype.focusButton=function(t){var e=this.getButton(t);e.eq(0).focus(),e.eq(0).is(n(":focus"))||e.eq(1).focus()},e.prototype.scrollBarButtonIntoView=function(t){if(void 0!==t){var e=n(".page-select-bar"),i=new s.Rectangle(e),o=new s.Rectangle(this.$(".page-bar-btn").eq(t));o.left<i.left?e.scrollLeft(e.scrollLeft()+o.left-i.left):o.right>i.right&&e.scrollLeft(e.scrollLeft()+o.right-i.width-i.left)}},e}(o.View);e.CommonUIPageNavView=c});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/commonUI/CommonUI",["require","exports","../AssetLoader","../Log","../EventListener"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.CanResetWithoutSubmit=0]="CanResetWithoutSubmit"}(e.CommonUIAttribute||(e.CommonUIAttribute={}));var r=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.create=function(t,o,r){var s=this;return this.$hostEl=r,this.id=o,new Promise(function(o,r){n.AssetLoader.load([{url:t.rootTemplatePath+"common-ui.html",id:e.ID_TEMPLATE}]).then(function(t){s.build(t),o(s)}).catch(function(t){throw i.log("create CommonUI failed with:"),i.error(t),t})})},e.prototype.build=function(t){this.$el=this.$hostEl},e.ID_TEMPLATE="commonUITemplate",e}(o.EventListener);e.CommonUIBase=r;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(r);e.CommonUI=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/commonUI/view/CommonUIPagedView",["require","exports","jquery","../../View","./CommonUIActivityView","./CommonUIPageNavView","../CommonUI"],function(t,e,n,i,o,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e,n,i,o){var r=t.call(this,e,n,i,o)||this;return r.listenTo([r.model.onPagesChange],r.renderPageNav),r.listenTo([r.model.onCompleteChange,r.model.onSubmittedChange,r.model.onShowFeedbackChange,r.model.onRevealAnswerChange],r.redrawButtons),r}return __extends(e,t),e.prototype.getEvents=function(){return i.View.extendEvents(t.prototype.getEvents.call(this),{"click button[data-function='checkPageAnswer']":this.checkPageAnswerBtnClick,"click button[data-function='revealPageAnswer']":this.revealPageAnswerBtnClick,"click button[data-function='resetPageAnswer']":this.resetPageAnswerBtnClick,"click button[data-function='nextPage']":this.nextPageBtnClick,"click button[data-subfunction='submit']":this.submitResult,"click button[data-function='showHidePageFeedback']":this.showHidePageFeedbackBtnClick})},e.prototype.render=function(){return t.prototype.render.call(this),this.$el.addClass("paged"),
this.redrawButtons(),this},Object.defineProperty(e.prototype,"curPageControl",{get:function(){var t=this.$(".page-btn.selected:visible");return t.length||this.$(".page-btn:visible").eq(0),t.height()>0?t.get(0):this.$(".page-dropdown-btn").get(0)},enumerable:!0,configurable:!0}),e.prototype.redrawButtons=function(){var t=!0===this.model.submitted,e=!0===this.model.complete,n=!0===this.model.revealAnswer,i=this.model.attributes.has(s.CommonUIAttribute.CanResetWithoutSubmit);this.$('button[data-function="checkPageAnswer"]').prop("disabled",!e||t),this.$('button[data-function="revealPageAnswer"]').prop("disabled",n),this.$('button[data-function="resetPageAnswer"]').prop("disabled",!t&&!i),this.updateLastButton()},e.prototype.renderPageNav=function(){var t=this.$(".page-nav");(t.find(".page-btn").length!==this.model.pages.length||!this.pageNavView&&this.model.pages.length>0)&&(this.pageNavView=new r.CommonUIPageNavView(this.model,this.templates,t),this.pageNavView.render())},e.prototype.checkPageAnswerBtnClick=function(t){this.model.onCheckPageAnswers.trigger()},e.prototype.revealPageAnswerBtnClick=function(t){this.model.onRevealPageAnswers.trigger()},e.prototype.resetPageAnswerBtnClick=function(){this.model.onResetPageAnswers.trigger()},e.prototype.nextPageBtnClick=function(){this.model.onNextPage.trigger()},e.prototype.submitResult=function(){this.model.onSubmitPageAnswers.trigger()},e.prototype.showHidePageFeedbackBtnClick=function(t){"showFeedback"===n(t.currentTarget).data("subfunction")?this.model.onShowPageFeedback.trigger():this.model.onHidePageFeedback.trigger()},e}(o.CommonUIActivityView);e.CommonUIPagedView=a});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/commonUI/CommonUIActivityBase",["require","exports","./CommonUI","../EventDispatcher","../Templates"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=t.call(this)||this;return e.onPrint=new i.EventDispatcher(e),e}return __extends(e,t),Object.defineProperty(e.prototype,"instructions",{get:function(){return this.model.instructions},set:function(t){this.model.instructions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instructionsMobile",{get:function(){return this.model.instructionsMobile},set:function(t){this.model.instructionsMobile=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasCustomTitle",{get:function(){return this.model.hasCustomTitle},set:function(t){this.model.hasCustomTitle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.model.title},set:function(t){this.model.title=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"complete",{get:function(){return this.model.complete},set:function(t){this.model.complete=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"submitted",{get:function(){return this.model.submitted},set:function(t){this.model.submitted=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"revealAnswer",{get:function(){return this.model.revealAnswer},set:function(t){this.model.revealAnswer=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showFeedback",{get:function(){return this.model.showFeedback},set:function(t){this.model.showFeedback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalFeedback",{get:function(){return this.model.globalFeedback},set:function(t){this.model.globalFeedback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isActivityCollapsed",{get:function(){return this.model.isActivityCollapsed},set:function(t){this.model.isActivityCollapsed=t},enumerable:!0,configurable:!0}),e.prototype.focusGlobalFeedback=function(){this.view.focusGlobalFeedback()},e.prototype.reset=function(){this.model.submitted=!1,this.model.revealAnswer=!1},Object.defineProperty(e.prototype,"globalFeedbackTitle",{get:function(){return this.model.globalFeedbackTitle},set:function(t){this.model.globalFeedbackTitle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){return this.model.attributes},enumerable:!0,configurable:!0}),e.prototype.build=function(e){t.prototype.build.call(this,e);var i=new o.Templates(e.get(n.CommonUIBase.ID_TEMPLATE));this.createUI(i),this.view.render(),this.listenTo(this.model.onPrint,this.print)},e.prototype.print=function(){this.onPrint.trigger()},e}(n.CommonUIBase);e.CommonUIActivityBase=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/commonUI/CommonUIActivity",["require","exports","./model/CommonUIActivityModel","./view/CommonUIActivityView","./CommonUIActivityBase"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createUI=function(t){this.model=new n.CommonUIActivityModel(this.id),this.view=new i.CommonUIActivityView(this.model,t,"",this.$el)},e.prototype.build=function(e){t.prototype.build.call(this,e),this.$el=this.view.$activityEl},e}(o.CommonUIActivityBase);e.CommonUIActivity=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/commonUI/CommonUIPaged",["require","exports","../EventDispatcher","./model/CommonUIPagedModel","./view/CommonUIPagedView","./CommonUIActivity"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e){var i=t.call(this)||this;return i.onPageChangeRequest=new n.EventDispatcher(i),i.onCheckPageAnswers=new n.EventDispatcher(i),i.onRevealPageAnswers=new n.EventDispatcher(i),i.onHidePageAnswers=new n.EventDispatcher(i),i.onResetPageAnswers=new n.EventDispatcher(i),i.onSubmitPageAnswers=new n.EventDispatcher(i),i.onPrint=new n.EventDispatcher(i),i.onNextPage=new n.EventDispatcher(i),i.onShowPageFeedback=new n.EventDispatcher(i),i.onHidePageFeedback=new n.EventDispatcher(i),i.isRTL=e,i}return __extends(e,t),Object.defineProperty(e.prototype,"pages",{get:function(){return this.model.pages},set:function(t){this.model.pages=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"complete",{get:function(){return this.model.complete},set:function(t){this.model.complete=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"submitted",{get:function(){return this.model.submitted},set:function(t){this.model.submitted=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageIndex",{get:function(){return this.model.pageIndex},set:function(t){var e=this;this.model.silently(function(){e.model.requestedPageIndex=t}),this.model.pageIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curPageControl",{get:function(){return this.view.curPageControl},enumerable:!0,configurable:!0}),e.prototype.createUI=function(t){this.model=new i.CommonUIPagedModel(this.id),this.model.isRTL=this.isRTL,this.view=new o.CommonUIPagedView(this.model,t,"common-ui-vcs-paged-btn-template",this.$hostEl)},e.prototype.build=function(e){t.prototype.build.call(this,e),this.listenTo(this.model.onRequestedPageIndexChange,this.pageRequested),this.listenTo(this.model.onCheckPageAnswers,this.checkPageAnswers),this.listenTo(this.model.onRevealPageAnswers,this.revealPageAnswers),this.listenTo(this.model.onResetPageAnswers,this.resetPageAnswers),this.listenTo(this.model.onNextPage,this.nextPage),this.listenTo(this.model.onSubmitPageAnswers,this.submitAnswers),this.listenTo(this.model.onShowPageFeedback,this.showPageFeedback),this.listenTo(this.model.onHidePageFeedback,this.hidePageFeedback)},e.prototype.checkPageAnswers=function(){this.onCheckPageAnswers.trigger()},e.prototype.revealPageAnswers=function(){this.onRevealPageAnswers.trigger()},e.prototype.resetPageAnswers=function(){this.onResetPageAnswers.trigger()},e.prototype.nextPage=function(){this.onNextPage.trigger()},e.prototype.pageRequested=function(){this.onPageChangeRequest.trigger(this.model.requestedPageIndex)},e.prototype.submitAnswers=function(){this.onSubmitPageAnswers.trigger()},e.prototype.showPageFeedback=function(){this.onShowPageFeedback.trigger()},e.prototype.hidePageFeedback=function(){this.onHidePageFeedback.trigger()},e}(r.CommonUIActivity);e.CommonUIPaged=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("vsef/commonUI/model/CommonUIStackedModel",["require","exports","../../EventDispatcher","./CommonUIActivityModel","../../Observable"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var i=t.call(this,e)||this;return i.isSingleQuestion=!1,i.onCheckAllAnswers=new n.EventDispatcher(i),i.onRevealAllAnswers=new n.EventDispatcher(i),i.onReviewAnswers=new n.EventDispatcher(i),i.onShowAllFeedback=new n.EventDispatcher(i),i.onHideAllFeedback=new n.EventDispatcher(i),i}return __extends(e,t),__decorate([o.observable],e.prototype,"isSingleQuestion",void 0),e}(i.CommonUIActivityModel);e.CommonUIStackedModel=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/commonUI/view/CommonUIStackedView",["require","exports","../../View","./CommonUIActivityView","jquery"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,i,o){var r=t.call(this,e,n,i,o)||this;return r.listenTo(r.model.onIsSingleQuestionChange,r.renderSingleQuestion),r.listenTo([r.model.onCompleteChange,r.model.onSubmittedChange,r.model.onRevealAnswerChange],r.redrawButtons),r}return __extends(e,t),e.prototype.getEvents=function(){return n.View.extendEvents(t.prototype.getEvents.call(this),{"click button[data-function='checkAllAnswers']":this.checkAllAnswersBtnClick,"click button[data-function='resetAllAnswers']":this.resetAllAnswersBtnClick,"click button[data-function='revealAllAnswers']":this.revealAllAnswersBtnClick,"click .global-feedback-holder button":this.reviewAnswersBtnClick,"click button[data-function='showHideAllFeedback']":this.showHideAllFeedbackBtnClick})},e.prototype.render=function(){return t.prototype.render.call(this),this.$el.addClass("stacked"),this.redrawButtons(),this},e.prototype.redrawButtons=function(){var t=!0===this.model.complete;this.$('button[data-function="checkAllAnswers"]').prop("disabled",!t);var e=!0===this.model.revealAnswer;this.$('button[data-function="revealAllAnswers"]').prop("disabled",e),this.updateLastButton()},e.prototype.renderSingleQuestion=function(){this.$(".control-btns").empty().append(this.templates.get("common-ui-vcs-stacked-single-question-btn-template")({})),this.redrawButtons()},e.prototype.checkAllAnswersBtnClick=function(t){this.model.onCheckAllAnswers.trigger()},e.prototype.resetAllAnswersBtnClick=function(t){this.model.onResetAnswers.trigger()},e.prototype.revealAllAnswersBtnClick=function(t){this.model.onRevealAllAnswers.trigger()},e.prototype.reviewAnswersBtnClick=function(t){this.model.onReviewAnswers.trigger()},e.prototype.showHideAllFeedbackBtnClick=function(t){"showFeedback"===o(t.currentTarget).data("subfunction")?this.model.onShowAllFeedback.trigger():this.model.onHideAllFeedback.trigger()},e}(i.CommonUIActivityView);e.CommonUIStackedView=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/commonUI/CommonUIStacked",["require","exports","../EventDispatcher","./CommonUIActivity","./model/CommonUIStackedModel","./view/CommonUIStackedView"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){var e=t.call(this)||this;return e.onCheckAllAnswers=new n.EventDispatcher(e),e.onResetAllAnswers=new n.EventDispatcher(e),e.onRevealAllAnswers=new n.EventDispatcher(e),e.onReviewAnswers=new n.EventDispatcher(e),e.onShowAllFeedback=new n.EventDispatcher(e),e.onHideAllFeedback=new n.EventDispatcher(e),e}return __extends(e,t),Object.defineProperty(e.prototype,"isSingleQuestion",{get:function(){return this.model.isSingleQuestion},set:function(t){this.model.isSingleQuestion=t},enumerable:!0,configurable:!0}),e.prototype.createUI=function(t){this.model=new o.CommonUIStackedModel(this.id),this.view=new r.CommonUIStackedView(this.model,t,"common-ui-vcs-stacked-btn-template",this.$hostEl)},e.prototype.build=function(e){t.prototype.build.call(this,e),this.listenTo(this.model.onCheckAllAnswers,this.checkAllAnswers),this.listenTo(this.model.onResetAnswers,this.resetAllAnswers),this.listenTo(this.model.onRevealAllAnswers,this.revealAllAnswers),this.listenTo(this.model.onReviewAnswers,this.reviewAnswers),this.listenTo(this.model.onShowAllFeedback,this.showAllFeedback),this.listenTo(this.model.onHideAllFeedback,this.hideAllFeedback)},e.prototype.checkAllAnswers=function(){this.onCheckAllAnswers.trigger()},e.prototype.resetAllAnswers=function(){this.onResetAllAnswers.trigger()},e.prototype.revealAllAnswers=function(){this.onRevealAllAnswers.trigger()},e.prototype.reviewAnswers=function(){this.onReviewAnswers.trigger()},e.prototype.showAllFeedback=function(){this.onShowAllFeedback.trigger()},e.prototype.hideAllFeedback=function(){this.onHideAllFeedback.trigger()},e}(i.CommonUIActivity);e.CommonUIStacked=s}),define("vsef/utils/HtmlUtils",["require","exports","jquery"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.eachEmptyElem=function(t,e,i){t.find(e).each(function(t,e){var o=n(e);" "!==o.text()&&""!==o.text()||0!==o.children().length||i(o)})},t}();e.HtmlUtils=i}),define("vsef/Config",["require","exports","jquery","lodash","./utils/PathUtils"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){void 0===e&&(e=null),t&&this.load(t,e)}return t.prototype.load=function(t,e){void 0===e&&(e=null),this.data={},this.srcData={};for(var r=0,s=t;r<s.length;r++){var a=s[r];if(a){var l="object"==typeof a?JSON.stringify(a):a;this.srcData=n.extend(!0,this.srcData,JSON.parse(l)),e&&(l=i.template(l,e)()),n.extend(!0,this.data,JSON.parse(l))}}var c=o.PathUtils.getQueryStrings();for(var u in c)if(c.hasOwnProperty(u)){var h=u;1===h.split(".").length&&(h="settings."+u),o.PathUtils.createNS(this.data,h,c[u])}return this},t.prototype.getBaseData=function(){return i.cloneDeep(this.srcData)},t.prototype.getBaseDataString=function(){return JSON.stringify(this.srcData)},t.prototype.get=function(t,e){return o.PathUtils.resolveNS(this.data,t,e)},t.prototype.getNumber=function(t,e){void 0===e&&(e=NaN);var n=o.PathUtils.resolveNS(this.data,t,e);return void 0===n?e:parseFloat(n)},t}();e.Config=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("vsef/EngineConfig",["require","exports","jquery","lodash","./Config","./Theme","./utils/PathUtils"],function(t,e,n,i,o,r,s){"use strict";function a(t,e){var n=t.visualOptions||(t.visualOptions=[]);-1===n.indexOf(e)&&n.push(e)}Object.defineProperty(e,"__esModule",{value:!0});var l=(function(){function t(){}}(),function(){function t(t){this.noTableBorders=!1,this.noImageZoomBtns=!1,this.stripMCAnswerPs=!0,this.defaults=i.cloneDeep(this),i.extend(this,t)}return Object.defineProperty(t.prototype,"cssClassList",{get:function(){var t="";for(var e in this)this.hasOwnProperty(e)&&-1!==this.visualOptions.indexOf(e)&&"boolean"==typeof this[e]&&this[e]!==this.defaults[e]&&(t+="opt-"+i.kebabCase(e)+" ");return t.trim()},enumerable:!0,configurable:!0}),__decorate([a],t.prototype,"noTableBorders",void 0),__decorate([a],t.prototype,"noImageZoomBtns",void 0),t}());e.EngineOptions=l;var c=function(){function t(){}return t}();e.EngineArchitectureSettings=c;var u=function(){function t(t){i.extend(this,t);for(var e in this.engines)if(this.engines.hasOwnProperty(e)){var o={};n.extend(o,this.engines.base,this.engines[e]),this.engines[e]=o}}return t.prototype.isCoreBlock=function(t){return this.engines[t.toUpperCase()].isCore},Object.defineProperty(t.prototype,"interactiveEnginesList",{get:function(){var t=[];for(var e in this.engines)"base"!==e&&"STATIC"!==e&&this.engines.hasOwnProperty(e)&&t.push(e);return t},enumerable:!0,configurable:!0}),t}(),h=(function(){function t(){}}(),function(){function t(t){n.extend(!0,this,t)}return t.prototype.composeTheme=function(t,e){var n="vcs:base+vcs:cloud+vcs:ocean+vcs:sourcecodepro+vcs:roboto";return e=e&&e.trim().length?n+"+"+e:n,new r.Theme("vcs",e,this.findThemeData.bind(this))},t.prototype.findThemeData=function(t,e){for(var i in this.skins)if(this.skins.hasOwnProperty(i)&&i===t){var o=this.skins[i];for(var r in o.flavors)if(o.flavors.hasOwnProperty(r)&&r===e)return n.extend(!0,{},o.flavors[r])}throw"Missing theme requested skin "+t+" flavour "+e},t}()),d=function(t){function e(e,n){void 0===n&&(n=null);var i=t.call(this,e,n)||this;i.lang=i.get("settings.lang"),i.dir=i.get("settings.dir")||void 0,i.gui={name:i.get("settings.gui.name"),variant:i.get("settings.gui.variant")},i.isDebug=!0===i.get("settings.debug.isDebug",!1),i.debugLevel=i.get("settings.debug.debugLevel",3),i.showConsole=i.get("settings.debug.showConsole","none"),i.architecture=new u(i.get("architecture")),i.libraries={math:{type:i.get("libraries.math.type"),lib:i.get("libraries.math.lib"),scale:i.getNumber("libraries.math.scale",100)}},i.options=new l(i.get("options")),i.themes=new h(i.get("themes")),i.backends={localStorage:i.get("settings.backends.localStorage"),EPUBEducationOutcomesAPI:i.get("settings.backends.EPUBEducationOutcomesAPI"),EPUBEducationOutcomesAPISimulator:i.get("settings.backends.EPUBEducationOutcomesAPISimulator"),VCSEditorOutcomesAPISimulator:i.get("settings.backends.VCSEditorOutcomesAPISimulator"),VSTBookAPI:i.get("settings.backends.VSTBookAPI")},i.stateSettings={stateSaveDelay:i.get("settings.state.stateSaveDelay",250)},i.debugSettings={debugModal:{enabled:i.get("settings.debug.debugModal.enabled",!1),trigger:{keyboard:i.get("settings.debug.debugModal.trigger.keyboard",!1),click:i.get("settings.debug.debugModal.trigger.click",!1),touch:i.get("settings.debug.debugModal.trigger.touch",!1)},triggerZoneSizeY:i.get("settings.debug.debugModal.triggerZoneSizeY",200)}};var o=s.PathUtils.getQueryString("canPrint"),r=i.get("settings.engines.base.buttons.print",!0);return void 0!==o&&(r="true"===o),i.engineSettings={base:{buttons:{submit:i.get("settings.engines.base.buttons.submit",!1),print:r}}},i}return __extends(e,t),e.prototype.setLanguage=function(t){var e=s.PathUtils.getQueryString("lang")||this.lang;t.attr("lang",e),t.attr("xml:lang",e)},e.prototype.setDirection=function(t){s.PathUtils.getQueryString("dir")||this.dir;this.dir&&t.attr("dir",this.dir)},Object.defineProperty(e.prototype,"isRTL",{get:function(){return"rtl"===this.dir},enumerable:!0,configurable:!0}),e.prototype.getTheme=function(t,e){t||(t=this.gui.name),e||(e=this.themes.activeThemeStack);var n=s.PathUtils.getQueryString("themestack");return n&&n.length&&(e=n),this.themes.composeTheme(t,e)},e}(o.Config);e.EngineConfig=d}),define("vsef/utils/AppConstants",["require","exports","../Types"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.MOBILE_TRANSITION_1={unit:n.DimensionUnit.pixels,value:768},t.MOBILE_TRANSITION_2={unit:n.DimensionUnit.pixels,value:600},t.PROCESS_WAITER_TIMEOUT=10,t.STATE_WAITER_TIMEOUT=250,t}();e.default=i}),define("vsef/HorizontalScroll",["require","exports","jquery","./Types","./utils/DisplayUtils","./utils/AppConstants","./utils/Environment","./utils/Keyboard"],function(t,e,n,i,o,r,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t){t.parent().parent().hasClass("c-x-scroll")?(this.$componentEl=t.parent().parent(),this.$contentEl=this.$componentEl.find(".js-x-scroll").children().first()):(this.$contentEl=t,this.$contentEl.wrap("<div class='c-x-scroll vst-draggable'>\n\t\t\t\t\t<div class='js-x-scroll c-x-scroll__scrollbox'></div>\n\t\t\t\t\t<div class='c-x-scroll__gradient c-x-scroll__gradient--left'></div>\n\t\t\t\t\t<div class='c-x-scroll__gradient c-x-scroll__gradient--right'></div>\n\t\t\t\t</div>"),this.$componentEl=t.parent().parent()),this.$contentContainerEl=this.$componentEl.find(".js-x-scroll").first(),this.origContentWidth=o.DisplayUtils.getCssWidth(this.$contentEl);var e=this.$contentEl.attr("data-orig-width");if(e&&(this.origContentWidth=o.DisplayUtils.cssToDimension(e),this.$componentEl.css("width",e)),this.origContentWidth.unit===i.DimensionUnit.percentage&&(this.origContentWidth.value>100?this.$componentEl.css("width","100%"):(s.Environment.isPrerendering()&&this.$contentEl.attr("data-orig-width",this.origContentWidth.value+"%"),this.$contentEl.css("width","100%"))),"table"===this.$contentEl.get(0).nodeName){switch(this.$contentEl.attr("align")){case"left":this.$componentEl.addClass("c-table--align-left");break;case"center":this.$componentEl.addClass("c-table--align-center");break;case"right":this.$componentEl.addClass("c-table--align-right")}this.$contentEl.removeAttr("align")}}return t.createComponents=function(e){var i=["table.c-table"];e.find(i.join(", ")).each(function(t,e){var i=n(e);i.addClass("js-x-scroll-component"),["border","cellspacing","cellpadding"].forEach(function(t){i.removeAttr(t)})});var o=[];return e.find(".js-x-scroll-component").each(function(e,i){var r=n(i);o.push(new t(r))}),o},t.updateComponents=function(t){if(t)for(var e=0,n=t;e<n.length;e++){var i=n[e];i.update()}},t.prototype.init=function(){var t=this;this.onResize(),this.$contentContainerEl.scroll(function(){t.onScroll()}),this.$contentContainerEl.on("keyup",this.onContainerKeyup.bind(this)),n(window).resize(function(){t.resizeTimeout&&clearTimeout(t.resizeTimeout),t.resizeTimeout=window.setTimeout(function(){t.onResize()},50)})},t.prototype.update=function(){this.onResize(),this.onScroll(!0)},t.prototype.onContainerKeyup=function(t){t.keyCode!==a.Keyboard.LEFT_ARROW&&t.keyCode!==a.Keyboard.RIGHT_ARROW||(t.stopPropagation(),t.preventDefault())},t.prototype.onResize=function(){this.onWidthChange(),this.onScroll()},t.prototype.onScroll=function(t){void 0===t&&(t=!1);var e=Math.floor(this.$contentContainerEl.scrollLeft());0===e?this.$componentEl.find(".c-x-scroll__gradient--left").removeClass("is-visible"):this.$componentEl.find(".c-x-scroll__gradient--left").addClass("is-visible"),this.$contentContainerEl.width()&&e+Math.floor(this.$contentContainerEl.width())!==Math.floor(this.$contentEl.outerWidth())?this.$componentEl.find(".c-x-scroll__gradient--right").addClass("is-visible"):this.$componentEl.find(".c-x-scroll__gradient--right").removeClass("is-visible"),this.$componentEl.find(".c-x-scroll__gradient").toggleClass("no-transition",t)},t.prototype.onWidthChange=function(){var t=this.origContentWidth.unit===i.DimensionUnit.percentage?"%":"px",e=Math.floor(this.$componentEl.parent().width()),n=Math.floor(this.$componentEl.width());this.origContentWidth.unit===i.DimensionUnit.pixels?e>=n&&e>this.origContentWidth.value?this.$componentEl.width(this.origContentWidth.value+t):this.$componentEl.width(e):this.origContentWidth.unit===i.DimensionUnit.percentage&&(e>=r.default.MOBILE_TRANSITION_2.value?this.origContentWidth.value>100?this.$componentEl.width("100%"):this.$componentEl.width(this.origContentWidth.value+t):this.$componentEl.width(e)),this.$contentEl.width()<=n?this.$contentContainerEl.removeAttr("tabindex"):this.$contentContainerEl.attr("tabindex","0")},t}();e.default=l}),define("vsef/EngineComms",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.window=t}return t.prototype.requestActivityData=function(t){var e=this;return new Promise(function(n,i){e.requestSomething("vsefGetActivityData","vsefSetActivityData",t).then(function(t){n(t.activityData)})})},t.prototype.sendActivityData=function(t,e){var n=this;return new Promise(function(i,o){n.sendSomething("vsefGetActivityData",{type:"vsefSetActivityData",id:t,activityData:e}).then(function(t){i(t.activityData)})})},t.prototype.requestScreenData=function(t){return this.requestSomething("vsefGetScreenData","vsefSetScreenData",t).then(function(t){return t.data})},t.prototype.sendScreenData=function(t,e){return this.sendSomething("vsefGetScreenData",{id:t,type:"vsefSetScreenData",data:e}).then(function(){return Promise.resolve()})},t.prototype.requestEngineConfig=function(t){return this.requestSomething("vsefGetEngineConfig","vsefSetEngineConfig",t).then(function(t){return t.config})},t.prototype.sendEngineConfig=function(t,e){return this.sendSomething("vsefGetEngineConfig",{id:t,type:"vsefSetEngineConfig",config:e}).then(function(){return Promise.resolve()})},t.prototype.requestPrintContext=function(t){return this.requestSomething("vsefGetPrintContext","vsefSetPrintContent",t).then(function(t){return t.context})},t.prototype.sendPrintContext=function(t,e){return this.sendSomething("vsefGetPrintContext",{id:t,type:"vsefSetPrintContent",context:e}).then(function(){return Promise.resolve()})},t.prototype.requestEngineState=function(t){var e=this;return new Promise(function(n,i){e.requestSomething("vsefGetActivityState","vsefSetActivityState",t).then(function(t){n(t.state)})})},t.prototype.sendEngineState=function(t,e){var n=this;return new Promise(function(i,o){n.sendSomething("vsefGetActivityState",{type:"vsefSetActivityState",id:t,state:e}).then(function(t){i(t.state)})})},t.prototype.waitForEngineInit=function(t){var e=this;return new Promise(function(n,i){var o=function(i){var r=i.data;"vsefEngineInit"===r.type&&r.id===t&&(e.window.removeEventListener("message",o),n(r.status))};e.window.addEventListener("message",o)})},t.prototype.sendEngineInit=function(t,e){void 0===e&&(e=!0),this.window.postMessage({type:"vsefEngineInit",id:t,status:e},"*")},t.prototype.requestSomething=function(t,e,n){var i=this;return new Promise(function(o,r){var s=function(t){var r=t.data;r.type===e&&r.id===n&&(i.window.removeEventListener("message",s),o(r))};i.window.addEventListener("message",s),i.window.postMessage({type:t,id:n},"*")})},t.prototype.sendSomething=function(t,e){var n=this;return new Promise(function(i,o){var r=function(o){var s=o.data;s.type===t&&s.id===e.id&&(n.window.postMessage(e,"*"),n.window.removeEventListener("message",r),i(s))};n.window.addEventListener("message",r)})},t}();e.EngineComms=n}),define("vsef/Engine",["require","exports","jquery","lodash","./Log","./contexts/Context","./Types","./utils/PathUtils","./utils/HtmlUtils","./EngineConfig","./AssetLoader","./HorizontalScroll","./utils/Environment","./EngineComms"],function(t,e,n,i,o,r,s,a,l,c,u,h,d,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f=function(){function t(t){this.ID_CONFIG="config",this.ID_CONFIG_PRODUCT="configProduct",o.note("create vsef.Engine"),this.context=t,this.create()}return t.preprocessXML=function(t){t.find("math").each(function(t,e){var i,o=n(e),r=o.parent();"math"===r.attr("role")&&(i=r.attr("aria-label"),r.replaceWith(o));var s=o.find("semantics");s.length&&(o.prepend(s.children()),s.remove(),o.find("annotation").remove()),o.wrap('<span class="math-holder vst-draggable" aria-hidden="true" tabindex="0"/>'),i&&(o.attr("alttext",i),n('<span class="visuallyhidden">'+i+"</span>").insertAfter(o.parent()))}),t.find("a").each(function(t,e){var i=n(e).attr("href");if(i&&(a.PathUtils.isAbsolutePath(i)||"www"===i.trim().substr(0,3).toLowerCase())){"www"===i.trim().substr(0,3).toLowerCase()&&n(e).attr("href","http://"+i);n(e).attr("target")||n(e).attr("target","_blank")}});var e=["h1","h2","h3","h4","h5","h6","p"];t.find(e.join(", ")).each(function(t,i){var o=n(i);-1!==e.indexOf(o.prop("tagName"))&&o.find(e.join(", ")).each(function(t,e){var i=n(e);i.replaceWith(i.html())})});var i=["p"];l.HtmlUtils.eachEmptyElem(t,i.join(", "),function(t){t.parents(".static").length&&t.remove()}),l.HtmlUtils.eachEmptyElem(t,"th",function(t){t.replaceWith("<td>"+t.html()+"</td>")}),function(e,n){t.find("."+e).addClass(n).removeClass(e).find("*").addClass(n)}("vcs-click","vst-click")},t.showBlockError=function(e,r,s,a){r=i.escape(r);var l,c=t.createErrorHTML(r,s);try{l=n(c),a&&l.find(".error-indicator-msg-supplemental").text(a),e.append(l)}catch(i){o.error(i),c=t.createErrorHTML("Error message could not be parsed.",s),l=n(c),e.append(l)}finally{var u=!1;l.find(".error-indicator-more").click(function(){l.find(".error-indicator-msg").toggle(),u=!u,l.find(".error-indicator-more").text(u?"less":"more")})}},t.createErrorHTML=function(t,e){return'\n\t\t\t<div class="error-indicator '+(e===s.EngineType.EngineStatic?"screen__margin":"")+'">\n\t\t\t\t<span aria-hidden="true" class="error-indicator-icon"/>This block contains an error<button class="error-indicator-more">more…</button>\n\t\t\t\t<div class="error-indicator-msg">'+t+'\n\t\t\t\t\t<div class="error-indicator-msg-supplemental"></div>\n\t\t\t\t</div>\n\t\t\t</div>'},Object.defineProperty(t,"isEpub",{get:function(){return window.context&&"epub"===window.context.type},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){},t.prototype.extractContextInfo=function(){this.paths=this.context.paths,this.$el=this.context.$el,this.$el.addClass("engine"),this.context.isPrerendering||(this.$el.addClass(r.ContextType[this.context.type].toLowerCase()),
this.context.attributes.has(r.ContextAttribute.StandAlone)&&this.$el.addClass("standalone"))},Object.defineProperty(t.prototype,"configFilesList",{get:function(){var t=[{url:this.paths.rootDataPath+"config.json",id:this.ID_CONFIG}],e=this.context.subproj;return e&&t.push({url:this.paths.dataPath+"config_"+e.toLowerCase()+".json",id:this.ID_CONFIG_PRODUCT}),t},enumerable:!0,configurable:!0}),t.prototype.buildConfig=function(){var t=this;return this.context.configData?Promise.resolve(new c.EngineConfig([this.context.configData])):d.Environment.isPrintBlockFrame()?new Promise(function(t,e){new p.EngineComms(window).requestEngineConfig(a.PathUtils.getQueryString("id")).then(function(e){t(new c.EngineConfig([e]))})}):new Promise(function(e,n){u.AssetLoader.load(t.configFilesList).then(function(n){e(new c.EngineConfig([n.get(t.ID_CONFIG),n.get(t.ID_CONFIG_PRODUCT)]))}).catch(function(t){o.log("buildConfig failed with:"),o.error(t)})})},t.prototype.enableScrollComponents=function(){var t=h.default.createComponents(this.$el);this.context.isPrerendering||t.forEach(function(t){t.init()})},t}();e.Engine=f});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/Content",["require","exports","./EventListener"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.destroy=function(){},e}(n.EventListener);e.Content=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/Interactive",["require","exports","./Log","./AssetLoader","./Templates","./Content","./contexts/Context","./Engine","./Types","./utils/Environment"],function(t,e,n,i,o,r,s,a,l,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function e(){var e=t.call(this)||this;return e.ID_ACTIVITY_TEMPLATE="ActivityTemplate",e.ID_ACTIVITY_SHARED_TEMPLATE="ActivitySharedTemplate",e.ID_ACTIVITY_SUBPROJ_TEMPLATE="ActivitySubprojTemplate",n.note("created "+e.contentType),e}return __extends(e,t),e.prototype.create=function(t){var e=this;return this.config=t.config,this.context=t.context,i.AssetLoader.load(this.makeAssetList(this.context.paths)).then(function(n){return e.build(t,n)}).catch(function(i){return n.log("load"+e.context.engineClass+"assets failed with:"),a.Engine.showBlockError(t.$el,i.message,l.EngineType.EngineActivity),e.commonUI.$hostEl.addClass("error no-instructions"),e.context.blockAPI.onEngineInitialized.trigger(),e.context.attributes.has(s.ContextAttribute.StandAlone)&&e.context.rootUI.hideLoadingOverlay(),Promise.reject(i)})},e.prototype.destroy=function(){this.view.clear(),this.stopListening()},Object.defineProperty(e.prototype,"contentType",{get:function(){return"Interactive"},enumerable:!0,configurable:!0}),e.prototype.makeAssetList=function(t){var e=this.config.architecture.engines[this.context.engineClass],n=e.isCore,i=[];return i=i.concat([{url:(n?t.rootTemplatePath:t.templatePath)+this.context.engineClassLower+".html",id:this.ID_ACTIVITY_TEMPLATE},{url:t.rootTemplatePath+"engine-shared.html",id:this.ID_ACTIVITY_SHARED_TEMPLATE}]),this.context.subproj&&n&&e.hasTemplateOverride&&i.push({url:t.templatePath+this.context.engineClassLower+".html",id:this.ID_ACTIVITY_SUBPROJ_TEMPLATE}),i},e.prototype.build=function(t,e){n.note("build "+this.contentType+" "+this.context.engineID),this.activityData=t.activityData,this.commonUI=t.commonUI;var i=c.Environment.isPrintFrame(),r=[e.get([this.ID_ACTIVITY_TEMPLATE,this.ID_ACTIVITY_SHARED_TEMPLATE])],u=e.get([this.ID_ACTIVITY_SUBPROJ_TEMPLATE]);u&&(r=[u].concat(r));var h=i?o.TemplateMediaType.Print:o.TemplateMediaType.Screen,d=new o.Templates(r,"en",h,this.config.options);return this.templates=d,this.buildUI(d,t.$el),this.context.onBlockApiInitialized.trigger(),this.commonUI.$hostEl.addClass(this.context.engineClassLower),this.context.engineNativeClassLower&&this.commonUI.$hostEl.addClass(this.context.engineNativeClassLower),this.config.isRTL&&this.commonUI.$hostEl.addClass(l.RTL_STYLE),this.commonUI.$hostEl.addClass("dynamic"),this.commonUI.$hostEl.addClass(t.config.options.cssClassList),this.model.id=this.context.id,this.model.parse(t.activityData,t.context.paths),this.context.attributes.has(s.ContextAttribute.StandAlone)&&this.context.rootUI.setContentEl(this.commonUI.$hostEl),this.model.getIsEmpty()?this.renderAsEmpty(t.$el,d):this.view.render(),a.Engine.preprocessXML(t.$el),this.context.rootUI.preprocessContent(t.$el),this.context.attributes.has(s.ContextAttribute.StandAlone)&&this.context.rootUI.enableImageZooms(!0),this.model.initialized=!0,this.init(),this.afterBuild(),Promise.resolve(this)},e.prototype.init=function(){},e.prototype.defineCfiRegions=function(){},e.prototype.handleCFILink=function(){this.commonUI.$el.has(this.context.cfiMap.activeCFIRegion.element).length&&this.doCFILink()},e.prototype.doCFILink=function(){},e.prototype.afterBuild=function(){if(this.context.cfiMap){this.defineCfiRegions()&&(this.context.cfiMap.add(this.defineCfiRegions()),this.listenTo(this.context.cfiMap.onCFILink,this.handleCFILink))}this.context.blockAPI.onEngineInitialized.trigger(),this.context.attributes.has(s.ContextAttribute.StandAlone)&&this.context.rootUI.hideLoadingOverlay()},e.prototype.renderAsEmpty=function(t,e){t.empty();var n=e.get("utility-empty-"+(a.Engine.isEpub?"epub-":"")+"template")({blockType:this.context.engineNativeClassLower?this.context.engineNativeClassLower:this.context.engineClassLower,blockLabel:this.context.info.label});t.html(n),this.commonUI.$hostEl.addClass("empty")},e}(r.Content);e.Interactive=u}),define("vsef/utils/FontUtils",["require","exports","jquery","lodash"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.detect=function(t,e,n){var o=this;return i.isArray(e)&&e.length?new Promise(function(r,s){var a=window.document.fonts,l=a&&a.ready?a.ready:null;if(l)return o.createFontSpans(t,e),void l.then(function(){o.cleanup(),r(!0)});o.options=i.extend({timeout:5e3,frequency:10},n),o.complete=!1;var c=Date.now();o.createFontSpans(t,e,"cursive"),o.setFonts(e,"cursive");var u=function(){var t=o.fontsLoaded(),e=Date.now()-c>o.options.timeout;(t||e)&&(o.cleanup(),r(t))};u(),o.complete||(o.timerID=setInterval(u,10))}):Promise.resolve(!0)},t.prototype.createFontSpans=function(t,e,i){this.$div=n("<div/>").css({position:"absolute",overflow:"hidden",clip:"rect(0 0 0 0)",height:"1px",margin:"0",padding:"0",border:"0","white-space":"nowrap",top:"0"}),this.sizes=[],t.append(this.$div);for(var o=0;o<e.length;o++){var r=e[o];this.$div.append(n("<span/>").css({"font-family":i||r.family,"font-style":r.style,"font-weight":r.weight}).html("font test string")),this.sizes.push(this.$div.find("span").eq(o).width())}},t.prototype.fontsLoaded=function(){for(var t=this.$div.find("span"),e=!1,n=0;n<t.length;n++){if(t.eq(n).width()===this.sizes[n]){e=!0;break}}return!e},t.prototype.setFonts=function(t,e){for(var n=this.$div.find("span"),i=0;i<n.length;i++){n.eq(i).css("font-family",t[i].family+", "+e)}},t.prototype.cleanup=function(){this.complete=!0,this.$div&&(this.$div.detach(),this.$div=null),this.timerID&&(clearInterval(this.timerID),this.timerID=0)},t}();e.FontLoadDetector=o}),define("vsef/backends/BackendUtils",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.backendClasses=function(){return["backend-can-score","backend-can-persist-state"]},t.backendAttributeToCssClass=function(e){return t.backendClasses()[e]},t}();e.default=n}),define("vsef/backends/BackendTypes",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.Result=0]="Result",t[t.Attempt=1]="Attempt",t[t.State=2]="State"}(e.ResultType||(e.ResultType={}));!function(t){t[t.canScore=0]="canScore",t[t.canPersistState=1]="canPersistState"}(e.BackendAttribute||(e.BackendAttribute={}));!function(t){t[t.LocalStorage=0]="LocalStorage",t[t.SessionStorage=1]="SessionStorage"}(e.SimulatorType||(e.SimulatorType={}))}),define("vsef/CFIMap",["require","exports","lodash","jquery","./EventDispatcher","./utils/MiscUtils","./Log"],function(t,e,n,i,o,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a;!function(t){t[t.CFIPageLoad=0]="CFIPageLoad",t[t.CFIPageNav=1]="CFIPageNav"}(a||(a={}));var l=function(){function t(t,e){this.element=t,this.children=e?e.slice():[],this.findCfis(this)}return Object.defineProperty(t.prototype,"cfi",{get:function(){return this._cfi},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cfiEnd",{get:function(){return this._cfiEnd},enumerable:!0,configurable:!0}),t.prototype.contains=function(t){var e=c.VST,n=e.Utils.compareCFIs(t,this.cfi),i=e.Utils.compareCFIs(t,this.cfiEnd);return n===e.Utils.EQUAL||n===e.Utils.GREATER_THAN&&!this.cfiEnd||i===e.Utils.LESS_THAN},t.prototype.findChildIndex=function(t){for(var e=0,n=this.children;e<n.length;e++){var i=n[e];if(i.contains(t))return this.children.indexOf(i)}return-1},t.prototype.findCfis=function(t){t._cfi=this.getCFIForNode(t.element),t._cfiEnd=this.getCFIForNode(i(t.element).next()[0]),t._cfiEnd||(t._cfiEnd=this.getCFIForNode(i(t.element).parent().next()[0]));for(var e=0,n=t.children;e<n.length;e++){var o=n[e];this.findCfis(o)}},t.prototype.getCFIForNode=function(t){return c.VST&&c.VST.sharedEpubModule?c.VST.sharedEpubModule.GetCFIForNode(t):""},t}();e.CFIRegion=l;var c=function(){function t(t){this.vstPageLoadEventData=t,this.regions=[],this.initialized=!1,this.onCFILink=new o.EventDispatcher(this),this.onPageLoad=this.onPageLoad.bind(this),this.onPageNavigate=this.onPageNavigate.bind(this)}return t.prototype.attachVSTApi=function(e){var n=this;return this.vstWin=e,t.VST||(t.VST=this.vstWin.VST),t.VST.once("page:load",this.onPageLoad),t.VST.bind("page:navigate",this.onPageNavigate),this.vstWin.VST.sharedEpubModule?Promise.resolve():r.MiscUtils.waitFor(function(){return n.vstWin.VST.sharedEpubModule},3e3).catch(function(){s.error("VST.sharedEpubModule could not be loaded")})},t.prototype.init=function(){this.initialized=!0,this.vstPageLoadEventData&&this.onPageLoad(void 0,this.vstPageLoadEventData)},t.prototype.add=function(t){if(t){var e;e=n.isArray(t)?t:[t],e.length&&(this.regions=this.regions.concat(e),this.regions=n.sortBy(this.regions,"index"))}},t.prototype.processCFIEvent=function(e,n,i){for(var o=0,r=this.regions;o<r.length;o++){var s=r[o];if(s.contains(e)){var l=s.findChildIndex(e);this.activeCFIRegion=-1!==l?s.children[l]:s,this.onCFILink.trigger(),n===a.CFIPageLoad&&t.VST.sharedEpubModule.ScrollToCFI(e)}}},t.prototype.handleCFINavEvent=function(e,n){if(!this.initialized)return void(this.vstPageLoadEventData=n);var i=t.VST.cfiBase,o=n.cfiwithoutAssertions,r=o.indexOf("!"+i),s=o;-1!==r&&(s=o.substr(r+1)),this.processCFIEvent(s,e,n)},t.prototype.onPageLoad=function(t,e){this.handleCFINavEvent(a.CFIPageLoad,e)},t.prototype.onPageNavigate=function(t,e){this.handleCFINavEvent(a.CFIPageNav,e)},t}();e.CFIMap=c}),define("vsef/rootUI/Types",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.Low=0]="Low",t[t.Medium=1]="Medium",t[t.High=2]="High",t[t.Critical=3]="Critical"}(e.Importance||(e.Importance={}));!function(t){t[t.Blocking=0]="Blocking",t[t.Scrolling=1]="Scrolling",t[t.FixedScrolling=2]="FixedScrolling"}(e.ScrollBehavior||(e.ScrollBehavior={}));!function(t){t[t.TransparentDark=0]="TransparentDark",t[t.TransparentMedium=1]="TransparentMedium",t[t.Invisible=2]="Invisible",t[t.OpaqueWhite=3]="OpaqueWhite"}(e.OverlayType||(e.OverlayType={}));!function(t){t[t.RestoreScrollPos=0]="RestoreScrollPos",t[t.A11yBypass=1]="A11yBypass"}(e.ComponentFlags||(e.ComponentFlags={}));!function(t){t[t.LoadingOverlay=0]="LoadingOverlay",t[t.ImageZoomModal=1]="ImageZoomModal",t[t.TermDefinitionModal=2]="TermDefinitionModal",t[t.ModalAlert=3]="ModalAlert",t[t.ModalDialog=4]="ModalDialog",t[t.ToolTip=5]="ToolTip"}(e.ComponentType||(e.ComponentType={}))}),define("vsef/utils/DebugUtils",["require","exports","jquery","../EventDispatcher","../Log","./Keyboard"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s;!function(t){t[t.Keyup=0]="Keyup",t[t.Keydown=1]="Keydown"}(s||(s={}));var a;!function(t){t[t.Mouse=0]="Mouse",t[t.Touch=1]="Touch"}(a||(a={}));var l=function(){function t(t,e){this.listening=!1,this.pointerDownListeners=[],this.pointerUpListeners=[],this.keymap={},this.clickCnt=0,this.onReset=new i.EventDispatcher(this),this.settings=e,this.rootUI=t,this.$contentEl=t.getContentEl(),this.keyDownHandler=this.keyDownHandler.bind(this),this.keyUpHandler=this.keyUpHandler.bind(this),this.clickTouchDownHandler=this.clickTouchDownHandler.bind(this),this.clickTouchUpHandler=this.clickTouchUpHandler.bind(this),this.settings.debugModal.trigger.click&&(this.pointerDownListeners.push("mousedown"),this.pointerUpListeners.push("mouseup")),this.settings.debugModal.trigger.touch&&(this.pointerDownListeners.push("touchstart"),this.pointerUpListeners.push("touchend"))}return t.prototype.startListening=function(){if(this.settings.debugModal.enabled)try{this.settings.debugModal.trigger.keyboard&&(n(document).keydown(this.keyDownHandler),n(document).keyup(this.keyUpHandler)),this.$contentEl&&(this.pointerDownListeners.length>0&&this.$contentEl.on(this.pointerDownListeners.join(" "),this.clickTouchDownHandler),this.pointerUpListeners.length>0&&this.$contentEl.on(this.pointerUpListeners.join(" "),this.clickTouchUpHandler)),this.listening=!0}catch(t){o.error("Unable to set desktop state reset listener: "+t)}},t.prototype.stopListening=function(){this.listening&&(n(document).off("keydown",this.keyDownHandler),n(document).off("keyup",this.keyUpHandler),this.$contentEl&&(this.$contentEl.off(this.pointerDownListeners.join(" "),this.clickTouchDownHandler),this.$contentEl.off(this.pointerUpListeners.join(" "),this.clickTouchUpHandler)),this.listening=!1)},t.prototype.keyDownHandler=function(t){var e=this;this.keymap[t.keyCode]=s.Keydown,this.keymap[r.Keyboard.SQUARE_BRACKET_OPEN]===s.Keydown&&this.keymap[r.Keyboard.SQUARE_BRACKET_CLOSED]===s.Keydown&&t.ctrlKey&&t.altKey&&(this.keyHoldTimer||(this.keyHoldTimer=setTimeout(function(){e.createSelectModal()},3e3)))},t.prototype.createSelectModal=function(){var t=this;this.rootUI.showSelectModal({label:"Debug Options",message:"Select the desired debug action.",options:[{onSelection:function(){o.showJSConsole("inline",0),o.note("Debug window triggered by user")},value:"enable_console",label:"Enable Debug Console"},{onSelection:function(){t.onReset.trigger(),o.note("State reset triggered by user")},value:"reset_state",label:"Reset Activity States"}],onClose:function(){t.keyHoldTimer=null}})},t.prototype.keyUpHandler=function(t){this.keymap[t.keyCode]=s.Keyup,(t.keyCode===r.Keyboard.SQUARE_BRACKET_OPEN||t.keyCode===r.Keyboard.SQUARE_BRACKET_CLOSED||t.ctrlKey||t.altKey)&&clearTimeout(this.keyHoldTimer)},t.prototype.clickTouchDownHandler=function(t){var e=this,n=2500,i=t.clientY;if("touchstart"===t.type)this.pointerInputType=a.Touch,n=3500,i=t.originalEvent.touches[0].clientY;else if(this.pointerInputType){if(this.pointerInputType===a.Touch)return}else this.pointerInputType=a.Mouse;i<this.settings.debugModal.triggerZoneSizeY?(this.clickCnt++,this.clickCnt>=5?this.clickTouchFinalHoldTimer||(this.clickTouchFinalHoldTimer=window.setTimeout(function(){e.resetClickTouchTimeouts(),e.createSelectModal()},2e3)):1!==this.clickCnt||this.clickTouchWaitPeriodTimer||(this.clickTouchWaitPeriodTimer=window.setTimeout(function(){e.clickTouchFinalHoldTimer||e.resetClickTouchTimeouts()},n))):this.resetClickTouchTimeouts()},t.prototype.clickTouchUpHandler=function(t){t.clientY<this.settings.debugModal.triggerZoneSizeY&&this.clickCnt>=5&&this.clickTouchFinalHoldTimer&&(window.clearTimeout(this.clickTouchFinalHoldTimer),this.clickTouchFinalHoldTimer=null)},t.prototype.resetClickTouchTimeouts=function(){window.clearTimeout(this.clickTouchFinalHoldTimer),window.clearTimeout(this.clickTouchWaitPeriodTimer),this.clickTouchFinalHoldTimer=null,this.clickTouchWaitPeriodTimer=null,this.clickCnt=0},t}();e.default=l});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/Activity",["require","exports","jquery","lodash","./Log","./Templates","./commonUI/CommonUIPaged","./commonUI/CommonUIStacked","./contexts/Context","./Engine","./Interactive","./EngineComms","./utils/PathUtils","./utils/MiscUtils","./Types","./utils/FontUtils","./backends/BackendUtils","./backends/BackendTypes","./utils/DisplayUtils","./CFIMap","./HorizontalScroll","./utils/Environment","./rootUI/Types","./utils/DebugUtils","./utils/StringUtils","./commonUI/CommonUI"],function(t,e,n,i,o,r,s,a,l,c,u,h,d,p,f,g,m,v,y,b,_,w,C,x,T,k){"use strict";function S(t){return["no-common-ui-chrome","scorable","savable","printable","unsubmittable","","","hide-show-enabled"][t]}Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.Delayed=0]="Delayed",t[t.Immediate=1]="Immediate"}(e.FeedbackType||(e.FeedbackType={}));var E;!function(t){t[t.NoCommonUIChrome=0]="NoCommonUIChrome",t[t.Scorable=1]="Scorable",t[t.Savable=2]="Savable",t[t.Printable=3]="Printable",t[t.Unsubmittable=4]="Unsubmittable",t[t.Numerable=5]="Numerable",t[t.QuestionGroup=6]="QuestionGroup",t[t.HideShowsEnabled=7]="HideShowsEnabled"}(E=e.ActivityAttribute||(e.ActivityAttribute={})),e.ActivityAttributeToCssClass=S;var P=function(t){function e(){var e=t.call(this)||this;return e.activityMinimized=!1,e}return __extends(e,t),Object.defineProperty(e.prototype,"contentType",{get:function(){return"Activity"},enumerable:!0,configurable:!0}),e.prototype.build=function(t,e){var u=this,h=this.context.attributes.has(l.ContextAttribute.StandAlone),d=w.Environment.isPrintFrame();return Promise.resolve().then(function(){if(o.note("build "+u.contentType+" "+u.context.engineID),u.commonUI=t.commonUI,u.activityData=t.activityData,u.config=t.config,u.commonUI.$hostEl.addClass(u.context.engineClassLower),u.config.isRTL&&u.commonUI.$hostEl.addClass(f.RTL_STYLE),d){u.commonUI.$hostEl.addClass("print-block");var i=u.context,s=i.productTitle,a=i.screenTitle;s&&a&&(document.title=s+" : "+a)}if((u.context.attributes.has(l.ContextAttribute.DynamicPrintScreen)||d)&&u.commonUI.$hostEl.addClass("dynamic-print"),h){u.context.rootUI.setContentEl(u.commonUI.$hostEl),u.config.isRTL&&(u.config.setLanguage(n("html")),u.config.setDirection(n("html")));var c=new x.default(u.context.rootUI,u.config.debugSettings);c.startListening(),u.listenTo(c.onReset,function(){u.model.silently(function(){u.model.attempts.reset()}),u.model.reset()})}var p=[e.get([u.ID_ACTIVITY_TEMPLATE,u.ID_ACTIVITY_SHARED_TEMPLATE])],g=e.get([u.ID_ACTIVITY_SUBPROJ_TEMPLATE]);g&&(p=[g].concat(p));var m=d?r.TemplateMediaType.Print:r.TemplateMediaType.Screen,y=new r.Templates(p,"en",m,u.config.options);if(u.templates=y,u.buildUI(y,t.$el),u.model.state=u.context.blockAPI.state,w.Environment.isReadOnly()&&u.model.state)for(var b=0,_=u.model.state.resultStates;b<_.length;b++){var C=_[b];switch(C.state.kind){case"None":break;default:var T=C.state;T.submitted&&(T.revealAnswer=!0)}}return u.context.blockAPI=u.model,u.context.onBlockApiInitialized.trigger(),u.model.id=u.context.id,!u.model.state&&u.context.backend.attributes.has(v.BackendAttribute.canPersistState)&&u.context.attributes.has(l.ContextAttribute.StandAlone)||w.Environment.isPrintBlockFrame()?u.context.loadState(u.model.id).then(function(t){return t&&u.model.silently(function(){u.model.state=t}),Promise.resolve()}).catch(function(t){return o.error(t),u.context.rootUI.showAlert("We are unable to display your previous work at this time. Please try again later.",{limit:1}),Promise.resolve()}):Promise.resolve()}).then(function(){switch(u.context.engineNativeClassLower&&u.commonUI.$hostEl.addClass(u.context.engineNativeClassLower),u.commonUI.$hostEl.addClass("dynamic"),u.listenTo(u.model.onPagesChange,u.pagesChange),u.context.parentAttributes.kind){case"ScoredScreen":case"ContentScreen":u.context.parentAttributes.attributes.has(l.ParentAttribute.HandlesAlerts)||u.listenTo(u.model.onAlert,u.alert);break;default:u.listenTo(u.model.onAlert,u.alert)}switch(u.model.isRTL=u.config.isRTL,u.model.setStateSaveDelay(u.config.stateSettings.stateSaveDelay),u.context.engineNativeClassLower&&-1!==u.context.engineNativeClassLower.indexOf("_survey")&&(u.model.attributes.remove(E.Scorable),u.model.attributes.remove(E.Numerable),u.model.attributes.add(E.Unsubmittable),u.model.survey=!0),u.config.engineSettings.base.buttons.print||u.model.attributes.remove(E.Printable),u.context.parentAttributes.kind){case"ScoredScreen":u.model.completenessSettings&&(u.model.completenessSettings.min=-1)}if(u.model.parse(t.activityData,t.context.paths),w.Environment.isReadOnly()){u.commonUI.$hostEl.addClass("readonly");for(var e=0,n=u.model.pages;e<n.length;e++){var o=n[e];o.disabled=!0}}u.model.isRTL=u.config.isRTL,u.commonUI.$hostEl.toggleClass("stacked",u.model.isStacked),u.commonUI.$hostEl.toggleClass("reveal-answer-enabled",u.model.canRevealAnswer),u.commonUI.$hostEl.toggleClass("has-feedback",u.model.hasFeedback),u.commonUI.$hostEl.toggleClass("single-page",u.model.isSinglePage);for(var r=0,m=u.model.attributes.data;r<m.length;r++){var v=m[r];S(v)&&u.commonUI.$hostEl.addClass(S(v))}u.toggleBackendClasses(),u.listenTo(u.context.backend.onAttributesChange,u.commonUIBackendAttrChange),u.listenTo(u.model.onReset,u.resetCommonUIState),u.listenTo(u.model.attempts.onNumAttemptsChange,u.attemptNumChange),u.commonUI.$hostEl.toggleClass("can-submit-results",u.config.engineSettings.base.buttons.submit);var y=u.commonUI;y.instructions=u.model.instructions,y.instructionsMobile=u.model.instructionsMobile;var b;if(y.hasCustomTitle=""!==u.model.title,"ScoredScreen"===u.context.parentAttributes.kind||u.model.attributes.lacks(E.QuestionGroup))b=u.model.title;else{var C='<span class="visuallyhidden">'+u.context.info.label+" Question Group</span>";b=u.model.title+(u.model.title?" ":"")+" "+C}if(y.title=T.default.htmlPtoBr(b),u.commonUI instanceof s.CommonUIPaged){var x=u.commonUI;x.pages=u.model.pages;var P=u.model.pageIndex||0;u.changePage(P),u.listenTo(x.onPageChangeRequest,u.commonUIPageChangeRequest),u.listenTo(x.onCheckPageAnswers,u.commonUICheckPageAnswer),u.listenTo(x.onRevealPageAnswers,u.commonUIRevealPageAnswers),u.listenTo(x.onResetPageAnswers,u.commonUIResetPageAnswers),u.listenTo(x.onNextPage,u.commonUINextPage),u.listenTo(x.onSubmitPageAnswers,u.submitPageAnswers),u.listenTo(x.onShowPageFeedback,u.commonUIShowFeedback),u.listenTo(x.onHidePageFeedback,u.commonUIHideFeedback)}else if(u.commonUI instanceof a.CommonUIStacked){u.commonUI.$hostEl.toggleClass("no-feedback",!u.model.hasFeedback);var A=u.commonUI;A.isSingleQuestion=u.model.questions.length<2,u.listenTo(A.onRevealAllAnswers,u.commonUIRevealAllAnswers),u.listenTo(A.onResetAllAnswers,u.commonUIResetAllAnswers),u.listenTo(A.onCheckAllAnswers,u.commonUICheckAllAnswersAndShowFeedback),u.listenTo(A.onReviewAnswers,u.commonUIReviewAnswers),u.listenTo(A.onShowAllFeedback,u.commonUIShowFeedback),u.listenTo(A.onHideAllFeedback,u.commonUIHideFeedback)}u.listenTo(u.commonUI.onPrint,u.commonUIPrint),u.commonUI.$hostEl.find(".header-area").click(u.toggleCollapsibleActivity.bind(u)),u.listenTo(u.model.onSubmittedChange,u.submittedChange),u.listenTo(u.model.onRevealAnswerChange,u.revealAnswersChange),u.model.survey&&(u.commonUI.$hostEl.find("button[data-subfunction='reset']").html("Reset"),u.commonUI.attributes.add(k.CommonUIAttribute.CanResetWithoutSubmit)),u.commonUI.complete=!1;for(var I=0,O=u.model.pages;I<O.length;I++){var o=O[I];u.listenTo(o.onCompleteChange,u.pageCompleteChange),u.listenTo(o.onShowFeedbackChange,u.pageShowFeedbackChange),u.model.questionLayout===f.QuestionLayout.Stacked&&(o.visible=!0),u.model.questionLayout===f.QuestionLayout.Paged&&(o.attempts.total=o.questions[0].numAttempts)}u.model.questionLayout===f.QuestionLayout.Stacked&&u.model.questions.length&&(u.model.attempts.total=u.model.questions[0].numAttempts),u.model.state&&u.renderCurrentState(),u.listenTo(u.model.onStateChange,u.stateChange),(u.model.getIsEmpty()||!u.model.isTitleSet&&"hideshow"===u.context.engineNativeClassLower)&&u.renderAsEmpty(t.commonUI.$hostEl,u.templates),c.Engine.preprocessXML(t.commonUI.$hostEl),u.scrollers=_.default.createComponents(t.$el),u.context.isPrerendering||u.scrollers.forEach(function(t){t.init()}),u.context.rootUI.preprocessContent(t.$el),h&&u.context.rootUI.enableImageZooms(!0);var M=d?t.config.getTheme().fonts.faces:null;return(new g.FontLoadDetector).detect(u.commonUI.$hostEl,M).then(function(t){return(h||w.Environment.isPrintBlockFrame())&&p.MiscUtils.containsMath(i.unescape(u.activityData))?p.MiscUtils.updateMath(u.commonUI.$el.get(0),u.config.libraries.math.lib,u.config.libraries.math.scale):Promise.resolve(null)}).then(function(){return u.model.initialized=!0,u.init(),u.afterBuild(),Promise.resolve(u)})})},e.prototype.afterBuild=function(){var e=this;if(t.prototype.afterBuild.call(this),this.context.attributes.has(l.ContextAttribute.StandAlone)){p.MiscUtils.callPrerenderUtil("prerender",{html:n("html").html()});new h.EngineComms(window).sendEngineInit(d.PathUtils.getQueryString("id")),w.Environment.isUnitTest&&window.setTimeout(function(){e.commonUI.$hostEl.addClass("initialized")})}},e.prototype.defineCfiRegions=function(){var t;if(this.model.isPaged&&!this.model.getIsEmpty()){for(var e=this.view.$(".page"),n=[],i=0;i<e.length;i++)n.push(new b.CFIRegion(e.eq(i)[0]));t=new b.CFIRegion(this.commonUI.$el[0],n)}return t},e.prototype.doCFILink=function(){this.activityMinimized&&this.toggleCollapsibleActivity(),this.changePage(this.view.$(".page").index(this.context.cfiMap.activeCFIRegion.element))},e.prototype.toggleCollapsibleActivity=function(t){if(this.activityMinimized=!this.activityMinimized,this.activityMinimized){this.commonUI.$hostEl.find(this.view.hideShowSelectors.toString()).hide();for(var e=0,n=this.view.pageViews;e<n.length;e++){var i=n[e];i.stimulusView.hide()}}else{this.commonUI.$hostEl.find(this.view.hideShowSelectors.toString()).show();for(var o=0,r=this.view.pageViews;o<r.length;o++){var i=r[o];i.stimulusView.show(),this.context.rootUI.update()}}var s=this.commonUI.$hostEl.find(".hide-show-icon");s.length&&s.toggleClass("collapsed",this.activityMinimized),this.commonUI.$hostEl.find(".header-area").attr("aria-expanded",(!this.activityMinimized).toString())},e.prototype.commonUIPrint=function(){var t=this;this.context.rootUI.showLoadingOverlay(C.OverlayType.Invisible);var e="";e=this.context.paths.baseRelativePath?this.context.paths.baseRelativePath+"index.xhtml":"index.xhtml",e+="?eid="+(this.context.engineNativeClass||this.context.engineClass)+"&amp;reason=printBlock&amp;id="+this.context.id,e+="&amp;mediaPath="+this.context.paths.mediaPath,this.context.paths.skinPath&&(e+="&amp;skinPath="+this.context.paths.skinPath);var o=d.PathUtils.getQueryString("subproj");o&&(e+="&amp;subproj="+o);var r=d.PathUtils.getQueryString("themestack");r&&(e+="&amp;themestack="+r);var s=n('<iframe src="'+e+'" class="print-iframe"/>');s.appendTo("body");var a=s.get(0),l=new h.EngineComms(a.contentWindow),c={};w.Environment.isBookshelf?(c.productTitle=window.VST.Book.getTitle(),c.screenTitle=document.title):(c.productTitle=this.context.productTitle,c.screenTitle=this.context.screenTitle),l.sendPrintContext(this.context.id,c).then(function(){l.sendEngineConfig(t.context.id,t.config.getBaseDataString())}).then(function(){return l.sendActivityData(t.context.id,t.activityData)}).then(function(){return l.sendEngineState(t.context.id,t.model.state)}).then(function(){return l.waitForEngineInit(t.context.id)}).then(function(){return p.MiscUtils.whenAllImagesLoaded(a.contentWindow.document.body)}).then(function(){t.context.rootUI.hideLoadingOverlay();var e=function(){a.contentWindow.onafterprint&&(a.contentWindow.onafterprint=null,i.defer(function(){s.remove(),s=null}))},n=function(t){!t.matches&&s&&e()};a.contentWindow.matchMedia("print").addListener(n),a.contentWindow.onafterprint=e,a.contentWindow.document.execCommand("print",!1,null)||a.contentWindow.print()})},e.prototype.commonUIBackendAttrChange=function(t,e){var n=this;if(this.toggleBackendClasses(),this.commonUI instanceof s.CommonUIPaged)for(var i=0,o=this.model.pages;i<o.length;i++){var r=o[i];r.hasBackendForSubmit=this.context.backend.attributes.has(v.BackendAttribute.canPersistState)}e.has(v.BackendAttribute.canPersistState)&&this.model.force(function(){n.model.rebuildState()})},e.prototype.commonUIShowFeedback=function(){var t=this;this.toggleFeedback(!0),this.context.rootUI.update(),_.default.updateComponents(this.scrollers),this.model.defer(function(){t.commonUIFocusFeedback()})},e.prototype.commonUIHideFeedback=function(){this.toggleFeedback(!1)},e.prototype.commonUIPageChangeRequest=function(t,e){this.changePage(e)},e.prototype.commonUICheckPageAnswer=function(){var t=this;this.commonUICheckPageAnswers(),this.context.rootUI.update(),_.default.updateComponents(this.scrollers),this.model.curPage.defer(function(){t.commonUIFocusFeedback()})},e.prototype.commonUICheckAllPageAnswers=function(){for(var t=0,e=this.model.pages;t<e.length;t++){e[t].checkAnswer()}},e.prototype.commonUICheckPageAnswers=function(){var t=this;this.model.curPage.attempts.silently(function(){t.model.curPage.attempts.makeAttempt()}),this.checkPageAnswers(this.model.curPage),this.updatePageCommonUI()},e.prototype.commonUIRevealPageAnswers=function(){this.model.curPage.revealAnswer=!0,this.commonUI.revealAnswer=!0,this.commonUI.$hostEl.addClass("reveal-answer")},e.prototype.commonUIResetPageAnswers=function(){this.model.curPage.resetAnswers(),this.commonUIResetUIPageState(),this.model.curPage.setQuestionFocus()},e.prototype.commonUIResetUIPageState=function(){this.commonUI.revealAnswer=!1,this.commonUI.$hostEl.removeClass("reveal-answer"),this.updatePageCommonUI()},e.prototype.submitPageAnswers=function(){this.commonUICheckPageAnswers(),this.context.rootUI.update(),_.default.updateComponents(this.scrollers);var t=this.model.state;t&&this.context.submitResult(t)},e.prototype.commonUINextPage=function(){var t=n(document).height();this.model.pageIndex<this.model.pages.length-1&&this.changePage(this.model.pageIndex+1);var e=t-n(document).height();e>0&&(e=Math.min(e,this.view.$el.find(".page").eq(this.model.pageIndex).height()));var i=n(this.commonUI.curPageControl);y.DisplayUtils.scrollIntoView({$to:i,$focusCtl:i,offset:e>0?e:0,$associated:e<0?this.commonUI.$hostEl:void 0})},e.prototype.changePage=function(t){if(this.model.pages.length){var e=this.commonUI;this.model.pageIndex=t,e.pageIndex=t;for(var n=0,i=this.model.pages;n<i.length;n++){i[n].visible=!1}this.model.pages[t].visible=!0,this.context.rootUI.update(),_.default.updateComponents(this.scrollers),this.updatePageCommonUI(),this.commonUI.$hostEl.toggleClass("no-feedback",!this.model.pages[t].hasFeedback),this.model.onEngineChangeSize.trigger()}},e.prototype.commonUICheckAllAnswersAndShowFeedback=function(){
this.commonUICheckAllAnswers(),this.commonUIFocusFeedback()},e.prototype.commonUICheckAllAnswers=function(){var t=this;this.model.attempts.silently(function(){t.model.attempts.makeAttempt()}),this.checkAllAnswers()},e.prototype.checkAllAnswers=function(){var t=this;this.model.silently(function(){t.model.submitted=!0;for(var e=0,n=t.model.pages;e<n.length;e++){var i=n[e];i.attempts.total=t.model.attempts.total,t.checkPageAnswers(i)}});var e=this.model.attributes.has(E.Scorable);this.commonUI.$hostEl.addClass("submitted"),e&&(this.commonUI.$hostEl.toggleClass("correct",this.model.isCorrect),this.commonUI.$hostEl.toggleClass("incorrect",!this.model.isCorrect)),this.commonUI.$hostEl.toggleClass("answer-can-be-revealed",this.model.answerCanBeRevealed),this.commonUI.$hostEl.toggleClass("attempts-exhausted",this.model.attempts.areExhausted),this.commonUI.submitted=!0;var n;if(e&&1!==this.model.pages.length&&(n=this.templates.get("common-ui-global-feedback-"+(this.model.isCorrect?"correct":"incorrect"))(this.model)),n){this.commonUI.globalFeedback=n}this.context.rootUI.update(),_.default.updateComponents(this.scrollers)},e.prototype.commonUIFocusFeedback=function(){if(this.commonUI instanceof s.CommonUIPaged)this.model.curPage.presentFeedback();else{if(this.model.attributes.has(E.Scorable)){var t=this.commonUI;t.globalFeedback?t.focusGlobalFeedback():this.model.pages[0].presentFeedback()}else for(var e=0,n=this.model.pages;e<n.length;e++){var i=n[e];if(i.hasFeedback){i.presentFeedback();break}}}},e.prototype.commonUIResetAllAnswers=function(){for(var t=0,e=this.model.pages;t<e.length;t++){e[t].resetAnswers()}this.commonUIResetUIState(),this.model.pages[0].setQuestionFocus()},e.prototype.commonUIRevealAllAnswers=function(){for(var t=0,e=this.model.pages;t<e.length;t++){var n=e[t];this.revealPageAnswers(n,!0)}this.commonUI.$hostEl.addClass("reveal-answer"),this.commonUI.revealAnswer=!0},e.prototype.commonUIResetUIState=function(){this.commonUI.$hostEl.removeClass("correct incorrect submitted complete answer-can-be-revealed reveal-answer attempts-exhausted"),this.commonUI.complete=!1,this.commonUI.submitted=!1,this.commonUI.revealAnswer=!1},e.prototype.commonUIReviewAnswers=function(){this.model.pages[0].present()},e.prototype.updatePageCommonUI=function(){if(this.model.curPage){var t=this.commonUI;this.commonUI.$hostEl.toggleClass("complete",this.model.curPage.complete),this.commonUI.$hostEl.toggleClass("submitted",this.model.curPage.submitted),this.commonUI.$hostEl.toggleClass("correct",!0===this.model.curPage.correct&&this.model.curPage.submitted),this.commonUI.$hostEl.toggleClass("incorrect",!1===this.model.curPage.correct&&this.model.curPage.submitted),this.commonUI.$hostEl.toggleClass("reveal-answer",this.model.curPage.submitted&&this.model.curPage.revealAnswer),this.commonUI.$hostEl.toggleClass("has-feedback",this.model.curPage.hasFeedback),this.commonUI.$hostEl.toggleClass("show-feedback",this.model.curPage.showFeedback);var e=this.model.curPage.attempts,n=this.model.canRevealAnswer&&(e.areExhausted||e.areInfinite);this.commonUI.$hostEl.toggleClass("answer-can-be-revealed",this.model.curPage.complete&&n),this.commonUI.$hostEl.toggleClass("attempts-exhausted",this.model.curPage.complete&&e.areExhausted),this.commonUI.$hostEl.toggleClass("last-page",this.model.pageIndex===this.model.pages.length-1),t.complete=this.model.curPage.complete,t.submitted=this.model.curPage.submitted,t.revealAnswer=this.model.curPage.revealAnswer}},e.prototype.checkPageAnswers=function(t){t.checkAnswer(),this.model.attributes.has(E.Scorable)&&t.assessCorrect(),t.submitted=!0},e.prototype.revealPageAnswers=function(t,e){this.model.attributes.has(E.Scorable)&&(t.revealAnswer=e)},e.prototype.pageShowFeedbackChange=function(t,e){this.toggleFeedback(e)},e.prototype.toggleFeedback=function(t){if(this.commonUI.showFeedback=t,this.commonUI.$hostEl.toggleClass("show-feedback",t),this.commonUI instanceof s.CommonUIPaged)this.model.curPage.showFeedback=t,this.updatePageCommonUI();else for(var e=0,n=this.model.pages;e<n.length;e++){var i=n[e];i.showFeedback=t}},e.prototype.toggleBackendClasses=function(){for(var t=[v.BackendAttribute.canScore,v.BackendAttribute.canPersistState],e=0,n=t;e<n.length;e++){var i=n[e];this.commonUI.$hostEl.toggleClass(m.default.backendAttributeToCssClass(i),this.context.backend.attributes.has(i))}},e.prototype.pageCompleteChange=function(t){this.commonUI.complete=this.model.complete,this.commonUI instanceof s.CommonUIPaged?t===this.model.curPage&&this.updatePageCommonUI():this.commonUI.$hostEl.toggleClass("complete",this.model.complete)},e.prototype.stateChange=function(){var t=this,e=this.model.state;e&&this.context.saveState(e).catch(function(e){o.error(e),t.context.rootUI.showAlert("We are unable to save any of your work at this time. Please try again later.",{limit:1})})},e.prototype.submittedChange=function(){this.model.submitted&&this.model.attributes.lacks(E.Unsubmittable)&&(this.commonUI instanceof s.CommonUIPaged?this.commonUICheckAllPageAnswers():this.commonUI instanceof a.CommonUIStacked&&this.commonUICheckAllAnswers())},e.prototype.revealAnswersChange=function(){this.model.revealAnswer&&this.model.canRevealAnswer&&(this.commonUI instanceof s.CommonUIPaged?this.commonUIRevealPageAnswers():this.commonUI instanceof a.CommonUIStacked&&this.commonUIRevealAllAnswers())},e.prototype.renderCurrentState=function(){for(var t=0,e=this.model.pages;t<e.length;t++){var n=e[t];n.canBroadcastState=!1,n.onShowFeedbackChange.trigger(n.showFeedback),this.pageCompleteChange(n)}this.commonUI instanceof a.CommonUIStacked&&(this.model.submitted&&this.checkAllAnswers(),this.model.revealAnswer&&this.commonUIRevealAllAnswers());for(var i=0,o=this.model.pages;i<o.length;i++){var n=o[i];n.canBroadcastState=!0}},e.prototype.pagesChange=function(t){for(var e=0,n=t.pages;e<n.length;e++){var i=n[e];i.hasBackendForSubmit=this.context.backend.attributes.has(v.BackendAttribute.canScore),i.attempts=this.model.attempts.clone()}this.commonUI.$hostEl.toggleClass(f.EMPTY_STYLE,!(0!==this.model.pages.length))},e.prototype.resetCommonUIState=function(){var t=this;if(this.commonUI instanceof s.CommonUIPaged){this.commonUIResetUIPageState();for(var e=0,n=this.model.pages;e<n.length;e++){n[e].attempts.reset()}}else this.commonUI instanceof a.CommonUIStacked&&(this.model.attempts.reset(),this.commonUIResetUIState());this.model.force(function(){t.model.rebuildState()})},e.prototype.alert=function(t,e){this.context.rootUI.showAlert(e,{limit:1})},e.prototype.attemptNumChange=function(t,e){this.renderCurrentState()},e}(u.Interactive);e.Activity=P});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("editorsRoot/model/ScreenBlockModel",["require","exports","jquery","lodash","vsef/Log","vsef/Model","vsef/EventDispatcher","vsef/Observable","vsef/utils/MiscUtils","vsef/contexts/ScreenBlockContext","vsef/contexts/Context","vsef/utils/PathUtils","vsef/Activity"],function(t,e,n,i,o,r,s,a,l,c,u,h,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p;!function(t){t[t.Open="Open"]="Open",t[t.Resolved="Resolved"]="Resolved"}(p=e.FlagStatusType||(e.FlagStatusType={}));var f=function(t){function e(e,i,r,a){var l=t.call(this)||this;l.screenBlockNumber=-1,o.note("created BlockModel"),l.parentEditor=e,l.isPrerendering=e.isPrerendering,l.config=a,l.highlighted=l.isEditing=!1,l.renderable=!0,l.editorIsLoading=!1,l.onBlockStateChange=new s.EventDispatcher(l),l.onBlockAlert=new s.EventDispatcher(l);var c=n.parseXML(i.data),u=n(c),h=u.find("*").eq(0)[0].nodeName;return l.name=l.type=h,-1!==h.indexOf("STATIC")&&(l.type="STATIC"),l.info=l.parentEditor.getBlockRegistryData(l.name),l.setData(i,r),l}return __extends(e,t),Object.defineProperty(e.prototype,"isScorable",{get:function(){return this.context.blockAPI.attributes.has(d.ActivityAttribute.Scorable)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSavable",{get:function(){return this.context.blockAPI.attributes.has(d.ActivityAttribute.Savable)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usesMath",{get:function(){return this.activityData&&l.MiscUtils.containsMath(i.unescape(this.activityData))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isStatic",{get:function(){return"STATIC"===this.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDynamic",{get:function(){return!this.isStatic},enumerable:!0,configurable:!0}),e.prototype.setFocus=function(){this.context.blockAPI.setFocus()},e.prototype.setData=function(t,e){this.activityData=t.data,this.id=t.id,this.flagStatus=t.status,this.assigned=t.assigned===e.toString(),this.context=new c.ScreenBlockContext(this.type,this.activityData,this.parentEditor.paths.clone(),this.config,this.parentEditor.subproj),this.context.reason=this.parentEditor.reason,this.context.id=this.id,this.context.info=this.info,this.context.screenTitle=this.parentEditor.title,this.context.productTitle=this.parentEditor.productTitle,this.parentEditor.isPrerendered&&this.context.attributes.add(u.ContextAttribute.DontLoadCss);var n=this.parentEditor.paths;this.parentEditor.getMediaBaseUrl()?this.context.paths.mediaPath=h.PathUtils.ensurePathEndSeparator(this.parentEditor.getMediaBaseUrl()):(this.context.paths.contentPath=n.basePath+"activities/",this.context.paths.mediaPath=n.basePath+"activities/media/"),this.listenTo(this.context.onBlockApiInitialized,this.blockApiInitialized)},e.prototype.setFlagData=function(t,e){this.flagStatus=t.status,this.assigned=t.assigned===e.toString()},e.prototype.reset=function(){this.context.blockAPI.reset()},e.prototype.getBlockData=function(){return{data:this.activityData,id:this.id,assigned:null,status:p[this.flagStatus]}},e.prototype.getClonableBlockData=function(){return{data:this.activityData,id:this.id,assigned:null,status:null}},e.prototype.blockApiInitialized=function(){this.stopListening(this.context.onBlockApiInitialized),this.listenTo(this.context.blockAPI.onEngineInitialized,this.addStateListeners),this.listenTo(this.context.blockAPI.onAlert,this.alert)},e.prototype.addStateListeners=function(){this.listenTo(this.context.blockAPI.onStateChange,this.stateChange)},e.prototype.stateChange=function(){this.onBlockStateChange.trigger()},e.prototype.alert=function(t,e){this.onBlockAlert.trigger(e)},__decorate([a.observable],e.prototype,"isEditing",void 0),__decorate([a.observable],e.prototype,"editorIsLoading",void 0),__decorate([a.observable],e.prototype,"highlighted",void 0),__decorate([a.observable],e.prototype,"flagStatus",void 0),__decorate([a.observable],e.prototype,"assigned",void 0),__decorate([a.observable],e.prototype,"screenBlockNumber",void 0),e}(r.Model);e.ScreenBlockModel=f}),define("vsef/utils/ProcessWaiter",["require","exports","lodash"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,n){this.process=t,this._timeout=e,this.callback=n}return Object.defineProperty(t.prototype,"timeout",{get:function(){return this._timeout},enumerable:!0,configurable:!0}),t.prototype.execute=function(){try{var t=this.process();this.callback(null,{kind:"Result",value:t})}catch(t){this.callback(t)}},t.prototype.demote=function(){this.callback(null,{kind:"None"})},t}(),o=function(){function t(){this.queue=[]}return t.prototype.add=function(t,e,n){this.queue.push(new i(t,e,n))},t.prototype.findItemByTimeout=function(t){var e=this.queue.map(function(t){return t.timeout}).indexOf(t);return-1===e?null:this.queue[e]},t.prototype.clear=function(){this.queue=this.queue.reduce(function(t,e){return e.demote(),t},[])},t}(),r=function(){function t(t){this.queue=new o,this.timeout=null,this._delay=t}return Object.defineProperty(t.prototype,"delay",{get:function(){return this._delay},set:function(t){this._delay=t},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=this;return new Promise(function(i,o){n.isFunction(t)||o(new Error("Process must be a function")),e.timeout&&(clearTimeout(e.timeout),e.queue.findItemByTimeout(e.timeout).demote()),e.timeout=setTimeout(function(){e.queue.findItemByTimeout(e.timeout).execute(),e.queue.clear(),e.timeout=null},e._delay),e.queue.add(t,e.timeout,function(t,e){t&&o(t),i(e)})})},t.prototype.clear=function(){this.timeout&&(clearTimeout(this.timeout),this.queue.clear(),this.timeout=null)},t}();e.default=r}),define("vsef/backends/BackendWaiters",["require","exports","../utils/ProcessWaiter","../utils/AppConstants"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.stateWaiters={},this.resultWaiters={},this.requestWaiters={},this.blockingProcesses={}}return t.prototype.addStateSend=function(t){var e=t.id;return this.stateWaiters[e]||(this.stateWaiters[e]=new n.default(i.default.PROCESS_WAITER_TIMEOUT)),this.stateWaiters[e].add(function(){return null})},t.prototype.addResultSend=function(t,e){var o=this;void 0===e&&(e=!1);var r=t.id;return this.resultWaiters[r]||(this.resultWaiters[r]=new n.default(i.default.PROCESS_WAITER_TIMEOUT)),this.stateWaiters[r]&&this.stateWaiters[r].clear(),e&&(this.blockingProcesses[r]=1),this.resultWaiters[r].add(function(){o.blockingProcesses[r]&&delete o.blockingProcesses[r]})},t.prototype.addStateRequest=function(t){return this.requestWaiters[t]||(this.requestWaiters[t]=new n.default(i.default.PROCESS_WAITER_TIMEOUT)),this.requestWaiters[t]&&this.requestWaiters[t].clear(),this.requestWaiters[t].add(function(){return null})},t}();e.default=o}),define("vsef/backends/Backend",["require","exports","./BackendTypes","../Flags","./BackendWaiters","../EventDispatcher","../Log","../utils/MiscUtils"],function(t,e,n,i,o,r,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(){this.waiters=new o.default,this.attributes=new i.Flags,this.onAttributesChange=new r.EventDispatcher(this)}return t.prototype.initialize=function(){return Promise.resolve(!0)},t.prototype.saveState=function(t){var e=this;return this.attributes.has(n.BackendAttribute.canPersistState)?this.filterForSupersededStates(t,n.ResultType.State).then(function(t){return s.log("Backend saving states:",t),e.saveStateRequest(t).then(function(){return s.log("Backend save state complete:",t),Promise.resolve()})}):Promise.resolve()},t.prototype.loadState=function(t){var e=this;return this.attributes.has(n.BackendAttribute.canPersistState)?Promise.all(t.map(function(t){return e.waiters.addStateRequest(t)})).then(function(e){return Promise.resolve(t.filter(function(t,n){switch(e[n].kind){case"None":return!1;default:return!0}}))}).then(function(t){return s.log("Backend requesting states: ",t),e.loadStateRequest(t)}).then(function(e){return s.log("Backend returned states:",e),e?t.map(function(t){return a.MiscUtils.getObjectByProperty(e,"id",t)}):null}):Promise.resolve([])},t.prototype.submitResult=function(t){var e=this;return this.attributes.has(n.BackendAttribute.canScore)?this.filterForSupersededStates(t,n.ResultType.Attempt).then(function(t){return s.log("backend submitting results:",t),e.submitResultRequest(t)}):Promise.resolve()},t.prototype.disableAttributes=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,i=t;n<i.length;n++){var o=i[n];this.attributes.remove(o)}this.onAttributesChange.trigger(this.attributes)},t.prototype.enableAttributes=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,i=t;n<i.length;n++){var o=i[n];this.attributes.add(o)}this.onAttributesChange.trigger(this.attributes)},t.prototype.saveStateRequest=function(t){return Promise.resolve()},t.prototype.submitResultRequest=function(t){return Promise.resolve()},t.prototype.loadStateRequest=function(t){return Promise.resolve(null)},t.prototype.filterForSupersededStates=function(t,e){var i=this;return Promise.resolve().then(function(){return Promise.all(t.map(function(t){switch(e){case n.ResultType.Attempt:return i.waiters.addResultSend(t);default:return i.waiters.addStateSend(t)}})).then(function(e){return Promise.resolve(t.filter(function(t,n){switch(e[n].kind){case"None":return!1;default:return!0}}))})})},t}();e.default=l});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/backends/BackendOutcomesAPI",["require","exports","./Backend","./BackendTypes","../utils/PathUtils","../Types"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s="EPUB.Education",a=function(t){function e(){var n=t.call(this)||this;if(!e.hasAPI())throw new Error(s+" Outcomes API not declared");return n.attributes.add(i.BackendAttribute.canPersistState),n.attributes.add(i.BackendAttribute.canScore),n.api=window.EPUB.Education,n}return __extends(e,t),e.hasAPI=function(){return!!o.PathUtils.resolveNS(window,s,null)},e.prototype.loadStateRequest=function(t){var e=this;return Promise.resolve().then(function(){var n={type:e.determineType(i.ResultType.State),activityIds:t},o={filters:[n]};return e.retrieve(o)})},e.prototype.saveStateRequest=function(t){var e=this;return Promise.resolve().then(function(){if(t.length<1)return Promise.resolve();var n=e.buildEducationDataRequest(t,e.buildActivitySaveStateObject.bind(e));return e.send(n)})},e.prototype.submitResultRequest=function(t){var e=this;return Promise.resolve().then(function(){if(t.length<1)return Promise.resolve();var n=e.buildEducationDataRequest(t,e.buildActivityAttemptObject.bind(e));return e.send(n)})},e.prototype.retrieve=function(t){var e=this;return new Promise(function(n,i){try{e.api.retrieve(t,function(t){if(!t)return void i(new Error(s+".retrieve returned unexpected undefined or null response"));if(t.errors&&t.errors.length>0)return void i(new Error("Unable to load state"));var o=e.buildEngineStates(t.data||[]);n(o)})}catch(t){i(t)}})},e.prototype.send=function(t){var e=this;return new Promise(function(n,i){e.api.send(t,function(t){t.errors&&t.errors.length>0&&i(new Error("Unable to save state")),n()})})},e.prototype.buildEducationDataRequest=function(t,e){return{data:t.map(function(t){return e(t)})}},e.prototype.buildEngineStates=function(t){return t.map(function(t){return t.data})},e.prototype.buildActivityAttemptObject=function(t){return{type:"ActivityAttempt",activityId:t.id,results:this.buildAttemptResults(t),createdTime:t.createdTime,state:{data:t}}},e.prototype.buildAttemptResults=function(t){var e=this;return t.resultStates.map(function(n){return{resultId:n.id,response:e.arrayToString(n.answer),duration:n.duration,progress:n.progress,completion:n.completion,success:n.success,score:n.score/n.possible,createdTime:n.createdTime,status:e.determineEvaluationType(t.evaluationType,n.evaluationType)}})},e.prototype.determineEvaluationType=function(t,e){switch(t===r.ActivityEvaluation.None?e===r.ActivityEvaluation.None?r.ActivityEvaluation.Submitted:e:t){case r.ActivityEvaluation.Graded:return"graded";default:return"submitted"}},e.prototype.buildActivitySaveStateObject=function(t){return{type:"ActivityState",activityId:t.id,createdTime:t.createdTime,data:t}},e.prototype.arrayToString=function(t){return Array.isArray(t)?1===t.length?t[0]:t.join("\n"):t},e.prototype.determineType=function(t){switch(t){case i.ResultType.Attempt:return"ActivityAttempt";case i.ResultType.Result:return"ActivityResult";default:return"ActivityState"}},e}(n.default);e.default=a}),define("vsef/backends/BackendOutcomesAPISimulator",["require","exports","lodash","./BackendOutcomesAPI","./BackendTypes"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){switch(void 0===t&&(t=o.SimulatorType.LocalStorage),this.api=window.localStorage,t){case o.SimulatorType.SessionStorage:this.api=window.sessionStorage;break;default:this.api=window.localStorage}window.parent&&(this.sessionId=window.parent.sessionStorage.getItem("outcomesSession"))}return t.canCreate=function(t){var e="localStorage";return t===o.SimulatorType.SessionStorage&&(e="sessionStorage"),!i.default.hasAPI()&&window[e]},t.create=function(){var e=new t;return t.attachSimulator(e),e},t.attachSimulator=function(t){window.EPUB=window.EPUB||{Education:null},window.EPUB.Education=t},t.prototype.retrieve=function(t,e){var i=this,o=n.flatten(t.filters.map(function(t){if("ActivityState"===t.type){return t.activityIds.map(function(t){var e=JSON.parse(i.api.getItem(i.addStoragePrefix(t)));return e?i.sessionId&&e.sessionId!==i.sessionId?null:e.request?"ActivityAttempt"===e.request.type?{type:"ActivityState",activityId:e.id,createdTime:e.request.createdTime,data:e.request.state.data}:e.request:null:null})}return"ActivityResult"===t.type?[]:"ActivityAttempt"===t.type?[]:void e({errors:[{meta:{}}]})})).filter(function(t){return!!t});e({meta:{},data:o})},t.prototype.send=function(t,e){var n=this;t.data.forEach(function(t){var i;if("ActivityState"===t.type||"ActivityAttempt"===t.type){i={id:t.activityId,request:t,sessionId:n.sessionId},n.api.setItem(n.addStoragePrefix(i.id),JSON.stringify(i))}else e({errors:[{meta:{}}]})}),e&&e({meta:{},data:[]})},t.prototype.addStoragePrefix=function(t){return"outcomes_api_"+t},t}();e.default=r}),define("vst-score-utils",[],function(){function t(){function t(t){for(var e=0;e<o.length;e++)o[e].onError(t)}function e(e,r){if(r&&r.length){r=r.reverse();for(var s=0;s<o.length;s++){index=r.map(n).indexOf(o[s].location);var l=r[index];l&&l.location==o[s].location?(a("Function "+i+" returned object: "+JSON.stringify(l)),l.metadata=l.metadata||{},o[s].onSuccess(l.location,l.score,l.maxscore,JSON.parse(l.metadata),l.timestamp)):o[s].onError("score not found")}}else t(e&&e.length?e.message:"score not found")}function n(t){return t.location}var i="getScore",o=l;clearTimeout(c),c=null,l=[],locations=[];for(var r=0;r<o.length;r++)locations.push(o[r].location);try{VST.Book.getScores(locations,e)}catch(e){t(e.message)}}function e(){function t(t){if(t)e(t.message);else for(var o=0;o<i.length;o++)a("Function "+n+" saved object: "+JSON.stringify(i[o].data)),i[o].onSuccess()}function e(t){for(var e=0;e<i.length;e++)i[e].onError(t+": Score data not saved for "+i[e].data.location)}var n="reportScore",i=u;clearTimeout(h),h=null,u=[],data=[];for(var o=0;o<i.length;o++)data.push(i[o].data);try{VST.Book.reportScores(data,t)}catch(t){e(t.message)}}function n(t){return!!t}function i(t){return!(!t||"function"!=typeof t)}function o(t){return"number"==typeof t&&t%1==0}function r(t){return"number"==typeof t&&t%1==0}function s(t){return!t||"object"==typeof t}function a(t){d&&console.log(t)}"undefined"==typeof console&&(console={log:function(){}});var l=[],c=null,u=[],h=null,d=!1;return{setDebug:function(t){d=t},scoreApiExists:function(){try{return window.VST.Book.getScores&&window.VST.Book.reportScores}catch(t){return!1}},getScore:function(e,o,r){a("Function getScore called");var s=function(){var t=[];return n(e)||t.push("Location must be passed to function"),i(o)||t.push("Callback onError does not exist or is not a function"),i(r)||t.push("Callback onSuccess does not exist or is not a function"),t}();if(s.length>0)return alert("Function parameter errors encountered:\n"+s.join("\n")),void o("Parameters not formatted correctly: Score retrieval not attempted");l.push({location:e,onError:o,onSuccess:r}),clearTimeout(c),c=setTimeout(t,500)},reportScore:function(t,l,c,d,p,f){function g(t){return t&&"function"==typeof t||(t=function(){}),t}a("Function reportScore called"),f=g(f),p=g(p);var m=function(){var e=[];return n(t)||e.push("No location passed to function"),o(l)||e.push("No score number passed to function"),r(c)||e.push("No maxscore number passed to function"),d&&!s(d)&&e.push("Metadata passed to function must be an object"),i(p)||e.push("Callback onError does not exist or is not a function"),e}();if(m.length>0)return alert("Function parameter errors encountered:\n"+m.join("\n")),void p("Parameters not formatted correctly: Score retrieval not attempted");var v=function(){var e={};return e.location=t,e.score=l,e.maxscore=c,d&&"object"==typeof d&&(e.metadata=JSON.stringify(d)),e}();u.push({data:v,onError:p,onSuccess:f}),clearTimeout(h),h=setTimeout(e,500)}}});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/backends/BackendVSTBookAPI",["require","exports","lodash","vst-score-utils","./Backend","./BackendTypes","../Log","../utils/PathUtils"],function(t,e,n,i,o,r,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(e){var n=this;return s.log("BackendVSTBookAPI created"),n=t.call(this)||this,i.setDebug(e),n.attributes.add(r.BackendAttribute.canPersistState),n}return __extends(e,t),e.hasAPI=function(){return i.scoreApiExists()},e.prototype.initialize=function(){return new Promise(function(t,e){try{var i,o=Date.now(),r=function(){s.log("BackendVSTBookAPI looking for VST.Book.getScores"+(Date.now()-o)+"ms");var e=a.PathUtils.resolveNS(window,"VST.Book.getScores");n.isFunction(e)?(clearInterval(i),s.log("BackendVSTBookAPI found VST.Book.getScores"),t(!0)):Date.now()-o>3e3&&(s.log("BackendVSTBookAPI VST.Book.getScores NOT found after 3 secs"),clearInterval(i),t(!1))};i=setInterval(r,250)}catch(e){s.log("BackendVSTBookAPI waiting for init got exception: "+e.message),t(!1)}})},e.prototype.loadStateRequest=function(t){s.log("BackendVSTBookAPI load state request");var e=0,n=[];return new Promise(function(o,r){function a(){++e===t.length&&o(n.length?n:null)}for(var l=0,c=t;l<c.length;l++){var u=c[l];i.getScore(u,function(t){s.log(t),a(),-1===t.toLowerCase().indexOf("not found")&&r(new Error("Unable to load state"))},function(t,e,i,o,r){n.push(o),a()})}})},e.prototype.saveStateRequest=function(t){if(console.log("BackendVSTBookAPI save state request"),t.length<1)return Promise.resolve();var e=0;return new Promise(function(n,o){for(var r=0,s=t;r<s.length;r++){var a=s[r];i.reportScore(a.id,0,0,a,function(){o(new Error("Unable to save state"))},function(){e++===t.length&&n()})}})},e}(o.default);e.default=l}),define("vsef/backends/BackendFactory",["require","exports","../Log","./BackendTypes","../utils/Environment","./Backend","./BackendOutcomesAPI","./BackendOutcomesAPISimulator","./BackendVSTBookAPI"],function(t,e,n,i,o,r,s,a,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(){n.error("Cannot instantiate BackendFactory")}return t.create=function(e){var n;return n=e?e.backends:{localStorage:!1,EPUBEducationOutcomesAPI:!1,VSTBookAPI:!1,EPUBEducationOutcomesAPISimulator:!1,VCSEditorOutcomesAPISimulator:!1},n.EPUBEducationOutcomesAPI&&(o.Environment.isBookshelf||o.Environment.isScoreCenter)&&s.default.hasAPI()?new s.default:n.VSTBookAPI&&o.Environment.isBookshelf&&l.default.hasAPI()?new l.default(!!e&&e.isDebug):o.Environment.isVcsEditor&&n.VCSEditorOutcomesAPISimulator?t.createOutcomesAPISimulator(i.SimulatorType.SessionStorage):!n.EPUBEducationOutcomesAPISimulator||o.Environment.isBookshelf||o.Environment.isCrossDomainIframe?new r.default:t.createOutcomesAPISimulator(i.SimulatorType.LocalStorage)},t.createOutcomesAPISimulator=function(t){return a.default.canCreate(t)?(a.default.attachSimulator(new a.default(t)),new s.default):new r.default},t}();e.default=c});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("vsef/AttemptCounter",["require","exports","./Observable"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n){var i=t.call(this)||this;return i.maxAttempts=e,i.numAttempts=void 0===n?0:n,i}return __extends(e,t),e.prototype.makeAttempt=function(){return this.numAttempts++,this},e.prototype.reset=function(){return this.numAttempts=0,this},e.prototype.update=function(t){return this.numAttempts=t,this},e.prototype.clone=function(t){return void 0===t&&(t=!1),new e(this.maxAttempts,t?this.numAttempts:0)},Object.defineProperty(e.prototype,"total",{get:function(){return this.numAttempts},set:function(t){this.numAttempts=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"areExhausted",{get:function(){return this.maxAttempts!==e.INFINITE_TRIES&&this.numAttempts>=this.maxAttempts},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"areInfinite",{get:function(){return this.maxAttempts===e.INFINITE_TRIES},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remaining",{get:function(){return this.areInfinite?e.INFINITE_TRIES:Math.max(this.maxAttempts-this.numAttempts,0)},enumerable:!0,configurable:!0}),e.INFINITE_TRIES=-1,__decorate([n.observable],e.prototype,"numAttempts",void 0),e}(n.Observable);e.AttemptCounter=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("editorsRoot/model/ScreenEditorModel",["require","exports","vsef/Log","vsef/EngineModel","./ScreenBlockModel","vsef/EventDispatcher","vsef/Observable","vsef/Types","vsef/backends/BackendTypes","vsef/contexts/Context","vsef/backends/BackendFactory","vsef/AttemptCounter","vsef/Log","vsef/Flags"],function(t,e,n,i,o,r,s,a,l,c,u,h,d,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.AllFlags="allflags"]="AllFlags",t[t.MyFlags="myflags"]="MyFlags"}(e.FlagDisplayModeType||(e.FlagDisplayModeType={}));var f=function(t){function e(e,i){var o=t.call(this)||this;return n.note("created ScreenEditorModel"),o.isScoredScreen=!1,o.parentEditor=e,o.isPrerendering=e.isPrerendering,o.isPrerendered=e.isPrerendered,o.flagsEnabled=e.flagsEnabled,o.showScreenHeader=e.showScreenHeader,o.userId=e.getUserId(),o.config=i,o.id=e.screenID,o.onAlert=new r.EventDispatcher(o),
o.onModelReady=new r.EventDispatcher(o),o.onReset=new r.EventDispatcher(o),o.onScreenReady=new r.EventDispatcher(o),o.isLoading=!0,o.attempts=new h.AttemptCounter(-1),o.listenTo(o.onHighlightedBlockIndexChange,o.highlightedBlockChange),o.listenTo(e.onFlagAssignmentChange,o.flagAssignmentChange),o.listenTo(e.onFlagStatusChange,o.flagStatusChange),o.listenTo(e.onSetFlagsDisplayModeChange,o.flagsDisplayModeChange),o.listenTo(o.parentEditor.onSetDisplayMode,o.displayModeChange),o.listenTo(o.onModeChange,o.screenDisplayModeChange),o.silently(function(){o.mode=e.mode}),o.createBackend(),o}return __extends(e,t),Object.defineProperty(e.prototype,"highlightedBlock",{get:function(){return this.blocks[this.highlightedBlockIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedBlock",{get:function(){return this.blocks[this.selectedBlockIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usesMath",{get:function(){return this.blocks.some(function(t){return t.usesMath})},enumerable:!0,configurable:!0}),e.prototype.parse=function(){var t=this;return this.readData().then(function(){return t.requestState().catch(function(e){return d.error(e),t.onAlert.trigger("We are unable to display your previous work at this time. Please try again later.",{limit:1}),Promise.resolve()})}).then(function(){return t.ready()})},e.prototype.checkIsEmpty=function(){this.isEmpty=void 0===this.blocks||0===this.blocks.length},e.prototype.blockWithID=function(t){for(var e=0,n=this.blocks;e<n.length;e++){var i=n[e];if(i.id===t)return i}return null},e.prototype.insertBlockAt=function(t,e){var n=this;return new Promise(function(e,i){n.parentEditor.createBlock().then(function(i){if(!i)return void e(null);var o=n.getBlockSequenceXmlData(t,i);n.parentEditor.insertBlock(o,i).then(function(t){if(t){var o=n.createBlockModel(i);e(o)}else e(null)})})})},e.prototype.duplicateBlockAt=function(t){var e=this,n=this.blocks[t];return new Promise(function(t,i){e.parentEditor.duplicateBlock(n.getClonableBlockData()).then(function(n){if(n){var i=e.createBlockModel(n);t(i)}else t(null)})})},e.prototype.deleteBlock=function(t){var e=this.blocks[t];this.removeBlock(t),this.parentEditor.deleteBlock(e.id,this.getBlockSequenceXmlData())},e.prototype.removeBlock=function(t){this.highlightedBlockIndex=-1,this.selectedBlockIndex=-1,this.blocks[t].isEditing=!1,this.blocks.splice(t,1),this.onBlocksChange.trigger(),this.numberScreenBlocks()},e.prototype.swapBlocks=function(t,e){var n=this.getBlockSequenceXmlData(),i=this.blocks[t];this.blocks.splice(t,1),this.blocks.splice(e,0,i),this.numberScreenBlocks();var o=this.getBlockSequenceXmlData();o!==n&&this.parentEditor.setScreenXmlData(o)},e.prototype.stopEditing=function(){for(var t=0,e=this.blocks;t<e.length;t++){var n=e[t];n.editorIsLoading=!1,n.isEditing=!1}},e.prototype.reset=function(t){for(var e=0,n=this.blocks;e<n.length;e++){var i=n[e];!function(t){t.defer(function(){t.reset()})}(i)}this.isSilent()||this.onReset.trigger()},e.prototype.numberScreenBlocks=function(){},e.prototype.setState=function(t){},e.prototype.getState=function(){return null},e.prototype.readData=function(){var t=this;n.note("ScreenEditorModel parse activity data");var e=[];return Promise.resolve().then(function(){for(var n=0;n<t.parentEditor.blocks.length;n++){var i=t.createBlockModel(t.parentEditor.blocks[n]);e.push(i)}return t.title=t.parentEditor.title,t.silently(function(){t.blocks=e}),Promise.resolve()})},e.prototype.requestState=function(){var t=this;return this.backend&&this.parentEditor.mode===a.ScreenEditorMode.modePreview?this.backend.loadState(this.blocks.map(function(t){return t.id})).then(function(e){if(e)for(var n=0;n<e.length;n++)t.blocks[n].context.blockAPI.state=e[n];return Promise.resolve()}):Promise.resolve()},e.prototype.createBlockModel=function(t){var e=new o.ScreenBlockModel(this.parentEditor,t,this.userId,this.config);return e.context.parentAttributes={kind:"ContentScreen",attributes:new p.Flags([c.ParentAttribute.HandlesAlerts])},e},e.prototype.ready=function(){return this.onModelReady.trigger(),this.checkIsEmpty(),this.isLoading=!1,this.listenTo(this.parentEditor.onSetDisplayMode,this.screenDisplayModeChange),Promise.resolve()},e.prototype.createBackend=function(){this.backend=u.default.create(this.config)},e.prototype.screenDisplayModeChange=function(){this.mode===a.ScreenEditorMode.modePreview&&this.stopEditing();var t=this.backend;t&&(this.mode===a.ScreenEditorMode.modePreview?t.enableAttributes(l.BackendAttribute.canPersistState,l.BackendAttribute.canScore):(t.disableAttributes(l.BackendAttribute.canPersistState,l.BackendAttribute.canScore),this.reset()))},e.prototype.displayModeChange=function(){this.mode=this.parentEditor.mode},e.prototype.highlightedBlockChange=function(){for(var t=0,e=this.blocks;t<e.length;t++){e[t].isEditing=!1}},e.prototype.flagAssignmentChange=function(t,e){this.selectedBlock.setFlagData(e,this.userId)},e.prototype.flagStatusChange=function(t,e){this.selectedBlock.setFlagData(e,this.userId)},e.prototype.flagsDisplayModeChange=function(){this.flagsDisplayMode=this.parentEditor.flagsDisplayMode},e.prototype.getBlockSequence=function(t,e){for(var n=[],i=0,o=this.blocks;i<o.length;i++){var r=o[i];n.push(r.id)}return void 0!==t&&n.splice(t,0,e.id),n},e.prototype.getBlockSequenceXmlData=function(t,e){return this.blockSequenceToXmlData(this.getBlockSequence(t,e))},e.prototype.blockSequenceToXmlData=function(t){var e="";if(0===t.length)e="<blocks>",this.parentEditor.screenSettingsXml&&(e+=this.parentEditor.screenSettingsXml),e+="</blocks>";else{e="<blocks>",this.parentEditor.screenSettingsXml&&(e+=this.parentEditor.screenSettingsXml);for(var n=0,i=t;n<i.length;n++){e+='<block refid="'+i[n]+'"/>'}e+="</blocks>"}return e},__decorate([s.observable],e.prototype,"blocks",void 0),__decorate([s.observable],e.prototype,"highlightedBlockIndex",void 0),__decorate([s.observable],e.prototype,"selectedBlockIndex",void 0),__decorate([s.observable],e.prototype,"insertIndex",void 0),__decorate([s.observable],e.prototype,"isEmpty",void 0),__decorate([s.observable],e.prototype,"showFlagsEditor",void 0),__decorate([s.observable],e.prototype,"flagsDisplayMode",void 0),__decorate([s.observable],e.prototype,"isLoading",void 0),__decorate([s.observable],e.prototype,"mode",void 0),e}(i.EngineModel);e.ScreenEditorModel=f});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("editorsRoot/view/ScreenBlockView",["require","exports","jquery","vsef/View","vsef/Log","vsef/utils/DisplayUtils","vsef/utils/DisplayUtils","vsef/utils/MiscUtils","vsef/EventDispatcher"],function(t,e,n,i,o,r,s,a,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(e){function i(t,n,i,r){var s=this;return o.note("ScreenBlockView"),s=e.call(this,t,n,i,r)||this,s.onBlockChangeSize=new l.EventDispatcher(s),s.onBlockInitialized=new l.EventDispatcher(s),s.listenTo(t.onIsEditingChange,s.renderIsEditing),s.listenTo(t.onHighlightedChange,s.renderHighlighted),s.listenTo(t.onFlagStatusChange,s.renderFlagStatus),s.listenTo(t.onAssignedChange,s.renderAssigned),s.listenTo(t.onEditorIsLoadingChange,s.renderEditorIsLoading),s}return __extends(i,e),i.prototype.getEvents=function(){return{"click .block-toolbar .edit-btn":this.blockEditBtnClick,"click .block-toolbar .done-btn":this.blockDoneBtnClick}},i.prototype.positionGotoTopBtn=function(t){if(0===this.$el.parent().length)return!1;var e=n(window).scrollTop(),i=this.$(".block-toolbar"),o=this.$el.offset().top,r=this.$el.outerHeight(),s=n(window).height(),a=this.$el.parent().offset().top;if(0===i.length)return!1;if(o-i.height()>e)return!1;var l=Math.min(o+r-e,r);if(l<0)return!1;var c=o-a+r-l/2;return c=l>s?e+s/2:o-a+r-l/2,c-=t.height()/2,c=Math.max(c,e-a),t.css("top",c+"px"),!0},i.prototype.scrollIntoView=function(){var t=new r.Rectangle(this.$el,s.RectExtentType.Outer);t.top-=this.$(".block-toolbar").height();t.height+=this.$(".block-toolbar").height()+20,this.model.parentEditor.scrollScreenEditorToRect(t)},i.prototype.render=function(){return e.prototype.render.call(this),this.model.renderable&&this.renderEngine(),this.model.parentEditor.isPrerendering||(this.renderFlagStatus(),this.renderAssigned()),this},i.prototype.renderEngine=function(){var e=this;this.listenTo(this.model.context.onBlockApiInitialized,this.blockApiInitialized),this.model.context.$el=this.$(".block-content"),this.model.context.init().then(function(){t([e.model.context.engineCode],function(t){e.engine=new t[e.model.context.engineClass+"Engine"](e.model.context)})})},i.prototype.renderIsEditing=function(){if(this.updateToolbar(),this.model.isEditing){this.$el.addClass("editing"),this.engine&&this.engine.destroy(),this.$(".block-content").empty().removeClass().addClass("block-content");var t={contentsLanguage:this.model.config.lang,contentsLangDirection:this.model.config.dir};this.model.parentEditor.editBlock(this.$(".block-content").get(0),this.model.id,this.model.activityData,t),this.model.editorIsLoading=!0,this.model.editingCancelled=!0,this.model.context.blockAPI.state=null}else this.$el.removeClass("editing"),this.model.parentEditor.doneEditBlock(),this.model.editingCancelled||(this.model.activityData=this.model.parentEditor.getEditedContent(),this.model.context.activityData=this.model.activityData),this.model.renderable=!0,this.renderEngine();this.model.parentEditor.onBlockEditorResized.trigger()},i.prototype.renderHighlighted=function(){this.updateToolbar(),this.$el.toggleClass("highlighted",this.model.highlighted)},i.prototype.renderFlagStatus=function(){this.$el.removeAttr("data-status"),this.model.flagStatus&&this.$el.attr("data-status",this.model.flagStatus)},i.prototype.renderAssigned=function(){this.$el.toggleClass("assigned",this.model.assigned)},i.prototype.renderEditorIsLoading=function(){this.$el.toggleClass("loading",this.model.editorIsLoading),this.$(".done-btn").prop("disabled",this.model.editorIsLoading),this.model.editorIsLoading?(this.scrollIntoView(),this.inputDetector=new a.InputDetector,this.inputDetector.start()):(this.inputDetector.inputDetected||this.model.editingCancelled||this.scrollIntoView(),this.inputDetector.stop(),this.inputDetector=void 0)},i.prototype.updateToolbar=function(){this.$(".edit-btn").toggleClass("hidden",this.model.isEditing),this.$(".done-btn").toggleClass("hidden",!this.model.isEditing)},i.prototype.addActivityIds=function(){(this.model.isScorable||this.model.isSavable)&&this.$(".block-content").attr("data-activityId",this.model.id)},i.prototype.blockEditBtnClick=function(t){this.model.isEditing=!0},i.prototype.blockDoneBtnClick=function(t){this.model.isEditing=!1},i.prototype.engineChangeSize=function(){this.onBlockChangeSize.trigger()},i.prototype.engineInitialized=function(){this.model.parentEditor.isPrerendering&&this.model.isStatic&&this.$(".block-content").hasClass("empty")&&(this.$(".block-content").removeClass("empty"),this.$el.removeClass("rendered")),this.onBlockInitialized.trigger()},i.prototype.blockApiInitialized=function(){this.listenTo(this.model.context.blockAPI.onEngineChangeSize,this.engineChangeSize),this.listenTo(this.model.context.blockAPI.onEngineInitialized,this.engineInitialized),this.stopListening(this.model.context.onBlockApiInitialized),this.addActivityIds()},i}(i.View);e.ScreenBlockView=c});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("editorsRoot/model/InsertControlsModel",["require","exports","vsef/Model","vsef/Observable","vsef/EventDispatcher"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r;!function(t){t[t.AddBlock=0]="AddBlock",t[t.SplitScreen=1]="SplitScreen",t[t.MoveBlock=2]="MoveBlock"}(r=e.InsertControlsState||(e.InsertControlsState={}));var s=function(t){function e(e,n){var i=t.call(this)||this;return i._index=e,i._canSplitScreen=n,i.state=r.AddBlock,i.onAddBlock=new o.EventDispatcher(i),i.onSplitScreen=new o.EventDispatcher(i),i.hidden=!1,i}return __extends(e,t),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},set:function(t){this._index=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canSplitScreen",{get:function(){return this._canSplitScreen},enumerable:!0,configurable:!0}),__decorate([i.observable],e.prototype,"state",void 0),__decorate([i.observable],e.prototype,"hidden",void 0),e}(n.Model);e.default=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("editorsRoot/view/InsertControlsView",["require","exports","vsef/View","../model/InsertControlsModel"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n,i){var o=t.call(this,e,n,i)||this;return o.listenTo(e.onStateChange,o.onStateChange),o.listenTo(e.onHiddenChange,o.onHiddenChange),o}return __extends(e,t),e.prototype.getEvents=function(){return{"click .insert-indicator":this.addBlockClick,"click .split-screen-btn":this.splitScreenClick,"mouseenter .split-screen-btn":this.splitButtonMouseEnter,"mouseleave .split-screen-btn":this.splitButtonMouseLeave}},e.prototype.render=function(){return t.prototype.render.call(this),this.model.canSplitScreen&&this.$el.addClass("can-split-screen"),this.onStateChange(this.model,this.model.state),this},e.prototype.onStateChange=function(t,e){switch(e){case i.InsertControlsState.SplitScreen:this.$el.removeClass("add-block move-block"),this.$el.addClass("split-screen");break;case i.InsertControlsState.MoveBlock:this.$el.removeClass("add-block split-screen"),this.$el.addClass("move-block");break;default:this.$el.removeClass("move-block split-screen"),this.$el.addClass("add-block")}},e.prototype.onHiddenChange=function(t,e){if(e)return void this.hide();this.show()},e.prototype.splitScreenClick=function(t){this.model.onSplitScreen.trigger(t)},e.prototype.addBlockClick=function(t){this.model.onAddBlock.trigger(t)},e.prototype.splitButtonMouseEnter=function(){this.model.state=i.InsertControlsState.SplitScreen},e.prototype.splitButtonMouseLeave=function(){this.model.state=i.InsertControlsState.AddBlock},e}(n.View);e.default=o});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("editorsRoot/view/ScreenEditorView",["require","exports","jquery","lodash","vsef/View","vsef/Log","vsef/utils/DisplayUtils","./ScreenBlockView","vsef/utils/MiscUtils","vsef/utils/Keyboard","vsef/Types","vsef/EventDispatcher","vsef/EngineComms","vsef/utils/PathUtils","vsef/utils/Environment","vsef/contexts/Context","./InsertControlsView","../model/InsertControlsModel"],function(t,e,n,i,o,r,s,a,l,c,u,h,d,p,f,g,m,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var y=function(t){function e(e,o,s,a,l,u){var d=this;return r.note("ScreenEditorView"),d=t.call(this,e,o,s)||this,d.onPrint=new h.EventDispatcher(d),d.parentEditor=e.parentEditor,d.rootUI=a,d.inEditMode=!d.parentEditor.isPrerendered&&!d.parentEditor.isPrerendering,d.config=l,d.blockInitializedCount=0,d.insertControlsModel=d.createInsertControlsModel(),d.insertControlsView=new m.default(d.insertControlsModel,d.templates,"screen-insert-toolbar-template"),d.insertControlsView.render(),d.insertControlsModel.hidden=!0,d.cfiMap=u,d.listenTo(e.onModelReady,d.renderBlocks),d.listenTo(e.onAlert,d.renderAlert),d.createReadyListener(),d.rootUI.enableImageZooms(!0),d.inEditMode&&(d.listenTo(d.parentEditor.onFlagEditorClosed,d.flagEditorClosed),d.listenTo(d.parentEditor.onBlockEditorReady,d.blockEditorReady),d.listenTo(d.parentEditor.onBlockEditorResized,d.blockEditorResized),d.listenTo(e.onModeChange,d.screenDisplayModeChange),d.listenTo(e.onSelectedBlockIndexChange,d.renderSelectedBlockIndex),d.listenTo(e.onInsertIndexChange,d.renderInsertBlockIndexChange),d.listenTo(e.onIsEmptyChange,d.renderEmptyChange),d.listenTo(e.onShowFlagsEditorChange,d.renderShowFlagsEditorChange),d.listenTo(e.onFlagsDisplayModeChange,d.renderflagsDisplayModeChange),d.listenTo(d.insertControlsModel.onAddBlock,d.insertControlAddBlock),d.listenTo(d.insertControlsModel.onSplitScreen,d.splitScreen),d.pressOutside=d.pressOutside.bind(d),d.monitorBlockDragHandler=d.monitorBlockDragHandler.bind(d),d.dragBlockEndHandler=d.dragBlockEndHandler.bind(d),d.scrollTimerTick=d.scrollTimerTick.bind(d),n(window).resize(function(){d.handleResize()}),n(window).scroll(function(){d.handleScroll()}),n(document).keydown(i.bind(function(t){t.keyCode===c.Keyboard.F7&&t.ctrlKey&&t.shiftKey&&(this.$versionText.toggleClass("show"),t.preventDefault())},d)),d.rootUI.enableImageZooms(!1)),d}return __extends(e,t),Object.defineProperty(e.prototype,"$editorEl",{get:function(){return this._$editorEl},enumerable:!0,configurable:!0}),e.prototype.getEvents=function(){return this.inEditMode?{"mousedown .block-toolbar .move-btn":this.dragBlockStartHandler,"touchstart .block-toolbar .move-btn":this.dragBlockStartHandler,"click .block-toolbar .delete-btn":this.blockDeleteClick,"click .duplicate-block-btn":this.duplicateBlockClick,"click .block-toolbar .flags-btn":this.flagsBtnClick,"click .block, .block .flag-indicator":this.blockClick,"mouseenter .gap":this.gapMouseEnter,"mouseleave .gap":this.gapMouseLeave,"click .goto-top-btn":this.gotoTopBtnClick,"click a[href^='vcslink:']":this.gotoPageLinkClick,"click .add-block-btn":this.addBlockClick}:t.prototype.getEvents.call(this)},e.prototype.render=function(){return t.prototype.render.call(this),this._$editorEl=this.$(".editor-layout"),this.$blocksHolder=this.$(".screen__content"),this.$blockToolbar=this.$(".block-toolbar"),this.$blockToolbar.detach(),this.$blockToolbar.addClass("u-hidden"),this.$dragProxy=this.$(".drag-proxy"),this.$dragProxy.detach(),this.$addBlockBtn=this.$(".add-block-btn"),this.$flagsHolder=this.$(".flags-holder"),this.$gotoTopBtn=this.$(".goto-top-btn"),this.gotoTopBtnTitle=this.$gotoTopBtn.attr("title"),this},e.prototype.createReadyListener=function(){this.listenTo(this.model.onScreenReady,this.screenReady)},e.prototype.renderBlocks=function(){this.stopListening(this.model.onModelReady,this.renderBlocks),this.screenDisplayModeChange(),this.blockViews=[];var t,e=this.parentEditor.isPrerendered;if(e&&(t=this.$el.find(".block"),t.length!==this.model.blocks.length))throw new Error("ScreenEditorView renderBlocks error: mismatch between rendered blocks and screen block data ");this.blocksToLoad=this.model.blocks.length;for(var i=0;i<this.model.blocks.length;i++){var o=this.model.blocks[i];o.context.backend=this.model.backend,o.context.rootUI=this.rootUI,o.context.cfiMap=this.cfiMap,o.context.configData=o.config.getBaseData(),f.Environment.isPrintScreenFrame()&&o.context.attributes.add(g.ContextAttribute.DynamicPrintScreen);var r=this.createScreenBlockView(o);this.listenTo(o.onIsEditingChange,this.blockIsEditingChange),this.listenTo(r.onBlockChangeSize,this.blockChangeSize),this.listenTo(r.onBlockInitialized,this.blockInitialized);for(var s=0,a=this.model.blocks;s<a.length;s++){var l=a[s];this.listenTo(l.onBlockAlert,this.renderAlert)}if(e)r.setElement(t.eq(i)),r.renderEngine();else{(this.$(".screen__content").length?this.$(".screen__content"):n(this.el)).append(r.render().$el)}this.blockViews.push(r)}e||this.parentEditor.isPrerendering||this.renderGaps(),0===this.blocksToLoad&&this.model.onScreenReady.trigger()},e.prototype.createScreenBlockView=function(t){return new a.ScreenBlockView(t,this.templates,"screen-block-edit-template",void 0)},e.prototype.screenReady=function(){var t=this;if(this.prerender(),this.removeScreenWaiting(),f.Environment.isReadOnly()&&this.$el.addClass("readonly"),f.Environment.isUnitTest&&window.setTimeout(function(){t.$el.addClass("initialized")}),f.Environment.isPrintScreenFrame()){var e=new d.EngineComms(window);window.setTimeout(function(){e.sendEngineInit(p.PathUtils.getQueryString("id"))},100)}},e.prototype.beforeScreenReady=function(){var t=this;this.cfiMap&&this.cfiMap.init(),this.model.isPrerendered?this.model.onScreenReady.trigger():this.updateMath().then(function(){t.model.onScreenReady.trigger()})},e.prototype.blockInitialized=function(t){this.stopListening(t.onBlockInitialized),++this.blockInitializedCount!==this.blocksToLoad&&0!==this.blocksToLoad||(r.log("screen-init-time="+(Date.now()-this.model.startupTime)),this.beforeScreenReady())},e.prototype.splitScreen=function(t,e){var n=this;e.stopPropagation();var i=this.model.insertIndex,o=this.model.blocks[i],r=this.parentEditor.title.trim();r.match(/^.* - (Screen Break)$/)||(r+=" - Screen Break"),this.parentEditor.showSplitScreenDialog(r).then(function(t){n.parentEditor.splitScreen(o.id,t).then(function(){for(var t=n.blockViews.length-1;t>=0&&!(i>t);t--){var e=n.blockViews[t],o=e.$el.closest(".block"),r=o.index(".block");n.removeBlockGaps(o,r),n.removeBlock(o),n.model.removeBlock(r)}n.model.checkIsEmpty()}).catch(function(t){console.error(t)})})},e.prototype.createInsertControlsModel=function(){return new v.default(-1,!0)},e.prototype.renderInsertBlockIndexChange=function(){if(-1===this.model.insertIndex)this.insertControlsModel.hidden=!0;else{this.$(".gap").eq(this.model.insertIndex).append(this.insertControlsView.$el),this.insertControlsModel.hidden=!1}},e.prototype.renderSelectedBlockIndex=function(){var t=this.model.selectedBlockIndex;this.$(".block").removeClass("selected"),this.model.showFlagsEditor=!1,this.$gotoTopBtn.removeClass("visible fadein-fast fadeout-fast"),this.$gotoTopBtn.prop("disabled",!0).removeAttr("title"),-1===this.model.selectedBlockIndex?(this.$blockToolbar.addClass("u-hidden"),this.$blockToolbar.detach()):(this.$blockToolbar.find(".block-label").text(this.model.selectedBlock.info.label),this.$selectedBlock=this.$(".block").eq(t),this.$selectedBlock.addClass("selected"),this.$selectedBlock.prepend(this.$blockToolbar),this.$blockToolbar.css("margin-left",-this.$blockToolbar.width()/2+"px"),this.$blockToolbar.css("left","50%"),this.$blockToolbar.removeClass("u-hidden"),this.alignFlagsHolder(),this.alignGotoTopBtn())},e.prototype.renderEmptyChange=function(){this.$el.toggleClass("empty",this.model.isEmpty),this._$editorEl.toggleClass("empty",this.model.isEmpty)},e.prototype.renderShowFlagsEditorChange=function(){this._$editorEl.toggleClass("show-flags-editor",this.model.showFlagsEditor),this.model.showFlagsEditor?(this.parentEditor.openFlagEditor(this.$flagsHolder.get(0),this.model.selectedBlock.id),this.alignFlagsHolder()):this.parentEditor.closeFlagEditor(this.$flagsHolder.get(0))},e.prototype.renderflagsDisplayModeChange=function(){this._$editorEl.attr("data-flags-display-mode",this.model.flagsDisplayMode)},e.prototype.renderGaps=function(){var t=this;this.$(".insert-container").detach(),this.$(".gap").remove();var e=this.templates.getText("screen-block-gap-template");this.$(".block").each(function(i,o){var r=n(o);0===i&&r.before(n(e).addClass("first-gap")),r.after(n(e)),i===t.model.blocks.length-1&&r.next().addClass("last-gap")}),this.$blocksHolder.append(this.$addBlockBtn)},e.prototype.screenDisplayModeChange=function(){if(!this.parentEditor.isPrerendered){var t=this.parentEditor.mode===u.ScreenEditorMode.modePreview;this.$el.toggleClass("preview",t),this._$editorEl.toggleClass("preview",t),n("body").toggleClass("preview",t),this.rootUI.enableImageZooms(t),this.alignGotoTopBtn()}},e.prototype.flagEditorClosed=function(){this.model.showFlagsEditor=!1},e.prototype.blockEditorReady=function(){this.model.selectedBlock.editingCancelled=!1,this.model.selectedBlock.editorIsLoading=!1},e.prototype.blockEditorResized=function(){this.alignGotoTopBtn()},e.prototype.blockChangeSize=function(){this.alignGotoTopBtn()},e.prototype.removeScreenWaiting=function(){this.rootUI.hideLoadingOverlay()},e.prototype.prerender=function(){if(this.parentEditor.isPrerendering){var t=n(".screen")[0].outerHTML.replace(/xmlns="http:\/\/www.w3.org\/1999\/xhtml"/,""),e=n(".overlay-root")[0].outerHTML.replace(/xmlns="http:\/\/www.w3.org\/1999\/xhtml"/,"");l.MiscUtils.callPrerenderUtil("prerender",{html:t+e,activityData:this.model.parentEditor.activityData.replace(/<\?.*\?>/gi,""),metadata:{lang:this.config.lang,dir:this.config.dir}})}},e.prototype.blockIsEditingChange=function(t){var e=this;if(this._$editorEl.toggleClass("editing-block",t.isEditing),!t.isEditing){var n=this.blockViews[this.model.blocks.indexOf(t)],i=function(){e.updateMath(n.el),e.model.numberScreenBlocks(),e.blockInitialized(n),e.stopListening(n.onBlockInitialized,i)};this.listenTo(n.onBlockInitialized,i)}},e.prototype.blockDeleteClick=function(t){var e=this,i=this.templates.get("screen-text-confirm-block-delete")();this.parentEditor.confirm(i,"Delete").then(function(i){if(i){var o=n(t.target).closest(".block"),r=o.index(".block");e.removeBlockGaps(o,r),e.model.deleteBlock(r),e.removeBlock(o)}})},e.prototype.removeBlock=function(t){var e=this;t.addClass("deleting"),t.slideUp(350,"linear",function(){t.remove(),e.model.checkIsEmpty(),e.model.selectedBlockIndex=-1})},e.prototype.removeBlockGaps=function(t,e){e===this.model.blocks.length-1?t.prev().detach():t.next().detach()},e.prototype.insertControlAddBlock=function(t,e){var i=n(e.currentTarget),o=i.closest(".gap").index(".gap");this.insertBlock(o)},e.prototype.addBlockClick=function(t){this.insertBlock(this.model.blocks.length)},e.prototype.insertBlock=function(t){var e=this;this.model.insertBlockAt(t).then(function(n){if(n){var i=e.createScreenBlockView(n);e.model.blocks.splice(t,0,n),e.blockViews.splice(t,0,i),e.addNewBlock(n,i,t)}})},e.prototype.duplicateBlockClick=function(){var t=this,e=n(event.target).closest(".block"),i=e.index(".block");this.model.blocks[i].isEditing=!1,this.model.duplicateBlockAt(i).then(function(e){if(e){var n=t.createScreenBlockView(e);i===t.model.blocks.length-1?(t.model.blocks.push(e),t.blockViews.push(n)):(t.model.blocks.splice(i+1,0,e),t.blockViews.splice(i+1,0,n)),t.addNewBlock(e,n,i+1),n.scrollIntoView()}})},e.prototype.addNewBlock=function(t,e,i){var o=this;t.context.backend=this.model.backend,t.context.rootUI=this.rootUI,t.context.cfiMap=this.cfiMap,t.context.configData=this.model.config.getBaseData(),this.listenTo(t.onIsEditingChange,this.blockIsEditingChange),t.renderable=!t.info.editable,this.listenTo(e.onBlockChangeSize,this.blockChangeSize),this.listenTo(e.onBlockInitialized,function(){o.blockInitialized(e),o.model.numberScreenBlocks()}),e.render(),i===this.model.blocks.length-1?this.$blocksHolder.append(e.$el):e.$el.insertBefore(this.$(".block").eq(i)),this.model.selectedBlockIndex=i,this.renderGaps(),this.model.checkIsEmpty(),t.info.editable&&(t.isEditing=!0),this.model.onBlocksChange.trigger(),n("html").one("mousedown",this.pressOutside)},e.prototype.flagsBtnClick=function(){this.model.showFlagsEditor=!0},e.prototype.dragBlockStartHandler=function(t){var e=this.$dragBlock=n(t.currentTarget).closest(".block");this.isTouch=void 0!==t.originalEvent.touches&&t.originalEvent.touches.length>0,e.next().remove(),e.addClass("dragging"),this.$blockToolbar.addClass("dragging"),e.prepend(this.$dragProxy),this._$editorEl.addClass("dragging"),this.dragStartIndex=this.$dragBlock.index(".block"),document.addEventListener(this.isTouch?"touchmove":"mousemove",this.monitorBlockDragHandler),document.addEventListener(this.isTouch?"touchend":"mouseup",this.dragBlockEndHandler),this.dragStartPos=e.offset(),this.dragPointerOffset={left:this.dragStartPos.left-t.pageX,top:this.dragStartPos.top-t.pageY},this.$blocksHolder.append(e),this.scrollMax=Math.max(n("body").outerHeight(!0)-n(window).height(),0),this.blockRects=this.scanBlockRects();var i=this.blockRects.pop();this.blockMinY=0,this.blockMaxY=i.top,this.setBlockDragPos(this.$dragBlock,{left:t.pageX+this.dragPointerOffset.left,top:t.pageY+this.dragPointerOffset.top}),this.$dragBlock.get(0).setCapture&&this.$dragBlock.get(0).setCapture(),this.monitorBlockDragHandler(t)},e.prototype.setBlockDragPos=function(t,e){this.$dragBlock.offset({left:e.left,top:Math.max(this.blockMinY,Math.min(e.top,this.blockMaxY))})},e.prototype.monitorBlockDragHandler=function(t){t.preventDefault();var e=t.pageX,i=t.pageY;this.isTouch&&(e=t.touches[0].pageX,i=t.touches[0].pageY),this.setBlockDragPos(this.$dragBlock,{left:e+this.dragPointerOffset.left,top:i+this.dragPointerOffset.top}),n(this.$(".gap").get(this.model.insertIndex)).removeClass("move-block"),this.updateScrolling(),this.updateInsertIndex(),this.insertControlsModel.state=v.InsertControlsState.MoveBlock,n(this.$(".gap").get(this.model.insertIndex)).addClass("move-block")},e.prototype.dragBlockEndHandler=function(t){t.preventDefault(),this.$dragBlock.get(0).releaseCapture&&this.$dragBlock.get(0).releaseCapture(),document.removeEventListener(this.isTouch?"touchmove":"mousemove",this.monitorBlockDragHandler),document.removeEventListener(this.isTouch?"touchend":"mouseup",this.dragBlockEndHandler),this.model.insertIndex<this.blockRects.length&&this.$dragBlock.insertBefore(this.$(".block").eq(this.model.insertIndex)),this.$dragBlock.removeClass("dragging"),this.$blockToolbar.removeClass("dragging"),this._$editorEl.removeClass("dragging"),this.$dragBlock.css({left:"auto",top:"auto"}),this.insertControlsModel.state=v.InsertControlsState.AddBlock,this.renderGaps(),this.stopScrollTimer(),this.$dragProxy.remove(),this.$dragBlock=null,this.dragStartIndex!==this.model.insertIndex&&(this.model.swapBlocks(this.dragStartIndex,this.model.insertIndex),l.MiscUtils.repositionArrayItem(this.blockViews,this.dragStartIndex,this.model.insertIndex),this.model.selectedBlockIndex=this.model.insertIndex),this.model.insertIndex=-1},e.prototype.updateInsertIndex=function(){var t=this.findInsertIndex(this.$dragBlock,this.blockRects);t>=this.blockRects.length?this.model.insertIndex=this.blockRects.length:this.model.insertIndex=t},e.prototype.findInsertIndex=function(t,e){var n,i=t.offset().top-this.dragPointerOffset.top;for(n=0;n<e.length;n++){if(i<e[n].centerY)return n}return n},e.prototype.updateScrolling=function(){if(this.$dragBlock){var t=Math.floor(this.$dragBlock.offset().top-this.$blockToolbar.height()-n(window).scrollTop());t<=10?(this.scrollDelta=-10,this.startScrollTimer()):t+this.$dragBlock.outerHeight(!0)>n(window).height()-20?(this.scrollDelta=10,this.startScrollTimer()):this.stopScrollTimer()}},e.prototype.startScrollTimer=function(){this.scrollTimer||(this.scrollTimer=setInterval(this.scrollTimerTick,25))},e.prototype.stopScrollTimer=function(){this.scrollTimer&&(clearInterval(this.scrollTimer),this.scrollTimer=null)},e.prototype.scrollTimerTick=function(){var t=n(window).scrollTop(),e=n(window).scrollTop()+this.scrollDelta;e=Math.max(e,0),e=Math.min(e,this.scrollMax);var i=this.$dragBlock.offset();i.top+=e-t,
this.updateInsertIndex(),this.setBlockDragPos(this.$dragBlock,i),n(window).scrollTop(e)},e.prototype.blockClick=function(t){var e=n(t.currentTarget),i=e.hasClass("flag-indicator"),o=this.$(".block").index(i?e.parent():e);this.model.selectedBlockIndex=o,i&&(this.model.showFlagsEditor=!0),n("html").one("mousedown",this.pressOutside)},e.prototype.pressOutside=function(t){var e=this.$gotoTopBtn.get(0)===t.target,i=n(t.target).hasClass("insert-indicator"),o=t.target===n("html").get(0),r=n(t.target).closest(".flag-simulator").length>0,s=this.$addBlockBtn.get(0)===t.target,a=this.findBlockClickIndex(t),l=this.model.selectedBlockIndex;if(this.model.selectedBlockIndex===a||(e||o||this.$dragBlock||r))n("html").one("mousedown",this.pressOutside);else{var c=-1!==l&&this.model.blocks[l].isEditing;this.model.stopEditing(),this.model.selectedBlockIndex=a,n("html").off("mousedown",this.pressOutside);var u=!1;if(i||s){var h=i?n(t.target).parent().index():n(t.target).index();u=this.$(".block").eq(l).index()<h}else u=-1!==a&&a>l;u&&c&&n(t.target).trigger("click")}},e.prototype.gapMouseEnter=function(t){var e=this.$(".gap").index(t.currentTarget);n(this.$(".gap").get(e)).addClass("has-hover"),this.model.insertIndex=e},e.prototype.gapMouseLeave=function(t){this.$(".gap").removeClass("has-hover"),this.model.insertIndex=-1},e.prototype.gotoTopBtnClick=function(){var t=this;this.$gotoTopBtn.removeClass("fadein-fast").addClass("fadeout-fast scrolling-up");var e=this.$blockToolbar.offset().top-5;n("html, body").stop().animate({scrollTop:e+"px"},{done:function(){t.$gotoTopBtn.removeClass("scrolling-up")}}),this.$gotoTopBtn.prop("disabled",!0).removeAttr("title")},e.prototype.gotoPageLinkClick=function(t){if(this.parentEditor.isPreviewMode){var e=n(t.currentTarget),i=e.attr("href"),o=i.split(":")[1];o&&this.parentEditor.navigateToScreen(o)}return!1},e.prototype.scanBlockRects=function(){var t=[];return this.$(".block").each(function(e){t.push(new s.Rectangle(n(this),s.RectExtentType.Outer))}),t},e.prototype.alignFlagsHolder=function(){this.$selectedBlock&&(this.$flagsHolder.css("top",this.$selectedBlock.position().top+"px"),this.config.isRTL?this.$flagsHolder.css("left",this.$selectedBlock.position().left-this.$flagsHolder.outerWidth(!0)+"px"):this.$flagsHolder.css("left",this.$selectedBlock.position().left+this.$selectedBlock.innerWidth()+"px"))},e.prototype.alignGotoTopBtn=function(){if(void 0!==this.model.selectedBlockIndex&&-1!==this.model.selectedBlockIndex){this.blockViews[this.model.selectedBlockIndex].positionGotoTopBtn(this.$gotoTopBtn)?this.$gotoTopBtn.hasClass("fadein-fast")||this.$gotoTopBtn.hasClass("scrolling-up")||(this.$gotoTopBtn.removeClass("fadeout-fast").addClass("visible fadein-fast"),this.$gotoTopBtn.prop("disabled",!1).attr("title",this.gotoTopBtnTitle)):this.$gotoTopBtn.hasClass("fadeout-fast")||(this.$gotoTopBtn.removeClass("fadein-fast").addClass("fadeout-fast"),this.$gotoTopBtn.prop("disabled",!0).removeAttr("title"))}},e.prototype.handleResize=function(){this.alignFlagsHolder(),this.alignGotoTopBtn()},e.prototype.handleScroll=function(){this.alignGotoTopBtn()},e.prototype.findBlockClickIndex=function(t){for(var e=this.$(".block"),i=n(t.target),o=0;o<e.length;o++){var r=e.eq(o);if(r.is(i)||1===r.has(i.get(0)).length)return o}return-1},e.prototype.updateMath=function(t){return!this.model.usesMath||this.parentEditor.isPrerendering?Promise.resolve(null):l.MiscUtils.updateMath(t,this.config.libraries.math.lib,this.config.libraries.math.scale)},e.prototype.renderAlert=function(t,e,n){n||(n={limit:1}),this.rootUI.showAlert(e,n)},e}(o.View);e.ScreenEditorView=y}),define("vsef/rootUI/RootUIComponent",["require","exports","jquery","./Types","../Flags"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n,i,r,s,a){this._attached=!1,this._visibile=!1,this.rendered=!1,this._view=t,this._model=e,this.importance=i,this.type=n,this._overlayType=r,this._scrollBehavior=s,this._flags=a||new o.Flags}return Object.defineProperty(t.prototype,"attached",{get:function(){return this._attached},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._model.visible},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollBehavior",{get:function(){return this._scrollBehavior},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overlayType",{get:function(){return this._overlayType},enumerable:!0,configurable:!0}),t.prototype.show=function(t){this._visibile||(this.flags.has(i.ComponentFlags.RestoreScrollPos)&&(this.oldScrollPos=n(window).scrollTop()),this._view.$el&&this.rendered?this._view.show():(this._view.render(),this.rendered=!0),t.append(this._view.$el),this._attached=!0,this._model.visible=!0)},t.prototype.hide=function(){this._view.hide(),this._model.visible=!1},t.prototype.remove=function(){this._view.remove(),this._model.visible=!1,this._attached=!1},t.prototype.afterRemove=function(){this.flags.has(i.ComponentFlags.RestoreScrollPos)&&n(window).scrollTop(this.oldScrollPos)},t}();e.default=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("vsef/rootUI/model/RootUIBaseModel",["require","exports","../../Model","../../EventDispatcher","../../Observable"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=t.call(this)||this;return e.visible=!1,e.onClose=new i.EventDispatcher(e),e.listenTo(e.onClose,e.onCloseTriggered),e}return __extends(e,t),e.prototype.close=function(t){this.onClose.trigger(t)},e.prototype.onCloseTriggered=function(){this.visible=!1},__decorate([o.observable],e.prototype,"visible",void 0),__decorate([o.observable],e.prototype,"overlayOpacity",void 0),e}(n.Model);e.RootUIBaseModel=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/rootUI/view/RootUIBaseView",["require","exports","../../View"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(n.View);e.RootUIBaseView=i}),define("vsef/utils/KeyboardTrap",["require","exports","jquery"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.navigationHandler=this.navigationHandler.bind(this),this.focusHandler=this.focusHandler.bind(this)}return t.getInstance=function(){return t.instance||(t.instance=new this)},Object.defineProperty(t.prototype,"trapId",{get:function(){return t.trapId},enumerable:!0,configurable:!0}),t.prototype.setTrap=function(e,i){var o=this;return void 0===i&&(i={}),this.removeTrap(),this.options=i,this.bounds=e,document.addEventListener("keydown",this.navigationHandler,!0),this.options.parentScope&&document.addEventListener("focus",this.focusHandler,!0),this.options.stealFocus&&(this.options.$prevFocusElement||(this.options.$prevFocusElement=n(":focus")),this.defer(function(){o.options.$firstFocus?o.options.$firstFocus.focus():o.bounds.start.focus()})),t.trapId++},t.prototype.removeTrap=function(t){if((!t||this.trapId===t)&&(document.removeEventListener("keydown",this.navigationHandler,!0),document.removeEventListener("focus",this.focusHandler,!0),this.options&&this.options.$prevFocusElement)){var e=this.options.$prevFocusElement;this.defer(function(){e.focus()})}},t.prototype.navigationHandler=function(t){if("Tab"===t.key){var e=n(document.activeElement),i=!t.shiftKey;if(this.options.parentScope&&0===e.closest(this.options.parentScope.get(0)).length)return this.blockEventDefault(t),void this.setFocus(this.bounds.start);var o=this.bounds;!o.end||i&&o.end.get(0)===e.get(0)?(this.blockEventDefault(t),this.setFocus(o.start)):i||o.start.get(0)!==e.get(0)||(this.blockEventDefault(t),this.setFocus(o.end))}},t.prototype.focusHandler=function(t){this.options.parentScope&&!this.activeElementHasParent(this.options.parentScope)&&(this.blockEventDefault(t),this.setFocus(this.bounds.start))},t.prototype.activeElementHasParent=function(t){return n(document.activeElement).closest(t.get(0)).length>0},t.prototype.blockEventDefault=function(t){t.preventDefault(),t.stopPropagation()},t.prototype.setFocus=function(t){this.defer(function(){t.focus()})},t.prototype.defer=function(t){window.setTimeout(t,0)},t.trapId=0,t}();e.KeyboardTrap=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/rootUI/view/LoadingIconView",["require","exports","./RootUIBaseView","../../utils/KeyboardTrap"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){return t.prototype.render.call(this),this.trapId=i.KeyboardTrap.getInstance().setTrap({start:this.$el,end:this.$el},{parentScope:this.$el.parent()}),this},e.prototype.remove=function(){return i.KeyboardTrap.getInstance().removeTrap(this.trapId),t.prototype.remove.call(this)},e.CSS_CLASS="loading-spinner",e}(n.RootUIBaseView);e.default=o});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/rootUI/model/TermDefinitionModel",["require","exports","./RootUIBaseModel"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,i){var o=t.call(this)||this;return o.element=e,o.term=n,o.definition=i,o}return __extends(e,t),e}(n.RootUIBaseModel);e.default=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/rootUI/model/AlertModel",["require","exports","./RootUIBaseModel"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n){var i=t.call(this)||this;return i.closeText="close alert dialog",i.message=e,i.options=n,i}return __extends(e,t),e}(n.RootUIBaseModel);e.default=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("vsef/rootUI/model/RootUIOverlayModel",["require","exports","../../Model","../../Observable"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.visible=!1,e}return __extends(e,t),__decorate([i.observable],e.prototype,"opacity",void 0),__decorate([i.observable],e.prototype,"overlayType",void 0),__decorate([i.observable],e.prototype,"scrollBehavior",void 0),__decorate([i.observable],e.prototype,"visible",void 0),e}(n.Model);e.default=o});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/rootUI/view/RootUIOverlayView",["require","exports","jquery","../../View","../Types"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,i){var o=t.call(this,e,n,i)||this;return o.listenTo(o.model.onOpacityChange,o.onOpacityChange),o.listenTo(o.model.onOverlayTypeChange,o.onOverlayTypeChange),o.listenTo(o.model.onScrollBehaviorChange,o.onScrollBehaviorChange),o.listenTo(o.model.onVisibleChange,o.onVisibleChange),o}return __extends(e,t),e.prototype.render=function(){return t.prototype.render.call(this),this.$overlayEl=this.$(".modal-cover"),this.onOverlayTypeChange(),this.onScrollBehaviorChange(),this.onVisibleChange(),this},e.prototype.setElement=function(e){return t.prototype.setElement.call(this,e),this.$overlayEl=this.$(".modal-cover"),this},e.prototype.setContentElement=function(t){this.$contentEl=t},e.prototype.onOpacityChange=function(){this.$overlayEl&&this.$overlayEl.parent().css("opacity",this.model.opacity)},e.prototype.onOverlayTypeChange=function(){if(this.$overlayEl){var t=this.model.visible,e=this.model.overlayType;e===o.OverlayType.OpaqueWhite?this.$overlayEl.toggleClass("modal-cover--opaque-white",t):e===o.OverlayType.TransparentDark?this.$overlayEl.toggleClass("modal-cover--transparent-dark",t):e===o.OverlayType.TransparentMedium&&this.$overlayEl.toggleClass("modal-cover--transparent-medium",t)}},e.prototype.onScrollBehaviorChange=function(){this.model.visible?this.model.scrollBehavior===o.ScrollBehavior.Blocking?(this.$el.addClass("blocking"),n("body").css("overflow","hidden"),n("html").addClass("html-blocking-overlay")):this.model.scrollBehavior===o.ScrollBehavior.Scrolling?this.$el.css("overflow-y","auto"):this.model.scrollBehavior===o.ScrollBehavior.FixedScrolling&&(this.$el.addClass("blocking"),this.$el.css("overflow-y","auto"),n("html").addClass("html-blocking-overlay")):(this.$el.removeClass("blocking"),n("body").css("overflow-x","hidden"),n("body").css("overflow-y","auto"),n("html").removeClass("html-blocking-overlay"))},e.prototype.onVisibleChange=function(){this.$el.toggleClass("u-hidden",!this.model.visible),this.onScrollBehaviorChange(),this.onOverlayTypeChange(),this.$contentEl&&this.model.flags.lacks(o.ComponentFlags.A11yBypass)&&this.$contentEl.attr("aria-hidden",this.model.visible?"true":"false"),this.$contentEl&&this.model.flags.has(o.ComponentFlags.A11yBypass)&&this.model.visible?this.$el.attr("aria-hidden","true"):this.$el.removeAttr("aria-hidden")},e}(i.View);e.default=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/rootUI/view/RootUIProxyView",["require","exports","jquery","../../View"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,i,o){var r=t.call(this,e,i,"")||this;return r.isRTL=o,n(window).resize(function(){r.handleResize()}),r}return __extends(e,t),e.prototype.getEvents=function(){return{"click .zoomable-image:not(.disabled), .image-zoom-button:not(.disabled)":this.imageZoomClick,"click button[data-definition]":this.definitionClick}},e.prototype.positionZoomIcons=function(t){var e=this;t||(t=this.$(".image-zoom-holder"));var i=t;t.hasClass("image-zoom-holder")||(i=t.find(".image-zoom-holder")),i.each(function(t,i){var o=n(i),r=o.find("img:not(.image-zoom-proxy)"),s=r.offset();if(s){var a=o.find(".image-zoom-button");a.css("position","absolute"),a.offset({left:e.isRTL?s.left:s.left+r.width()-a.outerWidth(!0),top:s.top+r.height()-a.outerWidth(!0)})}})},e.prototype.imageZoomClick=function(t){var e=n(t.currentTarget),i=e.hasClass("zoomable-image"),o=i?e:e.siblings(".zoomable-image"),r=i?e.siblings(".image-zoom-button"):e;o.hasClass("zoom-active")||this.model.showImageZoom(o.get(0),r)},e.prototype.definitionClick=function(t){var e=n(t.currentTarget),i=e.html(),o=e.data("definition");this.model.showTermDefinition(e.get(0),i,o,e)},e.prototype.handleResize=function(){this.$el&&this.positionZoomIcons()},e}(i.View);e.default=o});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/rootUI/view/ImageZoomView",["require","exports","jquery","lodash","../../utils/Environment","../../utils/DisplayUtils","../../utils/Keyboard","./RootUIBaseView"],function(t,e,n,i,o,r,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l;!function(t){t[t.ZOOM_IN=0]="ZOOM_IN",t[t.ZOOM_OUT=1]="ZOOM_OUT"}(l||(l={}));var c=function(t){function e(e,i,o){var r=t.call(this,e,i,o)||this;return r.listenTo(r.model.onVisibleChange,r.onVisibleChange),r.redraw=r.redraw.bind(r),r.onKeyDown=r.onKeyDown.bind(r),n(window).resize(r.redraw),r}return __extends(e,t),e.prototype.getEvents=function(){return{"click .image-zoom-holder:not(.zoom-underway)":this.imageClick}},e.prototype.onVisibleChange=function(){this.model.visible?(this.$el.css("display","block"),this.$zoomImage=n(this.model.image),this.$zoomImage.addClass("zoom-active"),this.$el.show(),this.direction=l.ZOOM_IN,this.$originHolder=this.$zoomImage.parent(),this.$originHolder.find(".image-zoom-button").hide(),this.$originHolder.find(".image-zoom-proxy").show(),this.$originHolder.addClass("zoomed"),this.$imageHolder=this.$(".image-zoom-holder"),this.$imageHolder.addClass("zoom-underway"),this.$imageHolder.append(this.$zoomImage),this.startTime=void 0,o.Environment.isiOS?i.defer(this.redraw):this.redraw()):(this.$zoomImage.removeClass("zoom-underway"),this.$zoomImage.removeClass("zoom-active"),this.$zoomImage.css({left:"",top:"",width:"",height:""}),this.$originHolder.removeClass("zoomed"),this.$originHolder.find(".image-zoom-button").show(),this.$originHolder.find(".image-zoom-proxy").hide(),this.$zoomImage.insertBefore(this.$originHolder.find(".image-zoom-proxy")),this.$zoomImage=void 0)},e.prototype.redraw=function(){if(this.$zoomImage){void 0===this.startTime&&(this.startTime=Date.now());var t=(Date.now()-this.startTime)/500;t=Math.min(Math.max(t,0),1),this.direction===l.ZOOM_OUT&&(t=1-t);var e=this.$zoomImage,i=e.get(0),o=this.$originHolder.find("img.image-zoom-proxy"),s=new r.Rectangle(o),a=new r.Rectangle(this.$el),c=this.getImageFitScale(i,s),u=this.getImageFitScale(i,a),h=c+(u-c)*t,d=i.naturalWidth*u,p=i.naturalHeight*u;e.width(i.naturalWidth*h),e.height(i.naturalHeight*h);var f=a.left+a.width/2-d/2,g=a.top+a.height/2-p/2,m=s.offset,v={left:m.left+(f-m.left)*t-a.left,top:m.top+(g-m.top)*t};e.css("left",v.left+"px"),e.css("top",v.top-n(window).scrollTop()+"px"),this.model.overlayOpacity=t,t>=1&&this.direction===l.ZOOM_IN?(this.$imageHolder.removeClass("zoom-underway"),n(document).keydown(this.onKeyDown),this.$(".image-zoom-close-btn").focus()):t<=0&&this.direction===l.ZOOM_OUT?(this.$el.css("display","none"),this.model.close()):this.nextFrame()}},e.prototype.nextFrame=function(){window.requestAnimationFrame?window.requestAnimationFrame(this.redraw):setTimeout(this.redraw,1e3/60)},e.prototype.close=function(){n(document).off("keydown",this.onKeyDown),this.direction=l.ZOOM_OUT,this.$imageHolder.addClass("zoom-underway"),this.startTime=Date.now(),this.nextFrame()},e.prototype.getImageFitScale=function(t,e){var n=t.naturalWidth,i=t.naturalHeight,o=e.width/n,r=e.height/i;return Math.min(o,r)},e.prototype.imageClick=function(){this.close()},e.prototype.onKeyDown=function(t){t.keyCode===s.Keyboard.ESCAPE?this.close():t.keyCode===s.Keyboard.TAB&&(t.stopPropagation(),t.preventDefault())},e}(a.RootUIBaseView);e.ImageZoomView=c});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/rootUI/model/ImageZoomModel",["require","exports","./RootUIBaseModel"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var n=t.call(this)||this;return n.image=e,n}return __extends(e,t),e}(n.RootUIBaseModel);e.default=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/rootUI/view/TermDefinitionView",["require","exports","jquery","../../View","../../utils/Keyboard"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,i){var o=t.call(this,e,n,i)||this;return o.listenTo(o.model.onVisibleChange,o.onVisibleChange),o.onKeyDown=o.onKeyDown.bind(o),o.onMouseDown=o.onMouseDown.bind(o),o.onResize=o.onResize.bind(o),o}return __extends(e,t),e.prototype.getEvents=function(){return{"click .text-popup-close-btn":this.closeBtnClick}},e.prototype.onVisibleChange=function(){if(this.model.visible){var t=this.templates.get("root-ui-text-popup-term-definition-template")(this.model);this.$(".text-popup-container").html(t),n(document).on("keydown",this.onKeyDown),n(document).on("mousedown",this.onMouseDown),n(window).on("resize",this.onResize),this.$el.css("display","block"),this.onResize(),this.$(".text-popup-close-btn").focus()}else n(document).off("keydown",this.onKeyDown),n(document).off("mousedown",this.onMouseDown),n(window).off("resize",this.onResize),this.$el.css("display","none")},e.prototype.close=function(){this.model.close()},e.prototype.closeBtnClick=function(){this.close()},e.prototype.onKeyDown=function(t){t.keyCode===o.Keyboard.ESCAPE?this.close():t.keyCode===o.Keyboard.TAB&&(this.$(".text-popup-close-btn").focus(),t.stopPropagation(),t.preventDefault())},e.prototype.onMouseDown=function(t){var e=t.target===n("html").get(0),i=n(t.target);this.$el.is(i)||1===this.$el.has(i.get(0)).length||e||this.close()},e.prototype.onResize=function(){var t=n(this.model.element),e=t.offset();e.left=e.left+t.width()/2-this.$el.width()/2,e.left=Math.max(0,e.left),e.left=Math.min(e.left,n(window).width()-this.$el.width()),e.top-=this.$el.height(),e.top=Math.max(n(window).scrollTop(),e.top),this.$el.offset(e)},e}(i.View);e.TermDefinitionView=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/rootUI/view/AlertView",["require","exports","jquery","../../utils/Keyboard","./RootUIBaseView","../../utils/KeyboardTrap"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,n,i){var o=t.call(this,e,n,i)||this;return o.listenTo(o.model.onVisibleChange,o.onVisibleChange),o.onKeyDown=o.onKeyDown.bind(o),o}return __extends(e,t),e.prototype.getEvents=function(){return{"click .alert-modal__close-btn":this.closeBtnClick}},e.prototype.close=function(){this.model.close()},e.prototype.closeBtnClick=function(){this.close()},e.prototype.onVisibleChange=function(){var t=r.KeyboardTrap.getInstance();this.model.visible?(n(document).on("keydown",this.onKeyDown),this.trapId=t.setTrap({start:this.$(".js-close-btn")},{parentScope:this.$el,stealFocus:!0})):(t.removeTrap(this.trapId),n(document).off("keydown",this.onKeyDown))},e.prototype.onKeyDown=function(t){t.keyCode===i.Keyboard.ESCAPE&&this.close()},e}(o.RootUIBaseView);e.default=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/rootUI/model/ModalBaseModel",["require","exports","./RootUIBaseModel"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var n=t.call(this)||this;return e.message&&(n.message=e.message),n.closeText=e.closeText||"Close dialog",n.cancelText=e.cancelText||"Cancel",n.confirmText=e.confirmText||"Confirm",n}return __extends(e,t),e}(n.RootUIBaseModel);e.ModalBaseModel=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/rootUI/model/SelectModalModel",["require","exports","./ModalBaseModel"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(n){var i=t.call(this,n)||this;return i._id=e.createId(),i.label=n.label,i.onCloseCallback=n.onClose||function(){},i.selectionOptions=n.options,i}return __extends(e,t),e.createId=function(){return"SelectModal_"+e.id++},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.id=0,e}(n.ModalBaseModel);e.default=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/rootUI/view/ModalBaseView",["require","exports","jquery","./RootUIBaseView","../../utils/KeyboardTrap","../../utils/Keyboard"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,n,i){var o=t.call(this,e,n,i)||this;return o.listenTo(o.model.onVisibleChange,o.onVisibleChange),o.onClose=o.onClose.bind(o),o.onKeyDown=o.onKeyDown.bind(o),o}return __extends(e,t),e.prototype.getEvents=function(){return{"click .js-close-btn":this.onClose,"click button[data-function='cancel']":this.onClose,"click button[data-function='confirm']":this.onConfirm}},e.prototype.onVisibleChange=function(){var t=o.KeyboardTrap.getInstance();this.model.visible?(n(document).on("keydown",this.onKeyDown),this.trapId=t.setTrap({start:this.$(".js-close-btn"),end:this.$(".js-last-btn")},{parentScope:this.$el,stealFocus:!0,$firstFocus:this.$(".js-cancel-btn")})):(n(document).off("keydown",this.onKeyDown),t.removeTrap(this.trapId))},e.prototype.onClose=function(){this.model.onCloseCallback(),this.model.close()},e.prototype.onKeyDown=function(t){t.keyCode===r.Keyboard.ESCAPE&&this.onClose()},e}(i.RootUIBaseView);e.ModalBaseView=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/rootUI/view/SelectModalView",["require","exports","jquery","../../utils/MiscUtils","./ModalBaseView"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this);var e=this.templates.get("root-ui-select-template")(this.model);return n(e).insertBefore(this.$(".modal__selection-btns")),this},e.prototype.onConfirm=function(){var t=this.$("#"+this.model.id).val();if(t){i.MiscUtils.getObjectByProperty(this.model.selectionOptions,"value",t).onSelection(t)}this.model.close()},e}(o.ModalBaseView);e.default=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/rootUI/model/ConfirmModalModel",["require","exports","./ModalBaseModel"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var n=t.call(this,e)||this;return n.onCloseCallback=e.onClose||function(){},n.onConfirmCallback=e.onConfirm||function(){},n}return __extends(e,t),e}(n.ModalBaseModel);e.default=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/rootUI/view/ConfirmModalView",["require","exports","./ModalBaseView"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onConfirm=function(){this.model.visible=!1,this.model.close(),this.model.onConfirmCallback()},e}(n.ModalBaseView);e.default=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/rootUI/model/ToolTipModel",["require","exports","./RootUIBaseModel"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,i){var o=t.call(this)||this;return o.anchorEl=e,o.text=n,o.position=i,o}return __extends(e,t),e}(n.RootUIBaseModel)
;e.default=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/rootUI/view/ToolTipView",["require","exports","jquery","../../View","../../Types","../../utils/DisplayUtils"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,n,i){var o=t.call(this,e,n,i)||this;return o.listenTo(o.model.onVisibleChange,o.onVisibleChange),o.onResize=o.onResize.bind(o),o.onMouseDown=o.onMouseDown.bind(o),o}return __extends(e,t),e.prototype.getEvents=function(){return{}},e.prototype.onVisibleChange=function(){this.model.visible?(n(document).on("mousedown",this.onMouseDown),n(window).on("resize",this.onResize),this.$el.css("display","inline-block"),this.onResize()):(n(document).off("mousedown",this.onMouseDown),n(window).off("resize",this.onResize),this.$el.css("display","none"))},e.prototype.close=function(t){this.model.close(t)},e.prototype.onMouseDown=function(t){var e=t.target===n("html").get(0),i=n(t.target);this.$el.is(i)||1===this.$el.has(i.get(0)).length||e||this.close(t)},e.prototype.onResize=function(){this.reposition(this.model.position)},e.prototype.isOutOfScrollBounds=function(t){var e=new r.Rectangle(0,0,window.innerWidth,window.innerHeight),i=n(window).scrollTop();e.top+=i;var s=new r.Rectangle(this.$el);return(t===o.DisplayPosition.Left||t===o.DisplayPosition.Right)&&s.right>e.right||s.left<e.left||((t===o.DisplayPosition.Above||t===o.DisplayPosition.Below)&&s.top<e.top||s.bottom>e.bottom)},e.prototype.keepInScrollBounds=function(t,e){var i=new r.Rectangle(0,0,window.innerWidth,window.innerHeight),s=n(window).scrollTop();i.top+=s;var a={left:t.left,top:t.top};return e===o.DisplayPosition.Left||e===o.DisplayPosition.Right?a.top=Math.min(i.bottom-this.$el.outerHeight(),Math.max(i.top,t.top)):e!==o.DisplayPosition.Above&&e!==o.DisplayPosition.Below||(a.left=Math.min(i.right-this.$el.outerWidth(),Math.max(i.left,t.left))),a},e.prototype.keepInBounds=function(t){var e=new r.Rectangle(n("html"));return{left:Math.min(e.right-this.$el.outerWidth(),Math.max(e.left,t.left)),top:Math.min(e.bottom-this.$el.outerHeight(),Math.max(e.top,t.top))}},e.prototype.reposition=function(t,e){if(void 0===e&&(e=!1),this.model.visible){var i=n(this.model.anchorEl),s=this.$el,a=new r.Rectangle(i,r.RectExtentType.OuterMargin),l=s.height(),c={left:0,top:0},u=s.width();s.width(u),t===o.DisplayPosition.Right?(c.left=a.right+5,c.top=a.centerY-l/2):t===o.DisplayPosition.Left?(c.left=a.left-(u+5),c.top=a.centerY-l/2):t===o.DisplayPosition.Above?(c.left=a.centerX-u/2,c.top=a.top-(l+5)):t===o.DisplayPosition.Below&&(c.left=a.centerX-u/2,c.top=a.bottom+5),this.$el.offset(c),this.isOutOfScrollBounds(t)&&!e&&this.reposition(this.mirrorPosition(t),!0),this.$el.offset(this.keepInScrollBounds(this.$el.offset(),t)),e||this.$el.offset(this.keepInBounds(this.$el.offset()))}},e.prototype.mirrorPosition=function(t){return t===o.DisplayPosition.Left||t===o.DisplayPosition.Right?t===o.DisplayPosition.Left?o.DisplayPosition.Right:o.DisplayPosition.Left:t===o.DisplayPosition.Above?o.DisplayPosition.Below:o.DisplayPosition.Above},e}(i.View);e.ToolTipView=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/rootUI/RootUI",["require","exports","jquery","lodash","../Templates","./RootUIComponent","../AssetLoader","../Log","./Types","./model/RootUIBaseModel","./view/LoadingIconView","../Model","./model/TermDefinitionModel","../Types","./model/AlertModel","../utils/MiscUtils","../utils/Environment","./model/RootUIOverlayModel","./view/RootUIOverlayView","./view/RootUIProxyView","./view/ImageZoomView","./model/ImageZoomModel","./view/TermDefinitionView","./view/AlertView","./model/SelectModalModel","./view/SelectModalView","./model/ConfirmModalModel","./view/ConfirmModalView","../Flags","./model/ToolTipModel","./view/ToolTipView"],function(t,e,n,i,o,r,s,a,l,c,u,h,d,p,f,g,m,v,y,b,_,w,C,x,T,k,S,E,P,A,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.alertMessages={},e.componentQueue=[],e}return __extends(e,t),e.prototype.create=function(t,n){var i=this;return this.isRTL=n,Promise.resolve().then(function(){return s.AssetLoader.load([{url:t.rootTemplatePath+"root-ui.html",id:e.ID_TEMPLATE}])}).then(function(t){return i.build(t),Promise.resolve(i)}).catch(function(t){return a.log("create RootUI failed with:"),a.error(t),Promise.reject(t)})},e.prototype.setContentEl=function(t){this.$contentEl=t,this.proxyView.setElement(t),this.view&&this.view.setContentElement(this.$contentEl),this.component&&!this.component.visible&&this.component.show(this.$contentEl)},e.prototype.getContentEl=function(){return this.$contentEl},e.prototype.showLoadingOverlay=function(t,e){void 0===t&&(t=l.OverlayType.Invisible),void 0===e&&(e=l.ScrollBehavior.Blocking);var i=new c.RootUIBaseModel,o=new u.default(i,this.templates,"root-ui-loading-icon-template"),r=this.view.$("."+u.default.CSS_CLASS);r.length>0&&o.setElement(r),this.createComponent(o,i,{componentType:l.ComponentType.LoadingOverlay,importance:l.Importance.High,overlayType:t,scrollBehavior:e,$prevFocusElement:n(":focus")})},e.prototype.hideLoadingOverlay=function(){this.component&&this.component.type===l.ComponentType.LoadingOverlay?this.removeCurrentComponent():this.componentQueue[0]&&this.componentQueue[0].type===l.ComponentType.LoadingOverlay&&(this.componentQueue[0].remove(),this.componentQueue[0]=null)},e.prototype.showImageZoom=function(t,e){var n=new w.default(t),i=new _.ImageZoomView(n,this.templates,"root-ui-zoom-image-popup-template");this.createComponent(i,n,{componentType:l.ComponentType.ImageZoomModal,importance:l.Importance.Low,overlayType:l.OverlayType.TransparentDark,scrollBehavior:l.ScrollBehavior.Blocking,$prevFocusElement:e,flags:new P.Flags(l.ComponentFlags.RestoreScrollPos)})},e.prototype.showTermDefinition=function(t,e,n,i){var o=new d.default(t,e,n),r=new C.TermDefinitionView(o,this.templates,"root-ui-text-popup-template");this.createComponent(r,o,{componentType:l.ComponentType.ToolTip,importance:l.Importance.Low,overlayType:l.OverlayType.Invisible,scrollBehavior:l.ScrollBehavior.Scrolling,$prevFocusElement:i})},e.prototype.showSelectModal=function(t){var e=new T.default(t),i=new k.default(e,this.templates,"root-ui-modal-template");this.createComponent(i,e,{componentType:l.ComponentType.ModalDialog,importance:l.Importance.High,overlayType:l.OverlayType.TransparentDark,scrollBehavior:l.ScrollBehavior.Blocking,$prevFocusElement:n(":focus")})},e.prototype.showConfirmModal=function(t){var e=new S.default(t),i=new E.default(e,this.templates,"root-ui-modal-template");this.createComponent(i,e,{componentType:l.ComponentType.ModalDialog,importance:l.Importance.Medium,overlayType:l.OverlayType.TransparentDark,scrollBehavior:l.ScrollBehavior.Blocking,$prevFocusElement:n(":focus")})},e.prototype.showAlert=function(t,e){if(void 0===e&&(e={}),t){if(e.limit&&this.alertMessages[t]&&this.alertMessages[t]>=e.limit)return void this.alertMessages[t]++;this.alertMessages[t]=1;var i=new f.default(t,e),o=new x.default(i,this.templates,"root-ui-text-alert-template");this.createComponent(o,i,{componentType:l.ComponentType.ModalAlert,importance:l.Importance.Critical,scrollBehavior:l.ScrollBehavior.FixedScrolling,overlayType:l.OverlayType.Invisible,$prevFocusElement:n(":focus")})}},e.prototype.showTooltip=function(t,e,n){var i=new A.default(t,e,n),o=new I.ToolTipView(i,this.templates,"root-ui-tooltip-template");return this.createComponent(o,i,{componentType:l.ComponentType.ToolTip,importance:l.Importance.Low,overlayType:l.OverlayType.Invisible,scrollBehavior:l.ScrollBehavior.Scrolling,$prevFocusElement:null,flags:new P.Flags(l.ComponentFlags.A11yBypass)}),i},e.prototype.preprocessContent=function(t){this.makeImagesZoomable(t),this.hookupHyperlinks(t)},e.prototype.enableImageZooms=function(t){this.imageZoomEnabled=t,this.$contentEl&&this.$contentEl.find("img.zoomable-image").toggleClass("disabled",!t)},e.prototype.update=function(){this.proxyView.positionZoomIcons()},e.prototype.build=function(t){this.templates=new o.Templates(t.get(e.ID_TEMPLATE)),this.proxyView=new b.default(this,this.templates,this.isRTL),this.model=new v.default,this.view=new y.default(this.model,this.templates,"root-ui-overlay-root-template");var i=n(".overlay-root");1===i.length&&i.hasClass("rendered")?(this.view.setElement(i),this.view.$("."+u.default.CSS_CLASS).length>0&&!this.component&&this.showLoadingOverlay(l.OverlayType.TransparentMedium,l.ScrollBehavior.FixedScrolling),this.model.visible=!0,n(":focus").blur()):n("body").append(this.view.render().$el),this.isRTL&&this.view.$el.addClass(p.RTL_STYLE)},e.prototype.createComponent=function(t,e,n){var i=new r.default(t,e,n.componentType,n.importance,n.overlayType,n.scrollBehavior,n.flags);if(n.$prevFocusElement&&(i.$prevFocusElement=n.$prevFocusElement),this.component){if(this.component.type===l.ComponentType.LoadingOverlay&&i.type===l.ComponentType.LoadingOverlay&&this.component.view.isPrerendered)return;if(this.component.importance>i.importance)return void(this.componentQueue[0]=i);this.componentQueue[0]=this.component,this.component.hide()}this.component=i,this.showCurrentComponent()},e.prototype.showCurrentComponent=function(){this.model.overlayType=this.component.overlayType,this.model.scrollBehavior=this.component.scrollBehavior,this.model.$prevFocusElement=this.component.$prevFocusElement,this.model.flags=this.component.flags,this.listenTo(this.component.model.onVisibleChange,this.onComponentVisibleChange),this.listenTo(this.component.model.onClose,this.onComponentClose),this.listenTo(this.component.model.onOverlayOpacityChange,this.onOverlayOpacityChange),this.view.$el&&(this.model.visible=!0,this.component.show(this.view.$el))},e.prototype.removeCurrentComponent=function(){var t=this;this.stopListening(this.component.model.onVisibleChange),this.stopListening(this.component.model.onClose);var e=this.component;this.component.remove(),this.model.$prevFocusElement?setTimeout(function(){t.model.$prevFocusElement.focus(),t.model.$prevFocusElement=null,e.afterRemove()},0):this.component.afterRemove(),this.component=null,this.model.visible=!1,this.model.overlayType=null,this.model.scrollBehavior=null,this.componentQueue.length>0&&(this.component=this.componentQueue.shift(),this.showCurrentComponent())},e.prototype.makeImagesZoomable=function(t){for(var e=this,i=this.templates.getText("root-ui-zoomable-image-wrapper-template"),o=t.find("img.zoomable-image"),r=this,s=0;s<o.length;s++)!function(t){var s=o.eq(t);if(!s.attr("src").length)return"continue";var a,l=s.parent().hasClass("image-zoom-holder");a=l?s.parent():n(i).insertBefore(s);var c=a.find(".image-zoom-proxy"),u=a.find(".image-zoom-button");l||s.insertBefore(c),c.attr("src",s.attr("src")),c.css("display","none"),u.css("display","none"),s.toggleClass("disabled",!r.imageZoomEnabled),g.MiscUtils.whenImageLoaded(s.get(0)).then(function(t){t&&(u.css("display","block"),e.proxyView.positionZoomIcons(a))})}(s)},e.prototype.hookupHyperlinks=function(t){t.find("[data-definition]:not(.rendered)").replaceWith(function(){var t=n(this),e=n("<button/>").attr("data-definition",i.escape(t.attr("data-definition")));return e.html(t.html()),m.Environment.isPrerendering()&&e.addClass("rendered"),e})},e.prototype.onComponentVisibleChange=function(){this.model.visible=this.component.visible},e.prototype.onComponentClose=function(){this.removeCurrentComponent()},e.prototype.onOverlayOpacityChange=function(){this.model.opacity=this.component.model.overlayOpacity},e.ID_TEMPLATE="rootUITemplate",e}(h.Model);e.RootUI=O}),define("vsef/Paths",["require","exports","jquery"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.SkinHasTemplates=0]="SkinHasTemplates"}(e.PathOptions||(e.PathOptions={}));var i=function(){function t(t,e,n){this.baseRelativePath=n||"",this.basePath=t,this.rootPath=void 0!==e?e:t,this.dataPath=this.basePath+"engines/data/",this.rootDataPath=this.rootPath+"engines/data/"}return t.prototype.clone=function(){var e=new t(this.basePath);return n.extend(e,this),e},t.prototype.formSkinPaths=function(t,e,n){var i=e?"/"+e.toLowerCase():"";n?(this.cssPath=n+"/"+i+"/css/",this.templatePath="skinRoot/"+i+"/template/",this.rootCssPath=n+"/css/",this.rootTemplatePath="skinRoot/template/",this.skinPath=n):(this.cssPath=this.basePath+"skins/"+t+i+"/css/",this.templatePath=this.basePath+"skins/"+t+i+"/template/",this.rootCssPath=this.rootPath+"skins/"+t+"/css/",this.rootTemplatePath=this.rootPath+"skins/"+t+"/template/")},t}();e.Paths=i}),define("editorsRoot/utils/ScreenDataParser",["require","exports","jquery","lodash","./parenteditor/ParentEditor","vsef/Log","vsef/Types","vsef/AssetLoader"],function(t,e,n,i,o,r,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t){t&&this.parse(t)}return t.compileScreenXml=function(t,e){for(var i=[],o=n.parseXML(t),r=n(o),s=r.find("block"),l=0;l<s.length;l++){var c=s.eq(l);if(c.attr("href")){var u=c.attr("href");i.push({url:e+u,id:"ScreenDataParser_"+l})}}return i.length>0?a.AssetLoader.load(i).then(function(t){for(var e=0;e<s.length;e++){var i=t.get("ScreenDataParser_"+e);if(i){var r=s.eq(e);r.append(n(i).find(":root")),r.attr("refid")||r.attr("refid","reference_block_"+e)}}return Promise.resolve((new XMLSerializer).serializeToString(o))}):Promise.resolve((new XMLSerializer).serializeToString(o))},t.prototype.parse=function(t){if(r.log("ScreenDataParser parse"),this.isMediaPathFlat=!0,"string"==typeof t){var e=n.parseXML(t),i=n(e);if(i.find("raw").length){var o=i.find("raw").text();this.readJSONFormat(JSON.parse(o).data)}else this.readStaticFormat(i)}else this.readJSONFormat(t)},t.prototype.readStaticFormat=function(t){var e="PAGE"===t.get(0).firstChild.nodeName,n=e?"engine":"block",i=t.find("blocks > settings");i.length&&(this.settingsXml=(new XMLSerializer).serializeToString(i.get(0)),this.settings={attemptsAllowed:parseInt(i.find("attemptsAllowed").attr("value"),10),canRevealAnswer:s.stringOptionToBool(i.find("canRevealAnswer").attr("value")),autoNumberQuestions:s.stringOptionToBool(i.find("autoNumberQuestions").attr("value"))});var o=t.find("blocks > header title");o.length&&(this.title=o.text());for(var r=t.find(n),a=[],l=0;l<r.length;l++){var c=r.eq(l),u=r.eq(l).html();u||(u=(new XMLSerializer).serializeToString(c.children().first().get(0))),u=u.replace(/&nbsp;/gi,"&#160;"),a.push({data:u,id:e?l.toString():c.attr("refid"),assigned:void 0,status:void 0})}this.blocks=a,this.isMediaPathFlat=e},t.prototype.readJSONFormat=function(t){this.blocks=[];var e=t.data?n.parseXML(t.data).documentElement:n.parseXML("<screen><blocks/></screen>").documentElement;this.screenEngineId=e.nodeName,this.screenDataId=t.id,this.title=t.name,this.productTitle=t.product.name;var r=n(e).find("blocks > settings");r.length&&(this.settingsXml=(new XMLSerializer).serializeToString(r.get(0)),this.settings={attemptsAllowed:parseInt(r.find("attemptsAllowed").attr("value"),10),canRevealAnswer:s.stringOptionToBool(r.find("canRevealAnswer").attr("value")),autoNumberQuestions:s.stringOptionToBool(r.find("autoNumberQuestions").attr("value"))});var a=n(e).find("block"),l=t.blocks;if(i.isArray(l)&&l.length!==a.length)throw new Error("Block reference/definition count mismatch: "+[a.length,l.length].join("/"));for(var c=0;c<a.length;c++){var u=a.eq(c),h=u.get(0).getAttribute("refid"),d=i.find(l,{id:h});if(!d)throw new Error("Referenced block not found for ID: "+h);this.blocks.push(new o.BlockData(d))}},t}();e.ScreenDataParser=l});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("editorsRoot/utils/parenteditor/ParentEditor",["require","exports","lodash","vsef/EventDispatcher","vsef/Flags","../ScreenDataParser","vsef/Types","vsef/utils/PathUtils","vsef/EventListener"],function(t,e,n,i,o,r,s,a,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c;!function(t){t[t.canGetActivityData=0]="canGetActivityData",t[t.canGetConfigData=1]="canGetConfigData"}(c=e.ParentEditorAttributes||(e.ParentEditorAttributes={}));var u=function(){function t(t){this.data=t.data,this.id=t.id,this.assigned=t.assigned,this.status=t.status}return t}();e.BlockData=u;var h=function(){function t(){}return t}();e.BlockEditorOptions=h;var d=function(t){function e(){var e=t.call(this)||this;return e.onSetDisplayMode=new i.EventDispatcher(e),e.onBlockEditorClosed=new i.EventDispatcher(e),e.onSetFlagsDisplayModeChange=new i.EventDispatcher(e),e.onFlagStatusChange=new i.EventDispatcher(e),e.onFlagAssignmentChange=new i.EventDispatcher(e),e.onFlagEditorClosed=new i.EventDispatcher(e),e.onBlockEditorReady=new i.EventDispatcher(e),e.onBlockEditorResized=new i.EventDispatcher(e),e.attributes=new o.Flags,e.isPrerendered=!1,e.flagsEnabled=!0,e.showScreenHeader=!0,e.isMediaPathFlat=!0,e.reason=s.RenderReason.Normal,e.subproj="",-1!==e.subproj.indexOf("%")&&(e.subproj=a.PathUtils.getQueryString("subproj")||""),e}return __extends(e,t),e.canCreate=function(){return!1},e.prototype.init=function(){return Promise.resolve()},Object.defineProperty(e.prototype,"isPreviewMode",{get:function(){return this.mode===s.ScreenEditorMode.modePreview},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPrerendering",{get:function(){return this.reason===s.RenderReason.Prerendering},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPrerenderingCss",{get:function(){return this.isPrerendering&&"css"===a.PathUtils.getQueryString("reason-options")},enumerable:!0,configurable:!0}),e.prototype.getActivityData=function(){return new Promise(function(t,e){t()})},e.prototype.getConfigData=function(){if(this.attributes.has(c.canGetConfigData))throw"An editor has been asked to provide config data but it isn't setup to provide this data";return Promise.resolve()},e.prototype.getUserId=function(){return 0},e.prototype.getUserEmail=function(){return"user1@web.com"},e.prototype.getBaseUrl=function(){},e.prototype.getMediaBaseUrl=function(){},e.prototype.getSkinBaseUrl=function(){},e.prototype.getBaseRelativePath=function(){},e.prototype.setActivityData=function(t){this.activityData=t;var e=new r.ScreenDataParser(t);this.blocks=e.blocks,this.isMediaPathFlat=e.isMediaPathFlat,this.screenSettingsXml=e.settingsXml,this.screenSettings=e.settings,this.title=e.title},e.prototype.createBlock=function(){return new Promise(function(t,e){t(null)})},e.prototype.insertBlock=function(t,e){return new Promise(function(t,e){t(!0)})},e.prototype.duplicateBlock=function(t){return new Promise(function(t,e){t(null)})},e.prototype.editBlock=function(t,e,n,i){},e.prototype.doneEditBlock=function(){},e.prototype.getEditedContent=function(){return""},e.prototype.deleteBlock=function(t,e){},e.prototype.setScreenXmlData=function(t){},e.prototype.openFlagEditor=function(t,e){},e.prototype.closeFlagEditor=function(t){},e.prototype.getBlockRegistryData=function(t){var e=this.staticRegistry.base,i=this.staticRegistry[t];return i?n.extend({},e,i):e},e.prototype.confirm=function(t,e){return new Promise(function(e,n){e(confirm(t))})},e.prototype.showSplitScreenDialog=function(t){if(confirm("Do you want to insert a screen break?"))return Promise.resolve(t)},e.prototype.scrollScreenEditorToRect=function(t){},e.prototype.navigateToScreen=function(t){},e.prototype.getType=function(){return this.type},e.prototype.splitScreen=function(t,e){return Promise.resolve()},e.prototype.determineType=function(t){switch(t){case"ScoredScreen":return s.ScreenType.Scored;default:return s.ScreenType.Content}},e}(l.EventListener);e.ParentEditor=d}),define("vsef/utils/URL",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.params={},this.origin=t,this.params=e||this.params}return t.prototype.addParam=function(t,e){this.params[t]=e},t.prototype.toString=function(){return encodeURI(this.origin+"?"+this.createQueryString())},t.prototype.createQueryString=function(){var t=[];for(var e in this.params)this.params[e]&&t.push(e+"="+this.params[e]);return t.join("&")},t}();e.default=n});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/flags/view/FlagSimulatorView",["require","exports","../../View"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return __extends(e,t),e.prototype.getEvents=function(){return{"click button[data-function='close']":this.onClose,"click button[data-function='save']":this.onSave,"change input[type='radio']":this.statusChange,"change select":this.assignedChange}},e.prototype.onClose=function(){this.model.visible=!1},e.prototype.onSave=function(){var t=this.$("#"+this.model.id+"_textarea").text();this.model.comments.push(t),this.model.visible=!1},e.prototype.statusChange=function(t){var e=this.$(t.currentTarget).val();e&&(this.model.status=e)},e.prototype.assignedChange=function(t){var e=this.$(t.currentTarget).val();e&&(this.model.assignee=e)},e}(n.View);e.default=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("vsef/flags/model/FlagSimulatorModel",["require","exports","../../Model","../../Observable"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(n){var i=t.call(this)||this;return i.visible=!1,i.comments=[],i.assignees=n,i.id="flagSimulator_"+e.idCount++,i}return __extends(e,t),Object.defineProperty(e.prototype,"blockData",{get:function(){var t=this._blockData;return t.assigned=this.assignee,t.status=this.status,t},set:function(t){this._blockData=t,this.assignee=t.assigned,this.status=t.status||"Open"},enumerable:!0,configurable:!0}),e.idCount=0,__decorate([i.observable],e.prototype,"visible",void 0),__decorate([i.observable],e.prototype,"status",void 0),__decorate([i.observable],e.prototype,"assignee",void 0),e}(n.Model);e.default=o});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/flags/FlagSimulator",["require","exports","./view/FlagSimulatorView","./model/FlagSimulatorModel","../AssetLoader","../Templates","../EventDispatcher","../Observable"],function(t,e,n,i,o,r,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(){var e=t.call(this)||this;return e.onClosed=new s.EventDispatcher(e),e.onDisplayModeChange=new s.EventDispatcher(e),e.onStatusChange=new s.EventDispatcher(e),e.onAssignedChange=new s.EventDispatcher(e),e}return __extends(e,t),Object.defineProperty(e.prototype,"displayMode",{get:function(){return this.model.visible?"visible":"hidden"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blockData",{get:function(){return this.model.blockData},enumerable:!0,configurable:!0}),e.prototype.init=function(t){var s=this;return Promise.resolve().then(function(){return o.AssetLoader.load([{url:t.rootTemplatePath+"flags.html",id:e.ID_TEMPLATE}])}).then(function(t){return s.templates=new r.Templates(t.get(e.ID_TEMPLATE)),s.model=new i.default(["Unassigned","0","1"]),s.view=new n.default(s.model,s.templates,"flagsimulator-template"),s.listenTo(s.model.onVisibleChange,s.visibleChange),s.listenTo(s.model.onAssigneeChange,s.assigneeChange),s.listenTo(s.model.onStatusChange,s.statusChange),Promise.resolve()})},e.prototype.open=function(t,e){var n=this;this.model.silently(function(){n.model.blockData=e}),this.view.$el||(this.view.setElement(t),this.view.render()),this.model.visible=!0},e.prototype.close=function(){this.model.visible=!1},e.prototype.visibleChange=function(){this.onDisplayModeChange.trigger(),this.model.visible||this.onClosed.trigger()},e.prototype.assigneeChange=function(){this.onAssignedChange.trigger()},e.prototype.statusChange=function(){this.onStatusChange.trigger()},e.ID_TEMPLATE="flagSimulatorTemplate",e}(a.Observable);e.default=l});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("editorsRoot/utils/parenteditor/ParentEditorLocal",["require","exports","jquery","lodash","./ParentEditor","vsef/Log","./ParentEditor","vsef/utils/PathUtils","vsef/Types","vsef/utils/Environment","vsef/utils/Keyboard","vsef/EngineComms","vsef/flags/FlagSimulator","vsef/utils/MiscUtils"],function(t,e,n,i,o,r,s,a,l,c,u,h,d,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f=function(t){function e(){var e=this;return r.note("ParentEditorLocal"),e=t.call(this)||this,e.blockCount=0,e.screenID=a.PathUtils.getQueryString("did")||a.PathUtils.getQueryString("id"),e.dataID=a.PathUtils.getQueryString("altId")||e.screenID,e.reason=c.Environment.isPrerendering()?l.RenderReason.Prerendering:l.RenderReason.Normal,e.mode="true"===a.PathUtils.getQueryString("preview")?l.ScreenEditorMode.modePreview:l.ScreenEditorMode.modeEdit,e.isPreview=e.reason===l.RenderReason.Prerendering||e.mode===l.ScreenEditorMode.modePreview,e.type=e.determineType(a.PathUtils.getQueryString("screenType")),e.flagsEnabled=!0,e.showScreenHeader=!0,c.Environment.isPrintScreenFrame()&&(e.attributes.add(o.ParentEditorAttributes.canGetActivityData),e.attributes.add(o.ParentEditorAttributes.canGetConfigData)),n(document).keydown(function(t){t.keyCode===u.Keyboard.P&&t.ctrlKey&&t.altKey&&(e.isPreview=!e.isPreview,e.mode=e.isPreview?l.ScreenEditorMode.modePreview:l.ScreenEditorMode.modeEdit,e.previewWidth="100%",e.onSetDisplayMode.trigger())}),e.flagSimulator=new d.default,e.listenTo(e.flagSimulator.onClosed,e.flagEditorClosed),e.listenTo(e.flagSimulator.onDisplayModeChange,e.flagEditorDisplayChange),e.listenTo(e.flagSimulator.onStatusChange,e.flagEditorStatusChange),e.listenTo(e.flagSimulator.onAssignedChange,e.flagEditorAssignedChange),e}return __extends(e,t),e.canCreate=function(){return!0},e.prototype.init=function(){return c.Environment.isPrintScreenFrame()?this.getPrintContext():Promise.resolve()},e.prototype.initFlagSimulator=function(){return this.flagSimulator.init(this.paths)},e.prototype.getSkinBaseUrl=function(){return c.Environment.isPrintScreenFrame()?a.PathUtils.getQueryString("skinPath"):a.PathUtils.getQueryString("skin")},e.prototype.getMediaBaseUrl=function(){return c.Environment.isPrintScreenFrame()?a.PathUtils.getQueryString("mediaPath"):a.PathUtils.getQueryString("media")},e.prototype.getActivityData=function(){var t=this;return c.Environment.isPrintScreenFrame()&&this.attributes.has(o.ParentEditorAttributes.canGetActivityData)?this.getDataFromParent().then(function(e){t.blocks=e.blocks,t.screenSettings=e.screenSettings,t.title=e.title}):new Promise(function(t,e){t()})},e.prototype.getConfigData=function(){return c.Environment.isPrintScreenFrame()&&this.attributes.has(o.ParentEditorAttributes.canGetConfigData)?this.getConfigFromParent():Promise.resolve()},e.prototype.createBlock=function(){return Promise.resolve().then(function(){var t=prompt('Block picker simulation. Enter the type of block to create (e.g. "MC" or "STATIC_heading"). Default is "STATIC_text".',"STATIC_text");if(!t)return Promise.resolve(null);var n="<"+t+"></"+t+">";return Promise.resolve(new o.BlockData({data:n,id:"simulated-block-"+e.blockId++}))})},e.prototype.insertBlock=function(t,e){return new Promise(function(t,e){t(!0)})},e.prototype.duplicateBlock=function(t){var e=this;return new Promise(function(n,o){var r=i.clone(t);t.id="bid"+ ++e.blockCount,n(r)})},e.prototype.editBlock=function(t,e,o){var r=this;this.$editorEl=n(t);var s=this.$editorEl;window.vcschangesize=function(t){s.find("iframe").height(t)},window.vcseditxml=o;var a=this.paths.basePath+"editors/test/edit.xhtml";this.$editorEl.html("<div><iframe style='width: 100%; border: none; seamless; overflow-y: hidden;'\tsrc='"+a+"'></iframe></div>"),i.delay(function(){r.onBlockEditorReady.trigger()},1e3)},e.prototype.getEditedContent=function(){return this.$editorEl.empty(),window.vcseditxml},e.prototype.openFlagEditor=function(t,e){var n=p.MiscUtils.getObjectByProperty(this.blocks,"id",e);n?this.flagSimulator.open(t,n):r.error("Unable to open flag editor: No block data found in parent editor for id "+e)},e.prototype.closeFlagEditor=function(t){this.flagSimulator.close()},e.prototype.doneEditBlock=function(){this.$editorEl.empty(),this.onBlockEditorClosed.trigger()},e.prototype.getPrintContext=function(){var t=this;return new h.EngineComms(window).requestPrintContext(a.PathUtils.getQueryString("id")).then(function(e){return t.productTitle=e.productTitle,t.title=e.screenTitle,Promise.resolve()})},e.prototype.getDataFromParent=function(){return new h.EngineComms(window).requestScreenData(a.PathUtils.getQueryString("id"))},e.prototype.getConfigFromParent=function(){return new h.EngineComms(window).requestEngineConfig(a.PathUtils.getQueryString("id"))},e.prototype.flagEditorClosed=function(){r.log("flag editor closed"),this.onFlagEditorClosed.trigger()},e.prototype.flagEditorDisplayChange=function(){r.log("flag editor dispay change"),this.flagsDisplayMode=this.flagSimulator.displayMode,this.onSetFlagsDisplayModeChange.trigger()},e.prototype.flagEditorStatusChange=function(){r.log("flag editor status change"),this.onFlagStatusChange.trigger(this.flagSimulator.blockData)},e.prototype.flagEditorAssignedChange=function(){r.log("flag assignment change"),this.onFlagAssignmentChange.trigger(this.flagSimulator.blockData)},e.blockId=0,e}(s.ParentEditor);e.ParentEditorLocal=f});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,
new i)}}();define("editorsRoot/utils/parenteditor/ParentEditorVCS",["require","exports","lodash","./ParentEditor","vsef/Log","../ScreenDataParser","vsef/Types"],function(t,e,n,i,o,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){var e=t.call(this)||this;o.note("ParentEditorVCS"),e.attributes.add([i.ParentEditorAttributes.canGetActivityData,i.ParentEditorAttributes.canGetConfigData]),e.screenEditorApi=parent.VcsEditorApi.getVcsEditor().getScreenEditorApi();var n=e.screenEditorApi.Event;return e.screenEditorApi.on(n.BLOCK_EDITOR_CLOSED,e.apiBlockEditorClosed.bind(e)),e.screenEditorApi.on(n.BLOCK_EDITOR_READY,e.apiBlockEditorReady.bind(e)),e.screenEditorApi.on(n.BLOCK_EDITOR_RESIZED,e.apiBlockEditorResized.bind(e)),e.screenEditorApi.on(n.CHANGE_SCREEN_DISPLAY_MODE,e.apiScreenDisplayMode.bind(e)),e.screenEditorApi.on(n.CHANGE_SCREEN_PREVIEW_WIDTH,e.apiScreenDisplayMode.bind(e)),e.screenEditorApi.on(n.CHANGE_FLAGS_DISPLAY_MODE,e.apiFlagsDisplayMode.bind(e)),e.screenEditorApi.on(n.BLOCK_FLAG_EDITOR_CLOSED,e.apiBlockFlagEditorClosed.bind(e)),e.screenEditorApi.on(n.BLOCK_FLAG_STATUS,e.apiBlockFlagStatus.bind(e)),e.screenEditorApi.on(n.BLOCK_FLAG_ASSIGNED,e.apiBlockFlagAssigned.bind(e)),e.mode=e.getScreenDisplayMode(),e.type=e.determineType(e.screenEditorApi.getScreenType()),e.flagsEnabled=e.screenEditorApi.getFlagsEnabled(),e.showScreenHeader=e.screenEditorApi.getShowScreenHeader(),e}return __extends(e,t),e.canCreate=function(){try{return parent&&parent.VcsEditorApi}catch(t){return!1}},e.prototype.getActivityData=function(){var t=this;return new Promise(function(e,n){var i=t.screenEditorApi.getInitialScreenData();o.note("got page data"),o.noteDir(i);var s=new r.ScreenDataParser(i);t.blocks=s.blocks,t.screenEngineId=s.screenEngineId,t.screenID=s.screenDataId,t.dataID=t.screenID,t.screenSettingsXml=s.settingsXml,t.screenSettings=s.settings,t.title=s.title,t.productTitle=s.productTitle,e()})},e.prototype.getConfigData=function(){return Promise.resolve(this.screenEditorApi.getEngineConfig())},e.prototype.getUserId=function(){return this.screenEditorApi.getUserId()},e.prototype.getUserEmail=function(){return this.screenEditorApi.getUserEmail()},e.prototype.getMediaBaseUrl=function(){return this.screenEditorApi.getMediaBaseUrl()},e.prototype.createBlock=function(){var t=this;return new Promise(function(e,n){t.screenEditorApi.openBlockPicker(function(t,i){t?n("addBlock picker API returned error:"+t):e(i?i:null)})})},e.prototype.insertBlock=function(t,e){var i=this;return new Promise(function(o,r){i.screenEditorApi.addBlock(e,t,function(t,i){t?r("addNewBlockToScreenDataAndSave ERROR:"+t):(n.assign(e,i),o(!0))})})},e.prototype.duplicateBlock=function(t){var e=this;return new Promise(function(i,o){e.screenEditorApi.duplicateBlock(t,function(e,r){e?o("clone block ERROR:"+e):(n.assign(t,r),i(t))})})},e.prototype.editBlock=function(t,e,n,i){this.screenEditorApi.openBlockEditor(t,e,i)},e.prototype.doneEditBlock=function(){this.screenEditorApi.closeBlockEditor()},e.prototype.getEditedContent=function(){return this.editedData},e.prototype.deleteBlock=function(t,e){this.screenEditorApi.deleteBlock(t,e)},e.prototype.setScreenXmlData=function(t){this.screenEditorApi.setScreenXmlData(t)},e.prototype.openFlagEditor=function(t,e){this.screenEditorApi.openFlagEditor(t,e)},e.prototype.closeFlagEditor=function(t){this.screenEditorApi.closeFlagEditor(t)},e.prototype.getBlockRegistryData=function(t){return this.screenEditorApi.getBlockTypeInfoMap()[t]},e.prototype.confirm=function(t,e){var n=this;return new Promise(function(i,o){n.screenEditorApi.confirm(t,e,function(t){i(t)})})},e.prototype.showSplitScreenDialog=function(t){var e=this;return new Promise(function(n,i){e.screenEditorApi.showSplitScreenDialog(t,function(t){n(t)})})},e.prototype.scrollScreenEditorToRect=function(t){this.screenEditorApi.scrollScreenEditorToRect(t)},e.prototype.navigateToScreen=function(t){this.screenEditorApi.navigateToScreen(t)},e.prototype.splitScreen=function(t,e){var i=this;return new Promise(function(o,r){var s={blockId:t};e&&n.assign(s,{name:e}),i.screenEditorApi.splitScreen(s,function(t){t?r(t):o()})})},e.prototype.apiBlockEditorClosed=function(t,e){this.editedData=e.data,this.onBlockEditorClosed.trigger()},e.prototype.apiBlockEditorReady=function(t,e){this.onBlockEditorReady.trigger()},e.prototype.apiBlockEditorResized=function(t){this.onBlockEditorResized.trigger()},e.prototype.apiFlagsDisplayMode=function(t,e){this.flagsDisplayMode=e,this.onSetFlagsDisplayModeChange.trigger()},e.prototype.apiBlockFlagEditorClosed=function(t,e){o.log("flag editor closed"),this.onFlagEditorClosed.trigger()},e.prototype.apiBlockFlagStatus=function(t,e){o.log("parent editor status"),this.onFlagStatusChange.trigger(e)},e.prototype.apiBlockFlagAssigned=function(t,e){this.onFlagAssignmentChange.trigger(e)},e.prototype.apiScreenDisplayMode=function(){this.previewWidth=this.screenEditorApi.getScreenPreviewWidth(),this.mode=this.getScreenDisplayMode(),this.onSetDisplayMode.trigger()},e.prototype.getScreenDisplayMode=function(){return"preview"===this.screenEditorApi.getScreenDisplayMode()?s.ScreenEditorMode.modePreview:s.ScreenEditorMode.modeEdit},e}(i.ParentEditor);e.ParentEditorVCS=a});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("editorsRoot/Screen",["require","exports","jquery","lodash","vsef/Log","vsef/AssetLoader","./model/ScreenEditorModel","./view/ScreenEditorView","vsef/Templates","vsef/utils/MiscUtils","vsef/EngineConfig","vsef/rootUI/RootUI","vsef/Paths","./utils/parenteditor/ParentEditor","vsef/utils/PathUtils","vsef/CFIMap","vsef/utils/DebugUtils","vsef/EventListener","vsef/Types","vsef/rootUI/Types","vsef/EngineComms","vsef/utils/Environment","vsef/utils/URL","./utils/parenteditor/ParentEditorLocal","./utils/ScreenDataParser","./utils/parenteditor/ParentEditorVCS"],function(t,e,n,i,o,r,s,a,l,c,u,h,d,p,f,g,m,v,y,b,_,w,C,x,T,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var S=function(t){function e(e,n){var i=t.call(this)||this;return i.startupTime=(new Date).getTime(),i.parentEditor=e,window.VST?(i.cfiMap=new g.CFIMap(n),i.cfiMap.attachVSTApi(window).then(function(){i.create()})):i.create(),i}return __extends(e,t),e.prototype.create=function(){var t=this;return this.parentEditor.isPrerendered&&0===n("html").width()&&n("html").css("width","768px"),this.paths=new d.Paths("",c.MiscUtils.getRequireJSRootPath(),this.parentEditor.getBaseRelativePath()),this.parentEditor.init().then(function(){return t.buildConfig()}).then(function(e){e.isDebug||"true"===f.PathUtils.getQueryString("debug")?o.setLogLevelValue(e.debugLevel):o.setLogLevelValue(o.LEVEL_NONE);var n=e.showConsole,i=e.debugLevel;"inline"===f.PathUtils.getQueryString("showConsole")&&(n=f.PathUtils.getQueryString("showConsole")),o.showJSConsole(n,i),o.note("screen create"),o.note("config loaded"),t.config=e;var r=e.gui.name,s=t.parentEditor.subproj,a=t.parentEditor.getSkinBaseUrl(),l=t.parentEditor.getMediaBaseUrl();return t.paths.mediaPath=l||t.paths.basePath+"activities/media/",t.paths.formSkinPaths(r,s,a),t.getActivityData()}).then(function(){return o.note("activityData loaded"),t.loadRootUI()}).then(function(e){return t.rootUI=e,t.parentEditor.isPrerendering||t.parentEditor.isPrerendered?t.rootUI.showLoadingOverlay(b.OverlayType.TransparentMedium,b.ScrollBehavior.FixedScrolling):t.rootUI.showLoadingOverlay(b.OverlayType.OpaqueWhite,b.ScrollBehavior.Blocking),o.note("root ui loaded"),t.loadAssets()}).then(function(e){return o.note("assets loaded"),t.build(e)}).then(function(t){return o.note("page build initialisation flag is "+t),Promise.resolve()}).catch(function(e){t.creationFailed(e)})},e.prototype.creationFailed=function(t){throw o.log("page creation failed with:"),o.error(t),c.MiscUtils.callPrerenderUtil("prerenderError",{error:t.message}),t},Object.defineProperty(e.prototype,"configFilesList",{get:function(){var t=[{url:this.paths.rootDataPath+"config.json",id:e.ID_CONFIG}],n=this.parentEditor.subproj;return n&&t.push({url:this.paths.dataPath+"config_"+n.toLowerCase()+".json",id:e.ID_CONFIG_PRODUCT}),t},enumerable:!0,configurable:!0}),e.prototype.buildConfig=function(){var t=this;return this.parentEditor.attributes.has(p.ParentEditorAttributes.canGetConfigData)?this.parentEditor.getConfigData().then(function(t){return Promise.resolve(new u.EngineConfig([t]))}):new Promise(function(n,i){r.AssetLoader.load(t.configFilesList).then(function(t){var i=new u.EngineConfig([t.get(e.ID_CONFIG),t.get(e.ID_CONFIG_PRODUCT)]);n(i)}).catch(function(t){o.log("buildConfig failed with:"),o.error(t)})})},e.prototype.getActivityData=function(){return this.parentEditor.attributes.has(p.ParentEditorAttributes.canGetActivityData)?this.parentEditor.getActivityData():new Promise(function(t,e){t()})},e.prototype.loadRootUI=function(){return(new h.RootUI).create(this.paths,this.config.isRTL)},e.prototype.loadAssets=function(){var t=[{url:this.paths.rootTemplatePath+"screen.html",id:e.ID_TEMPLATE},{url:this.paths.rootTemplatePath+"engine-shared.html",id:e.ID_SHARED_TEMPLATE}];if(!this.parentEditor.isPrerendered){t.push({url:this.paths.rootCssPath+this.config.gui.name+".css",id:e.ID_MAIN_CSS});var n=this.parentEditor.subproj;n&&t.push({url:this.paths.cssPath+this.config.gui.name+"_"+n.toLowerCase()+".css",id:e.ID_PRODUCT_CSS})}if(this.parentEditor.isPrerenderingCss)for(var i=0,s=this.config.architecture.interactiveEnginesList;i<s.length;i++){var a=s[i];t.push({url:this.paths.cssPath+"activity_blox/activities/"+a.toLowerCase()+".css",id:e.ID_ENGINE_CSS+a.toLowerCase()})}return this.parentEditor.attributes.has(p.ParentEditorAttributes.canGetActivityData)||t.push({url:this.paths.basePath+"activities/xml/SCREEN/"+this.parentEditor.dataID+".xml",id:e.ID_ACTIVITY_DATA,settings:{dataType:"text"}}),r.AssetLoader.load(t).catch(function(t){return o.log("page editor failed to load assets"),Promise.reject(t)})},e.prototype.build=function(t){var i=this;return w.Environment.isPrintScreenFrame()&&this.parentEditor.productTitle&&(document.title=document.title=this.parentEditor.productTitle+" : "+this.parentEditor.title),Promise.resolve().then(function(){return i.parentEditor.attributes.has(p.ParentEditorAttributes.canGetActivityData)?Promise.resolve():T.ScreenDataParser.compileScreenXml(t.get(e.ID_ACTIVITY_DATA),i.paths.basePath+"activities/xml/SCREEN/").then(function(t){return i.parentEditor.setActivityData(t),Promise.resolve()})}).then(function(){i.parentEditor.paths=i.paths,i.parentEditor.staticRegistry=i.config.architecture.staticRegistry;for(var o=i.parentEditor.subproj,r=t.idsFromAssets(t.assetsByExtension("css")),s=f.PathUtils.getDocBasePath(),a=i.parentEditor.getBaseRelativePath()||"",u="",h=i.config.getTheme(),d=0;d<r.length;d++){var p=t.get(r[d]);h.fonts&&r[d]===e.ID_MAIN_CSS&&(p=h.fonts.insertIntoCSS(p,"../fonts/")),p=c.MiscUtils.themeCSS(p,h),0===r[d].indexOf(e.ID_ENGINE_CSS)&&(p=c.MiscUtils.repathCSSAssets(p,i.paths.rootCssPath,t.getUrl(r[d]))),u+=p+"\n",0!==r[d].indexOf(e.ID_ENGINE_CSS)&&(p=c.MiscUtils.repathCSSAssets(p,s,s+a+t.getUrl(r[d])),c.MiscUtils.includeCSSInline(p,r[d]===e.ID_MAIN_CSS?"vcs-css":o.toLowerCase()+"-css"))}return i.parentEditor.isPrerenderingCss&&c.MiscUtils.callPrerenderUtil("prerender-css",{css:u}),i.templates=new l.Templates(t.get([e.ID_TEMPLATE,e.ID_SHARED_TEMPLATE])),i.model=i.createModel(),i.model.startupTime=Date.now(),i.model.version="20221215125633UTC-prod"===e.VERSION?"0.0":e.VERSION,i.view=i.createView(),i.listenTo(i.view.onPrint,i.print),i.parentEditor.isPrerendered?i.view.setElement(n(".screen").get(0)):(i.config.setLanguage(n("html")),i.config.setDirection(n("html")),n("body").append(i.view.render().$el),i.config.isRTL&&i.view.$el.addClass(y.RTL_STYLE)),i.rootUI.setContentEl(i.view.$el),i.model.backend.initialize()}).then(function(){return i.model.parse()}).then(function(){return i.parentEditor instanceof x.ParentEditorLocal?i.parentEditor.initFlagSimulator():Promise.resolve()}).then(function(){return i.addDebugComponents(),Promise.resolve(!0)})},e.prototype.createModel=function(){return new s.ScreenEditorModel(this.parentEditor,this.config)},e.prototype.createView=function(){return new a.ScreenEditorView(this.model,this.templates,"screeneditor-template",this.rootUI,this.config,this.cfiMap)},e.prototype.addDebugComponents=function(){var t=this;this.config.isDebug&&!this.parentEditor.isPrerendering&&this.view.$el.addClass("screen-debug");var e=new m.default(this.rootUI,this.config.debugSettings);e.startListening(),this.listenTo(e.onReset,function(){t.model.reset(!0)})},e.prototype.print=function(){var t=this,e=this.model.id;this.rootUI.showLoadingOverlay(b.OverlayType.Invisible);var r="";r=this.paths.baseRelativePath?this.paths.baseRelativePath+"index.xhtml":"index.xhtml";var s=new C.default(r,{id:e,eid:"SCREEN",reason:"printScreen",mediaPath:this.paths.mediaPath,preview:"true",screenType:"ScoredScreen"});this.paths.skinPath&&s.addParam("skinPath",this.paths.skinPath);var a=f.PathUtils.getQueryString("subproj");a&&s.addParam("subproj",a);var l=f.PathUtils.getQueryString("themestack");l&&s.addParam("themestack",l);var u=n('<iframe src="'+i.escape(s.toString())+'" class="print-iframe"/>');u.appendTo("body");var h=u.get(0),d=new _.EngineComms(h.contentWindow),p=this.model.getState();if(!p||0===this.model.blocks.length)return this.rootUI.hideLoadingOverlay(),void this.rootUI.showAlert("Your current work could not be printed.");var g={};(w.Environment.isBookshelf||this.parentEditor instanceof k.ParentEditorVCS)&&(g.productTitle=this.parentEditor.productTitle,g.screenTitle=this.parentEditor.title),d.sendPrintContext(e,g).then(function(){d.sendEngineConfig(e,t.config.getBaseDataString())}).then(function(){return d.sendScreenData(e,{title:t.parentEditor.title,blocks:t.model.blocks.map(function(t){return t.getBlockData()}),screenSettings:t.parentEditor.screenSettings})}).then(function(){return d.sendEngineState(e,p)}).then(function(){return d.waitForEngineInit(e)}).then(function(){return c.MiscUtils.whenAllImagesLoaded(h.contentWindow.document.body)}).then(function(){t.rootUI.hideLoadingOverlay(),h.contentWindow.document.execCommand("print",!1,null)||h.contentWindow.print(),u.remove()}).catch(function(t){o.error("Unable to print screen: "+t)})},e.VERSION="20221215125633UTC-prod",e.ID_ACTIVITY_DATA="activitydata",e.ID_TEMPLATE="template",e.ID_MAIN_CSS="maincss",e.ID_PRODUCT_CSS="productcss",e.ID_CONFIG="config",e.ID_CONFIG_PRODUCT="configProduct",e.ID_ENGINE_CSS="engineCSS",e.ID_SHARED_TEMPLATE="sharedTemplate",e}(v.EventListener);e.Screen=S}),define("vsef/utils/TimeUtils",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.createISODateString=function(t){return t?t.toISOString():(new Date).toISOString()},t.currentTime=function(){return new Date},t.getDuration=function(t,e){return(e.getTime()-t.getTime())/1e3},t.loadTime=new Date,t}();e.default=n});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("editorsRoot/model/ScoredScreenBlockModel",["require","exports","./ScreenBlockModel","vsef/Activity"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"submitted",{get:function(){return this.context.blockAPI.submitted},set:function(t){this.context.blockAPI.attributes.lacks(i.ActivityAttribute.Unsubmittable)&&(this.context.blockAPI.submitted=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"revealAnswer",{get:function(){return this.context.blockAPI.revealAnswer},set:function(t){this.context.blockAPI.revealAnswer=t},enumerable:!0,configurable:!0}),e}(n.ScreenBlockModel);e.default=o});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("editorsRoot/model/ScoredScreenEditorModel",["require","exports","./ScreenEditorModel","vsef/Log","vsef/contexts/Context","vsef/Types","vsef/utils/TimeUtils","vsef/utils/MiscUtils","vsef/AttemptCounter","./ScoredScreenBlockModel","vsef/Observable","vsef/EventDispatcher","vsef/utils/PathUtils","vsef/Activity","vsef/utils/ProcessWaiter","vsef/utils/AppConstants","vsef/utils/Environment","vsef/EngineComms","vsef/Flags"],function(t,e,n,i,o,r,s,a,l,c,u,h,d,p,f,g,m,v,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var b=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.submitted=!1,i.revealAnswer=!1,i.waitingForSubmit=!1,i.attributes=new y.Flags,n.engineSettings.base.buttons.print&&i.attributes.add(r.ScreenActivityAttribute.Printable),i.isScoredScreen=!0,i.flagsEnabled=e.flagsEnabled,i.showScreenHeader=e.showScreenHeader,i.initScreenSettings(),i.attempts=new l.AttemptCounter(i.screenSettings.attemptsAllowed),i.stateWaiter=new f.default(g.default.STATE_WAITER_TIMEOUT),i.onCommonUIReady=new h.EventDispatcher(i),i.listenTo(i.onSubmittedChange,i.submitChange),i.listenTo(i.onRevealAnswerChange,i.revealAnswerChange),i.listenTo(i.parentEditor.onBlockEditorClosed,i.blockEditorClosed),i}return __extends(e,t),Object.defineProperty(e.prototype,"canRevealAnswer",{get:function(){return this.hasScorableActivities&&this.screenSettings.canRevealAnswer&&(this.attempts.areInfinite||this.attempts.areExhausted)},enumerable:!0,configurable:!0}),e.prototype.submitResults=function(){return this.waitingForSubmit=!0,Promise.resolve()},e.prototype.reset=function(e){var n=this;this.isLoading=!0,this.submitted=!1,this.revealAnswer=!1,t.prototype.reset.call(this),e&&this.silently(function(){n.attempts.reset()}),this.attemptsNumChange(this.attempts.total),this.defer(function(){n.isLoading=!1})},e.prototype.makeAttempt=function(){this.isLoading||this.attempts.makeAttempt()},Object.defineProperty(e.prototype,"firstScorableBlock",{get:function(){var t=this.getBlocksByAttribute(p.ActivityAttribute.Scorable);return 0===t.length?null:t[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstSavableBlock",{get:function(){var t=this.getBlocksByAttribute(p.ActivityAttribute.Savable);return 0===t.length?null:t[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scorableBlocks",{get:function(){return this.blocks?this.blocks.filter(function(t){return t.context.blockAPI.attributes.has(p.ActivityAttribute.Scorable)}):[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasScorableActivities",{get:function(){return this.hasBlocksWithAttribute(p.ActivityAttribute.Scorable)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasSavableActivities",{get:function(){return this.hasBlocksWithAttribute(p.ActivityAttribute.Savable)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCorrect",{get:function(){return this.blocks.every(function(t){return t.context.blockAPI.attributes.lacks(p.ActivityAttribute.Scorable)||t.context.blockAPI.isCorrect})},enumerable:!0,configurable:!0}),e.prototype.numberScreenBlocks=function(){for(var t=1,e=0,n=this.blocks.length;e<n;e++){var i=this.blocks[e];i.context.blockAPI.attributes.has(p.ActivityAttribute.Savable)&&i.context.blockAPI.attributes.has(p.ActivityAttribute.Numerable)&&(i.screenBlockNumber--,this.screenSettings.autoNumberQuestions&&(i.screenBlockNumber=t++))}},e.prototype.setState=function(t){var e=this;switch(t.state.kind){case"ActivityCommonState":var n=t.state;if(!this.isValidState(n))return i.error("Invalid state returned by backend. Model will use default state."),this.onAlert.trigger(new Error("Your previous work is no longer available. The publisher may have updated the content, or an error may have occurred.")),void this.silently(function(){e.reset()});this.silently(function(){e.submitted=n.submitted,e.revealAnswer=n.revealAnswer,m.Environment.isReadOnly()&&e.submitted&&(e.revealAnswer=n.revealAnswer=!0)}),this.attempts.silently(function(){e.attempts.total=n.attempts})}for(var o=0;o<t.resultStates.length;o++){var s=t.resultStates[o],l=a.MiscUtils.getObjectByProperty(this.blocks,"id",s.id);if(l){var c={kind:"BlockActivityState",id:s.id,state:s.state,resultStates:s.resultStates,metaState:s.metaState,createdTime:s.createdTime,evaluationType:void 0===s.evaluationType?r.ActivityEvaluation.None:s.evaluationType};l.context.blockAPI.state=c}}},e.prototype.getState=function(){return{kind:"ScreenActivityState",state:this.getCommonState(),id:this.id,resultStates:this.getBlockStates(),metaState:new r.None,createdTime:s.default.createISODateString(),evaluationType:r.ActivityEvaluation.None}},e.prototype.initScreenSettings=function(){var t=-1,e=!0,n=!0,o=this.parentEditor.screenSettings;if(o)t=o.attemptsAllowed,e=o.canRevealAnswer,n=o.autoNumberQuestions;else{var s=d.PathUtils.getQueryString("attemptsAllowed"),a=d.PathUtils.getQueryString("canRevealAnswer"),l=d.PathUtils.getQueryString("autoNumberQuestions");s&&(t=parseInt(s,10)),a&&(e=r.stringOptionToBool(a)),l&&(n=r.stringOptionToBool(l))}this.screenSettings={attemptsAllowed:t,canRevealAnswer:e,autoNumberQuestions:n},i.note("ScoredScreenEditorModel initScreenSettings: attemptsAllowed = "+this.screenSettings.attemptsAllowed+", canRevealAnswer = "+this.screenSettings.canRevealAnswer+", autoNumberQuestions = "+this.screenSettings.autoNumberQuestions)},e.prototype.readData=function(){var e=this;return t.prototype.readData.call(this).then(function(){return i.note("ScoredScreenEditorModel parse activity data"),e.listenTo(e.attempts.onNumAttemptsChange,e.attemptsNumChange),Promise.resolve()})},e.prototype.requestState=function(){var t=this;return Promise.resolve().then(function(){if(m.Environment.isPrintScreenFrame()){return new v.EngineComms(window).requestEngineState(t.id).then(function(t){return t?[t]:[]})}if(t.backend&&t.parentEditor.mode===r.ScreenEditorMode.modePreview)return t.backend.loadState([t.id])}).then(function(e){if(e&&e.length>0){var n=e[0];n&&t.setState(n)}return Promise.resolve()})},e.prototype.screenDisplayModeChange=function(){t.prototype.screenDisplayModeChange.call(this),this.mode===r.ScreenEditorMode.modeEdit&&this.attempts.reset()},e.prototype.ready=function(){var e=this;return t.prototype.ready.call(this).then(function(){e.isLoading=!0;for(var t=0,n=e.blocks;t<n.length;t++){var i=n[t];e.listenTo(i.onBlockStateChange,e.blockStateChange)}return Promise.resolve()})},e.prototype.createBlockModel=function(t){var e=new c.default(this.parentEditor,t,this.userId,this.config);return e.context.parentAttributes={kind:"ScoredScreen",attributes:new y.Flags([o.ParentAttribute.HandlesAlerts,o.ParentAttribute.HandlesBackend])},e},e.prototype.revealAnswerChange=function(){for(var t=0,e=this.blocks;t<e.length;t++){e[t].revealAnswer=this.revealAnswer}},e.prototype.blockStateChange=function(){var t=this;this.stateWaiter.add(function(){var e=t.getState();if(e.resultStates.length>0&&!m.Environment.isReadOnly()){var n=t.backend.saveState;t.waitingForSubmit&&(n=t.backend.submitResult,t.waitingForSubmit=!1),n.call(t.backend,[e]).then(function(){i.log("State saved successfully")}).catch(function(t){i.error(t)})}})},e.prototype.getBlockStates=function(){var t=this;return this.blocks.reduce(function(e,n){var i=n.context.blockAPI.state;if(i){var o=i.resultStates[0],s={id:i.id,kind:"BlockResultState",state:new r.None,resultStates:i.resultStates,metaState:i.metaState,index:o.index,question:o.question,options:o.options,correctAnswer:o.correctAnswer,answer:o.answer,score:o.score,possible:o.possible,progress:o.progress,completion:o.completion,numAttempts:t.attempts.total,success:o.success,duration:o.duration,createdTime:i.createdTime,evaluationType:i.evaluationType};e.push(s)}return e},[])},e.prototype.attemptsNumChange=function(t){for(var e=0,n=this.blocks;e<n.length;e++){var i=n[e];i.context.blockAPI.attempts&&(i.context.blockAPI.attempts.total=t)}},e.prototype.isValidState=function(t){return a.MiscUtils.objectHasSameProps(t,this.getCommonState())},e.prototype.getCommonState=function(){return{kind:"ActivityCommonState",submitted:this.submitted,revealAnswer:this.revealAnswer,attempts:this.attempts.total}},e.prototype.submitChange=function(){for(var t=0,e=this.blocks;t<e.length;t++){e[t].submitted=this.submitted}},e.prototype.blockEditorClosed=function(){this.reset(!0)},e.prototype.hasBlocksWithAttribute=function(t){return!(!this.blocks||0===this.blocks.length)&&this.blocks.filter(function(e){return e.context.blockAPI.attributes.has(t)}).length>0},e.prototype.getBlocksByAttribute=function(t){return this.blocks.filter(function(e){return e.context.blockAPI.attributes.has(t)})},__decorate([u.observable],e.prototype,"blocks",void 0),__decorate([u.observable],e.prototype,"submitted",void 0),__decorate([u.observable],e.prototype,"revealAnswer",void 0),e}(n.ScreenEditorModel);e.default=b});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/commonUI/view/CommonUIActivityScreenView",["require","exports","./CommonUIActivityBaseView","../../utils/Environment","../../View","../../utils/DisplayUtils"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,n,i,o){var r=t.call(this,e,n,i,"",o)||this;return r.listenTo([r.model.onSubmittedChange,r.model.onRevealAnswerChange],r.redrawButtons),r.listenTo(r.model.onShowFooterChange,r.showFooter),r.listenTo(r.model.onBlockCountChange,r.blockCountChange),r}return __extends(e,t),e.prototype.getEvents=function(){return o.View.extendEvents(t.prototype.getEvents.call(this),{"click button[data-function='checkAllAnswers']":this.submit,"click button[data-function='resetAllAnswers']":this.reset,"click button[data-function='revealAllAnswers']":this.reveal,"click .feedback__review-link":this.reviewAnswersBtnClick})},e.prototype.focusGlobalFeedback=function(){var t=this.$el.find(".js-feedback-focus");r.DisplayUtils.scrollIntoView({$focusCtl:t,$to:t,forceFocus:!0})},e.prototype.render=function(){return t.prototype.render.call(this),this.redrawButtons(),this.$(".screen__header").removeClass("u-hide-element"),this},e.prototype.renderButtons=function(){if(!this.$el.hasClass("rendered")||i.Environment.isPrerendering()){var t=this.templates.get(this.btnsID)({submittedText:this.model.blockCount>1?"Submit All Answers":"Submit Answer"});this.$(".screen__footer .control-btns").html(t)}},e.prototype.renderInstructions=function(){this.$(".screen__header .screen__instructions").empty().html(this.model.instructions)},e.prototype.renderTitle=function(){this.$(".screen__header .screen__title").text(this.model.title)},e.prototype.renderGlobalFeedback=function(){this.$(".screen__footer .feedback__content").empty().html(this.model.globalFeedback)},e.prototype.renderGlobalFeedbackTitle=function(){},e.prototype.blockCountChange=function(){this.renderButtons(),this.redrawButtons()},e.prototype.submit=function(){this.model.submitted=!0,this.redrawButtons()},e.prototype.reset=function(){this.model.onResetAnswers.trigger(),this.model.submitted=!1,this.model.revealAnswer=!1},e.prototype.reveal=function(){this.model.revealAnswer=!0},e.prototype.redrawButtons=function(){this.$('button[data-function="checkAllAnswers"]').prop("disabled",this.model.submitted),this.$('button[data-function="revealAllAnswers"]').prop("disabled",this.model.revealAnswer),this.$('button[data-function="resetAllAnswers"]').prop("disabled",!this.model.submitted),this.$(".screen__footer").toggleClass("screen__footer--submitted",this.model.submitted),this.updateLastButton()},e.prototype.reviewAnswersBtnClick=function(){this.model.onReviewAnswers.trigger()},e.prototype.showFooter=function(){this.$(".screen__footer").toggleClass("u-hide-element",!this.model.showFooter)},e}(n.CommonUIActivityBaseView);e.default=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("vsef/commonUI/model/CommonUIActivityScreenModel",["require","exports","./CommonUIActivityModel","../../EventDispatcher","../../Observable"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=t.call(this,e)||this;return n.showFooter=!1,n.blockCount=0,n.onReviewAnswers=new i.EventDispatcher(n),n}return __extends(e,t),__decorate([o.observable],e.prototype,"showFooter",void 0),__decorate([o.observable],e.prototype,"blockCount",void 0),e}(n.CommonUIActivityModel);e.default=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/commonUI/CommonUIActivityScreen",["require","exports","./view/CommonUIActivityScreenView","./CommonUIActivityBase","../EventDispatcher","./model/CommonUIActivityScreenModel"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){var e=t.call(this)||this;return e.onSubmitChange=new o.EventDispatcher(e),e.onRevealAnswersChange=new o.EventDispatcher(e),e.onResetChange=new o.EventDispatcher(e),e.onReviewAnswers=new o.EventDispatcher(e),e}return __extends(e,t),Object.defineProperty(e.prototype,"canShowFooter",{get:function(){return!!this.model&&this.model.showFooter},set:function(t){this.model&&(this.model.showFooter=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blockCount",{get:function(){return this.model?this.model.blockCount:null},set:function(t){this.model&&(this.model.blockCount=t)},enumerable:!0,configurable:!0}),e.prototype.createUI=function(t){this.model=new r.default(this.id),this.view=new n.default(this.model,t,"common-ui-vcs-screen-btn-template",this.$el),this.listenTo(this.model.onSubmittedChange,this.submittedChange),this.listenTo(this.model.onRevealAnswerChange,this.revealAnswerChange),
this.listenTo(this.model.onResetAnswers,this.resetAnswers),this.listenTo(this.model.onReviewAnswers,this.reviewAnswers)},e.prototype.build=function(e){t.prototype.build.call(this,e),this.$el=this.$hostEl},e.prototype.submittedChange=function(){this.onSubmitChange.trigger()},e.prototype.revealAnswerChange=function(){this.onRevealAnswersChange.trigger()},e.prototype.resetAnswers=function(){this.onResetChange.trigger()},e.prototype.reviewAnswers=function(){this.onReviewAnswers.trigger()},e}(i.CommonUIActivityBase);e.default=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("editorsRoot/view/ScoredScreenBlockView",["require","exports","./ScreenBlockView"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,i,o){var r=t.call(this,e,n,i,o)||this;return r.listenTo(e.onScreenBlockNumberChange,r.screenBlockNumberChanged),r}return __extends(e,t),e.prototype.render=function(){return t.prototype.render.call(this),this.renderScreenBlockNumber(),this},e.prototype.addActivityIds=function(){(this.model.isSavable||this.model.isScorable)&&(this.$(".block-content").addClass("scored-result"),this.$(".block-content").attr("data-resultId",this.model.id))},e.prototype.renderScreenBlockNumber=function(){var t="";this.model.screenBlockNumber>0&&(t=this.model.screenBlockNumber+"."),this.$(".question-num").text(t),this.$(".no-autonumber").removeClass("no-autonumber")},e.prototype.screenBlockNumberChanged=function(){this.renderScreenBlockNumber()},e}(n.ScreenBlockView);e.ScoredScreenBlockView=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("editorsRoot/view/ScoredScreenEditorView",["require","exports","./ScreenEditorView","vsef/backends/BackendTypes","vsef/backends/BackendUtils","./ScoredScreenBlockView","vsef/Activity","vsef/utils/DisplayUtils","vsef/Types","../model/InsertControlsModel"],function(t,e,n,i,o,r,s,a,l,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function e(e,n,i,o,r,s,a){var l=t.call(this,e,n,i,o,s,a)||this;return l.commonUI=r,l.listenTo(l.model.backend.onAttributesChange,l.toggleBackendClasses),l.listenTo(l.model.onReset,l.reset),l.listenTo(l.model.onSubmittedChange,l.submitChange),l.listenOnce(l.model.onCommonUIReady,l.commonUIReady),l.listenTo(l.model.attempts.onNumAttemptsChange,l.attemptsChange),l.listenTo(l.commonUI.onSubmitChange,l.commonUISubmit),l.listenTo(l.commonUI.onResetChange,l.commonUIReset),l.listenTo(l.commonUI.onRevealAnswersChange,l.revealAnswersChange),l.listenTo(l.commonUI.onReviewAnswers,l.reviewAnswers),l.listenTo(l.commonUI.onPrint,l.print),l}return __extends(e,t),e.prototype.render=function(){return t.prototype.render.call(this),this.$el.addClass("scorable can-submit-results"),this.toggleBackendClasses(),this},e.prototype.blockInitialized=function(e){t.prototype.blockInitialized.call(this,e),this.toggleFooter()},e.prototype.createReadyListener=function(){var t=this;this.waitForAll([this.model.onCommonUIReady,this.model.onScreenReady],function(e){if(e)throw e;t.screenReady()})},e.prototype.beforeScreenReady=function(){this.model.numberScreenBlocks(),t.prototype.beforeScreenReady.call(this)},e.prototype.screenReady=function(){this.toggleFooter(),this.updateScreenCommonUI(),t.prototype.screenReady.call(this)},e.prototype.createScreenBlockView=function(t){return new r.ScoredScreenBlockView(t,this.templates,"screen-block-edit-template",void 0)},e.prototype.createInsertControlsModel=function(){return new c.default(-1,!1)},e.prototype.blocksChange=function(){this.toggleFooter(),this.model.reset(!0)},e.prototype.attemptsChange=function(){this.updateHeaderAttempts(),this.updateFooterAttempts()},e.prototype.commonUIReady=function(){this.listenTo(this.model.onBlocksChange,this.blocksChange),this.commonUI.submitted=this.model.submitted,this.commonUI.revealAnswer=this.model.revealAnswer,this.commonUI.title=this.model.title,this.updateHeaderAttempts()},e.prototype.commonUISubmit=function(){var t=this;if(this.commonUI.submitted&&this.commonUI.submitted!==this.model.submitted){this.model.blocks.filter(function(t){return!t.context.blockAPI.attributes.has(s.ActivityAttribute.Savable)||t.context.blockAPI.complete}).length===this.model.blocks.length?this.makeSubmission():this.rootUI.showConfirmModal({message:"You have unanswered questions. Are you sure you want to submit your answers?",onConfirm:function(){t.makeSubmission()},onClose:function(){t.commonUI.submitted=!1},confirmText:"Submit All Answers"})}else this.model.submitted=this.commonUI.submitted},e.prototype.makeSubmission=function(){var t=this;this.model.makeAttempt(),this.model.submitted=!0,this.commonUI.submitted&&!this.model.isLoading&&(this.model.submitResults(),setTimeout(function(){t.commonUI.focusGlobalFeedback()}))},e.prototype.submitChange=function(){this.updateScreenCommonUI()},e.prototype.commonUIReset=function(){this.model.reset(),this.updateHeaderAttempts(),this.updateScreenCommonUI();var t=this.$el.find(".screen__title");a.DisplayUtils.scrollIntoView({$to:t,$focusCtl:t,forceFocus:!0})},e.prototype.updateHeaderAttempts=function(){var t=this.model.attempts.areInfinite?-1:this.model.attempts.remaining;this.commonUI.instructions=this.templates.get("common-ui-scored-screen-header-attempts")({attempts:t})},e.prototype.updateFooterAttempts=function(){if(this.model.submitted){var t=void 0;t=this.model.hasScorableActivities?this.model.isCorrect?"correct":"incorrect":"submitted";var e=this.templates.get("common-ui-scored-screen-feedback-"+t)();this.commonUI.globalFeedback=e}else this.commonUI.globalFeedback=""},e.prototype.reset=function(){this.commonUI.reset(),this.updateScreenCommonUI()},e.prototype.revealAnswersChange=function(){this.model.revealAnswer=this.commonUI.revealAnswer},e.prototype.toggleBackendClasses=function(){for(var t=[i.BackendAttribute.canScore,i.BackendAttribute.canPersistState],e=0,n=t;e<n.length;e++){var r=n[e];this.$el.toggleClass(o.default.backendAttributeToCssClass(r),this.model.backend.attributes.has(r))}},e.prototype.updateScreenCommonUI=function(){this.$el.toggleClass("submitted",this.commonUI.submitted),this.$el.toggleClass("printable",this.commonUI.submitted&&this.model.attributes.has(l.ScreenActivityAttribute.Printable)),this.commonUI.submitted?(this.$el.toggleClass("answer-can-be-revealed",this.model.canRevealAnswer),this.$el.toggleClass("attempts-exhausted",this.model.attempts.areExhausted),this.$el.toggleClass("incorrect",!this.model.isCorrect)):this.$el.removeClass("answer-can-be-revealed attempts-exhausted incorrect"),this.updateHeaderAttempts(),this.updateFooterAttempts()},e.prototype.reviewAnswers=function(){var t=this.model.firstSavableBlock;t&&t.setFocus()},e.prototype.toggleFooter=function(){this.commonUI.canShowFooter=this.model.hasSavableActivities||this.model.hasScorableActivities;var t=this.model.scorableBlocks;this.commonUI.blockCount=t?t.length:0},e.prototype.print=function(){this.onPrint.trigger()},e}(n.ScreenEditorView);e.default=u});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("editorsRoot/ScoredScreen",["require","exports","./Screen","./model/ScoredScreenEditorModel","vsef/commonUI/CommonUIActivityScreen","./view/ScoredScreenEditorView"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createModel=function(){return new i.default(this.parentEditor,this.config)},e.prototype.createView=function(){return new r.default(this.model,this.templates,"screeneditor-template",this.rootUI,this.commonUI,this.config,this.cfiMap)},e.prototype.create=function(){var e=this;return this.buildCommonUI().then(function(){return t.prototype.create.call(e)}).then(function(){return e.commonUI.create(e.paths,e.parentEditor.screenID,e.view.$el)}).then(function(){return e.model.onCommonUIReady.trigger(),e.model.isLoading=!1,Promise.resolve()}).catch(function(t){e.creationFailed(t)})},e.prototype.buildCommonUI=function(){return this.commonUI=new o.default,Promise.resolve(this.commonUI)},e}(n.Screen);e.default=s}),define("editorsRoot/ScreenFactory",["require","exports","vsef/Types","./ScoredScreen","./Screen"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.create=function(t,e){switch(t.type){case n.ScreenType.Scored:return new i.default(t,e);default:return new o.Screen(t,e)}},t}();e.default=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("editorsRoot/utils/parenteditor/ParentEditorStatic",["require","exports","./ParentEditor","vsef/Log","vsef/Paths","vsef/utils/PathUtils","vsef/Types","../ScreenDataParser"],function(t,e,n,i,o,r,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(){var e=this;return i.note("ParentEditorStatic"),e=t.call(this)||this,e.context=window.context,e.paths=new o.Paths(e.context.engineApi.getEnginesBaseUrl()),e.screenID=e.context.did,e.dataID=e.screenID,e.reason=s.RenderReason.Prerendered,e.isPrerendered=!0,e.mode=s.ScreenEditorMode.modePreview,e._skinBaseUrl=e.adjustPath(e.context.engineApi.getSkinsBaseUrl()),e._mediaBaseUrl=r.PathUtils.ensurePathEndSeparator(e.context.engineApi.getMediaBaseUrl()),e.type=e.determineType(e.context.screenType),e.embeddedActivityData=e.context.engineApi.getActivityData(),e.embeddedActivityData&&e.attributes.add(n.ParentEditorAttributes.canGetActivityData),e.flagsEnabled=!0,e.showScreenHeader=!0,r.PathUtils.resolveNS(window,"VST.Book.getTitle")&&(e.productTitle=window.VST.Book.getTitle(),e.title=document.title),e}return __extends(e,t),e.canCreate=function(){return window.context&&"epub"===window.context.type},e.prototype.getActivityData=function(){var t=new a.ScreenDataParser(this.embeddedActivityData);return this.blocks=t.blocks,this.isMediaPathFlat=t.isMediaPathFlat,this.screenSettingsXml=t.settingsXml,this.screenSettings=t.settings,Promise.resolve(void 0)},e.prototype.getMediaBaseUrl=function(){return this._mediaBaseUrl},e.prototype.getSkinBaseUrl=function(){return this._skinBaseUrl},e.prototype.getBaseRelativePath=function(){return this.context.engineApi.getEnginesBaseUrl()?r.PathUtils.ensurePathEndSeparator(this.context.engineApi.getEnginesBaseUrl()):void 0},e.prototype.adjustPath=function(t){if(!t||!t.length||!this.context.engineApi.getEnginesBaseUrl)return t;var e=r.PathUtils.getDocBasePath(),n=e+this.context.engineApi.getEnginesBaseUrl();return r.PathUtils.resolveRelativePathFromTo(n,e+t)},e}(n.ParentEditor);e.ParentEditorStatic=l}),define("editorsRoot/utils/ScreenUtils",["require","exports","./parenteditor/ParentEditorVCS","./parenteditor/ParentEditorLocal","./parenteditor/ParentEditorStatic"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.createParentEditor=function(){return n.ParentEditorVCS.canCreate()?new n.ParentEditorVCS:o.ParentEditorStatic.canCreate()?new o.ParentEditorStatic:new i.ParentEditorLocal},t}();e.ScreenUtils=r}),define("editorsRoot/App",["require","exports","./ScreenFactory","./utils/ScreenUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.screen=n.default.create(i.ScreenUtils.createParentEditor(),t)}return t}();e.App=o});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/contexts/FloeContext",["require","exports","jquery","lodash","../AssetLoader","../Paths","../Log","./Context","../utils/PathUtils","../EngineComms","../utils/MiscUtils","../utils/Environment"],function(t,e,n,i,o,r,s,a,l,c,u,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.defineAttributes=function(){t.prototype.defineAttributes.call(this),this.attributes.add(a.ContextAttribute.StandAlone)},e.prototype.init=function(t){var e=this;return new Promise(function(o,s){if(e.initialised)return void o();e.setupEngineName(l.PathUtils.getQueryString("eid"),t),e.info=e.info||t.architecture.staticRegistry[e.engineID],e.activity=l.PathUtils.getQueryString("did"),e.paths=new r.Paths("",u.MiscUtils.getRequireJSRootPath());var a,c=h.Environment.isPrintBlockFrame();c&&(e.paths.mediaPath=l.PathUtils.getQueryString("mediaPath"),a=l.PathUtils.getQueryString("skinPath"));var d=t.gui.name,p=l.PathUtils.getQueryString("subproj");e.paths.formSkinPaths(d,p,a),c||(e.paths.mediaPath=e.paths.basePath+"activities/media/"),e.subproj=l.PathUtils.getQueryString("subproj");var f=p&&!t.architecture.isCoreBlock(e.engineID)?p:"";e.engineCode="enginesRoot"+f+"/engines/"+e.engineID+"/"+e.engineID+"Engine",e.$el=n("<div/>").addClass("content").appendTo(n("body")),(c?e.getPrintContext():Promise.resolve()).then(function(){i.defer(function(){e.initialised=!0,o()})})})},e.prototype.getPrintContext=function(){var t=this;return new c.EngineComms(window).requestPrintContext(l.PathUtils.getQueryString("id")).then(function(e){return t.productTitle=e.productTitle,t.screenTitle=e.screenTitle,Promise.resolve()})},e.prototype.getActivityData=function(){return h.Environment.isPrintBlockFrame()?this.getActivityDataFromParent():this.getActivityDataFromUrl()},e.prototype.loadState=function(e){var n=this;return s.note("loading state"),Promise.resolve().then(function(){if(h.Environment.isPrintBlockFrame()){return new c.EngineComms(window).requestEngineState(l.PathUtils.getQueryString("id")).then(function(t){return Promise.resolve(t)})}return t.prototype.loadState.call(n,e)})},e.prototype.setType=function(){this.type=a.ContextType.Floe},e.prototype.getActivityDataFromUrl=function(){var t=this;return new Promise(function(e,n){o.AssetLoader.load([{url:t.paths.basePath+"activities/xml/"+(t.engineNativeClass||t.engineClass)+"/"+t.activity+".xml",id:"activityData",settings:{dataType:"text"}}]).then(function(t){var n=t.get("activityData");n=n.replace(/\\"/gi,"&quot;"),e(n)}).catch(function(t){s.log("context.getActivityData failed with:"),s.error(t)})})},e.prototype.getActivityDataFromParent=function(){return new Promise(function(t,e){new c.EngineComms(window).requestActivityData(l.PathUtils.getQueryString("id")).then(function(e){e=e.replace(/\\"/gi,"&quot;"),t(e)})})},e}(a.Context);e.FloeContext=d}),define("vsef/contexts/ContextUtils",["require","exports","./FloeContext","../utils/PathUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.establishContext=function(){if(void 0!==i.PathUtils.getQueryString("eid"))return new n.FloeContext;throw new Error("Error: Engine cannot establish its runtime context")},t}();e.ContextUtils=o}),define("enginesRoot/shell/SingleEngineShell",["require","exports","jquery","vsef/Log","vsef/EngineConfig","vsef/AssetLoader","vsef/Paths","vsef/utils/PathUtils","vsef/backends/BackendFactory"],function(t,e,n,i,o,r,s,a,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function e(t){this.create(t)}return e.prototype.create=function(e){var n=this;this.context=e,this.paths=new s.Paths("",this.rootPath),this.buildConfig().then(function(t){return n.config=t,n.context.backend=n.createBackend(),n.context.info={icon:"",label:"Single Activity Shell",editable:!0,implCat:"",salesCat:""},e.init(t)}).then(function(){t([e.engineCode],function(t){n.engine=new t[e.engineClass+"Engine"](e)})}).catch(function(t){throw i.log("SingleEngineShell2 initialisation failed with:"),i.error(t),t})},Object.defineProperty(e.prototype,"configFilesList",{get:function(){var t=[{url:this.paths.rootDataPath+"config.json",id:e.ID_CONFIG}];return a.PathUtils.getQueryString("subproj")&&t.push({url:this.paths.dataPath+"config_"+subproj.toLowerCase()+".json",id:e.ID_CONFIG_PRODUCT}),t},enumerable:!0,configurable:!0}),e.prototype.buildConfig=function(){var t=this;return new Promise(function(n,s){r.AssetLoader.load(t.configFilesList).then(function(t){var i=[t.get(e.ID_CONFIG)],r=t.get(e.ID_CONFIG_PRODUCT);r&&i.push(r);var s=new o.EngineConfig(i);n(s)}).catch(function(t){i.log("SingleEngineShell buildConfig failed with:"),i.error(t)})})},e.prototype.createBackend=function(){return l.default.create(this.config)},Object.defineProperty(e.prototype,"rootPath",{get:function(){var t=n("script[data-main]").attr("data-main")||"";return t?(t=t.split("/").slice(0,-1).join("/"),t&&(t+="/"),t):""},enumerable:!0,configurable:!0}),e.ID_CONFIG="config",e.ID_CONFIG_PRODUCT="configProduct",e}();e.SingleEngineShell=c}),define("enginesRoot/App",["require","exports","vsef/contexts/ContextUtils","vsef/contexts/Context","./shell/SingleEngineShell"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){var t=n.ContextUtils.establishContext();t.type===i.ContextType.Floe&&(this.shell=new o.SingleEngineShell(t))}return t}();e.App=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/StaticEngine",["require","exports","jquery","lodash","./Log","./Content","./Engine","./Templates","./utils/MiscUtils","./AssetLoader","./Types"],function(t,e,n,i,o,r,s,a,l,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h=function(t){function e(n){var i=t.call(this,n)||this;return i.id="static"+e.staticId++,i}return __extends(e,t),e.prototype.create=function(){var t=this;o.note("StaticEngine create"),this.isPrerendered()&&(this.$el=this.context.$el,this.enableScrollComponents(),this.attachToContent()),this.context.init().then(function(){return t.context.onBlockApiInitialized.trigger(),t.isPrerendered()?(t.context.blockAPI.onEngineInitialized.trigger(),Promise.resolve()):Promise.resolve().then(function(){return o.note("context initialized"),t.extractContextInfo(),t.buildConfig()}).then(function(e){return o.note("config loaded"),t.config=e,t.$el.toggleClass(u.RTL_STYLE,t.config.isRTL),t.context.getActivityData()}).then(function(e){return o.note("activity data loaded"),t.activityData=e,t.buildContent(),Promise.resolve()})})},e.prototype.buildContent=function(){var t,e=this,h=new r.Content,d=[{url:this.paths.rootTemplatePath+"static.html",id:"StaticTemplate"}],p=this.context.subproj;return p&&this.config.architecture.engines[this.context.engineClass].hasTemplateOverride&&d.push({url:this.paths.templatePath+"static.html",id:"StaticProductTemplate"}),new Promise(function(r,f){c.AssetLoader.load(d).then(function(o){var c=n.parseXML(e.activityData),d=[o.get("StaticTemplate")];p&&(d=[o.get("StaticProductTemplate")].concat(d));var f=new a.Templates(d),g=l.MiscUtils.XMLtoJSON(c),m=c.documentElement.tagName,v=g[m];"string"==typeof v&&(v={}),v.id||(v.id=e.id);var y=i.extend({},v),b=e.checkHasContent(y)||!e.context.info.editable;y.info=e.context.info;var _=m.toLowerCase().replace(/_/g,"-");b?(i.extend(y,{mediaPath:e.context.paths.mediaPath}),t=f.get(_+"-template")(y)):t=e.context.isPrerendering?"":f.get("utility-empty-"+(s.Engine.isEpub?"epub-":"")+"template")({blockType:_,blockLabel:e.context.info.label});var w=n(t);s.Engine.preprocessXML(w),e.$el.append(w),e.enableScrollComponents(),e.$el.addClass(e.config.options.cssClassList),e.$el.toggleClass(u.EMPTY_STYLE,!b),e.attachToContent(),r(h)}).catch(function(n){o.log("static build content failed with:"),o.error(n);var i;12===n.code&&(i=t),s.Engine.showBlockError(e.$el,n.message,u.EngineType.EngineStatic,i),e.$el.addClass("error"),e.context.blockAPI.onEngineInitialized.trigger()})})},e.prototype.attachToContent=function(){this.context.rootUI.preprocessContent(this.$el),this.context.blockAPI.onEngineInitialized.trigger()},e.prototype.checkHasContent=function(t){var e=0;for(var n in t)if(t.hasOwnProperty(n)){if(e++,"id"===n)continue;var i=t[n];if("string"==typeof i&&i.length)return!0}return!e},e.prototype.isPrerendered=function(){return this.context.$el.parent().hasClass("rendered")&&!this.context.isPrerendering},e.staticId=0,e}(s.Engine);e.StaticEngine=h});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/STATIC/STATICEngine",["require","exports","vsef/Log","vsef/StaticEngine"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){return n.note("created STATIC engine"),t.call(this,e)||this}return __extends(e,t),e}(i.StaticEngine);e.STATICEngine=o});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/MC/model/MCAnswerModel",["require","exports","vsef/utils/PathUtils","vsef/Log","vsef/Types","vsef/utils/StringUtils"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,o){var s=this;return i.note("created MCAnswerModel"),s=t.call(this,{text:e.find("answerText").text(),audio:n.PathUtils.readMediaPath(e,"answerAudio",o.mediaPath),image:n.PathUtils.readMediaPath(e,"answerImage",o.mediaPath),imageAlt:e.find("answerImageAltText").text()})||this,s.correct="yes"===e.find("isCorrect").attr("value"),s.value=r.default.htmlToText(e.find("answerText").text()),s}return __extends(e,t),e}(o.StimulusElement);e.MCAnswerModel=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/stimulus/StimulusModel",["require","exports","../Types"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),Object.defineProperty(e.prototype,"contentClasses",{get:function(){var t=[];return this.hasImage&&t.push("has-image"),this.hasAudio&&t.push("has-audio"),this.hasText&&t.push("has-reading"),(this.hasVideo||this.hasEmbeddedVideo)&&t.push("has-video"),(this.hasVideo||this.hasEmbeddedVideo)&&this.hasVideoInfo&&t.push("has-video-info"),(this.hasVideo||this.hasEmbeddedVideo)&&this.hasVideoTranscript&&t.push("has-video-transcript"),this.hasAudio&&this.hasAudioTranscript&&t.push("has-audio-transcript"),this.hasImageCaption&&t.push("has-fig-caption"),t.length?t.join(" "):""},enumerable:!0,configurable:!0}),e}(n.StimulusElement);e.StimulusModel=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("vsef/stimulus/RevealStimulusModel",["require","exports","../Model","./StimulusModel","../Observable"],function(t,e,n,i,o){"use strict";function r(t){return["hint"][t]}Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.Hint=0]="Hint"}(e.RevealStimulusType||(e.RevealStimulusType={})),e.revealStimulusTypeToString=r;var s=function(t){function e(e,n){var o=t.call(this)||this;return o.stimulus=new i.StimulusModel(e),o.showContent=!1,o.type=n,o}return __extends(e,t),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.stimulus.isEmpty},enumerable:!0,configurable:!0}),__decorate([o.observable],e.prototype,"showContent",void 0),e}(n.Model);e.RevealStimulusModel=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("vsef/QuestionModel",["require","exports","lodash","./Types","./Observable","./EventDispatcher","./stimulus/RevealStimulusModel","./utils/MiscUtils","./utils/Environment","./utils/TimeUtils"],function(t,e,n,i,o,r,s,a,l,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function e(e,n,i){var o=t.call(this,i)||this;return o.numAttempts=0,o.hint=new s.RevealStimulusModel,o.hint.type=s.RevealStimulusType.Hint,o.index=e,o.modified=o.submitted=o.revealAnswer=!1,o.onAfterReset=new r.EventDispatcher(o),o.onPresent=new r.EventDispatcher(o),o.onTakeFocus=new r.EventDispatcher(o),o.onStateChange=new r.EventDispatcher(o),o.onAnswerChange=new r.EventDispatcher(o),o.onShowFeedbackChange=new r.EventDispatcher(o),o.survey=!1,o.showFeedback=!1,o.completionSettings=n,o}return __extends(e,t),Object.defineProperty(e.prototype,"progress",{get:function(){return this.complete>=this.possibleComplete?1:this.complete/this.possibleComplete},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"answerCount",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"success",{get:function(){return this.score===[].concat(this.getCorrectAnswer()).length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"possibleScore",{get:function(){return[].concat(this.getCorrectAnswer()).length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"score",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"possibleComplete",{get:function(){return this.getCorrectAnswer().length},enumerable:!0,configurable:!0}),e.prototype.getState=function(){return{kind:"QuestionResultState",version:1,id:this.qid,resultStates:[],metaState:new i.None,index:this.index,options:[],question:this.getQuestion(),correctAnswer:[].concat(this.getCorrectAnswer()),answer:this.getAnswer(),score:this.score,possible:this.possibleScore,progress:this.progress,completion:this.isComplete(),success:this.success,numAttempts:this.numAttempts,duration:0,createdTime:c.default.createISODateString(),evaluationType:i.ActivityEvaluation.None,state:this.getQuestionState()}},e.prototype.setState=function(t){n.isNumber(t.numAttempts)&&(this.numAttempts=t.numAttempts);var e=t.state;switch(e.kind){case"None":break;default:var i=e;this.submitted=i.submitted,this.revealAnswer=i.revealAnswer,this.showFeedback=i.showFeedback}if(!this.isValidState(t))throw new Error("Invalid question state returned by backend. QuestionModel will use default state.")},e.prototype.isComplete=function(){if(this.completionSettings){var t=this.completionSettings.min;return t<0?this.complete>=this.possibleComplete:0===t||this.complete>=t}return this.complete>0},e.prototype.getQuestion=function(){return this.text},e.prototype.isValidState=function(t){var e=[].concat(t.correctAnswer),n=[].concat(this.getQuestion()),i=[].concat(t.question);return this.isValidStateId(t.id)&&a.MiscUtils.arraysMatch(n,i)&&this.isValidStateAnswer(e)&&a.MiscUtils.objectHasSameProps(t.state,this.getQuestionState())},e.prototype.resetAnswer=function(){var t=this;this.isResetting=!0,this.hint.showContent=!1,this.silently(function(){t.complete=0,t.modified=!1,t.submitted=!1,t.revealAnswer=!1})},e.prototype.afterResetAnswer=function(){this.onAfterReset.trigger(),this.isResetting=!1},e.prototype.present=function(){this.onPresent.trigger()},e.prototype.takeFocus=function(){this.onTakeFocus.trigger()},e.prototype.isValidStateAnswer=function(t){return a.MiscUtils.arraysMatch([].concat(this.getCorrectAnswer()),t,!0)},e.prototype.calculateScore=function(t,e){if(1===this.possibleScore){if(1===t&&0===e)return 1;if(0===t&&1===e)return 0}return t>0?t:0},e.prototype.isValidStateId=function(t){return l.Environment.isPrintFrame()||t===this.qid},__decorate([o.observable],e.prototype,"complete",void 0),__decorate([o.observable],e.prototype,"modified",void 0),__decorate([o.observable],e.prototype,"submitted",void 0),__decorate([o.observable],e.prototype,"revealAnswer",void 0),__decorate([o.observable],e.prototype,"visible",void 0),__decorate([o.observable],e.prototype,"showHint",void 0),__decorate([o.observable],e.prototype,"disabled",void 0),e}(i.StimulusElement);e.QuestionModel=u}),define("vsef/state/EngineState",["require","exports","../utils/TimeUtils"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.kind="BlockActivityState",this.id=t,this.resultStates=[],this.metaState={kind:"MetaState",pageStates:{kind:"PageStates",index:-1,states:[]}},this.createdTime=n.default.createISODateString()}return t}();e.EngineState=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/InteractiveModel",["require","exports","./EngineModel","./Log"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this,e)||this;return i.note("created InteractiveModel"),n}return __extends(e,t),e}(n.EngineModel);e.InteractiveModel=o})
;var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("vsef/ActivityModel",["require","exports","./Log","./EventDispatcher","./Observable","./state/EngineState","./InteractiveModel","./Types","./Types","./utils/TimeUtils","./utils/AppConstants","./utils/Environment","./Flags","./Activity","./utils/ProcessWaiter"],function(t,e,n,i,o,r,s,a,l,c,u,h,d,p,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var g=function(t){function e(e){var o=t.call(this,e)||this;return n.note("created BaseEngineModel"),o.attributes=new d.Flags([p.ActivityAttribute.Scorable,p.ActivityAttribute.Savable,p.ActivityAttribute.Numerable,p.ActivityAttribute.Printable,p.ActivityAttribute.QuestionGroup]),o.submitted=!1,o.onCompleteChange=new i.EventDispatcher(o),o.onAlert=new i.EventDispatcher(o),o.onInvalidState=new i.EventDispatcher(o),o.onEngineChangeSize=new i.EventDispatcher(o),o.onEngineInitialized=new i.EventDispatcher(o),o.onReset=new i.EventDispatcher(o),o.stateWaiter=new f.default(u.default.STATE_WAITER_TIMEOUT),o.useFeedbackFocusPrefixDiv=h.Environment.isiOS,o.listenTo(o.onPagesChange,o.pagesChange),o.listenTo(o.onSubmittedChange,o.submittedChange),o.listenTo(o.onRevealAnswerChange,o.revealAnswerChange),o}return __extends(e,t),Object.defineProperty(e.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTitleSet",{get:function(){return void 0!==this._title&&""!==this._title},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instructions",{get:function(){return this._instructions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instructionsMobile",{get:function(){return this._instructionsMobile},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curPage",{get:function(){return void 0===this.pageIndex||null===this.pageIndex||-1===this.pageIndex?null:this.pages[this.pageIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSinglePage",{get:function(){return this.pages.length<=1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"questionLayout",{get:function(){return this._questionLayout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isStacked",{get:function(){return this.questionLayout===l.QuestionLayout.Stacked},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPaged",{get:function(){return this.questionLayout===l.QuestionLayout.Paged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stimulusPlacement",{get:function(){return this._stimulusPlacement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRevealAnswer",{get:function(){return this._canRevealAnswer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"complete",{get:function(){return this.pages.filter(function(t){return t.complete}).length>0},set:function(t){var e=!1;this.pages=this.pages.map(function(n){return e=e||n.complete===t,n.complete=t,n}),e&&this.onCompleteChange.trigger()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCorrect",{get:function(){return this.pages.filter(function(t){return t.correct}).length===this.pages.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasFeedback",{get:function(){return this.pages.filter(function(t){return t.hasFeedback}).length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"answerCanBeRevealed",{get:function(){return this.canRevealAnswer&&(this.attempts.areExhausted||this.attempts.areInfinite)},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var t=0,e=this.pages;t<e.length;t++){var n=e[t];n.clearAnswers(),n.attempts.reset();for(var i=0,o=n.questions;i<o.length;i++){o[i].numAttempts=0}}this.onReset.trigger()},e.prototype.getIsEmpty=function(){return!this.pages||0===this.pages.length},e.prototype.setStateSaveDelay=function(t){this.stateWaiter.delay=t},e.prototype.setFocus=function(){this.submitted?this.questions[0].present():this.pages[0]&&this.pages[0].setQuestionFocus()},e.prototype.setData=function(t,e){for(var n=this,i=0,o=t;i<o.length;i++){var r=o[i],s=t.indexOf(r);r.pid=this.id+"-p"+s,r.index=s,r.stimulus&&(r.stimulus.id=r.pid+"-stim"),this.survey&&r.setSurvey(),r.stacked=this.questionLayout===l.QuestionLayout.Stacked;for(var a=0,c=r.questions;a<c.length;a++){var u=c[a];u.pageNum=s,u.qid=r.pid+"-q"+r.questions.indexOf(u),u.hint&&(u.hint.id=u.qid+"-hint")}}this.pages=t,this.questions=e,this.state?this.loadState(this.state):this.silently(function(){n.rebuildState()});for(var h=0,d=this.pages;h<d.length;h++){var r=d[h];this.listenTo(r.onStateChange,this.stateChange)}},e.prototype.loadState=function(t){try{if(!this.isValidState(t))throw new Error("Invalid activity state returned by backend. ActivityModel will use default state.");for(var e=0,i=this.pages;e<i.length;e++){var o=i[e];o.canBroadcastState=!1}for(var r=0;r<this.questions.length;r++)if(t.resultStates[r]){var s=this.questions[r];try{s.setState(t.resultStates[r])}catch(t){n.error("Unable to set question state: "+t),this.onAlert.trigger("Some of your previous work is no longer available. The publisher may have updated the content, or an error may have occurred.")}}switch(t.metaState.kind){case"MetaState":switch(t.metaState.pageStates.kind){case"PageStates":for(var l=t.metaState.pageStates,c=0,u=this.pages;c<u.length;c++){var o=u[c],h=l.states[this.pages.indexOf(o)];h&&o.loadState(h)}break;default:for(var d=0,p=this.pages;d<p.length;d++){var o=p[d];o.loadState(new a.None)}}}for(var f=0,g=this.pages;f<g.length;f++){var o=g[f];o.canBroadcastState=!0}}catch(t){return n.error("Unable to set activity state: "+t),this.reset(),void this.onAlert.trigger("Some of your previous work is no longer available. The publisher may have updated the content, or an error may have occurred.")}},e.prototype.rebuildState=function(){var t=this,e=new r.EngineState(this.id);return e.resultStates=this.questions.map(function(e){var n=e.getState();return n&&(n.duration=c.default.getDuration(c.default.loadTime,c.default.currentTime())/t.questions.length),n}),e.resultStates.length<1?null:e.resultStates.some(function(t){return!t})?null:(this.isStacked?e.metaState.pageStates=new a.None:e.metaState.pageStates={kind:"PageStates",states:this.pages.map(function(t){return t.getState()}),index:this.pageIndex},this.attributes.has(p.ActivityAttribute.Scorable)?e.evaluationType=a.ActivityEvaluation.Graded:this.attributes.has(p.ActivityAttribute.Savable)?e.evaluationType=a.ActivityEvaluation.Submitted:e.evaluationType=a.ActivityEvaluation.None,void(this.state=e))},e.prototype.isValidState=function(t){var e,n=this.pages.reduce(function(t,e){return t.concat(e.questions)},[]);switch(t.metaState.kind){case"MetaState":switch(t.metaState.pageStates.kind){case"PageStates":e=t.metaState.pageStates;break;default:e=new a.None}break;default:e=new a.None}try{return this.isValidStateId(t.id)&&t.resultStates.length===n.length&&this.isValidPageState(e)}catch(t){return!1}},e.prototype.stateChange=function(){var t=this;this.stateWaiter.add(function(){t.rebuildState()})},e.prototype.isValidStateId=function(t){return h.Environment.isPrintFrame()||t===this.id},e.prototype.isValidPageState=function(t){switch(t.kind){case"PageStates":var e=t.index;return t.states.length===this.pages.length&&e<this.pages.length&&e>=0&&this.pages.every(function(t){return!0});default:return!0}},e.prototype.pagesChange=function(){for(var t=0,e=this.pages;t<e.length;t++){var n=e[t];this.listenTo(n.onSubmittedChange,this.pageSubmittedChange)}},e.prototype.submittedChange=function(){for(var t=0,e=this.pages;t<e.length;t++){var n=e[t];n.submitted=this.submitted,this.attributes.has(p.ActivityAttribute.Scorable)&&this.submitted&&n.assessCorrect()}},e.prototype.revealAnswerChange=function(){for(var t=0,e=this.pages;t<e.length;t++){e[t].revealAnswer=this.revealAnswer}},e.prototype.pageSubmittedChange=function(){if(!this.pages)return void(this.submitted=!1);if(this.pages[0].submitted!==this.submitted){this.pages.map(function(t){return!!t.submitted}).every(function(t,e,n){return t===n[0]})&&(this.submitted=this.pages[0].submitted)}},__decorate([o.observable],e.prototype,"questions",void 0),__decorate([o.observable],e.prototype,"pages",void 0),__decorate([o.observable],e.prototype,"pageIndex",void 0),__decorate([o.observable],e.prototype,"submitted",void 0),__decorate([o.observable],e.prototype,"revealAnswer",void 0),e}(s.InteractiveModel);e.ActivityModel=g});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/shared/model/BaseEngineModel",["require","exports","lodash","vsef/ActivityModel","vsef/utils/PathUtils","vsef/stimulus/StimulusModel","vsef/utils/MiscUtils","vsef/Types","vsef/AttemptCounter"],function(t,e,n,i,o,r,s,a,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.extractStimulus=function(t,e){var n=o.PathUtils.readMediaPath(t,"videoCaption",e.mediaPath),i="yes"===t.find("videoUseVTT").attr("value"),a=n;e.baseRelativePath&&n&&(a=o.PathUtils.getDocBasePath()+e.mediaPath+t.find("videoCaption").text());var l=t.find("imageControls"),c={};return l.length&&(c=s.MiscUtils.createObjectFromXML(l).imageControls),new r.StimulusModel({embeddedVideo:t.find("embeddedVideo").text(),text:t.find("reading").text(),audio:o.PathUtils.readMediaPath(t,"audio",e.mediaPath),audioTranscriptText:t.find("audioTranscript").text(),audioTranscriptExt:o.PathUtils.readMediaPath(t,"audioTranscriptExt",e.mediaPath),audioAlt:t.find("audioAlt").text(),image:o.PathUtils.readMediaPath(t,"image",e.mediaPath),imageAlt:t.find("imageAltText").text(),imageCaption:t.find("imageCaption").text(),imageControls:c,video:o.PathUtils.readMediaPath(t,"video",e.mediaPath),videoInfo:t.find("videoInfo").text(),videoCaption:n,videoPoster:o.PathUtils.readMediaPath(t,"videoPoster",e.mediaPath),videoTranscriptText:i?"":t.find("videoTranscript").text(),videoTranscriptExt:i?a:""})},e.prototype.readData=function(){this._title=s.MiscUtils.getFloeString(this.$data.find("header title").text()),this._instructions=s.MiscUtils.getFloeString(this.$data.find("header instructions instructions").text()),this._instructionsMobile=s.MiscUtils.getFloeString(this.$data.find("header instructions instructionsMobile").text()),this._instructionsMobile||(this._instructionsMobile=this._instructions);var t=o.PathUtils.getQueryString("layout")||this.$data.find("questionLayout").attr("value");this._questionLayout=a.stringToQuestionLayout(t);var e=o.PathUtils.getQueryString("canRevealAnswer")||this.$data.find("canRevealAnswer").attr("value");this._canRevealAnswer=a.stringOptionToBool(e,!0);var i=o.PathUtils.getQueryString("attemptsAllowed")||this.$data.find("attemptsAllowed").attr("value"),r=parseInt(i,10);n.isNaN(r)&&(r=l.AttemptCounter.INFINITE_TRIES),this.attempts=new l.AttemptCounter(r),this._stimulusPlacement=a.stringToStimulusPlacement(this.$data.find("stimulusPlacement").attr("value"))},e}(i.ActivityModel);e.BaseEngineModel=c}),define("enginesRoot/engines/MC/utils/MCUtils",["require","exports","lodash","vsef/utils/MiscUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.createRandomOrder=function(t){return n.shuffle(t)},t.seededShuffle=function(t,e){var n,i=0,o=null;e=(e+1)*t.length;for(n=t.length-1;n>0;n-=1)i=Math.floor(function(){var t=1e4*Math.sin(e++);return t-Math.floor(t)}()*n),o=t[n],t[n]=t[i],t[i]=o;return t},t.reorderItem=function(t,e,n){for(var o=[],r=0;r<t.length;r++)o.push(t[n.indexOf(r)]);return i.MiscUtils.reorderArray(o,e)},t}();e.default=o});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("enginesRoot/engines/MC/model/MCQuestionModel",["require","exports","lodash","jquery","vsef/Observable","./MCAnswerModel","vsef/QuestionModel","../../shared/model/BaseEngineModel","vsef/utils/MiscUtils","../utils/MCUtils","vsef/Log"],function(t,e,n,i,o,r,s,a,l,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h=function(t){function e(e,o,s,h,d){var p=this;u.note("created MCQuestionModel1"),p=t.call(this,o,d)||this,p.itemIndex=0,p.hint.stimulus=a.BaseEngineModel.extractStimulus(e.find("hint"),s),p.hasRandomAnswers=h;var f=[],g=[],m=[],v=e.find("answers > answer").filter(function(t,e){return!new r.MCAnswerModel(i(e),s).isEmpty}),y=n.range(v.length);h&&(y=c.default.seededShuffle(y,o)),p.answerOrder=y;for(var b=0,_=0,w=0;w<v.length;w++){var C=v.eq(y[w]),x=new r.MCAnswerModel(C,s);f.push(x),g.push(!1),m.push(!1),b+=x.hasImage?1:0,_+=x.correct?1:0}return p.hasImageAnswers=b===f.length,p.multiSelect=_>1,t.prototype.setData.call(p,{text:l.MiscUtils.removeHtmlWhitespace(e.find("question questionText").text()),audio:e.find("question questionAudio").text()}),p.answers=f,p.selected=g,p.listenTo(p.onAnswerChange,p.selectedChange),p}return __extends(e,t),Object.defineProperty(e.prototype,"possibleComplete",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"answerCount",{get:function(){return this.answers.length},enumerable:!0,configurable:!0}),e.prototype.getCorrectAnswer=function(){return this.answers.reduce(function(t,e){return e.correct&&t.push(e.text),t},[])},e.prototype.getAnswer=function(){var t=this;return this.selected.reduce(function(e,n,i){return n&&e.push(t.answers[i].text),e},[])},e.prototype.getQuestionState=function(){return{kind:"MCQuestionState",selected:this.selected,submitted:this.submitted,revealAnswer:this.revealAnswer,answerOrder:this.answerOrder,showFeedback:this.showFeedback,answers:this.answers.map(function(t){return{text:t.text,image:t.image,imageAlt:t.imageAlt}}),version:2}},e.prototype.setState=function(e){t.prototype.setState.call(this,e);var n=e.state;-1!==n.selected.indexOf(!0)&&(this.answers=c.default.reorderItem(this.answers,n.answerOrder,this.answerOrder),this.answerOrder=n.answerOrder,this.selected=n.selected),this.multiSelect||(this.itemIndex=this.selected.indexOf(!0),-1===this.itemIndex&&(this.itemIndex=0)),this.onAnswerChange.trigger()},e.prototype.previousItem=function(){this.itemIndex=0===this.itemIndex?this.answers.length-1:this.itemIndex-1,this.multiSelect||this.toggleSelection(this.itemIndex)},e.prototype.nextItem=function(){this.itemIndex=this.itemIndex===this.answers.length-1?0:this.itemIndex+1,this.multiSelect||this.toggleSelection(this.itemIndex)},Object.defineProperty(e.prototype,"correct",{get:function(){for(var t=0;t<this.selected.length;t++){var e=this.answers[t];if(e.correct&&!this.selected[t]||!e.correct&&this.selected[t])return!1}return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"score",{get:function(){var t=this;if(this.multiSelect){var e=this.answers.reduce(function(e,n,i){return t.selected[i]?n.correct?e[0]+=1:e[1]+=1:n.correct&&(e[1]+=1),e},[0,0]),n=e[0],i=e[1];return this.calculateScore(n,i)}return this.correct?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasMissedAnswers",{get:function(){for(var t=0,e=0,n=0;n<this.selected.length;n++){var i=this.answers[n];i.correct&&t++,i.correct&&this.selected[n]&&e++}return e<t&&e>=1||void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasWrongAnswers",{get:function(){for(var t=0;t<this.selected.length;t++){if(!this.answers[t].correct&&this.selected[t])return!0}return!1},enumerable:!0,configurable:!0}),e.prototype.checkComplete=function(){this.complete=this.selected.reduce(function(t,e){return e&&t++,t},0)},Object.defineProperty(e.prototype,"selectedIndex",{get:function(){if(!this.multiSelect)for(var t=0;t<this.selected.length;t++)if(this.selected[t])return t;return-1},enumerable:!0,configurable:!0}),e.prototype.toggleSelection=function(t){var e=this.selected.slice();if(!this.multiSelect&&!0===e[t])return void(this.itemIndex!==t&&(this.itemIndex=t,this.onAnswerChange.trigger()));if(this.multiSelect)e[t]=!e[t];else{for(var n=0;n<e.length;n++)e[n]=!1;e[t]=!0}this.selected=e,this.modified=!0,this.checkComplete(),this.onAnswerChange.trigger(),this.onStateChange.trigger()},e.prototype.checkAnswer=function(){this.submitted=!0},e.prototype.resetAnswer=function(){if(t.prototype.resetAnswer.call(this),n.fill(this.selected,!1),this.itemIndex=0,this.hasRandomAnswers){var e=l.MiscUtils.randomSequence(this.answerOrder);this.answers=c.default.reorderItem(this.answers,e,this.answerOrder),this.answerOrder=e}this.onAnswerChange.trigger()},e.prototype.isValidState=function(e){var n=this,i=e.state,o=i.answers||[];return o.length>0&&(o=c.default.reorderItem(o,this.answerOrder,i.answerOrder)),t.prototype.isValidState.call(this,e)&&i.answerOrder.length===this.answerOrder.length&&o.length===this.answers.length&&o.every(function(t,e){var i=n.answers[e];return l.MiscUtils.objectHasSameProps(t,i)&&i.text===t.text&&i.image===t.image&&i.imageAlt===t.imageAlt})},e.prototype.isValidStateAnswer=function(t){return l.MiscUtils.arraysMatch([].concat(this.getCorrectAnswer()),t,!1)},e.prototype.calculateScore=function(e,n){var i=this.possibleScore;if(1===i)return t.prototype.calculateScore.call(this,e,n);if(e<=0)return 0;var o=this.answerCount;return(e+Math.max(o-(e+n),0))/o*i},e.prototype.selectedChange=function(){this.checkComplete()},__decorate([o.observable],e.prototype,"answerOrder",void 0),e}(s.QuestionModel);e.MCQuestionModel=h});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("vsef/PageModel",["require","exports","./Model","./Observable","./EventDispatcher","./Types","./stimulus/StimulusModel","./utils/Environment"],function(t,e,n,i,o,r,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(e,n,i,r){void 0===r&&(r="");var l=t.call(this)||this;l.questions=e,l.stimulus=n,l.feedback=i||new s.StimulusModel,l.instructions="",l.visible=!1,l.revealAnswer=!1,l.correct=void 0,l.complete=!1,l.submitted=!1,l.showFeedback=!1,l.canBroadcastState=!0,l.onStateChange=new o.EventDispatcher(l),l.onAfterSubmitted=new o.EventDispatcher(l),l.onPresentFeedback=new o.EventDispatcher(l),l.listenTo(l.onRevealAnswerChange,l.revealAnswerChange),l.listenTo(l.onSubmittedChange,l.submittedChange),l.listenTo(l.onDisabledChange,l.disabledChange),l.listenTo(l.onShowFeedbackChange,l.showFeedbackChange);for(var c=0,u=e;c<u.length;c++){var h=u[c];l.listenTo(h.onCompleteChange,l.questionCompleteChange),l.listenTo(h.onStateChange,l.questionStateChange)}return l.useFeedbackFocusPrefixDiv=!!a.Environment.isiOS,l}return __extends(e,t),e.prototype.isStimulusAboveQuestion=function(){return this.stimulusPlacement===r.StimulusPlacement.Above},Object.defineProperty(e.prototype,"hasFeedback",{get:function(){return!this.feedback.isEmpty},enumerable:!0,configurable:!0}),e.prototype.checkAnswer=function(){for(var t=0,e=this.questions;t<e.length;t++){var n=e[t];n.checkAnswer(),n.numAttempts=this.attempts.total}this.submitted=!0,this.questionStateChange()},e.prototype.checkComplete=function(){for(var t=0,e=this.questions;t<e.length;t++){e[t].checkComplete()}this.complete=this.questions.every(function(t){return t.isComplete()})},e.prototype.resetAnswers=function(){this.clearAnswers();for(var t=0,e=this.questions;t<e.length;t++){e[t].afterResetAnswer()}this.questionStateChange()},e.prototype.clearAnswers=function(){this.submitted=!1,this.complete=!1,this.showFeedback=!1,this.revealAnswer=!1,this.hasMissedAnswers=void 0,this.hasWrongAnswers=void 0,this.hasRightAnswers=void 0;for(var t=0,e=this.questions;t<e.length;t++){var n=e[t];n.resetAnswer(),n.isResetting=!1}},e.prototype.setQuestionFocus=function(){this.questions[0].takeFocus()},e.prototype.loadState=function(t){this.assessCorrect(),this.checkComplete(),this.submitted=this.hasEveryQuestionProperty("submitted"),this.revealAnswer=this.hasEveryQuestionProperty("revealAnswer"),this.showFeedback=this.hasEveryQuestionProperty("showFeedback")},e.prototype.getState=function(){return new r.None},e.prototype.present=function(){this.questions[0].present()},e.prototype.presentFeedback=function(){this.onPresentFeedback.trigger()},e.prototype.setSurvey=function(){this.survey=!0},e.prototype.assessCorrect=function(){for(var t=0;t<this.questions.length;t++)if(!0===this.questions[t].hasMissedAnswers){this.hasMissedAnswers=!0;break}for(var t=0;t<this.questions.length;t++){if(!0===this.questions[t].hasWrongAnswers){this.hasWrongAnswers=!0;break}if(!0===this.questions[t].hasRightAnswers){this.hasRightAnswers=!0;break}}this.correct=this.hasEveryQuestionProperty("correct")},e.prototype.hasEveryQuestionProperty=function(t){return this.questions.every(function(e){return!!e[t]})},e.prototype.revealAnswerChange=function(){for(var t=0,e=this.questions;t<e.length;t++){e[t].revealAnswer=this.revealAnswer}this.questionStateChange()},e.prototype.submittedChange=function(){for(var t=this,e=0,n=this.questions;e<n.length;e++){var i=n[e];i.submitted=this.submitted,this.submitted||(i.hint.showContent=!1)}this.submitted&&this.defer(function(){t.onAfterSubmitted.trigger()})},e.prototype.questionCompleteChange=function(t){this.complete=this.questions.every(function(t){return t.isComplete()})},e.prototype.questionStateChange=function(){this.canBroadcastState&&this.onStateChange.trigger()},e.prototype.disabledChange=function(){for(var t=0,e=this.questions;t<e.length;t++){e[t].disabled=this.disabled}},e.prototype.showFeedbackChange=function(){for(var t=0,e=this.questions;t<e.length;t++){e[t].showFeedback=this.showFeedback}this.questionStateChange()},__decorate([i.observable],e.prototype,"visible",void 0),__decorate([i.observable],e.prototype,"visited",void 0),__decorate([i.observable],e.prototype,"complete",void 0),__decorate([i.observable],e.prototype,"revealAnswer",void 0),__decorate([i.observable],e.prototype,"correct",void 0),__decorate([i.observable],e.prototype,"submitted",void 0),__decorate([i.observable],e.prototype,"showFeedback",void 0),__decorate([i.observable],e.prototype,"feedbackMessage",void 0),__decorate([i.observable],e.prototype,"disabled",void 0),e}(n.Model);e.Page=l});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/MC/model/MCPageModel",["require","exports","vsef/PageModel"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,i,o){return void 0===o&&(o=""),t.call(this,e,n,i,o)||this}return __extends(e,t),e}(n.Page);e.MCPageModel=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/MC/model/MCModel",["require","exports","./MCQuestionModel","./MCPageModel","../../shared/model/BaseEngineModel","vsef/Types","vsef/Log"],function(t,e,n,i,o,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=this;return s.note("created MCModel"),n=t.call(this,e)||this,n.completenessSettings={min:1,kind:"Selection"},n}return __extends(e,t),e.prototype.readData=function(){s.note("MCModel parse activity data"),t.prototype.readData.call(this),this.autoNumberQuestions=r.stringOptionToBool(this.$data.find("autoNumberQuestions").attr("value"),!0),this.randomAnswers=r.stringOptionToBool(this.$data.find("randomAnswers").attr("value"),!1);for(var e=this.$data.find("questions > question"),a=[],l=[],c=0,u=0;u<e.length;u++){var h=e.eq(u),d=new n.MCQuestionModel(h,c,this.paths,this.randomAnswers,this.completenessSettings),p=o.BaseEngineModel.extractStimulus(h.find("stimulus"),this.paths),f=o.BaseEngineModel.extractStimulus(h.find("feedback"),this.paths);if((!d.isEmpty||!p.isEmpty)&&d.answers.length){a.push(d);var g=new i.MCPageModel([d],p,f);g.autoNumberQuestions=this.autoNumberQuestions,g.stimulusPlacement=this.stimulusPlacement,l.push(g),c++}}this.setData(l,a)},e}(o.BaseEngineModel);e.MCModel=a}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("videojs",e):t.videojs=e()}(this,function(){function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function e(t,e){Qe(t).forEach(function(n){return e(t[n],n)})}function n(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Qe(t).reduce(function(n,i){return e(n,t[i],i)},n)}function i(t){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return Object.assign?Object.assign.apply(Object,[t].concat(i)):(i.forEach(function(n){n&&e(n,function(e,n){t[n]=e})}),t)}function o(t){return!!t&&"object"===(void 0===t?"undefined":He(t))}function r(t){return o(t)&&"[object Object]"===Ge.call(t)&&t.constructor===Object}function s(t){return t.replace(/\n\r?\s*/g,"")}function a(t,e){if(!t||!e)return"";if("function"==typeof fe.getComputedStyle){var n=fe.getComputedStyle(t);return n?n[e]:""}return t.currentStyle[e]||""}function l(t){return"string"==typeof t&&/\S/.test(t)}function c(t){if(/\s/.test(t))throw new Error("class has illegal whitespace characters")}function u(t){return new RegExp("(^|\\s)"+t+"($|\\s)")}function h(){return be===fe.document&&void 0!==be.createElement}function d(t){return o(t)&&1===t.nodeType}function p(){try{return fe.parent!==fe.self}catch(t){return!0}}function f(t){return function(e,n){if(!l(e))return be[t](null);l(n)&&(n=be.querySelector(n));var i=d(n)?n:be;return i[t]&&i[t](e)}}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3],o=be.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(t){var n=e[t];-1!==t.indexOf("aria-")||"role"===t||"type"===t?(tn.warn(en(nn,t,n)),o.setAttribute(t,n)):"textContent"===t?m(o,n):o[t]=n}),Object.getOwnPropertyNames(n).forEach(function(t){o.setAttribute(t,n[t])}),i&&j(o,i),o}function m(t,e){return void 0===t.textContent?t.innerText=e:t.textContent=e,t}function v(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function y(t,e){return c(e),t.classList?t.classList.contains(e):u(e).test(t.className)}function b(t,e){return t.classList?t.classList.add(e):y(t,e)||(t.className=(t.className+" "+e).trim()),t}function _(t,e){return t.classList?t.classList.remove(e):(c(e),t.className=t.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),t}function w(t,e,n){var i=y(t,e);if("function"==typeof n&&(n=n(t,e)),"boolean"!=typeof n&&(n=!i),n!==i)return n?b(t,e):_(t,e),t}function C(t,e){Object.getOwnPropertyNames(e).forEach(function(n){var i=e[n];null===i||void 0===i||!1===i?t.removeAttribute(n):t.setAttribute(n,!0===i?"":i)})}function x(t){var e={};if(t&&t.attributes&&t.attributes.length>0)for(var n=t.attributes,i=n.length-1;i>=0;i--){var o=n[i].name,r=n[i].value;"boolean"!=typeof t[o]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+o+",")||(r=null!==r),e[o]=r}return e}function T(t,e){return t.getAttribute(e)}function k(t,e,n){t.setAttribute(e,n)}function S(t,e){t.removeAttribute(e)}function E(){be.body.focus(),be.onselectstart=function(){return!1}}function P(){be.onselectstart=function(){return!0}}function A(t){if(t&&t.getBoundingClientRect&&t.parentNode){var e=t.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(function(t){void 0!==e[t]&&(n[t]=e[t])}),n.height||(n.height=parseFloat(a(t,"height"))),n.width||(n.width=parseFloat(a(t,"width"))),n}}function I(t){var e=void 0;if(t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),!e)return{left:0,top:0};var n=be.documentElement,i=be.body,o=n.clientLeft||i.clientLeft||0,r=fe.pageXOffset||i.scrollLeft,s=e.left+r-o,a=n.clientTop||i.clientTop||0,l=fe.pageYOffset||i.scrollTop,c=e.top+l-a;return{left:Math.round(s),top:Math.round(c)}}function O(t,e){var n={},i=I(t),o=t.offsetWidth,r=t.offsetHeight,s=i.top,a=i.left,l=e.pageY,c=e.pageX;return e.changedTouches&&(c=e.changedTouches[0].pageX,l=e.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(s-l+r)/r)),n.x=Math.max(0,Math.min(1,(c-a)/o)),n}function M(t){return o(t)&&3===t.nodeType}function D(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function L(t){return"function"==typeof t&&(t=t()),(Array.isArray(t)?t:[t]).map(function(t){return"function"==typeof t&&(t=t()),d(t)||M(t)?t:"string"==typeof t&&/\S/.test(t)?be.createTextNode(t):void 0}).filter(function(t){return t})}function j(t,e){return L(e).forEach(function(e){return t.appendChild(e)}),t}function R(t,e){return j(D(t),e)}function B(t){return void 0===t.button&&void 0===t.buttons||(0===t.button&&void 0===t.buttons||(9===Be||0===t.button&&1===t.buttons))}function F(){return an++}function N(t){var e=t[cn];return e||(e=t[cn]=F()),ln[e]||(ln[e]={}),ln[e]}function U(t){var e=t[cn];return!!e&&!!Object.getOwnPropertyNames(ln[e]).length}function $(t){var e=t[cn];if(e){delete ln[e];try{delete t[cn]}catch(e){t.removeAttribute?t.removeAttribute(cn):t[cn]=null}}}function q(t,e){var n=N(t);0===n.handlers[e].length&&(delete n.handlers[e],t.removeEventListener?t.removeEventListener(e,n.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&$(t)}
function H(t,e,n,i){n.forEach(function(n){t(e,n,i)})}function V(t){function e(){return!0}function n(){return!1}if(!t||!t.isPropagationStopped){var i=t||fe.event;t={};for(var o in i)"layerX"!==o&&"layerY"!==o&&"keyLocation"!==o&&"webkitMovementX"!==o&&"webkitMovementY"!==o&&("returnValue"===o&&i.preventDefault||(t[o]=i[o]));if(t.target||(t.target=t.srcElement||be),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){i.preventDefault&&i.preventDefault(),t.returnValue=!1,i.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),t.cancelBubble=!0,i.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=n,t.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=n,null!==t.clientX&&void 0!==t.clientX){var r=be.documentElement,s=be.body;t.pageX=t.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),t.pageY=t.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}t.which=t.charCode||t.keyCode,null!==t.button&&void 0!==t.button&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t}function z(t,e,n){if(Array.isArray(e))return H(z,t,e,n);var i=N(t);if(i.handlers||(i.handlers={}),i.handlers[e]||(i.handlers[e]=[]),n.guid||(n.guid=F()),i.handlers[e].push(n),i.dispatcher||(i.disabled=!1,i.dispatcher=function(e,n){if(!i.disabled){e=V(e);var o=i.handlers[e.type];if(o)for(var r=o.slice(0),s=0,a=r.length;s<a&&!e.isImmediatePropagationStopped();s++)try{r[s].call(t,e,n)}catch(t){tn.error(t)}}}),1===i.handlers[e].length)if(t.addEventListener){var o=!1;un&&hn.indexOf(e)>-1&&(o={passive:!0}),t.addEventListener(e,i.dispatcher,o)}else t.attachEvent&&t.attachEvent("on"+e,i.dispatcher)}function W(t,e,n){if(U(t)){var i=N(t);if(i.handlers){if(Array.isArray(e))return H(W,t,e,n);var o=function(t,e){i.handlers[e]=[],q(t,e)};if(void 0!==e){var r=i.handlers[e];if(r){if(!n)return void o(t,e);if(n.guid)for(var s=0;s<r.length;s++)r[s].guid===n.guid&&r.splice(s--,1);q(t,e)}}else for(var a in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},a)&&o(t,a)}}}function Y(t,e,n){var i=U(t)?N(t):{},o=t.parentNode||t.ownerDocument;if("string"==typeof e?e={type:e,target:t}:e.target||(e.target=t),e=V(e),i.dispatcher&&i.dispatcher.call(t,e,n),o&&!e.isPropagationStopped()&&!0===e.bubbles)Y.call(null,o,e,n);else if(!o&&!e.defaultPrevented){var r=N(e.target);e.target[e.type]&&(r.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),r.disabled=!1)}return!e.defaultPrevented}function G(t,e,n){if(Array.isArray(e))return H(G,t,e,n);var i=function i(){W(t,e,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||F(),z(t,e,i)}function Q(t,e){e&&(fn=e),fe.setTimeout(gn,t)}function K(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.eventBusKey;if(n){if(!t[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');t.eventBusEl_=t[n]}else t.eventBusEl_=g("span",{className:"vjs-event-bus"});return i(t,An),t.on("dispose",function(){t.off(),fe.setTimeout(function(){t.eventBusEl_=null},0)}),t}function X(t,e){return i(t,In),t.state=i({},t.state,e),"function"==typeof t.handleStateChanged&&Cn(t)&&t.on("statechanged",t.handleStateChanged),t}function Z(t){return"string"!=typeof t?t:t.charAt(0).toUpperCase()+t.slice(1)}function J(t,e){return Z(t)===Z(e)}function tt(){for(var t={},n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return i.forEach(function(n){n&&e(n,function(e,n){if(!r(e))return void(t[n]=e);r(t[n])||(t[n]={}),t[n]=tt(t[n],e)})}),t}function et(t,e,n){if("number"!=typeof e||e<0||e>n)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+n+").")}function nt(t,e,n,i){return et(t,i,n.length-1),n[i][e]}function it(t){return void 0===t||0===t.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:t.length,start:nt.bind(null,"start",0,t),end:nt.bind(null,"end",1,t)}}function ot(t,e){return Array.isArray(t)?it(t):void 0===t||void 0===e?it():it([[t,e]])}function rt(t,e){var n=0,i=void 0,o=void 0;if(!e)return 0;t&&t.length||(t=ot(0,0));for(var r=0;r<t.length;r++)i=t.start(r),o=t.end(r),o>e&&(o=e),n+=o-i;return n/e}function st(t){if(t instanceof st)return t;"number"==typeof t?this.code=t:"string"==typeof t?this.message=t:o(t)&&("number"==typeof t.code&&(this.code=t.code),i(this,t)),this.message||(this.message=st.defaultMessages[this.code]||"")}function at(t,e){var n,i=null;try{n=JSON.parse(t,e)}catch(t){i=t}return[i,n]}function lt(t){return void 0!==t&&null!==t&&"function"==typeof t.then}function ct(t){lt(t)&&t.then(null,function(t){})}function ut(t){var e=di.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}function ht(t,e,n){if(!hi(e))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===gi.call(t)?dt(t,e,n):"string"==typeof t?pt(t,e,n):ft(t,e,n)}function dt(t,e,n){for(var i=0,o=t.length;i<o;i++)mi.call(t,i)&&e.call(n,t[i],i,t)}function pt(t,e,n){for(var i=0,o=t.length;i<o;i++)e.call(n,t.charAt(i),i,t)}function ft(t,e,n){for(var i in t)mi.call(t,i)&&e.call(n,t[i],i,t)}function gt(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)_i.call(n,i)&&(t[i]=n[i])}return t}function mt(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function vt(t,e,n){var i=t;return hi(e)?(n=e,"string"==typeof t&&(i={uri:t})):i=bi(e,{uri:t}),i.callback=n,i}function yt(t,e,n){return e=vt(t,e,n),bt(e)}function bt(t){function e(){4===a.readyState&&setTimeout(o,0)}function n(){var t=void 0;if(t=a.response?a.response:a.responseText||_t(a),m)try{t=JSON.parse(t)}catch(t){}return t}function i(t){return clearTimeout(u),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,s(t,v)}function o(){if(!c){var e;clearTimeout(u),e=t.useXDR&&void 0===a.status?200:1223===a.status?204:a.status;var i=v,o=null;return 0!==e?(i={body:n(),statusCode:e,method:d,headers:{},url:h,rawRequest:a},a.getAllResponseHeaders&&(i.headers=yi(a.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),s(o,i,i.body)}}if(void 0===t.callback)throw new Error("callback argument missing");var r=!1,s=function(e,n,i){r||(r=!0,t.callback(e,n,i))},a=t.xhr||null;a||(a=t.cors||t.useXDR?new yt.XDomainRequest:new yt.XMLHttpRequest);var l,c,u,h=a.url=t.uri||t.url,d=a.method=t.method||"GET",p=t.body||t.data,f=a.headers=t.headers||{},g=!!t.sync,m=!1,v={body:void 0,headers:{},statusCode:0,method:d,url:h,rawRequest:a};if("json"in t&&!1!==t.json&&(m=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==d&&"HEAD"!==d&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),p=JSON.stringify(!0===t.json?p:t.json))),a.onreadystatechange=e,a.onload=o,a.onerror=i,a.onprogress=function(){},a.onabort=function(){c=!0},a.ontimeout=i,a.open(d,h,!g,t.username,t.password),g||(a.withCredentials=!!t.withCredentials),!g&&t.timeout>0&&(u=setTimeout(function(){if(!c){c=!0,a.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",i(t)}},t.timeout)),a.setRequestHeader)for(l in f)f.hasOwnProperty(l)&&a.setRequestHeader(l,f[l]);else if(t.headers&&!mt(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(a.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(a),a.send(p||null),a}function _t(t){if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;return""!==t.responseType||e?null:t.responseXML}function wt(){}function Ct(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}function xt(t){function e(t,e,n,i){return 3600*(0|t)+60*(0|e)+(0|n)+(0|i)/1e3}var n=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}function Tt(){this.values=Di(null)}function kt(t,e,n,i){var o=i?t.split(i):[t];for(var r in o)if("string"==typeof o[r]){var s=o[r].split(n);if(2===s.length){var a=s[0],l=s[1];e(a,l)}}}function St(t,e,n){function i(){var e=xt(t);if(null===e)throw new Ct(Ct.Errors.BadTimeStamp,"Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function o(){t=t.replace(/^\s+/,"")}var r=t;if(o(),e.startTime=i(),o(),"--\x3e"!==t.substr(0,3))throw new Ct(Ct.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);t=t.substr(3),o(),e.endTime=i(),o(),function(t,e){var i=new Tt;kt(t,function(t,e){switch(t){case"region":for(var o=n.length-1;o>=0;o--)if(n[o].id===e){i.set(t,n[o].region);break}break;case"vertical":i.alt(t,e,["rl","lr"]);break;case"line":var r=e.split(","),s=r[0];i.integer(t,s),i.percent(t,s)&&i.set("snapToLines",!1),i.alt(t,s,["auto"]),2===r.length&&i.alt("lineAlign",r[1],["start","middle","end"]);break;case"position":r=e.split(","),i.percent(t,r[0]),2===r.length&&i.alt("positionAlign",r[1],["start","middle","end"]);break;case"size":i.percent(t,e);break;case"align":i.alt(t,e,["start","middle","end","left","right"])}},/:/,/\s/),e.region=i.get("region",null),e.vertical=i.get("vertical",""),e.line=i.get("line","auto"),e.lineAlign=i.get("lineAlign","start"),e.snapToLines=i.get("snapToLines",!0),e.size=i.get("size",100),e.align=i.get("align","middle"),e.position=i.get("position",{start:0,left:0,middle:50,end:100,right:100},e.align),e.positionAlign=i.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},e.align)}(t,e)}function Et(t,e){function n(t){return Li[t]}for(var i,o=t.document.createElement("div"),r=o,s=[];null!==(i=function(){if(!e)return null;var t=e.match(/^([^<]*)(<[^>]*>?)?/);return function(t){return e=e.substr(t.length),t}(t[1]?t[1]:t[2])}());)if("<"!==i[0])r.appendChild(t.document.createTextNode(function(t){for(;c=t.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)t=t.replace(c[0],n);return t}(i)));else{if("/"===i[1]){s.length&&s[s.length-1]===i.substr(2).replace(">","")&&(s.pop(),r=r.parentNode);continue}var a,l=xt(i.substr(1,i.length-2));if(l){a=t.document.createProcessingInstruction("timestamp",l),r.appendChild(a);continue}var c=i.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!c)continue;if(!(a=function(e,n){var i=ji[e];if(!i)return null;var o=t.document.createElement(i);o.localName=i;var r=Ri[e];return r&&n&&(o[r]=n.trim()),o}(c[1],c[3])))continue;if(!function(t,e){return!Bi[e.localName]||Bi[e.localName]===t.localName}(r,a))continue;c[2]&&(a.className=c[2].substr(1).replace("."," ")),s.push(c[1]),r.appendChild(a),r=a}return o}function Pt(t){for(var e=0;e<Fi.length;e++){var n=Fi[e];if(t>=n[0]&&t<=n[1])return!0}return!1}function At(t){function e(t,e){for(var n=e.childNodes.length-1;n>=0;n--)t.push(e.childNodes[n])}function n(t){if(!t||!t.length)return null;var i=t.pop(),o=i.textContent||i.innerText;if(o){var r=o.match(/^.*(\n|\r)/);return r?(t.length=0,r[0]):o}return"ruby"===i.tagName?n(t):i.childNodes?(e(t,i),n(t)):void 0}var i,o=[],r="";if(!t||!t.childNodes)return"ltr";for(e(o,t);r=n(o);)for(var s=0;s<r.length;s++)if(i=r.charCodeAt(s),Pt(i))return"rtl";return"ltr"}function It(t){if("number"==typeof t.line&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,n=e.textTrackList,i=0,o=0;o<n.length&&n[o]!==e;o++)"showing"===n[o].mode&&i++;return-1*++i}function Ot(){}function Mt(t,e,n){var i=/MSIE\s8\.0/.test(navigator.userAgent),o="rgba(255, 255, 255, 1)",r="rgba(0, 0, 0, 0.8)";i&&(o="rgb(255, 255, 255)",r="rgb(0, 0, 0)"),Ot.call(this),this.cue=e,this.cueDiv=Et(t,e.text);var s={color:o,backgroundColor:r,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};i||(s.writingMode=""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",s.unicodeBidi="plaintext"),this.applyStyles(s,this.cueDiv),this.div=t.document.createElement("div"),s={textAlign:"middle"===e.align?"center":e.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},i||(s.direction=At(this.cueDiv),s.writingMode=""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(s),this.div.appendChild(this.cueDiv);var a=0;switch(e.positionAlign){case"start":a=e.position;break;case"middle":a=e.position-e.size/2;break;case"end":a=e.position-e.size}""===e.vertical?this.applyStyles({left:this.formatStyle(a,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(a,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(t){this.applyStyles({top:this.formatStyle(t.top,"px"),bottom:this.formatStyle(t.bottom,"px"),left:this.formatStyle(t.left,"px"),right:this.formatStyle(t.right,"px"),height:this.formatStyle(t.height,"px"),width:this.formatStyle(t.width,"px")})}}function Dt(t){var e,n,i,o,r=/MSIE\s8\.0/.test(navigator.userAgent);if(t.div){n=t.div.offsetHeight,i=t.div.offsetWidth,o=t.div.offsetTop;var s=(s=t.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();t=t.div.getBoundingClientRect(),e=s?Math.max(s[0]&&s[0].height||0,t.height/s.length):0}this.left=t.left,this.right=t.right,this.top=t.top||o,this.height=t.height||n,this.bottom=t.bottom||o+(t.height||n),this.width=t.width||i,this.lineHeight=void 0!==e?e:t.lineHeight,r&&!this.lineHeight&&(this.lineHeight=13)}function Lt(t,e,n,i){var o=new Dt(e),r=e.cue,s=It(r),a=[];if(r.snapToLines){var l;switch(r.vertical){case"":a=["+y","-y"],l="height";break;case"rl":a=["+x","-x"],l="width";break;case"lr":a=["-x","+x"],l="width"}var c=o.lineHeight,u=c*Math.round(s),h=n[l]+c,d=a[0];Math.abs(u)>h&&(u=u<0?-1:1,u*=Math.ceil(h/c)*c),s<0&&(u+=""===r.vertical?n.height:n.width,a=a.reverse()),o.move(d,u)}else{var p=o.lineHeight/n.height*100;switch(r.lineAlign){case"middle":s-=p/2;break;case"end":s-=p}switch(r.vertical){case"":e.applyStyles({top:e.formatStyle(s,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(s,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(s,"%")})}a=["+y","-x","+x","-y"],o=new Dt(e)}var f=function(t,e){for(var o,r=new Dt(t),s=1,a=0;a<e.length;a++){for(;t.overlapsOppositeAxis(n,e[a])||t.within(n)&&t.overlapsAny(i);)t.move(e[a]);if(t.within(n))return t;var l=t.intersectPercentage(n);s>l&&(o=new Dt(t),s=l),t=new Dt(r)}return o||r}(o,a);e.move(f.toCSSCompatValues(n))}function jt(){}function Rt(t){return"string"==typeof t&&(!!$i[t.toLowerCase()]&&t.toLowerCase())}function Bt(t){return"string"==typeof t&&(!!qi[t.toLowerCase()]&&t.toLowerCase())}function Ft(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function Nt(t,e,n){var i=this,o=/MSIE\s8\.0/.test(navigator.userAgent),r={};o?i=document.createElement("custom"):r.enumerable=!0,i.hasBeenReset=!1;var s="",a=!1,l=t,c=e,u=n,h=null,d="",p=!0,f="auto",g="start",m=50,v="middle",y=50,b="middle";if(Object.defineProperty(i,"id",Ft({},r,{get:function(){return s},set:function(t){s=""+t}})),Object.defineProperty(i,"pauseOnExit",Ft({},r,{get:function(){return a},set:function(t){a=!!t}})),Object.defineProperty(i,"startTime",Ft({},r,{get:function(){return l},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");l=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"endTime",Ft({},r,{get:function(){return c},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");c=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"text",Ft({},r,{get:function(){return u},set:function(t){u=""+t,this.hasBeenReset=!0}})),Object.defineProperty(i,"region",Ft({},r,{get:function(){return h},set:function(t){h=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"vertical",Ft({},r,{get:function(){return d},set:function(t){var e=Rt(t);if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"snapToLines",Ft({},r,{get:function(){return p},set:function(t){p=!!t,this.hasBeenReset=!0}})),Object.defineProperty(i,"line",Ft({},r,{get:function(){return f},set:function(t){if("number"!=typeof t&&t!==Ui)throw new SyntaxError("An invalid number or illegal string was specified.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"lineAlign",Ft({},r,{get:function(){return g},set:function(t){var e=Bt(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"position",Ft({},r,{get:function(){return m},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"positionAlign",Ft({},r,{get:function(){return v},set:function(t){var e=Bt(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"size",Ft({},r,{get:function(){return y},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"align",Ft({},r,{get:function(){return b},set:function(t){var e=Bt(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");b=e,this.hasBeenReset=!0}})),i.displayState=void 0,o)return i}function Ut(t){return"string"==typeof t&&(!!Vi[t.toLowerCase()]&&t.toLowerCase())}function $t(t){return"number"==typeof t&&t>=0&&t<=100}function qt(){var t=100,e=3,n=0,i=100,o=0,r=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!$t(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return e},set:function(t){if("number"!=typeof t)throw new TypeError("Lines must be set to a number.");e=t}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(t){if(!$t(t))throw new Error("RegionAnchorX must be between 0 and 100.");i=t}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(t){if(!$t(t))throw new Error("RegionAnchorY must be between 0 and 100.");n=t}},viewportAnchorY:{enumerable:!0,get:function(){return r},set:function(t){if(!$t(t))throw new Error("ViewportAnchorY must be between 0 and 100.");r=t}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(t){if(!$t(t))throw new Error("ViewportAnchorX must be between 0 and 100.");o=t}},scroll:{enumerable:!0,get:function(){return s},set:function(t){var e=Ut(t);if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");s=e}}})}function Ht(t,e,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=t.textTracks();o.kind=e,n&&(o.label=n),i&&(o.language=i),o.tech=t;var s=new Mi.text.TrackClass(o);return r.addTrack(s),s}function Vt(t,e){Gi[t]=Gi[t]||[],Gi[t].push(e)}function zt(t,e,n){t.setTimeout(function(){return te(e,Gi[e.type],n,t)},1)}function Wt(t,e){t.forEach(function(t){return t.setTech&&t.setTech(e)})}function Yt(t,e,n){return t.reduceRight(Kt(n),e[n]())}function Gt(t,e,n,i){return e[n](t.reduce(Kt(n),i))}function Qt(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o="call"+Z(n),r=t.reduce(Kt(o),i),s=r===Ki,a=s?null:e[n](r);return Xt(t,n,a,s),a}function Kt(t){return function(e,n){return e===Ki?Ki:n[t]?n[t](e):e}}function Xt(t,e,n,i){for(var o=t.length-1;o>=0;o--){var r=t[o];r[e]&&r[e](i,n)}}function Zt(t){Qi[t.id()]=null}function Jt(t,e){var n=Qi[t.id()],i=null;if(void 0===n||null===n)return i=e(t),Qi[t.id()]=[[e,i]],i;for(var o=0;o<n.length;o++){var r=n[o],s=r[0],a=r[1];s===e&&(i=a)}return null===i&&(i=e(t),n.push([e,i])),i}function te(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments[2],o=arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=e[0],l=e.slice(1);if("string"==typeof a)te(t,Gi[a],n,o,r,s);else if(a){var c=Jt(o,a);if(!c.setSource)return r.push(c),te(t,l,n,o,r,s);c.setSource(i({},t),function(e,i){if(e)return te(t,l,n,o,r,s);r.push(c),te(i,t.type===i.type?l:Gi[i.type],n,o,r,s)})}else l.length?te(t,l,n,o,r,s):s?n(t,r):te(t,Gi["*"],n,o,r,!0)}function ee(t){var e=eo(t.src);return!t.type&&e&&(t.type=e),t}function ne(t,e){var n=void 0;if(4===t.length)n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else{if(7!==t.length)throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");n=t.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+e+")"}function ie(t,e,n){try{t.style[e]=n}catch(t){return}}function oe(t){mo=t}function re(){mo=go}function se(t,e){if(e&&(t=e(t)),t&&"none"!==t)return t}function ae(t,e){return se(t.options[t.options.selectedIndex].value,e)}function le(t,e,n){if(e)for(var i=0;i<t.options.length;i++)if(se(t.options[i].value,n)===e){t.selectedIndex=i;break}}function ce(t,e,n){var i=ce.getPlayer(t);if(i)return e&&tn.warn('Player "'+t+'" is already initialised. Options will not be applied.'),n&&i.ready(n),i;var r="string"==typeof t?on("#"+Xr(t)):t;if(!d(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");be.body.contains(r)||tn.warn("The element supplied is not included in the DOM"),e=e||{},ce.hooks("beforesetup").forEach(function(t){var n=t(r,tt(e));if(!o(n)||Array.isArray(n))return void tn.error("please return an object in beforesetup hooks");e=tt(e,n)});var s=On.getComponent("Player");return i=new s(r,e,n),ce.hooks("setup").forEach(function(t){return t(i)}),i}var ue,he="6.11.0",de="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};ue="undefined"!=typeof window?window:void 0!==de?de:"undefined"!=typeof self?self:{};var pe,fe=ue,ge={},me=(Object.freeze||Object)({default:ge}),ve=me&&ge||me,ye=void 0!==de?de:"undefined"!=typeof window?window:{};"undefined"!=typeof document?pe=document:(pe=ye["__GLOBAL_DOCUMENT_CACHE@4"])||(pe=ye["__GLOBAL_DOCUMENT_CACHE@4"]=ve);var be=pe,_e=fe.navigator&&fe.navigator.userAgent||"",we=/AppleWebKit\/([\d.]+)/i.exec(_e),Ce=we?parseFloat(we.pop()):null,xe=/iPad/i.test(_e),Te=/iPhone/i.test(_e)&&!xe,ke=/iPod/i.test(_e),Se=Te||xe||ke,Ee=function(){var t=_e.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),Pe=/Android/i.test(_e),Ae=function(){var t=_e.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var e=t[1]&&parseFloat(t[1]),n=t[2]&&parseFloat(t[2]);return e&&n?parseFloat(t[1]+"."+t[2]):e||null}(),Ie=Pe&&/webkit/i.test(_e)&&Ae<2.3,Oe=Pe&&Ae<5&&Ce<537,Me=/Firefox/i.test(_e),De=/Edge/i.test(_e),Le=!De&&(/Chrome/i.test(_e)||/CriOS/i.test(_e)),je=function(){var t=_e.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),Re=/MSIE\s8\.0/.test(_e),Be=function(){var t=/MSIE\s(\d+)\.\d/.exec(_e),e=t&&parseFloat(t[1]);return!e&&/Trident\/7.0/i.test(_e)&&/rv:11.0/.test(_e)&&(e=11),e}(),Fe=/Safari/i.test(_e)&&!Le&&!Pe&&!De,Ne=(Fe||Se)&&!Le,Ue=h()&&("ontouchstart"in fe||fe.navigator.maxTouchPoints||fe.DocumentTouch&&fe.document instanceof fe.DocumentTouch),$e=h()&&"backgroundSize"in fe.document.createElement("video").style,qe=(Object.freeze||Object)({IS_IPAD:xe,IS_IPHONE:Te,IS_IPOD:ke,IS_IOS:Se,IOS_VERSION:Ee,IS_ANDROID:Pe,ANDROID_VERSION:Ae,IS_OLD_ANDROID:Ie,IS_NATIVE_ANDROID:Oe,IS_FIREFOX:Me,IS_EDGE:De,IS_CHROME:Le,CHROME_VERSION:je,IS_IE8:Re,IE_VERSION:Be,IS_SAFARI:Fe,IS_ANY_SAFARI:Ne,TOUCH_ENABLED:Ue,BACKGROUND_SIZE_SUPPORTED:$e}),He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ve=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},ze=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},We=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},Ye=function(t,e){return t.raw=e,t},Ge=Object.prototype.toString,Qe=function(t){return o(t)?Object.keys(t):[]},Ke=void 0,Xe="info",Ze=[],Je=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!!Be&&Be<11,i=Ke.levels[Xe],r=new RegExp("^("+i+")$");if("log"!==t&&e.unshift(t.toUpperCase()+":"),Ze&&Ze.push([].concat(e)),e.unshift("VIDEOJS:"),fe.console){var s=fe.console[t];s||"debug"!==t||(s=fe.console.info||fe.console.log),s&&i&&r.test(t)&&(n&&(e=e.map(function(t){if(o(t)||Array.isArray(t))try{return JSON.stringify(t)}catch(e){return String(t)}return String(t)}).join(" ")),s.apply?s[Array.isArray(e)?"apply":"call"](fe.console,e):s(e))}};Ke=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];Je("log",e)},Ke.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:Xe},Ke.level=function(t){if("string"==typeof t){if(!Ke.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');Xe=t}return Xe},Ke.history=function(){return Ze?[].concat(Ze):[]},Ke.history.clear=function(){Ze&&(Ze.length=0)},Ke.history.disable=function(){null!==Ze&&(Ze.length=0,Ze=null)},Ke.history.enable=function(){null===Ze&&(Ze=[])},Ke.error=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return Je("error",e)},Ke.warn=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return Je("warn",e)},Ke.debug=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return Je("debug",e)};var tn=Ke,en=function(t){for(var e="",n=0;n<arguments.length;n++)e+=s(t[n])+(arguments[n+1]||"");return e},nn=Ye(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]),on=f("querySelector"),rn=f("querySelectorAll"),sn=(Object.freeze||Object)({isReal:h,isEl:d,isInFrame:p,createEl:g,textContent:m,prependTo:v,hasClass:y,addClass:b,removeClass:_,toggleClass:w,setAttributes:C,getAttributes:x,getAttribute:T,setAttribute:k,removeAttribute:S,blockTextSelection:E,unblockTextSelection:P,getBoundingClientRect:A,findPosition:I,getPointerPosition:O,isTextNode:M,emptyEl:D,normalizeContent:L,appendContent:j,insertContent:R,isSingleLeftClick:B,$:on,$$:rn}),an=1,ln={},cn="vdata"+(new Date).getTime(),un=!1;!function(){try{var t=Object.defineProperty({},"passive",{get:function(){un=!0}});fe.addEventListener("test",null,t),fe.removeEventListener("test",null,t)}catch(t){}}();var hn=["touchstart","touchmove"],dn=(Object.freeze||Object)({fixEvent:V,on:z,off:W,trigger:Y,one:G}),pn=!1,fn=void 0,gn=function(){if(h()&&!1!==fn.options.autoSetup){var t=be.getElementsByTagName("video"),e=be.getElementsByTagName("audio"),n=be.getElementsByTagName("video-js"),i=[];if(t&&t.length>0)for(var o=0,r=t.length;o<r;o++)i.push(t[o]);if(e&&e.length>0)for(var s=0,a=e.length;s<a;s++)i.push(e[s]);if(n&&n.length>0)for(var l=0,c=n.length;l<c;l++)i.push(n[l]);if(i&&i.length>0)for(var u=0,d=i.length;u<d;u++){var p=i[u];if(!p||!p.getAttribute){Q(1);break}if(void 0===p.player){var f=p.getAttribute("data-setup");null!==f&&fn(p)}}else pn||Q(1)}};h()&&"complete"===be.readyState?pn=!0:G(fe,"load",function(){pn=!0});var mn=function(t){var e=be.createElement("style");return e.className=t,e},vn=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e},yn=function(t,e,n){e.guid||(e.guid=F());var i=function(){return e.apply(t,arguments)};return i.guid=n?n+"_"+e.guid:e.guid,i},bn=function(t,e){var n=Date.now();return function(){var i=Date.now();i-n>=e&&(t.apply(void 0,arguments),n=i)}},_n=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fe,o=void 0;return function(){var r=this,s=arguments,a=function(){o=null,a=null,n||t.apply(r,s)};!o&&n&&t.apply(r,s),i.clearTimeout(o),o=i.setTimeout(a,e)}},wn=function(){};wn.prototype.allowedEvents_={},wn.prototype.on=function(t,e){var n=this.addEventListener;this.addEventListener=function(){},z(this,t,e),this.addEventListener=n},wn.prototype.addEventListener=wn.prototype.on,wn.prototype.off=function(t,e){W(this,t,e)},wn.prototype.removeEventListener=wn.prototype.off,wn.prototype.one=function(t,e){var n=this.addEventListener;this.addEventListener=function(){},G(this,t,e),this.addEventListener=n},wn.prototype.trigger=function(t){var e=t.type||t;"string"==typeof t&&(t={type:e}),t=V(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),Y(this,t)},wn.prototype.dispatchEvent=wn.prototype.trigger;var Cn=function(t){return t instanceof wn||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(e){return"function"==typeof t[e]})},xn=function(t){return"string"==typeof t&&/\S/.test(t)||Array.isArray(t)&&!!t.length},Tn=function(t){if(!t.nodeName&&!Cn(t))throw new Error("Invalid target; must be a DOM node or evented object.")},kn=function(t){if(!xn(t))throw new Error("Invalid event type; must be a non-empty string or array.")},Sn=function(t){if("function"!=typeof t)throw new Error("Invalid listener; must be a function.")},En=function(t,e){var n=e.length<3||e[0]===t||e[0]===t.eventBusEl_,i=void 0,o=void 0,r=void 0;return n?(i=t.eventBusEl_,e.length>=3&&e.shift(),o=e[0],r=e[1]):(i=e[0],o=e[1],r=e[2]),Tn(i),kn(o),Sn(r),r=yn(t,r),{isTargetingSelf:n,target:i,type:o,listener:r}},Pn=function(t,e,n,i){Tn(t),t.nodeName?dn[e](t,n,i):t[e](n,i)},An={on:function(){for(var t=this,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var o=En(this,n),r=o.isTargetingSelf,s=o.target,a=o.type,l=o.listener;if(Pn(s,"on",a,l),!r){var c=function(){return t.off(s,a,l)};c.guid=l.guid;var u=function(){return t.off("dispose",c)};u.guid=l.guid,Pn(this,"on","dispose",c),Pn(s,"on","dispose",u)}},one:function(){for(var t=this,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var o=En(this,n),r=o.isTargetingSelf,s=o.target,a=o.type,l=o.listener;if(r)Pn(s,"one",a,l);else{var c=function e(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];t.off(s,a,e),l.apply(null,i)};c.guid=l.guid,Pn(s,"one",a,c)}},off:function(t,e,n){if(!t||xn(t))W(this.eventBusEl_,t,e);else{var i=t,o=e;Tn(i),kn(o),Sn(n),n=yn(this,n),this.off("dispose",n),i.nodeName?(W(i,o,n),W(i,"dispose",n)):Cn(i)&&(i.off(o,n),i.off("dispose",n))}},trigger:function(t,e){return Y(this.eventBusEl_,t,e)}},In={state:{},setState:function(t){var n=this;"function"==typeof t&&(t=t());var i=void 0;return e(t,function(t,e){n.state[e]!==t&&(i=i||{},i[e]={from:n.state[e],to:t}),n.state[e]=t}),i&&Cn(this)&&this.trigger({changes:i,type:"statechanged"}),i}},On=function(){function t(e,n,i){if(Ve(this,t),!e&&this.play?this.player_=e=this:this.player_=e,this.options_=tt({},this.options_),n=this.options_=tt(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var o=e&&e.id&&e.id()||"no_player";this.id_=o+"_component_"+F()}this.name_=n.name||null,n.el?this.el_=n.el:!1!==n.createEl&&(this.el_=this.createEl()),!1!==n.evented&&K(this,{eventBusKey:this.el_?"el_":null}),X(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},
!1!==n.initChildren&&this.initChildren(),this.ready(i),!1!==n.reportTouchActivity&&this.enableTouchActivity()}return t.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),$(this.el_),this.el_=null),this.player_=null},t.prototype.player=function(){return this.player_},t.prototype.options=function(t){return tn.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),t?(this.options_=tt(this.options_,t),this.options_):this.options_},t.prototype.el=function(){return this.el_},t.prototype.createEl=function(t,e,n){return g(t,e,n)},t.prototype.localize=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=this.player_.language&&this.player_.language(),o=this.player_.languages&&this.player_.languages(),r=o&&o[i],s=i&&i.split("-")[0],a=o&&o[s],l=n;return r&&r[t]?l=r[t]:a&&a[t]&&(l=a[t]),e&&(l=l.replace(/\{(\d+)\}/g,function(t,n){var i=e[n-1],o=i;return void 0===i&&(o=t),o})),l},t.prototype.contentEl=function(){return this.contentEl_||this.el_},t.prototype.id=function(){return this.id_},t.prototype.name=function(){return this.name_},t.prototype.children=function(){return this.children_},t.prototype.getChildById=function(t){return this.childIndex_[t]},t.prototype.getChild=function(t){if(t)return t=Z(t),this.childNameIndex_[t]},t.prototype.addChild=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.children_.length,o=void 0,r=void 0;if("string"==typeof e){r=Z(e);var s=n.componentClass||r;n.name=r;var a=t.getComponent(s);if(!a)throw new Error("Component "+s+" does not exist");if("function"!=typeof a)return null;o=new a(this.player_||this,n)}else o=e;if(this.children_.splice(i,0,o),"function"==typeof o.id&&(this.childIndex_[o.id()]=o),r=r||o.name&&Z(o.name()),r&&(this.childNameIndex_[r]=o),"function"==typeof o.el&&o.el()){var l=this.contentEl().children,c=l[i]||null;this.contentEl().insertBefore(o.el(),c)}return o},t.prototype.removeChild=function(t){if("string"==typeof t&&(t=this.getChild(t)),t&&this.children_){for(var e=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===t){e=!0,this.children_.splice(n,1);break}if(e){this.childIndex_[t.id()]=null,this.childNameIndex_[t.name()]=null;var i=t.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}}},t.prototype.initChildren=function(){var e=this,n=this.options_.children;if(n){var i=this.options_,o=function(t){var n=t.name,o=t.opts;if(void 0!==i[n]&&(o=i[n]),!1!==o){!0===o&&(o={}),o.playerOptions=e.options_.playerOptions;var r=e.addChild(n,o);r&&(e[n]=r)}},r=void 0,s=t.getComponent("Tech");r=Array.isArray(n)?n:Object.keys(n),r.concat(Object.keys(this.options_).filter(function(t){return!r.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(t){var i=void 0,o=void 0;return"string"==typeof t?(i=t,o=n[i]||e.options_[i]||{}):(i=t.name,o=t),{name:i,opts:o}}).filter(function(e){var n=t.getComponent(e.opts.componentClass||Z(e.name));return n&&!s.isTech(n)}).forEach(o)}},t.prototype.buildCSSClass=function(){return""},t.prototype.ready=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)return this.isReady_?void(e?t.call(this):this.setTimeout(t,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(t))},t.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var t=this.readyQueue_;this.readyQueue_=[],t&&t.length>0&&t.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},t.prototype.$=function(t,e){return on(t,e||this.contentEl())},t.prototype.$$=function(t,e){return rn(t,e||this.contentEl())},t.prototype.hasClass=function(t){return y(this.el_,t)},t.prototype.addClass=function(t){b(this.el_,t)},t.prototype.removeClass=function(t){_(this.el_,t)},t.prototype.toggleClass=function(t,e){w(this.el_,t,e)},t.prototype.show=function(){this.removeClass("vjs-hidden")},t.prototype.hide=function(){this.addClass("vjs-hidden")},t.prototype.lockShowing=function(){this.addClass("vjs-lock-showing")},t.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.prototype.getAttribute=function(t){return T(this.el_,t)},t.prototype.setAttribute=function(t,e){k(this.el_,t,e)},t.prototype.removeAttribute=function(t){S(this.el_,t)},t.prototype.width=function(t,e){return this.dimension("width",t,e)},t.prototype.height=function(t,e){return this.dimension("height",t,e)},t.prototype.dimensions=function(t,e){this.width(t,!0),this.height(e)},t.prototype.dimension=function(t,e,n){if(void 0!==e)return null!==e&&e===e||(e=0),-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?this.el_.style[t]=e:this.el_.style[t]="auto"===e?"":e+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var i=this.el_.style[t],o=i.indexOf("px");return-1!==o?parseInt(i.slice(0,o),10):parseInt(this.el_["offset"+Z(t)],10)},t.prototype.currentDimension=function(t){var e=0;if("width"!==t&&"height"!==t)throw new Error("currentDimension only accepts width or height value");if("function"==typeof fe.getComputedStyle){var n=fe.getComputedStyle(this.el_);e=n.getPropertyValue(t)||n[t]}if(0===(e=parseFloat(e))){var i="offset"+Z(t);e=this.el_[i]}return e},t.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.prototype.currentWidth=function(){return this.currentDimension("width")},t.prototype.currentHeight=function(){return this.currentDimension("height")},t.prototype.focus=function(){this.el_.focus()},t.prototype.blur=function(){this.el_.blur()},t.prototype.emitTapEvents=function(){var t=0,e=null,n=void 0;this.on("touchstart",function(i){1===i.touches.length&&(e={pageX:i.touches[0].pageX,pageY:i.touches[0].pageY},t=(new Date).getTime(),n=!0)}),this.on("touchmove",function(t){if(t.touches.length>1)n=!1;else if(e){var i=t.touches[0].pageX-e.pageX,o=t.touches[0].pageY-e.pageY,r=Math.sqrt(i*i+o*o);r>10&&(n=!1)}});var i=function(){n=!1};this.on("touchleave",i),this.on("touchcancel",i),this.on("touchend",function(i){if(e=null,!0===n){(new Date).getTime()-t<200&&(i.preventDefault(),this.trigger("tap"))}})},t.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t=yn(this.player(),this.player().reportUserActivity),e=void 0;this.on("touchstart",function(){t(),this.clearInterval(e),e=this.setInterval(t,250)});var n=function(n){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",n),this.on("touchcancel",n)}},t.prototype.setTimeout=function(t,e){var n,i,o=this;return t=yn(this,t),n=fe.setTimeout(function(){o.off("dispose",i),t()},e),i=function(){return o.clearTimeout(n)},i.guid="vjs-timeout-"+n,this.on("dispose",i),n},t.prototype.clearTimeout=function(t){fe.clearTimeout(t);var e=function(){};return e.guid="vjs-timeout-"+t,this.off("dispose",e),t},t.prototype.setInterval=function(t,e){var n=this;t=yn(this,t);var i=fe.setInterval(t,e),o=function(){return n.clearInterval(i)};return o.guid="vjs-interval-"+i,this.on("dispose",o),i},t.prototype.clearInterval=function(t){fe.clearInterval(t);var e=function(){};return e.guid="vjs-interval-"+t,this.off("dispose",e),t},t.prototype.requestAnimationFrame=function(t){var e,n,i=this;return this.supportsRaf_?(t=yn(this,t),e=fe.requestAnimationFrame(function(){i.off("dispose",n),t()}),n=function(){return i.cancelAnimationFrame(e)},n.guid="vjs-raf-"+e,this.on("dispose",n),e):this.setTimeout(t,1e3/60)},t.prototype.cancelAnimationFrame=function(t){if(this.supportsRaf_){fe.cancelAnimationFrame(t);var e=function(){};return e.guid="vjs-raf-"+t,this.off("dispose",e),t}return this.clearTimeout(t)},t.registerComponent=function(e,n){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var i=t.getComponent("Tech"),o=i&&i.isTech(n),r=t===n||t.prototype.isPrototypeOf(n.prototype);if(o||!r){var s=void 0;throw s=o?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+e+'"; '+s+".")}e=Z(e),t.components_||(t.components_={});var a=t.getComponent("Player");if("Player"===e&&a&&a.players){var l=a.players,c=Object.keys(l);if(l&&c.length>0&&c.map(function(t){return l[t]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return t.components_[e]=n,n},t.getComponent=function(e){if(e)return e=Z(e),t.components_&&t.components_[e]?t.components_[e]:void 0},t}();On.prototype.supportsRaf_="function"==typeof fe.requestAnimationFrame&&"function"==typeof fe.cancelAnimationFrame,On.registerComponent("Component",On);for(var Mn={},Dn=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Ln=Dn[0],jn=void 0,Rn=0;Rn<Dn.length;Rn++)if(Dn[Rn][1]in be){jn=Dn[Rn];break}if(jn)for(var Bn=0;Bn<jn.length;Bn++)Mn[Ln[Bn]]=jn[Bn];st.prototype.code=0,st.prototype.message="",st.prototype.status=null,st.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],st.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Fn=0;Fn<st.errorTypes.length;Fn++)st[st.errorTypes[Fn]]=Fn,st.prototype[st.errorTypes[Fn]]=Fn;var Nn=at,Un=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,n,i){return t[n]&&(e[n]=t[n]),e},{cues:t.cues&&Array.prototype.map.call(t.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},$n=function(t){var e=t.$$("track"),n=Array.prototype.map.call(e,function(t){return t.track});return Array.prototype.map.call(e,function(t){var e=Un(t.track);return t.src&&(e.src=t.src),e}).concat(Array.prototype.filter.call(t.textTracks(),function(t){return-1===n.indexOf(t)}).map(Un))},qn=function(t,e){return t.forEach(function(t){var n=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(function(t){return n.addCue(t)})}),e.textTracks()},Hn={textTracksToJson:$n,jsonToTextTracks:qn,trackToJson_:Un},Vn="vjs-modal-dialog",zn=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.opened_=o.hasBeenOpened_=o.hasBeenFilled_=!1,o.closeable(!o.options_.uncloseable),o.content(o.options_.content),o.contentEl_=g("div",{className:Vn+"-content"},{role:"document"}),o.descEl_=g("p",{className:Vn+"-description vjs-control-text",id:o.el().getAttribute("aria-describedby")}),m(o.descEl_,o.description()),o.el_.appendChild(o.descEl_),o.el_.appendChild(o.contentEl_),o}return ze(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},e.prototype.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,t.prototype.dispose.call(this)},e.prototype.buildCSSClass=function(){return Vn+" vjs-hidden "+t.prototype.buildCSSClass.call(this)},e.prototype.handleKeyPress=function(t){27===t.which&&this.closeable()&&this.close()},e.prototype.label=function(){return this.localize(this.options_.label||"Modal Window")},e.prototype.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},e.prototype.open=function(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",yn(this,this.handleKeyPress)),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},e.prototype.opened=function(t){return"boolean"==typeof t&&this[t?"open":"close"](),this.opened_},e.prototype.close=function(){if(this.opened_){var t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",yn(this,this.handleKeyPress)),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},e.prototype.closeable=function(t){if("boolean"==typeof t){var e=this.closeable_=!!t,n=this.getChild("closeButton");if(e&&!n){var i=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(n,"close",this.close)}!e&&n&&(this.off(n,"close",this.close),this.removeChild(n),n.dispose())}return this.closeable_},e.prototype.fill=function(){this.fillWith(this.content())},e.prototype.fillWith=function(t){var e=this.contentEl(),n=e.parentNode,i=e.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(e),this.empty(),R(e,t),this.trigger("modalfill"),i?n.insertBefore(e,i):n.appendChild(e);var o=this.getChild("closeButton");o&&n.appendChild(o.el_)},e.prototype.empty=function(){this.trigger("beforemodalempty"),D(this.contentEl()),this.trigger("modalempty")},e.prototype.content=function(t){return void 0!==t&&(this.content_=t),this.content_},e.prototype.conditionalFocus_=function(){var t=be.activeElement,e=this.player_.el_;this.previouslyActiveEl_=null,(e.contains(t)||e===t)&&(this.previouslyActiveEl_=t,this.focus(),this.on(be,"keydown",this.handleKeyDown))},e.prototype.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(be,"keydown",this.handleKeyDown)},e.prototype.handleKeyDown=function(t){if(9===t.which){for(var e=this.focusableEls_(),n=this.el_.querySelector(":focus"),i=void 0,o=0;o<e.length;o++)if(n===e[o]){i=o;break}be.activeElement===this.el_&&(i=0),t.shiftKey&&0===i?(e[e.length-1].focus(),t.preventDefault()):t.shiftKey||i!==e.length-1||(e[0].focus(),t.preventDefault())}},e.prototype.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,function(t){return(t instanceof fe.HTMLAnchorElement||t instanceof fe.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof fe.HTMLInputElement||t instanceof fe.HTMLSelectElement||t instanceof fe.HTMLTextAreaElement||t instanceof fe.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof fe.HTMLIFrameElement||t instanceof fe.HTMLObjectElement||t instanceof fe.HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable")})},e}(On);zn.prototype.options_={pauseOnOpen:!0,temporary:!0},On.registerComponent("ModalDialog",zn);var Wn=function(t){function e(){var n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Ve(this,e);var r=We(this,t.call(this));if(!o&&(o=r,Re)){o=be.createElement("custom");for(var s in e.prototype)"constructor"!==s&&(o[s]=e.prototype[s])}o.tracks_=[],Object.defineProperty(o,"length",{get:function(){return this.tracks_.length}});for(var a=0;a<i.length;a++)o.addTrack(i[a]);return n=o,We(r,n)}return ze(e,t),e.prototype.addTrack=function(t){var e=this.tracks_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.tracks_[e]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack"}))},e.prototype.removeTrack=function(t){for(var e=void 0,n=0,i=this.length;n<i;n++)if(this[n]===t){e=this[n],e.off&&e.off(),this.tracks_.splice(n,1);break}e&&this.trigger({track:e,type:"removetrack"})},e.prototype.getTrackById=function(t){for(var e=null,n=0,i=this.length;n<i;n++){var o=this[n];if(o.id===t){e=o;break}}return e},e}(wn);Wn.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var Yn in Wn.prototype.allowedEvents_)Wn.prototype["on"+Yn]=null;var Gn=function(t,e){for(var n=0;n<t.length;n++)Object.keys(t[n]).length&&e.id!==t[n].id&&(t[n].enabled=!1)},Qn=function(t){function e(){var n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Ve(this,e);for(var r=void 0,s=o.length-1;s>=0;s--)if(o[s].enabled){Gn(o,o[s]);break}if(Re){r=be.createElement("custom");for(var a in Wn.prototype)"constructor"!==a&&(r[a]=Wn.prototype[a]);for(var l in e.prototype)"constructor"!==l&&(r[l]=e.prototype[l])}return r=n=We(this,t.call(this,o,r)),r.changing_=!1,i=r,We(n,i)}return ze(e,t),e.prototype.addTrack=function(e){var n=this;e.enabled&&Gn(this,e),t.prototype.addTrack.call(this,e),e.addEventListener&&e.addEventListener("enabledchange",function(){n.changing_||(n.changing_=!0,Gn(n,e),n.changing_=!1,n.trigger("change"))})},e}(Wn),Kn=function(t,e){for(var n=0;n<t.length;n++)Object.keys(t[n]).length&&e.id!==t[n].id&&(t[n].selected=!1)},Xn=function(t){function e(){var n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Ve(this,e);for(var r=void 0,s=o.length-1;s>=0;s--)if(o[s].selected){Kn(o,o[s]);break}if(Re){r=be.createElement("custom");for(var a in Wn.prototype)"constructor"!==a&&(r[a]=Wn.prototype[a]);for(var l in e.prototype)"constructor"!==l&&(r[l]=e.prototype[l])}return r=n=We(this,t.call(this,o,r)),r.changing_=!1,Object.defineProperty(r,"selectedIndex",{get:function(){for(var t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set:function(){}}),i=r,We(n,i)}return ze(e,t),e.prototype.addTrack=function(e){var n=this;e.selected&&Kn(this,e),t.prototype.addTrack.call(this,e),e.addEventListener&&e.addEventListener("selectedchange",function(){n.changing_||(n.changing_=!0,Kn(n,e),n.changing_=!1,n.trigger("change"))})},e}(Wn),Zn=function(t){function e(){var n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Ve(this,e);var r=void 0;if(Re){r=be.createElement("custom");for(var s in Wn.prototype)"constructor"!==s&&(r[s]=Wn.prototype[s]);for(var a in e.prototype)"constructor"!==a&&(r[a]=e.prototype[a])}return r=n=We(this,t.call(this,o,r)),i=r,We(n,i)}return ze(e,t),e.prototype.addTrack=function(e){t.prototype.addTrack.call(this,e),e.addEventListener("modechange",yn(this,function(){this.trigger("change")})),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",yn(this,function(){this.trigger("selectedlanguagechange")}))},e}(Wn),Jn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Ve(this,t);var n=this;if(Re){n=be.createElement("custom");for(var i in t.prototype)"constructor"!==i&&(n[i]=t.prototype[i])}n.trackElements_=[],Object.defineProperty(n,"length",{get:function(){return this.trackElements_.length}});for(var o=0,r=e.length;o<r;o++)n.addTrackElement_(e[o]);if(Re)return n}return t.prototype.addTrackElement_=function(t){var e=this.trackElements_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.trackElements_[e]}}),-1===this.trackElements_.indexOf(t)&&this.trackElements_.push(t)},t.prototype.getTrackElementByTrack_=function(t){for(var e=void 0,n=0,i=this.trackElements_.length;n<i;n++)if(t===this.trackElements_[n].track){e=this.trackElements_[n];break}return e},t.prototype.removeTrackElement_=function(t){for(var e=0,n=this.trackElements_.length;e<n;e++)if(t===this.trackElements_[e]){this.trackElements_.splice(e,1);break}},t}(),ti=function(){function t(e){Ve(this,t);var n=this;if(Re){n=be.createElement("custom");for(var i in t.prototype)"constructor"!==i&&(n[i]=t.prototype[i])}if(t.prototype.setCues_.call(n,e),Object.defineProperty(n,"length",{get:function(){return this.length_}}),Re)return n}return t.prototype.setCues_=function(t){var e=this.length||0,n=0,i=t.length;this.cues_=t,this.length_=t.length;var o=function(t){""+t in this||Object.defineProperty(this,""+t,{get:function(){return this.cues_[t]}})};if(e<i)for(n=e;n<i;n++)o.call(this,n)},t.prototype.getCueById=function(t){for(var e=null,n=0,i=this.length;n<i;n++){var o=this[n];if(o.id===t){e=o;break}}return e},t}(),ei={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},ni={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},ii={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},oi={disabled:"disabled",hidden:"hidden",showing:"showing"},ri=function(t){function e(){var n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ve(this,e);var o=We(this,t.call(this)),r=o;if(Re){r=be.createElement("custom");for(var s in e.prototype)"constructor"!==s&&(r[s]=e.prototype[s])}var a={id:i.id||"vjs_track_"+F(),kind:i.kind||"",label:i.label||"",language:i.language||""};for(var l in a)!function(t){Object.defineProperty(r,t,{get:function(){return a[t]},set:function(){}})}(l);return n=r,We(o,n)}return ze(e,t),e}(wn),si=function(t){var e=["protocol","hostname","port","pathname","search","hash","host"],n=be.createElement("a");n.href=t;var i=""===n.host&&"file:"!==n.protocol,o=void 0;i&&(o=be.createElement("div"),o.innerHTML='<a href="'+t+'"></a>',n=o.firstChild,o.setAttribute("style","display:none; position:absolute;"),be.body.appendChild(o));for(var r={},s=0;s<e.length;s++)r[e[s]]=n[e[s]];return"http:"===r.protocol&&(r.host=r.host.replace(/:80$/,"")),"https:"===r.protocol&&(r.host=r.host.replace(/:443$/,"")),r.protocol||(r.protocol=fe.location.protocol),i&&be.body.removeChild(o),r},ai=function(t){if(!t.match(/^https?:\/\//)){var e=be.createElement("div");e.innerHTML='<a href="'+t+'">x</a>',t=e.firstChild.href}return t},li=function(t){if("string"==typeof t){var e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i,n=e.exec(t);if(n)return n.pop().toLowerCase()}return""},ci=function(t){var e=fe.location,n=si(t);return(":"===n.protocol?e.protocol:n.protocol)+n.host!==e.protocol+e.host},ui=(Object.freeze||Object)({parseUrl:si,getAbsoluteURL:ai,getFileExtension:li,isCrossOrigin:ci}),hi=ut,di=Object.prototype.toString,pi=t(function(t,e){function n(t){return t.replace(/^\s*|\s*$/g,"")}e=t.exports=n,e.left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}}),fi=ht,gi=Object.prototype.toString,mi=Object.prototype.hasOwnProperty,vi=function(t){return"[object Array]"===Object.prototype.toString.call(t)},yi=function(t){if(!t)return{};var e={};return fi(pi(t).split("\n"),function(t){var n=t.indexOf(":"),i=pi(t.slice(0,n)).toLowerCase(),o=pi(t.slice(n+1));void 0===e[i]?e[i]=o:vi(e[i])?e[i].push(o):e[i]=[e[i],o]}),e},bi=gt,_i=Object.prototype.hasOwnProperty,wi=yt;yt.XMLHttpRequest=fe.XMLHttpRequest||wt,yt.XDomainRequest="withCredentials"in new yt.XMLHttpRequest?yt.XMLHttpRequest:fe.XDomainRequest,function(t,e){for(var n=0;n<t.length;n++)e(t[n])}(["get","put","post","patch","head","delete"],function(t){yt["delete"===t?"del":t]=function(e,n,i){return n=vt(e,n,i),n.method=t.toUpperCase(),bt(n)}});var Ci=function(t,e){var n=new fe.WebVTT.Parser(fe,fe.vttjs,fe.WebVTT.StringDecoder()),i=[];n.oncue=function(t){e.addCue(t)},n.onparsingerror=function(t){i.push(t)},n.onflush=function(){e.trigger({type:"loadeddata",target:e})},n.parse(t),i.length>0&&(fe.console&&fe.console.groupCollapsed&&fe.console.groupCollapsed("Text Track parsing errors for "+e.src),i.forEach(function(t){return tn.error(t)}),fe.console&&fe.console.groupEnd&&fe.console.groupEnd()),n.flush()},xi=function(t,e){var n={uri:t},i=ci(t);i&&(n.cors=i),wi(n,yn(this,function(t,n,i){if(t)return tn.error(t,n);if(e.loaded_=!0,"function"!=typeof fe.WebVTT){if(e.tech_){var o=function(){return Ci(i,e)};e.tech_.on("vttjsloaded",o),e.tech_.on("vttjserror",function(){tn.error("vttjs failed to load, stopping trying to process "+e.src),e.tech_.off("vttjsloaded",o)})}}else Ci(i,e)}))},Ti=function(t){function e(){var n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Ve(this,e),!o.tech)throw new Error("A tech was not provided.");var r=tt(o,{kind:ii[o.kind]||"subtitles",language:o.language||o.srclang||""}),s=oi[r.mode]||"disabled",a=r.default;"metadata"!==r.kind&&"chapters"!==r.kind||(s="hidden");var l=n=We(this,t.call(this,r));if(l.tech_=r.tech,Re)for(var c in e.prototype)"constructor"!==c&&(l[c]=e.prototype[c]);l.cues_=[],l.activeCues_=[];var u=new ti(l.cues_),h=new ti(l.activeCues_),d=!1,p=yn(l,function(){this.activeCues,d&&(this.trigger("cuechange"),d=!1)});return"disabled"!==s&&l.tech_.ready(function(){l.tech_.on("timeupdate",p)},!0),Object.defineProperty(l,"default",{get:function(){return a},set:function(){}}),Object.defineProperty(l,"mode",{get:function(){return s},set:function(t){var e=this;oi[t]&&(s=t,"showing"===s&&this.tech_.ready(function(){e.tech_.on("timeupdate",p)},!0),this.trigger("modechange"))}}),Object.defineProperty(l,"cues",{get:function(){return this.loaded_?u:null},set:function(){}}),Object.defineProperty(l,"activeCues",{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return h;for(var t=this.tech_.currentTime(),e=[],n=0,i=this.cues.length;n<i;n++){var o=this.cues[n];o.startTime<=t&&o.endTime>=t?e.push(o):o.startTime===o.endTime&&o.startTime<=t&&o.startTime+.5>=t&&e.push(o)}if(d=!1,e.length!==this.activeCues_.length)d=!0;else for(var r=0;r<e.length;r++)-1===this.activeCues_.indexOf(e[r])&&(d=!0);return this.activeCues_=e,h.setCues_(this.activeCues_),h},set:function(){}}),r.src?(l.src=r.src,xi(r.src,l)):l.loaded_=!0,i=l,We(n,i)}return ze(e,t),e.prototype.addCue=function(t){var e=t;if(fe.vttjs&&!(t instanceof fe.vttjs.VTTCue)){e=new fe.vttjs.VTTCue(t.startTime,t.endTime,t.text);for(var n in t)n in e||(e[n]=t[n]);e.id=t.id,e.originalCue_=t}for(var i=this.tech_.textTracks(),o=0;o<i.length;o++)i[o]!==this&&i[o].removeCue(e);this.cues_.push(e),this.cues.setCues_(this.cues_)},e.prototype.removeCue=function(t){for(var e=this.cues_.length;e--;){var n=this.cues_[e];if(n===t||n.originalCue_&&n.originalCue_===t){this.cues_.splice(e,1),this.cues.setCues_(this.cues_);break}}},e}(ri);Ti.prototype.allowedEvents_={cuechange:"cuechange"};var ki=function(t){function e(){var n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ve(this,e);var r=tt(o,{kind:ni[o.kind]||""}),s=n=We(this,t.call(this,r)),a=!1;if(Re)for(var l in e.prototype)"constructor"!==l&&(s[l]=e.prototype[l]);return Object.defineProperty(s,"enabled",{get:function(){return a},set:function(t){"boolean"==typeof t&&t!==a&&(a=t,this.trigger("enabledchange"))}}),r.enabled&&(s.enabled=r.enabled),s.loaded_=!0,i=s,We(n,i)}return ze(e,t),e}(ri),Si=function(t){function e(){var n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ve(this,e);var r=tt(o,{kind:ei[o.kind]||""}),s=n=We(this,t.call(this,r)),a=!1;if(Re)for(var l in e.prototype)"constructor"!==l&&(s[l]=e.prototype[l]);return Object.defineProperty(s,"selected",{get:function(){return a},set:function(t){"boolean"==typeof t&&t!==a&&(a=t,this.trigger("selectedchange"))}}),r.selected&&(s.selected=r.selected),i=s,We(n,i)}return ze(e,t),e}(ri),Ei=0,Pi=2,Ai=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ve(this,e);var i=We(this,t.call(this)),o=void 0,r=i;if(Re){r=be.createElement("custom");for(var s in e.prototype)"constructor"!==s&&(r[s]=e.prototype[s])}var a=new Ti(n);if(r.kind=a.kind,r.src=a.src,r.srclang=a.language,r.label=a.label,r.default=a.default,Object.defineProperty(r,"readyState",{get:function(){return o}}),Object.defineProperty(r,"track",{get:function(){return a}}),o=Ei,a.addEventListener("loadeddata",function(){o=Pi,r.trigger({type:"load",target:r})}),Re){var l;return l=r,We(i,l)}return i}return ze(e,t),e}(wn);Ai.prototype.allowedEvents_={load:"load"},Ai.NONE=Ei,Ai.LOADING=1,Ai.LOADED=Pi,Ai.ERROR=3;var Ii={audio:{ListClass:Qn,TrackClass:ki,capitalName:"Audio"},video:{ListClass:Xn,TrackClass:Si,capitalName:"Video"},text:{ListClass:Zn,TrackClass:Ti,capitalName:"Text"}};Object.keys(Ii).forEach(function(t){Ii[t].getterName=t+"Tracks",Ii[t].privateName=t+"Tracks_"});var Oi={remoteText:{ListClass:Zn,TrackClass:Ti,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Jn,TrackClass:Ai,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Mi=tt(Ii,Oi);Oi.names=Object.keys(Oi),Ii.names=Object.keys(Ii),Mi.names=[].concat(Oi.names).concat(Ii.names);var Di=Object.create||function(){function t(){}return function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();Ct.prototype=Di(Error.prototype),Ct.prototype.constructor=Ct,Ct.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Tt.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var i=0;i<n.length;++i)if(e===n[i]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var Li={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},ji={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Ri={v:"title",lang:"lang"},Bi={rt:"ruby"
},Fi=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];Ot.prototype.applyStyles=function(t,e){e=e||this.div;for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])},Ot.prototype.formatStyle=function(t,e){return 0===t?0:t+e},Mt.prototype=Di(Ot.prototype),Mt.prototype.constructor=Mt,Dt.prototype.move=function(t,e){switch(e=void 0!==e?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e}},Dt.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top},Dt.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1},Dt.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right},Dt.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}},Dt.prototype.intersectPercentage=function(t){return Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left))*Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top))/(this.height*this.width)},Dt.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}},Dt.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,n=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,i=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;return t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t,{left:t.left,right:t.right,top:t.top||i,height:t.height||e,bottom:t.bottom||i+(t.height||e),width:t.width||n}},jt.StringDecoder=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}},jt.convertCueToDOMTree=function(t,e){return t&&e?Et(t,e):null};jt.processCues=function(t,e,n){if(!t||!e||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var i=t.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",n.appendChild(i),function(t){for(var e=0;e<t.length;e++)if(t[e].hasBeenReset||!t[e].displayState)return!0;return!1}(e)){var o=[],r=Dt.getSimpleBoxPosition(i),s=Math.round(.05*r.height*100)/100,a={font:s+"px sans-serif"};!function(){for(var n,s,l=0;l<e.length;l++)s=e[l],n=new Mt(t,s,a),i.appendChild(n.div),Lt(t,n,r,o),s.displayState=n.div,o.push(Dt.getSimpleBoxPosition(n))}()}else for(var l=0;l<e.length;l++)i.appendChild(e[l].displayState)},jt.Parser=function(t,e,n){n||(n=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},jt.Parser.prototype={reportOrThrowError:function(t){if(!(t instanceof Ct))throw t;this.onparsingerror&&this.onparsingerror(t)},parse:function(t){function e(){for(var t=o.buffer,e=0;e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var n=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,o.buffer=t.substr(e),n}function n(t){var e=new Tt;if(kt(t,function(t,n){switch(t){case"id":e.set(t,n);break;case"width":e.percent(t,n);break;case"lines":e.integer(t,n);break;case"regionanchor":case"viewportanchor":var i=n.split(",");if(2!==i.length)break;var o=new Tt;if(o.percent("x",i[0]),o.percent("y",i[1]),!o.has("x")||!o.has("y"))break;e.set(t+"X",o.get("x")),e.set(t+"Y",o.get("y"));break;case"scroll":e.alt(t,n,["up"])}},/=/,/\s/),e.has("id")){var n=new(o.vttjs.VTTRegion||o.window.VTTRegion);n.width=e.get("width",100),n.lines=e.get("lines",3),n.regionAnchorX=e.get("regionanchorX",0),n.regionAnchorY=e.get("regionanchorY",100),n.viewportAnchorX=e.get("viewportanchorX",0),n.viewportAnchorY=e.get("viewportanchorY",100),n.scroll=e.get("scroll",""),o.onregion&&o.onregion(n),o.regionList.push({id:e.get("id"),region:n})}}function i(t){var e=new Tt;kt(t,function(t,n){switch(t){case"MPEGT":e.integer(t+"S",n);break;case"LOCA":e.set(t+"L",xt(n))}},/[^\d]:/,/,/),o.ontimestampmap&&o.ontimestampmap({MPEGTS:e.get("MPEGTS"),LOCAL:e.get("LOCAL")})}var o=this;t&&(o.buffer+=o.decoder.decode(t,{stream:!0}));try{var r;if("INITIAL"===o.state){if(!/\r\n|\n/.test(o.buffer))return this;r=e();var s=r.match(/^WEBVTT([ \t].*)?$/);if(!s||!s[0])throw new Ct(Ct.Errors.BadSignature);o.state="HEADER"}for(var a=!1;o.buffer;){if(!/\r\n|\n/.test(o.buffer))return this;switch(a?a=!1:r=e(),o.state){case"HEADER":/:/.test(r)?function(t){t.match(/X-TIMESTAMP-MAP/)?kt(t,function(t,e){switch(t){case"X-TIMESTAMP-MAP":i(e)}},/=/):kt(t,function(t,e){switch(t){case"Region":n(e)}},/:/)}(r):r||(o.state="ID");continue;case"NOTE":r||(o.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){o.state="NOTE";break}if(!r)continue;if(o.cue=new(o.vttjs.VTTCue||o.window.VTTCue)(0,0,""),o.state="CUE",-1===r.indexOf("--\x3e")){o.cue.id=r;continue}case"CUE":try{St(r,o.cue,o.regionList)}catch(t){o.reportOrThrowError(t),o.cue=null,o.state="BADCUE";continue}o.state="CUETEXT";continue;case"CUETEXT":var l=-1!==r.indexOf("--\x3e");if(!r||l&&(a=!0)){o.oncue&&o.oncue(o.cue),o.cue=null,o.state="ID";continue}o.cue.text&&(o.cue.text+="\n"),o.cue.text+=r;continue;case"BADCUE":r||(o.state="ID");continue}}}catch(t){o.reportOrThrowError(t),"CUETEXT"===o.state&&o.cue&&o.oncue&&o.oncue(o.cue),o.cue=null,o.state="INITIAL"===o.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Ct(Ct.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var Ni=jt,Ui="auto",$i={"":!0,lr:!0,rl:!0},qi={start:!0,middle:!0,end:!0,left:!0,right:!0};Nt.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Hi=Nt,Vi={"":!0,up:!0},zi=qt,Wi=t(function(t){var e=t.exports={WebVTT:Ni,VTTCue:Hi,VTTRegion:zi};fe.vttjs=e,fe.WebVTT=e.WebVTT;var n=e.VTTCue,i=e.VTTRegion,o=fe.VTTCue,r=fe.VTTRegion;e.shim=function(){fe.VTTCue=n,fe.VTTRegion=i},e.restore=function(){fe.VTTCue=o,fe.VTTRegion=r},fe.VTTCue||e.shim()}),Yi=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};Ve(this,e),n.reportTouchActivity=!1;var o=We(this,t.call(this,null,n,i));return o.hasStarted_=!1,o.on("playing",function(){this.hasStarted_=!0}),o.on("loadstart",function(){this.hasStarted_=!1}),Mi.names.forEach(function(t){var e=Mi[t];n&&n[e.getterName]&&(o[e.privateName]=n[e.getterName])}),o.featuresProgressEvents||o.manualProgressOn(),o.featuresTimeupdateEvents||o.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(t){!1===n["native"+t+"Tracks"]&&(o["featuresNative"+t+"Tracks"]=!1)}),!1===n.nativeCaptions||!1===n.nativeTextTracks?o.featuresNativeTextTracks=!1:!0!==n.nativeCaptions&&!0!==n.nativeTextTracks||(o.featuresNativeTextTracks=!0),o.featuresNativeTextTracks||o.emulateTextTracks(),o.autoRemoteTextTracks_=new Mi.text.ListClass,o.initTrackListeners(),n.nativeControlsForTouch||o.emitTapEvents(),o.constructor&&(o.name_=o.constructor.name||"Unknown Tech"),o}return ze(e,t),e.prototype.triggerSourceset=function(t){var e=this;this.isReady_||this.one("ready",function(){return e.setTimeout(function(){return e.triggerSourceset(t)},1)}),this.trigger({src:t,type:"sourceset"})},e.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},e.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},e.prototype.trackProgress=function(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(yn(this,function(){var t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,1===t&&this.stopTrackingProgress()}),500)},e.prototype.onDurationChange=function(t){this.duration_=this.duration()},e.prototype.buffered=function(){return ot(0,0)},e.prototype.bufferedPercent=function(){return rt(this.buffered(),this.duration_)},e.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},e.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},e.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},e.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},e.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.prototype.dispose=function(){this.clearTracks(Ii.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},e.prototype.clearTracks=function(t){var e=this;t=[].concat(t),t.forEach(function(t){for(var n=e[t+"Tracks"]()||[],i=n.length;i--;){var o=n[i];"text"===t&&e.removeRemoteTextTrack(o),n.removeTrack(o)}})},e.prototype.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],e=t.length;e--;){var n=t[e];this.removeRemoteTextTrack(n)}},e.prototype.reset=function(){},e.prototype.error=function(t){return void 0!==t&&(this.error_=new st(t),this.trigger("error")),this.error_},e.prototype.played=function(){return this.hasStarted_?ot(0,0):ot()},e.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.prototype.initTrackListeners=function(){var t=this;Ii.names.forEach(function(e){var n=Ii[e],i=function(){t.trigger(e+"trackchange")},o=t[n.getterName]();o.addEventListener("removetrack",i),o.addEventListener("addtrack",i),t.on("dispose",function(){o.removeEventListener("removetrack",i),o.removeEventListener("addtrack",i)})})},e.prototype.addWebVttScript_=function(){var t=this;if(!fe.WebVTT)if(be.body.contains(this.el())){if(!this.options_["vtt.js"]&&r(Wi)&&Object.keys(Wi).length>0)return void this.trigger("vttjsloaded");var e=be.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.12.4/vtt.min.js",e.onload=function(){t.trigger("vttjsloaded")},e.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){e.onload=null,e.onerror=null}),fe.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)},e.prototype.emulateTextTracks=function(){var t=this,e=this.textTracks(),n=this.remoteTextTracks(),i=function(t){return e.addTrack(t.track)},o=function(t){return e.removeTrack(t.track)};n.on("addtrack",i),n.on("removetrack",o),this.addWebVttScript_();var r=function(){return t.trigger("texttrackchange")},s=function(){r();for(var t=0;t<e.length;t++){var n=e[t];n.removeEventListener("cuechange",r),"showing"===n.mode&&n.addEventListener("cuechange",r)}};s(),e.addEventListener("change",s),e.addEventListener("addtrack",s),e.addEventListener("removetrack",s),this.on("dispose",function(){n.off("addtrack",i),n.off("removetrack",o),e.removeEventListener("change",s),e.removeEventListener("addtrack",s),e.removeEventListener("removetrack",s);for(var t=0;t<e.length;t++){e[t].removeEventListener("cuechange",r)}})},e.prototype.addTextTrack=function(t,e,n){if(!t)throw new Error("TextTrack kind is required but was not provided");return Ht(this,t,e,n)},e.prototype.createRemoteTextTrack=function(t){var e=tt(t,{tech:this});return new Oi.remoteTextEl.TrackClass(e)},e.prototype.addRemoteTextTrack=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],i=this.createRemoteTextTrack(e);return!0!==n&&!1!==n&&(tn.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),n=!0),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!0!==n&&this.ready(function(){return t.autoRemoteTextTracks_.addTrack(i.track)}),i},e.prototype.removeRemoteTextTrack=function(t){var e=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(e),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)},e.prototype.getVideoPlaybackQuality=function(){return{}},e.prototype.setPoster=function(){},e.prototype.playsinline=function(){},e.prototype.setPlaysinline=function(){},e.prototype.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(t,n){return e.canPlayType(t.type)},e.isTech=function(t){return t.prototype instanceof e||t instanceof e||t===e},e.registerTech=function(t,n){if(e.techs_||(e.techs_={}),!e.isTech(n))throw new Error("Tech "+t+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=Z(t),e.techs_[t]=n,"Tech"!==t&&e.defaultTechOrder_.push(t),n},e.getTech=function(t){if(t)return t=Z(t),e.techs_&&e.techs_[t]?e.techs_[t]:fe&&fe.videojs&&fe.videojs[t]?(tn.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),fe.videojs[t]):void 0},e}(On);Mi.names.forEach(function(t){var e=Mi[t];Yi.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}}),Yi.prototype.featuresVolumeControl=!0,Yi.prototype.featuresMuteControl=!0,Yi.prototype.featuresFullscreenResize=!1,Yi.prototype.featuresPlaybackRate=!1,Yi.prototype.featuresProgressEvents=!1,Yi.prototype.featuresSourceset=!1,Yi.prototype.featuresTimeupdateEvents=!1,Yi.prototype.featuresNativeTextTracks=!1,Yi.withSourceHandlers=function(t){t.registerSourceHandler=function(e,n){var i=t.sourceHandlers;i||(i=t.sourceHandlers=[]),void 0===n&&(n=i.length),i.splice(n,0,e)},t.canPlayType=function(e){for(var n=t.sourceHandlers||[],i=void 0,o=0;o<n.length;o++)if(i=n[o].canPlayType(e))return i;return""},t.selectSourceHandler=function(e,n){for(var i=t.sourceHandlers||[],o=0;o<i.length;o++)if(i[o].canHandleSource(e,n))return i[o];return null},t.canPlaySource=function(e,n){var i=t.selectSourceHandler(e,n);return i?i.canHandleSource(e,n):""},["seekable","seeking","duration"].forEach(function(t){var e=this[t];"function"==typeof e&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):e.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(e){var n=t.selectSourceHandler(e,this.options_);n||(t.nativeSourceHandler?n=t.nativeSourceHandler:tn.error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),n!==t.nativeSourceHandler&&(this.currentSource_=e),this.sourceHandler_=n.handleSource(e,this,this.options_),this.on("dispose",this.disposeSourceHandler)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},On.registerComponent("Tech",Yi),Yi.registerTech("Tech",Yi),Yi.defaultTechOrder_=[];var Gi={},Qi={},Ki={},Xi={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},Zi={setCurrentTime:1},Ji={play:1,pause:1},to={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"},eo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=li(t);return to[e.toLowerCase()]||""},no=function(t,e){if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;var n=t.cache_.sources.filter(function(t){return t.src===e});if(n.length)return n[0].type;for(var i=t.$$("source"),o=0;o<i.length;o++){var r=i[o];if(r.type&&r.src&&r.src===e)return r.type}return eo(e)},io=function t(e){if(Array.isArray(e)){var n=[];e.forEach(function(e){e=t(e),Array.isArray(e)?n=n.concat(e):o(e)&&n.push(e)}),e=n}else e="string"==typeof e&&e.trim()?[ee({src:e})]:o(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[ee(e)]:[];return e},oo=function(t){function e(n,i,o){Ve(this,e);var r=tt({createEl:!1},i),s=We(this,t.call(this,n,r,o));if(i.playerOptions.sources&&0!==i.playerOptions.sources.length)n.src(i.playerOptions.sources);else for(var a=0,l=i.playerOptions.techOrder;a<l.length;a++){var c=Z(l[a]),u=Yi.getTech(c);if(c||(u=On.getComponent(c)),u&&u.isSupported()){n.loadTech_(c);break}}return s}return ze(e,t),e}(On);On.registerComponent("MediaLoader",oo);var ro=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.emitTapEvents(),o.enable(),o}return ze(e,t),e.prototype.createEl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=i({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},n),"button"===e&&tn.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),o=i({role:"button"},o),this.tabIndex_=n.tabIndex;var r=t.prototype.createEl.call(this,e,n,o);return this.createControlTextEl(r),r},e.prototype.dispose=function(){this.controlTextEl_=null,t.prototype.dispose.call(this)},e.prototype.createControlTextEl=function(t){return this.controlTextEl_=g("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},e.prototype.controlText=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el();if(void 0===t)return this.controlText_||"Need Text";var n=this.localize(t);this.controlText_=t,m(this.controlTextEl_,n),this.nonIconControl||e.setAttribute("title",n)},e.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+t.prototype.buildCSSClass.call(this)},e.prototype.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},e.prototype.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},e.prototype.handleClick=function(t){},e.prototype.handleFocus=function(t){z(be,"keydown",yn(this,this.handleKeyPress))},e.prototype.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.trigger("click")):t.prototype.handleKeyPress&&t.prototype.handleKeyPress.call(this,e)},e.prototype.handleBlur=function(t){W(be,"keydown",yn(this,this.handleKeyPress))},e}(On);On.registerComponent("ClickableComponent",ro);var so=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.update(),n.on("posterchange",yn(o,o.update)),o}return ze(e,t),e.prototype.dispose=function(){this.player().off("posterchange",this.update),t.prototype.dispose.call(this)},e.prototype.createEl=function(){var t=g("div",{className:"vjs-poster",tabIndex:-1});return $e||(this.fallbackImg_=g("img"),t.appendChild(this.fallbackImg_)),t},e.prototype.update=function(t){var e=this.player().poster();this.setSrc(e),e?this.show():this.hide()},e.prototype.setSrc=function(t){if(this.fallbackImg_)this.fallbackImg_.src=t;else{var e="";t&&(e='url("'+t+'")'),this.el_.style.backgroundImage=e}},e.prototype.handleClick=function(t){this.player_.controls()&&(this.player_.paused()?ct(this.player_.play()):this.player_.pause())},e}(ro);On.registerComponent("PosterImage",so);var ao={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},lo=function(t){function e(n,i,o){Ve(this,e);var r=We(this,t.call(this,n,i,o));return n.on("loadstart",yn(r,r.toggleDisplay)),n.on("texttrackchange",yn(r,r.updateDisplay)),n.on("loadstart",yn(r,r.preselectTrack)),n.ready(yn(r,function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)return void this.hide();n.on("fullscreenchange",yn(this,this.updateDisplay));for(var t=this.options_.playerOptions.tracks||[],e=0;e<t.length;e++)this.player_.addRemoteTextTrack(t[e],!0);this.preselectTrack()})),r}return ze(e,t),e.prototype.preselectTrack=function(){for(var t={captions:1,subtitles:1},e=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage,i=void 0,o=void 0,r=void 0,s=0;s<e.length;s++){var a=e[s];n&&n.enabled&&n.language===a.language?a.kind===n.kind?r=a:r||(r=a):n&&!n.enabled?(r=null,i=null,o=null):a.default&&("descriptions"!==a.kind||i?a.kind in t&&!o&&(o=a):i=a)}r?r.mode="showing":o?o.mode="showing":i&&(i.mode="showing")},e.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},e.prototype.clearDisplay=function(){"function"==typeof fe.WebVTT&&fe.WebVTT.processCues(fe,[],this.el_)},e.prototype.updateDisplay=function(){var t=this.player_.textTracks();this.clearDisplay();for(var e=null,n=null,i=t.length;i--;){var o=t[i];"showing"===o.mode&&("descriptions"===o.kind?e=o:n=o)}n?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):e&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(e))},e.prototype.updateForTrack=function(t){if("function"==typeof fe.WebVTT&&t.activeCues){for(var e=[],n=0;n<t.activeCues.length;n++)e.push(t.activeCues[n]);if(fe.WebVTT.processCues(fe,e,this.el_),this.player_.textTrackSettings)for(var i=this.player_.textTrackSettings.getValues(),o=e.length;o--;){var r=e[o];if(r){var s=r.displayState;if(i.color&&(s.firstChild.style.color=i.color),i.textOpacity&&ie(s.firstChild,"color",ne(i.color||"#fff",i.textOpacity)),i.backgroundColor&&(s.firstChild.style.backgroundColor=i.backgroundColor),i.backgroundOpacity&&ie(s.firstChild,"backgroundColor",ne(i.backgroundColor||"#000",i.backgroundOpacity)),i.windowColor&&(i.windowOpacity?ie(s,"backgroundColor",ne(i.windowColor,i.windowOpacity)):s.style.backgroundColor=i.windowColor),i.edgeStyle&&("dropshadow"===i.edgeStyle?s.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===i.edgeStyle?s.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===i.edgeStyle?s.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===i.edgeStyle&&(s.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),i.fontPercent&&1!==i.fontPercent){var a=fe.parseFloat(s.style.fontSize);s.style.fontSize=a*i.fontPercent+"px",s.style.height="auto",s.style.top="auto",s.style.bottom="2px"}i.fontFamily&&"default"!==i.fontFamily&&("small-caps"===i.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=ao[i.fontFamily])}}}},e}(On);On.registerComponent("TextTrackDisplay",lo);var co=function(t){function e(){return Ve(this,e),We(this,t.apply(this,arguments))}return ze(e,t),e.prototype.createEl=function(){var e=this.player_.isAudio(),n=this.localize(e?"Audio Player":"Video Player"),i=g("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[n])}),o=t.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return o.appendChild(i),o},e}(On);On.registerComponent("LoadingSpinner",co);var uo=function(t){function e(){return Ve(this,e),We(this,t.apply(this,arguments))}return ze(e,t),e.prototype.createEl=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t="button",e=i({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},e),n=i({type:"button"},n);var o=On.prototype.createEl.call(this,t,e,n);return this.createControlTextEl(o),o},e.prototype.addChild=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.constructor.name;return tn.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),On.prototype.addChild.call(this,t,e)},e.prototype.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},e.prototype.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},e.prototype.handleKeyPress=function(e){32!==e.which&&13!==e.which&&t.prototype.handleKeyPress.call(this,e)},e}(ro);On.registerComponent("Button",uo);var ho=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.mouseused_=!1,o.on("mousedown",o.handleMouseDown),o}return ze(e,t),e.prototype.buildCSSClass=function(){return"vjs-big-play-button"},e.prototype.handleClick=function(t){var e=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY)return void ct(e);var n=this.player_.getChild("controlBar"),i=n&&n.getChild("playToggle");if(!i)return void this.player_.focus();var o=function(){return i.focus()};lt(e)?e.then(o,function(){}):this.setTimeout(o,1)},e.prototype.handleKeyPress=function(e){this.mouseused_=!1,t.prototype.handleKeyPress.call(this,e)},e.prototype.handleMouseDown=function(t){this.mouseused_=!0},e}(uo);ho.prototype.controlText_="Play Video",On.registerComponent("BigPlayButton",ho);var po=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.controlText(i&&i.controlText||o.localize("Close")),o}return ze(e,t),e.prototype.buildCSSClass=function(){return"vjs-close-button "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(t){this.trigger({type:"close",bubbles:!1})},e}(uo);On.registerComponent("CloseButton",po);var fo=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.on(n,"play",o.handlePlay),o.on(n,"pause",o.handlePause),o.on(n,"ended",o.handleEnded),o}return ze(e,t),e.prototype.buildCSSClass=function(){return"vjs-play-control "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},e.prototype.handleSeeked=function(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)},e.prototype.handlePlay=function(t){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},e.prototype.handlePause=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},e.prototype.handleEnded=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},e}(uo);fo.prototype.controlText_="Play",On.registerComponent("PlayToggle",fo);var go=function(t,e){t=t<0?0:t;var n=Math.floor(t%60),i=Math.floor(t/60%60),o=Math.floor(t/3600),r=Math.floor(e/60%60),s=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(o=i=n="-"),o=o>0||s>0?o+":":"",i=((o||r>=10)&&i<10?"0"+i:i)+":",n=n<10?"0"+n:n,o+i+n},mo=go,vo=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return mo(t,e)},yo=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.throttledUpdateContent=bn(yn(o,o.updateContent),25),o.on(n,"timeupdate",o.throttledUpdateContent),o}return ze(e,t),e.prototype.createEl=function(e){var n=this.buildCSSClass(),i=t.prototype.createEl.call(this,"div",{className:n+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=g("span",{className:n+"-display"},{"aria-live":"off"}),this.updateTextNode_(),i.appendChild(this.contentEl_),i},e.prototype.dispose=function(){this.contentEl_=null,this.textNode_=null,t.prototype.dispose.call(this)},e.prototype.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=be.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},e.prototype.formatTime_=function(t){return vo(t)},e.prototype.updateFormattedTime_=function(t){var e=this.formatTime_(t);e!==this.formattedTime_&&(this.formattedTime_=e,this.requestAnimationFrame(this.updateTextNode_))},e.prototype.updateContent=function(t){},e}(On);yo.prototype.labelText_="Time",yo.prototype.controlText_="Time",On.registerComponent("TimeDisplay",yo);var bo=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.on(n,"ended",o.handleEnded),o}return ze(e,t),e.prototype.buildCSSClass=function(){return"vjs-current-time"},e.prototype.updateContent=function(t){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(e)},e.prototype.handleEnded=function(t){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},e}(yo);bo.prototype.labelText_="Current Time",bo.prototype.controlText_="Current Time",On.registerComponent("CurrentTimeDisplay",bo);var _o=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.on(n,"durationchange",o.updateContent),o.on(n,"loadedmetadata",o.throttledUpdateContent),o}return ze(e,t),
e.prototype.buildCSSClass=function(){return"vjs-duration"},e.prototype.updateContent=function(t){var e=this.player_.duration();e&&this.duration_!==e&&(this.duration_=e,this.updateFormattedTime_(e))},e}(yo);_o.prototype.labelText_="Duration",_o.prototype.controlText_="Duration",On.registerComponent("DurationDisplay",_o);var wo=function(t){function e(){return Ve(this,e),We(this,t.apply(this,arguments))}return ze(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},e}(On);On.registerComponent("TimeDivider",wo);var Co=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.on(n,"durationchange",o.throttledUpdateContent),o.on(n,"ended",o.handleEnded),o}return ze(e,t),e.prototype.buildCSSClass=function(){return"vjs-remaining-time"},e.prototype.formatTime_=function(e){return"-"+t.prototype.formatTime_.call(this,e)},e.prototype.updateContent=function(t){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},e.prototype.handleEnded=function(t){this.player_.duration()&&this.updateFormattedTime_(0)},e}(yo);Co.prototype.labelText_="Remaining Time",Co.prototype.controlText_="Remaining Time",On.registerComponent("RemainingTimeDisplay",Co);var xo=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.updateShowing(),o.on(o.player(),"durationchange",o.updateShowing),o}return ze(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=g("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},e.prototype.dispose=function(){this.contentEl_=null,t.prototype.dispose.call(this)},e.prototype.updateShowing=function(t){this.player().duration()===1/0?this.show():this.hide()},e}(On);On.registerComponent("LiveDisplay",xo);var To=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.bar=o.getChild(o.options_.barName),o.vertical(!!o.options_.vertical),o.enable(),o}return ze(e,t),e.prototype.enabled=function(){return this.enabled_},e.prototype.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},e.prototype.disable=function(){if(this.enabled()){var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},e.prototype.createEl=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.className=n.className+" vjs-slider",n=i({tabIndex:0},n),o=i({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},o),t.prototype.createEl.call(this,e,n,o)},e.prototype.handleMouseDown=function(t){var e=this.bar.el_.ownerDocument;"mousedown"===t.type&&t.preventDefault(),"touchstart"!==t.type||Le||t.preventDefault(),E(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(e,"mousemove",this.handleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchmove",this.handleMouseMove),this.on(e,"touchend",this.handleMouseUp),this.handleMouseMove(t)},e.prototype.handleMouseMove=function(t){},e.prototype.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;P(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.update()},e.prototype.update=function(){if(this.el_){var t=this.getPercent(),e=this.bar;if(e){("number"!=typeof t||t!==t||t<0||t===1/0)&&(t=0);var n=(100*t).toFixed(2)+"%",i=e.el().style;return this.vertical()?i.height=n:i.width=n,t}}},e.prototype.calculateDistance=function(t){var e=O(this.el_,t);return this.vertical()?e.y:e.x},e.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},e.prototype.handleKeyPress=function(t){37===t.which||40===t.which?(t.preventDefault(),this.stepBack()):38!==t.which&&39!==t.which||(t.preventDefault(),this.stepForward())},e.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},e.prototype.handleClick=function(t){t.stopImmediatePropagation(),t.preventDefault()},e.prototype.vertical=function(t){if(void 0===t)return this.vertical_||!1;this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(On);On.registerComponent("Slider",To);var ko=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.partEls_=[],o.on(n,"progress",o.update),o}return ze(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},e.prototype.dispose=function(){this.partEls_=null,t.prototype.dispose.call(this)},e.prototype.update=function(t){var e=this.player_.buffered(),n=this.player_.duration(),i=this.player_.bufferedEnd(),o=this.partEls_,r=function(t,e){var n=t/e||0;return 100*(n>=1?1:n)+"%"};this.el_.style.width=r(i,n);for(var s=0;s<e.length;s++){var a=e.start(s),l=e.end(s),c=o[s];c||(c=this.el_.appendChild(g()),o[s]=c),c.style.left=r(a,i),c.style.width=r(l-a,i)}for(var u=o.length;u>e.length;u--)this.el_.removeChild(o[u-1]);o.length=e.length},e}(On);On.registerComponent("LoadProgressBar",ko);var So=function(t){function e(){return Ve(this,e),We(this,t.apply(this,arguments))}return ze(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})},e.prototype.update=function(t,e,n){var i=A(this.el_),o=A(this.player_.el()),r=t.width*e;if(o&&i){var s=t.left-o.left+r,a=t.width-r+(o.right-t.right),l=i.width/2;s<l?l+=l-s:a<l&&(l=a),l<0?l=0:l>i.width&&(l=i.width),this.el_.style.right="-"+l+"px",m(this.el_,n)}},e}(On);On.registerComponent("TimeTooltip",So);var Eo=function(t){function e(){return Ve(this,e),We(this,t.apply(this,arguments))}return ze(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},e.prototype.update=function(t,e){var n=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var i=n.player_.scrubbing()?n.player_.getCache().currentTime:n.player_.currentTime(),o=vo(i,n.player_.duration()),r=n.getChild("timeTooltip");r&&r.update(t,e,o)})},e}(On);Eo.prototype.options_={children:[]},Be&&!(Be>8)||Se||Pe||Eo.prototype.options_.children.push("timeTooltip"),On.registerComponent("PlayProgressBar",Eo);var Po=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.update=bn(yn(o,o.update),25),o}return ze(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},e.prototype.update=function(t,e){var n=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var i=n.player_.duration(),o=vo(e*i,i);n.el_.style.left=t.width*e+"px",n.getChild("timeTooltip").update(t,e,o)})},e}(On);Po.prototype.options_={children:["timeTooltip"]},On.registerComponent("MouseTimeDisplay",Po);var Ao=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.setEventHandlers_(),o}return ze(e,t),e.prototype.setEventHandlers_=function(){var t=this;this.update=bn(yn(this,this.update),30),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.updateInterval=null,this.on(this.player_,["playing"],function(){t.clearInterval(t.updateInterval),t.updateInterval=t.setInterval(function(){t.requestAnimationFrame(function(){t.update()})},30)}),this.on(this.player_,["ended","pause","waiting"],function(){t.clearInterval(t.updateInterval)}),this.on(this.player_,["timeupdate","ended"],this.update)},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},e.prototype.update_=function(t,e){var n=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*e).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[vo(t,n),vo(n,n)],"{1} of {2}")),this.bar.update(A(this.el_),e)},e.prototype.update=function(e){var n=t.prototype.update.call(this);return this.update_(this.getCurrentTime_(),n),n},e.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},e.prototype.handleEnded=function(t){this.update_(this.player_.duration(),1)},e.prototype.getPercent=function(){var t=this.getCurrentTime_()/this.player_.duration();return t>=1?1:t},e.prototype.handleMouseDown=function(e){B(e)&&(e.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),t.prototype.handleMouseDown.call(this,e))},e.prototype.handleMouseMove=function(t){if(B(t)){var e=this.calculateDistance(t)*this.player_.duration();e===this.player_.duration()&&(e-=.1),this.player_.currentTime(e)}},e.prototype.enable=function(){t.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},e.prototype.disable=function(){t.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},e.prototype.handleMouseUp=function(e){t.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&ct(this.player_.play())},e.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},e.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},e.prototype.handleAction=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},e.prototype.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.handleAction(e)):t.prototype.handleKeyPress&&t.prototype.handleKeyPress.call(this,e)},e}(To);Ao.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Be&&!(Be>8)||Se||Pe||Ao.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Ao.prototype.playerEvent="timeupdate",On.registerComponent("SeekBar",Ao);var Io=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.handleMouseMove=bn(yn(o,o.handleMouseMove),25),o.throttledHandleMouseSeek=bn(yn(o,o.handleMouseSeek),25),o.enable(),o}return ze(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},e.prototype.handleMouseMove=function(t){var e=this.getChild("seekBar");if(e){var n=e.getChild("mouseTimeDisplay"),i=e.el(),o=A(i),r=O(i,t).x;r>1?r=1:r<0&&(r=0),n&&n.update(o,r)}},e.prototype.handleMouseSeek=function(t){var e=this.getChild("seekBar");e&&e.handleMouseMove(t)},e.prototype.enabled=function(){return this.enabled_},e.prototype.disable=function(){this.children().forEach(function(t){return t.disable&&t.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},e.prototype.enable=function(){this.children().forEach(function(t){return t.enable&&t.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},e.prototype.handleMouseDown=function(t){var e=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(t),this.on(e,"mousemove",this.throttledHandleMouseSeek),this.on(e,"touchmove",this.throttledHandleMouseSeek),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchend",this.handleMouseUp)},e.prototype.handleMouseUp=function(t){var e=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseUp(t),this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchend",this.handleMouseUp)},e}(On);Io.prototype.options_={children:["seekBar"]},On.registerComponent("ProgressControl",Io);var Oo=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.on(n,"fullscreenchange",o.handleFullscreenChange),!1===be[Mn.fullscreenEnabled]&&o.disable(),o}return ze(e,t),e.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+t.prototype.buildCSSClass.call(this)},e.prototype.handleFullscreenChange=function(t){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},e.prototype.handleClick=function(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(uo);Oo.prototype.controlText_="Fullscreen",On.registerComponent("FullscreenToggle",Oo);var Mo=function(t,e){e.tech_&&!e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})},Do=function(t){function e(){return Ve(this,e),We(this,t.apply(this,arguments))}return ze(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},e}(On);On.registerComponent("VolumeLevel",Do);var Lo=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.on("slideractive",o.updateLastVolume_),o.on(n,"volumechange",o.updateARIAAttributes),n.ready(function(){return o.updateARIAAttributes()}),o}return ze(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},e.prototype.handleMouseDown=function(e){B(e)&&t.prototype.handleMouseDown.call(this,e)},e.prototype.handleMouseMove=function(t){B(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))},e.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},e.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},e.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},e.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},e.prototype.updateARIAAttributes=function(t){var e=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",e),this.el_.setAttribute("aria-valuetext",e+"%")},e.prototype.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},e.prototype.updateLastVolume_=function(){var t=this,e=this.player_.volume();this.one("sliderinactive",function(){0===t.player_.volume()&&t.player_.lastVolume_(e)})},e}(To);Lo.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Lo.prototype.playerEvent="volumechange",On.registerComponent("VolumeBar",Lo);var jo=function(t){function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ve(this,e),i.vertical=i.vertical||!1,(void 0===i.volumeBar||r(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical);var o=We(this,t.call(this,n,i));return Mo(o,n),o.throttledHandleMouseMove=bn(yn(o,o.handleMouseMove),25),o.on("mousedown",o.handleMouseDown),o.on("touchstart",o.handleMouseDown),o.on(o.volumeBar,["focus","slideractive"],function(){o.volumeBar.addClass("vjs-slider-active"),o.addClass("vjs-slider-active"),o.trigger("slideractive")}),o.on(o.volumeBar,["blur","sliderinactive"],function(){o.volumeBar.removeClass("vjs-slider-active"),o.removeClass("vjs-slider-active"),o.trigger("sliderinactive")}),o}return ze(e,t),e.prototype.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},e.prototype.handleMouseDown=function(t){var e=this.el_.ownerDocument;this.on(e,"mousemove",this.throttledHandleMouseMove),this.on(e,"touchmove",this.throttledHandleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchend",this.handleMouseUp)},e.prototype.handleMouseUp=function(t){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseMove),this.off(e,"touchmove",this.throttledHandleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchend",this.handleMouseUp)},e.prototype.handleMouseMove=function(t){this.volumeBar.handleMouseMove(t)},e}(On);jo.prototype.options_={children:["volumeBar"]},On.registerComponent("VolumeControl",jo);var Ro=function(t,e){e.tech_&&!e.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})},Bo=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return Ro(o,n),o.on(n,["loadstart","volumechange"],o.update),o}return ze(e,t),e.prototype.buildCSSClass=function(){return"vjs-mute-control "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(t){var e=this.player_.volume(),n=this.player_.lastVolume_();if(0===e){var i=n<.1?.1:n;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},e.prototype.update=function(t){this.updateIcon_(),this.updateControlText_()},e.prototype.updateIcon_=function(){var t=this.player_.volume(),e=3;Se&&this.player_.muted(this.player_.tech_.el_.muted),0===t||this.player_.muted()?e=0:t<.33?e=1:t<.67&&(e=2);for(var n=0;n<4;n++)_(this.el_,"vjs-vol-"+n);b(this.el_,"vjs-vol-"+e)},e.prototype.updateControlText_=function(){var t=this.player_.muted()||0===this.player_.volume(),e=t?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},e}(uo);Bo.prototype.controlText_="Mute",On.registerComponent("MuteToggle",Bo);var Fo=function(t){function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ve(this,e),void 0!==i.inline?i.inline=i.inline:i.inline=!0,(void 0===i.volumeControl||r(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline);var o=We(this,t.call(this,n,i));return o.on(n,["loadstart"],o.volumePanelState_),o.on(o.volumeControl,["slideractive"],o.sliderActive_),o.on(o.volumeControl,["sliderinactive"],o.sliderInactive_),o}return ze(e,t),e.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")},e.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")},e.prototype.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},e.prototype.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},e}(On);Fo.prototype.options_={children:["muteToggle","volumeControl"]},On.registerComponent("VolumePanel",Fo);var No=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return i&&(o.menuButton_=i.menuButton),o.focusedChild_=-1,o.on("keydown",o.handleKeyPress),o}return ze(e,t),e.prototype.addItem=function(t){this.addChild(t),t.on("click",yn(this,function(e){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==t.name()&&this.menuButton_.focus())}))},e.prototype.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=g(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=t.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),z(n,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),n},e.prototype.dispose=function(){this.contentEl_=null,t.prototype.dispose.call(this)},e.prototype.handleKeyPress=function(t){37===t.which||40===t.which?(t.preventDefault(),this.stepForward()):38!==t.which&&39!==t.which||(t.preventDefault(),this.stepBack())},e.prototype.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},e.prototype.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},e.prototype.focus=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.children().slice();e.length&&e[0].className&&/vjs-menu-title/.test(e[0].className)&&e.shift(),e.length>0&&(t<0?t=0:t>=e.length&&(t=e.length-1),this.focusedChild_=t,e[t].el_.focus())},e}(On);On.registerComponent("Menu",No);var Uo=function(t){function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ve(this,e);var o=We(this,t.call(this,n,i));o.menuButton_=new uo(n,i),o.menuButton_.controlText(o.controlText_),o.menuButton_.el_.setAttribute("aria-haspopup","true");var r=uo.prototype.buildCSSClass();return o.menuButton_.el_.className=o.buildCSSClass()+" "+r,o.menuButton_.removeClass("vjs-control"),o.addChild(o.menuButton_),o.update(),o.enabled_=!0,o.on(o.menuButton_,"tap",o.handleClick),o.on(o.menuButton_,"click",o.handleClick),o.on(o.menuButton_,"focus",o.handleFocus),o.on(o.menuButton_,"blur",o.handleBlur),o.on("keydown",o.handleSubmenuKeyPress),o}return ze(e,t),e.prototype.update=function(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},e.prototype.createMenu=function(){var t=new No(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var e=g("li",{className:"vjs-menu-title",innerHTML:Z(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,t.children_.unshift(e),v(e,t.contentEl())}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)t.addItem(this.items[n]);return t},e.prototype.createItems=function(){},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},e.prototype.buildWrapperCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+uo.prototype.buildCSSClass()+" "+t.prototype.buildCSSClass.call(this)},e.prototype.buildCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+t.prototype.buildCSSClass.call(this)},e.prototype.controlText=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(t,e)},e.prototype.handleClick=function(t){this.one(this.menu.contentEl(),"mouseleave",yn(this,function(t){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},e.prototype.focus=function(){this.menuButton_.focus()},e.prototype.blur=function(){this.menuButton_.blur()},e.prototype.handleFocus=function(){z(be,"keydown",yn(this,this.handleKeyPress))},e.prototype.handleBlur=function(){W(be,"keydown",yn(this,this.handleKeyPress))},e.prototype.handleKeyPress=function(t){27===t.which||9===t.which?(this.buttonPressed_&&this.unpressButton(),9!==t.which&&(t.preventDefault(),this.menuButton_.el_.focus())):38!==t.which&&40!==t.which||this.buttonPressed_||(this.pressButton(),t.preventDefault())},e.prototype.handleSubmenuKeyPress=function(t){27!==t.which&&9!==t.which||(this.buttonPressed_&&this.unpressButton(),9!==t.which&&(t.preventDefault(),this.menuButton_.el_.focus()))},e.prototype.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Se&&p())return;this.menu.focus()}},e.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},e.prototype.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},e.prototype.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(On);On.registerComponent("MenuButton",Uo);var $o=function(t){function e(n,i){Ve(this,e);var o=i.tracks,r=We(this,t.call(this,n,i));if(r.items.length<=1&&r.hide(),!o)return We(r);var s=yn(r,r.update);return o.addEventListener("removetrack",s),o.addEventListener("addtrack",s),r.player_.on("ready",s),r.player_.on("dispose",function(){o.removeEventListener("removetrack",s),o.removeEventListener("addtrack",s)}),r}return ze(e,t),e}(Uo);On.registerComponent("TrackButton",$o);var qo=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.selectable=i.selectable,o.isSelected_=i.selected||!1,o.multiSelectable=i.multiSelectable,o.selected(o.isSelected_),o.selectable?o.multiSelectable?o.el_.setAttribute("role","menuitemcheckbox"):o.el_.setAttribute("role","menuitemradio"):o.el_.setAttribute("role","menuitem"),o}return ze(e,t),e.prototype.createEl=function(e,n,o){return this.nonIconControl=!0,t.prototype.createEl.call(this,"li",i({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},n),o)},e.prototype.handleClick=function(t){this.selected(!0)},e.prototype.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(ro);On.registerComponent("MenuItem",qo);var Ho=function(t){function e(n,i){Ve(this,e);var o=i.track,r=n.textTracks();i.label=o.label||o.language||"Unknown",i.selected="showing"===o.mode;var s=We(this,t.call(this,n,i));s.track=o;var a=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];s.handleTracksChange.apply(s,e)},l=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];s.handleSelectedLanguageChange.apply(s,e)};if(n.on(["loadstart","texttrackchange"],a),r.addEventListener("change",a),r.addEventListener("selectedlanguagechange",l),s.on("dispose",function(){n.off(["loadstart","texttrackchange"],a),r.removeEventListener("change",a),r.removeEventListener("selectedlanguagechange",l)}),void 0===r.onchange){var c=void 0;s.on(["tap","click"],function(){if("object"!==He(fe.Event))try{c=new fe.Event("change")}catch(t){}c||(c=be.createEvent("Event"),c.initEvent("change",!0,!0)),r.dispatchEvent(c)})}return s.handleTracksChange(),s}return ze(e,t),e.prototype.handleClick=function(e){var n=this.track.kind,i=this.track.kinds,o=this.player_.textTracks();if(i||(i=[n]),t.prototype.handleClick.call(this,e),o)for(var r=0;r<o.length;r++){var s=o[r];s===this.track&&i.indexOf(s.kind)>-1?"showing"!==s.mode&&(s.mode="showing"):"disabled"!==s.mode&&(s.mode="disabled")}},e.prototype.handleTracksChange=function(t){var e="showing"===this.track.mode;e!==this.isSelected_&&this.selected(e)},e.prototype.handleSelectedLanguageChange=function(t){if("showing"===this.track.mode){var e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},e.prototype.dispose=function(){this.track=null,t.prototype.dispose.call(this)},e}(qo);On.registerComponent("TextTrackMenuItem",Ho);var Vo=function(t){function e(n,i){return Ve(this,e),i.track={player:n,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,We(this,t.call(this,n,i))}return ze(e,t),e.prototype.handleTracksChange=function(t){for(var e=this.player().textTracks(),n=!0,i=0,o=e.length;i<o;i++){var r=e[i];if(this.options_.kinds.indexOf(r.kind)>-1&&"showing"===r.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},e.prototype.handleSelectedLanguageChange=function(t){for(var e=this.player().textTracks(),n=!0,i=0,o=e.length;i<o;i++){var r=e[i];if(["captions","descriptions","subtitles"].indexOf(r.kind)>-1&&"showing"===r.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(Ho);On.registerComponent("OffTextTrackMenuItem",Vo);var zo=function(t){function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ve(this,e),i.tracks=n.textTracks(),We(this,t.call(this,n,i))}return ze(e,t),e.prototype.createItems=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ho,n=void 0;this.label_&&(n=this.label_+" off"),t.push(new Vo(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var o=0;o<i.length;o++){var r=i[o];if(this.kinds_.indexOf(r.kind)>-1){var s=new e(this.player_,{track:r,selectable:!0,multiSelectable:!1});s.addClass("vjs-"+r.kind+"-menu-item"),t.push(s)}}return t},e}($o);On.registerComponent("TextTrackButton",zo);var Wo=function(t){function e(n,i){Ve(this,e);var o=i.track,r=i.cue,s=n.currentTime();i.selectable=!0,i.multiSelectable=!1,i.label=r.text,i.selected=r.startTime<=s&&s<r.endTime;var a=We(this,t.call(this,n,i));return a.track=o,a.cue=r,o.addEventListener("cuechange",yn(a,a.update)),a}return ze(e,t),e.prototype.handleClick=function(e){t.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},e.prototype.update=function(t){var e=this.cue,n=this.player_.currentTime();this.selected(e.startTime<=n&&n<e.endTime)},e}(qo);On.registerComponent("ChaptersTrackMenuItem",Wo);var Yo=function(t){function e(n,i,o){return Ve(this,e),We(this,t.call(this,n,i,o))}return ze(e,t),e.prototype.buildCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildWrapperCSSClass.call(this)},e.prototype.update=function(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack()),t.prototype.update.call(this)},e.prototype.setTrack=function(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden"
;var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},e.prototype.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],e=t.length-1;e>=0;e--){var n=t[e];if(n.kind===this.kind_)return n}},e.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Z(this.kind_))},e.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),t.prototype.createMenu.call(this)},e.prototype.createItems=function(){var t=[];if(!this.track_)return t;var e=this.track_.cues;if(!e)return t;for(var n=0,i=e.length;n<i;n++){var o=e[n],r=new Wo(this.player_,{track:this.track_,cue:o});t.push(r)}return t},e}(zo);Yo.prototype.kind_="chapters",Yo.prototype.controlText_="Chapters",On.registerComponent("ChaptersButton",Yo);var Go=function(t){function e(n,i,o){Ve(this,e);var r=We(this,t.call(this,n,i,o)),s=n.textTracks(),a=yn(r,r.handleTracksChange);return s.addEventListener("change",a),r.on("dispose",function(){s.removeEventListener("change",a)}),r}return ze(e,t),e.prototype.handleTracksChange=function(t){for(var e=this.player().textTracks(),n=!1,i=0,o=e.length;i<o;i++){var r=e[i];if(r.kind!==this.kind_&&"showing"===r.mode){n=!0;break}}n?this.disable():this.enable()},e.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(zo);Go.prototype.kind_="descriptions",Go.prototype.controlText_="Descriptions",On.registerComponent("DescriptionsButton",Go);var Qo=function(t){function e(n,i,o){return Ve(this,e),We(this,t.call(this,n,i,o))}return ze(e,t),e.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(zo);Qo.prototype.kind_="subtitles",Qo.prototype.controlText_="Subtitles",On.registerComponent("SubtitlesButton",Qo);var Ko=function(t){function e(n,i){Ve(this,e),i.track={player:n,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem";var o=We(this,t.call(this,n,i));return o.addClass("vjs-texttrack-settings"),o.controlText(", opens "+i.kind+" settings dialog"),o}return ze(e,t),e.prototype.handleClick=function(t){this.player().getChild("textTrackSettings").open()},e}(Ho);On.registerComponent("CaptionSettingsMenuItem",Ko);var Xo=function(t){function e(n,i,o){return Ve(this,e),We(this,t.call(this,n,i,o))}return ze(e,t),e.prototype.buildCSSClass=function(){return"vjs-captions-button "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-captions-button "+t.prototype.buildWrapperCSSClass.call(this)},e.prototype.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Ko(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,e)},e}(zo);Xo.prototype.kind_="captions",Xo.prototype.controlText_="Captions",On.registerComponent("CaptionsButton",Xo);var Zo=function(t){function e(){return Ve(this,e),We(this,t.apply(this,arguments))}return ze(e,t),e.prototype.createEl=function(e,n,o){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),r+="</span>",t.prototype.createEl.call(this,e,i({innerHTML:r},n),o)},e}(Ho);On.registerComponent("SubsCapsMenuItem",Zo);var Jo=function(t){function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ve(this,e);var o=We(this,t.call(this,n,i));return o.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(o.player_.language_)>-1&&(o.label_="captions"),o.menuButton_.controlText(Z(o.label_)),o}return ze(e,t),e.prototype.buildCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildWrapperCSSClass.call(this)},e.prototype.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Ko(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=t.prototype.createItems.call(this,e,Zo)},e}(zo);Jo.prototype.kinds_=["captions","subtitles"],Jo.prototype.controlText_="Subtitles",On.registerComponent("SubsCapsButton",Jo);var tr=function(t){function e(n,i){Ve(this,e);var o=i.track,r=n.audioTracks();i.label=o.label||o.language||"Unknown",i.selected=o.enabled;var s=We(this,t.call(this,n,i));s.track=o,s.addClass("vjs-"+o.kind+"-menu-item");var a=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];s.handleTracksChange.apply(s,e)};return r.addEventListener("change",a),s.on("dispose",function(){r.removeEventListener("change",a)}),s}return ze(e,t),e.prototype.createEl=function(e,n,o){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),r+="</span>",t.prototype.createEl.call(this,e,i({innerHTML:r},n),o)},e.prototype.handleClick=function(e){var n=this.player_.audioTracks();t.prototype.handleClick.call(this,e);for(var i=0;i<n.length;i++){var o=n[i];o.enabled=o===this.track}},e.prototype.handleTracksChange=function(t){this.selected(this.track.enabled)},e}(qo);On.registerComponent("AudioTrackMenuItem",tr);var er=function(t){function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ve(this,e),i.tracks=n.audioTracks(),We(this,t.call(this,n,i))}return ze(e,t),e.prototype.buildCSSClass=function(){return"vjs-audio-button "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-audio-button "+t.prototype.buildWrapperCSSClass.call(this)},e.prototype.createItems=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.hideThreshold_=1;for(var e=this.player_.audioTracks(),n=0;n<e.length;n++){var i=e[n];t.push(new tr(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return t},e}($o);er.prototype.controlText_="Audio Track",On.registerComponent("AudioTrackButton",er);var nr=function(t){function e(n,i){Ve(this,e);var o=i.rate,r=parseFloat(o,10);i.label=o,i.selected=1===r,i.selectable=!0,i.multiSelectable=!1;var s=We(this,t.call(this,n,i));return s.label=o,s.rate=r,s.on(n,"ratechange",s.update),s}return ze(e,t),e.prototype.handleClick=function(e){t.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},e.prototype.update=function(t){this.selected(this.player().playbackRate()===this.rate)},e}(qo);nr.prototype.contentElType="button",On.registerComponent("PlaybackRateMenuItem",nr);var ir=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.updateVisibility(),o.updateLabel(),o.on(n,"loadstart",o.updateVisibility),o.on(n,"ratechange",o.updateLabel),o}return ze(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this);return this.labelEl_=g("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),e.appendChild(this.labelEl_),e},e.prototype.dispose=function(){this.labelEl_=null,t.prototype.dispose.call(this)},e.prototype.buildCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildCSSClass.call(this)},e.prototype.buildWrapperCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildWrapperCSSClass.call(this)},e.prototype.createMenu=function(){var t=new No(this.player()),e=this.playbackRates();if(e)for(var n=e.length-1;n>=0;n--)t.addChild(new nr(this.player(),{rate:e[n]+"x"}));return t},e.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},e.prototype.handleClick=function(t){for(var e=this.player().playbackRate(),n=this.playbackRates(),i=n[0],o=0;o<n.length;o++)if(n[o]>e){i=n[o];break}this.player().playbackRate(i)},e.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},e.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},e.prototype.updateVisibility=function(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},e.prototype.updateLabel=function(t){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},e}(Uo);ir.prototype.controlText_="Playback Rate",On.registerComponent("PlaybackRateMenuButton",ir);var or=function(t){function e(){return Ve(this,e),We(this,t.apply(this,arguments))}return ze(e,t),e.prototype.buildCSSClass=function(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},e}(On);On.registerComponent("Spacer",or);var rr=function(t){function e(){return Ve(this,e),We(this,t.apply(this,arguments))}return ze(e,t),e.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,{className:this.buildCSSClass()});return e.innerHTML=" ",e},e}(or);On.registerComponent("CustomControlSpacer",rr);var sr=function(t){function e(){return Ve(this,e),We(this,t.apply(this,arguments))}return ze(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(On);sr.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},On.registerComponent("ControlBar",sr);var ar=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i));return o.on(n,"error",o.open),o}return ze(e,t),e.prototype.buildCSSClass=function(){return"vjs-error-display "+t.prototype.buildCSSClass.call(this)},e.prototype.content=function(){var t=this.player().error();return t?this.localize(t.message):""},e}(zn);ar.prototype.options_=tt(zn.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),On.registerComponent("ErrorDisplay",ar);var lr=["#000","Black"],cr=["#00F","Blue"],ur=["#0FF","Cyan"],hr=["#0F0","Green"],dr=["#F0F","Magenta"],pr=["#F00","Red"],fr=["#FFF","White"],gr=["#FF0","Yellow"],mr=["1","Opaque"],vr=["0.5","Semi-Transparent"],yr=["0","Transparent"],br={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[lr,fr,pr,hr,cr,gr,dr,ur]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[mr,vr,yr]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[fr,lr,pr,hr,cr,gr,dr,ur]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(t){return"1.00"===t?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[mr,vr]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[yr,vr,mr]}};br.windowColor.options=br.backgroundColor.options;var _r=function(t){function i(n,o){Ve(this,i),o.temporary=!1;var r=We(this,t.call(this,n,o));return r.updateDisplay=yn(r,r.updateDisplay),r.fill(),r.hasBeenOpened_=r.hasBeenFilled_=!0,r.endDialog=g("p",{className:"vjs-control-text",textContent:r.localize("End of dialog window.")}),r.el().appendChild(r.endDialog),r.setDefaults(),void 0===o.persistTextTrackSettings&&(r.options_.persistTextTrackSettings=r.options_.playerOptions.persistTextTrackSettings),r.on(r.$(".vjs-done-button"),"click",function(){r.saveSettings(),r.close()}),r.on(r.$(".vjs-default-button"),"click",function(){r.setDefaults(),r.updateDisplay()}),e(br,function(t){r.on(r.$(t.selector),"change",r.updateDisplay)}),r.options_.persistTextTrackSettings&&r.restoreSettings(),r}return ze(i,t),i.prototype.dispose=function(){this.endDialog=null,t.prototype.dispose.call(this)},i.prototype.createElSelect_=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label",o=br[t],r=o.id.replace("%s",this.id_),s=[n,r].join(" ").trim();return["<"+i+' id="'+r+'" class="'+("label"===i?"vjs-label":"")+'">',this.localize(o.label),"</"+i+">",'<select aria-labelledby="'+s+'">'].concat(o.options.map(function(t){var n=r+"-"+t[1].replace(/\W+/g,"");return['<option id="'+n+'" value="'+t[0]+'" ','aria-labelledby="'+s+" "+n+'">',e.localize(t[1]),"</option>"].join("")})).concat("</select>").join("")},i.prototype.createElFgColor_=function(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")},i.prototype.createElBgColor_=function(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")},i.prototype.createElWinColor_=function(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")},i.prototype.createElColors_=function(){return g("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},i.prototype.createElFont_=function(){return g("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},i.prototype.createElControls_=function(){var t=this.localize("restore all settings to the default values");return g("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},i.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},i.prototype.label=function(){return this.localize("Caption Settings Dialog")},i.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},i.prototype.buildCSSClass=function(){return t.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},i.prototype.getValues=function(){var t=this;return n(br,function(e,n,i){var o=ae(t.$(n.selector),n.parser);return void 0!==o&&(e[i]=o),e},{})},i.prototype.setValues=function(t){var n=this;e(br,function(e,i){le(n.$(e.selector),t[i],e.parser)})},i.prototype.setDefaults=function(){var t=this;e(br,function(e){var n=e.hasOwnProperty("default")?e.default:0;t.$(e.selector).selectedIndex=n})},i.prototype.restoreSettings=function(){var t=void 0;try{t=JSON.parse(fe.localStorage.getItem("vjs-text-track-settings"))}catch(t){tn.warn(t)}t&&this.setValues(t)},i.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?fe.localStorage.setItem("vjs-text-track-settings",JSON.stringify(t)):fe.localStorage.removeItem("vjs-text-track-settings")}catch(t){tn.warn(t)}}},i.prototype.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},i.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(be,"keydown",this.handleKeyDown);var t=this.player_.controlBar,e=t&&t.subsCapsButton,n=t&&t.captionsButton;e?e.focus():n&&n.focus()},i}(zn);On.registerComponent("TextTrackSettings",_r);var wr=function(t){function e(n,i){Ve(this,e);var o=i.ResizeObserver||fe.ResizeObserver;null===i.ResizeObserver&&(o=!1);var r=tt({createEl:!o},i),s=We(this,t.call(this,n,r));return s.ResizeObserver=i.ResizeObserver||fe.ResizeObserver,s.loadListener_=null,s.resizeObserver_=null,s.debouncedHandler_=_n(function(){s.resizeHandler()},100,!1,n),o?(s.resizeObserver_=new s.ResizeObserver(s.debouncedHandler_),s.resizeObserver_.observe(n.el())):(s.loadListener_=function(){s.el_.contentWindow&&z(s.el_.contentWindow,"resize",s.debouncedHandler_),s.off("load",s.loadListener_)},s.on("load",s.loadListener_)),s}return ze(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})},e.prototype.resizeHandler=function(){this.player_.trigger("playerresize")},e.prototype.dispose=function(){this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.el_&&this.el_.contentWindow&&W(this.el_.contentWindow,"resize",this.debouncedHandler_),this.loadListener_&&this.off("load",this.loadListener_),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null},e}(On);On.registerComponent("ResizeManager",wr);var Cr=function(t){var e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),!0;var n=t.$$("source"),i=[],o="";if(!n.length)return!1;for(var r=0;r<n.length;r++){var s=n[r].src;s&&-1===i.indexOf(s)&&i.push(s)}return!!i.length&&(1===i.length&&(o=i[0]),t.triggerSourceset(o),!0)},xr={};Re||(xr=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(t){var e=be.createElement(this.nodeName.toLowerCase());e.innerHTML=t;for(var n=be.createDocumentFragment();e.childNodes.length;)n.appendChild(e.childNodes[0]);return this.innerText="",fe.Element.prototype.appendChild.call(this,n),this.innerHTML}}));var Tr=function(t,e){for(var n={},i=0;i<t.length&&!((n=Object.getOwnPropertyDescriptor(t[i],e))&&n.set&&n.get);i++);return n.enumerable=!0,n.configurable=!0,n},kr=function(t){return Tr([t.el(),fe.HTMLMediaElement.prototype,fe.Element.prototype,xr],"innerHTML")},Sr=function(t){var e=t.el();if(!e.resetSourceWatch_){var n={},i=kr(t),o=function(n){return function(){for(var i=arguments.length,o=Array(i),r=0;r<i;r++)o[r]=arguments[r];var s=n.apply(e,o);return Cr(t),s}};["append","appendChild","insertAdjacentHTML"].forEach(function(t){e[t]&&(n[t]=e[t],e[t]=o(n[t]))}),Object.defineProperty(e,"innerHTML",tt(i,{set:o(i.set)})),e.resetSourceWatch_=function(){e.resetSourceWatch_=null,Object.keys(n).forEach(function(t){e[t]=n[t]}),Object.defineProperty(e,"innerHTML",i)},t.one("sourceset",e.resetSourceWatch_)}},Er={};Re||(Er=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?ai(fe.Element.prototype.getAttribute.call(this,"src")):""},set:function(t){return fe.Element.prototype.setAttribute.call(this,"src",t),t}}));var Pr=function(t){return Tr([t.el(),fe.HTMLMediaElement.prototype,Er],"src")},Ar=function(t){if(t.featuresSourceset){var e=t.el();if(!e.resetSourceset_){var n=Pr(t),i=e.setAttribute,o=e.load;Object.defineProperty(e,"src",tt(n,{set:function(i){var o=n.set.call(e,i);return t.triggerSourceset(e.src),o}})),e.setAttribute=function(n,o){var r=i.call(e,n,o);return/src/i.test(n)&&t.triggerSourceset(e.src),r},e.load=function(){var n=o.call(e);return Cr(t)||(t.triggerSourceset(""),Sr(t)),n},e.currentSrc?t.triggerSourceset(e.currentSrc):Cr(t)||Sr(t),e.resetSourceset_=function(){e.resetSourceset_=null,e.load=o,e.setAttribute=i,Object.defineProperty(e,"src",n),e.resetSourceWatch_&&e.resetSourceWatch_()}}}},Ir=Ye(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),Or=function(t){function e(n,i){Ve(this,e);var o=We(this,t.call(this,n,i)),r=n.source,s=!1;if(r&&(o.el_.currentSrc!==r.src||n.tag&&3===n.tag.initNetworkState_)?o.setSource(r):o.handleLateInit_(o.el_),n.enableSourceset&&o.setupSourcesetHandling_(),o.el_.hasChildNodes()){for(var a=o.el_.childNodes,l=a.length,c=[];l--;){var u=a[l];"track"===u.nodeName.toLowerCase()&&(o.featuresNativeTextTracks?(o.remoteTextTrackEls().addTrackElement_(u),o.remoteTextTracks().addTrack(u.track),o.textTracks().addTrack(u.track),s||o.el_.hasAttribute("crossorigin")||!ci(u.src)||(s=!0)):c.push(u))}for(var h=0;h<c.length;h++)o.el_.removeChild(c[h])}return o.proxyNativeTracks_(),o.featuresNativeTextTracks&&s&&tn.warn(en(Ir)),o.restoreMetadataTracksInIOSNativePlayer_(),(Ue||Te||Oe)&&!0===n.nativeControlsForTouch&&o.setControls(!0),o.proxyWebkitFullscreen_(),o.triggerReady(),o}return ze(e,t),e.prototype.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,t.prototype.dispose.call(this)},e.prototype.setupSourcesetHandling_=function(){Ar(this)},e.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var t=this.textTracks(),e=void 0,n=function(){e=[];for(var n=0;n<t.length;n++){var i=t[n];"metadata"===i.kind&&e.push({track:i,storedMode:i.mode})}};n(),t.addEventListener("change",n),this.on("dispose",function(){return t.removeEventListener("change",n)});var i=function n(){for(var i=0;i<e.length;i++){var o=e[i];"disabled"===o.track.mode&&o.track.mode!==o.storedMode&&(o.track.mode=o.storedMode)}t.removeEventListener("change",n)};this.on("webkitbeginfullscreen",function(){t.removeEventListener("change",n),t.removeEventListener("change",i),t.addEventListener("change",i)}),this.on("webkitendfullscreen",function(){t.removeEventListener("change",n),t.addEventListener("change",n),t.removeEventListener("change",i)})},e.prototype.proxyNativeTracks_=function(){var t=this;Ii.names.forEach(function(e){var n=Ii[e],i=t.el()[n.getterName],o=t[n.getterName]();if(t["featuresNative"+n.capitalName+"Tracks"]&&i&&i.addEventListener){var r={change:function(t){o.trigger({type:"change",target:o,currentTarget:o,srcElement:o})},addtrack:function(t){o.addTrack(t.track)},removetrack:function(t){o.removeTrack(t.track)}},s=function(){for(var t=[],e=0;e<o.length;e++){for(var n=!1,r=0;r<i.length;r++)if(i[r]===o[e]){n=!0;break}n||t.push(o[e])}for(;t.length;)o.removeTrack(t.shift())};Object.keys(r).forEach(function(e){var n=r[e];i.addEventListener(e,n),t.on("dispose",function(t){return i.removeEventListener(e,n)})}),t.on("loadstart",s),t.on("dispose",function(e){return t.off("loadstart",s)})}})},e.prototype.createEl=function(){var t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){var n=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(n,t),e.disposeMediaElement(t),t=n}else{t=be.createElement("video");var o=this.options_.tag&&x(this.options_.tag),r=tt({},o);Ue&&!0===this.options_.nativeControlsForTouch||delete r.controls,C(t,i(r,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}void 0!==this.options_.preload&&k(t,"preload",this.options_.preload);for(var s=["loop","muted","playsinline","autoplay"],a=0;a<s.length;a++){var l=s[a],c=this.options_[l];void 0!==c&&(c?k(t,l,l):S(t,l),t[l]=c)}return t},e.prototype.handleLateInit_=function(t){if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){var e=!1,n=function(){e=!0};this.on("loadstart",n);var i=function(){e||this.trigger("loadstart")};return this.on("loadedmetadata",i),void this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",i),e||this.trigger("loadstart")})}var o=["loadstart"];o.push("loadedmetadata"),t.readyState>=2&&o.push("loadeddata"),t.readyState>=3&&o.push("canplay"),t.readyState>=4&&o.push("canplaythrough"),this.ready(function(){o.forEach(function(t){this.trigger(t)},this)})}},e.prototype.setCurrentTime=function(t){try{this.el_.currentTime=t}catch(t){tn(t,"Video is not ready. (Video.js)")}},e.prototype.duration=function(){var t=this;if(this.el_.duration===1/0&&Pe&&Le&&0===this.el_.currentTime){var e=function e(){t.el_.currentTime>0&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN},e.prototype.width=function(){return this.el_.offsetWidth},e.prototype.height=function(){return this.el_.offsetHeight},e.prototype.proxyWebkitFullscreen_=function(){var t=this;if("webkitDisplayingFullscreen"in this.el_){var e=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",function(){t.off("webkitbeginfullscreen",n),t.off("webkitendfullscreen",e)})}},e.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=fe.navigator&&fe.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},e.prototype.enterFullScreen=function(){var t=this.el_;t.paused&&t.networkState<=t.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){t.pause(),t.webkitEnterFullScreen()},0)):t.webkitEnterFullScreen()},e.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},e.prototype.src=function(t){if(void 0===t)return this.el_.src;this.setSrc(t)},e.prototype.reset=function(){e.resetMediaElement(this.el_)},e.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},e.prototype.setControls=function(t){this.el_.controls=!!t},e.prototype.addTextTrack=function(e,n,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,n,i):t.prototype.addTextTrack.call(this,e,n,i)},e.prototype.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return t.prototype.createRemoteTextTrack.call(this,e);var n=be.createElement("track");return e.kind&&(n.kind=e.kind),e.label&&(n.label=e.label),(e.language||e.srclang)&&(n.srclang=e.language||e.srclang),e.default&&(n.default=e.default),e.id&&(n.id=e.id),e.src&&(n.src=e.src),n},e.prototype.addRemoteTextTrack=function(e,n){var i=t.prototype.addRemoteTextTrack.call(this,e,n);return this.featuresNativeTextTracks&&this.el().appendChild(i),i},e.prototype.removeRemoteTextTrack=function(e){if(t.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var n=this.$$("track"),i=n.length;i--;)e!==n[i]&&e!==n[i].track||this.el().removeChild(n[i])},e.prototype.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),fe.performance&&"function"==typeof fe.performance.now?t.creationTime=fe.performance.now():fe.performance&&fe.performance.timing&&"number"==typeof fe.performance.timing.navigationStart&&(t.creationTime=fe.Date.now()-fe.performance.timing.navigationStart),t},e}(Yi);if(h()){Or.TEST_VID=be.createElement("video");var Mr=be.createElement("track");Mr.kind="captions",Mr.srclang="en",Mr.label="English",Or.TEST_VID.appendChild(Mr)}Or.isSupported=function(){try{Or.TEST_VID.volume=.5}catch(t){return!1}return!(!Or.TEST_VID||!Or.TEST_VID.canPlayType)},Or.canPlayType=function(t){return Or.TEST_VID.canPlayType(t)},Or.canPlaySource=function(t,e){return Or.canPlayType(t.type)},Or.canControlVolume=function(){try{var t=Or.TEST_VID.volume;return Or.TEST_VID.volume=t/2+.1,t!==Or.TEST_VID.volume}catch(t){return!1}},Or.canMuteVolume=function(){try{var t=Or.TEST_VID.muted;return Or.TEST_VID.muted=!t,Or.TEST_VID.muted?k(Or.TEST_VID,"muted","muted"):S(Or.TEST_VID,"muted"),t!==Or.TEST_VID.muted}catch(t){return!1}},Or.canControlPlaybackRate=function(){if(Pe&&Le&&je<58)return!1;try{var t=Or.TEST_VID.playbackRate;return Or.TEST_VID.playbackRate=t/2+.1,t!==Or.TEST_VID.playbackRate}catch(t){return!1}},Or.canOverrideAttributes=function(){if(Re)return!1;try{var t=function(){};Object.defineProperty(be.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(be.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(be.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(be.createElement("audio"),"innerHTML",{get:t,set:t})}catch(t){return!1}return!0},Or.supportsNativeTextTracks=function(){return Ne||Se&&Le},Or.supportsNativeVideoTracks=function(){return!(!Or.TEST_VID||!Or.TEST_VID.videoTracks)},Or.supportsNativeAudioTracks=function(){return!(!Or.TEST_VID||!Or.TEST_VID.audioTracks)},Or.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],Or.prototype.featuresVolumeControl=Or.canControlVolume(),Or.prototype.featuresMuteControl=Or.canMuteVolume(),Or.prototype.featuresPlaybackRate=Or.canControlPlaybackRate(),Or.prototype.featuresSourceset=Or.canOverrideAttributes(),Or.prototype.movingMediaElementInDOM=!Se,Or.prototype.featuresFullscreenResize=!0,Or.prototype.featuresProgressEvents=!0,Or.prototype.featuresTimeupdateEvents=!0,Or.prototype.featuresNativeTextTracks=Or.supportsNativeTextTracks(),Or.prototype.featuresNativeVideoTracks=Or.supportsNativeVideoTracks(),Or.prototype.featuresNativeAudioTracks=Or.supportsNativeAudioTracks();var Dr=Or.TEST_VID&&Or.TEST_VID.constructor.prototype.canPlayType,Lr=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,jr=/^video\/mp4/i;Or.patchCanPlayType=function(){Ae>=4&&!Me&&!Le?Or.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&Lr.test(t)?"maybe":Dr.call(this,t)}:Ie&&(Or.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&jr.test(t)?"maybe":Dr.call(this,t)})},
Or.unpatchCanPlayType=function(){var t=Or.TEST_VID.constructor.prototype.canPlayType;return Or.TEST_VID.constructor.prototype.canPlayType=Dr,t},Or.patchCanPlayType(),Or.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},Or.resetMediaElement=function(t){if(t){for(var e=t.querySelectorAll("source"),n=e.length;n--;)t.removeChild(e[n]);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){Or.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){Or.prototype["set"+Z(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(t){Or.prototype[t]=function(){return this.el_[t]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(t){Or.prototype["set"+Z(t)]=function(e){this.el_[t]=e}}),["pause","load","play"].forEach(function(t){Or.prototype[t]=function(){return this.el_[t]()}}),Yi.withSourceHandlers(Or),Or.nativeSourceHandler={},Or.nativeSourceHandler.canPlayType=function(t){try{return Or.TEST_VID.canPlayType(t)}catch(t){return""}},Or.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return Or.nativeSourceHandler.canPlayType(t.type);if(t.src){var n=li(t.src);return Or.nativeSourceHandler.canPlayType("video/"+n)}return""},Or.nativeSourceHandler.handleSource=function(t,e,n){e.setSrc(t.src)},Or.nativeSourceHandler.dispose=function(){},Or.registerSourceHandler(Or.nativeSourceHandler),Yi.registerTech("Html5",Or);var Rr=Ye(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "],["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]),Br=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Fr={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Nr=function(t){function e(n,o,r){if(Ve(this,e),n.id=n.id||o.id||"vjs_video_"+F(),o=i(e.getTagSettings(n),o),o.initChildren=!1,o.createEl=!1,o.evented=!1,o.reportTouchActivity=!1,!o.language)if("function"==typeof n.closest){var s=n.closest("[lang]");s&&s.getAttribute&&(o.language=s.getAttribute("lang"))}else for(var a=n;a&&1===a.nodeType;){if(x(a).hasOwnProperty("lang")){o.language=a.getAttribute("lang");break}a=a.parentNode}var l=We(this,t.call(this,null,o,r));if(l.isPosterFromTech_=!1,l.queuedCallbacks_=[],l.isReady_=!1,l.hasStarted_=!1,l.userActive_=!1,!l.options_||!l.options_.techOrder||!l.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(l.tag=n,l.tagAttributes=n&&x(n),l.language(l.options_.language),o.languages){var c={};Object.getOwnPropertyNames(o.languages).forEach(function(t){c[t.toLowerCase()]=o.languages[t]}),l.languages_=c}else l.languages_=e.prototype.options_.languages;l.cache_={},l.poster_=o.poster||"",l.controls_=!!o.controls,l.cache_.lastVolume=1,n.controls=!1,n.removeAttribute("controls"),n.hasAttribute("autoplay")?l.options_.autoplay=!0:l.autoplay(l.options_.autoplay),l.scrubbing_=!1,l.el_=l.createEl(),l.cache_.lastPlaybackRate=l.defaultPlaybackRate(),K(l,{eventBusKey:"el_"});var u=tt(l.options_);if(o.plugins){var h=o.plugins;Object.keys(h).forEach(function(t){if("function"!=typeof this[t])throw new Error('plugin "'+t+'" does not exist');this[t](h[t])},l)}l.options_.playerOptions=u,l.middleware_=[],l.initChildren(),l.isAudio("audio"===n.nodeName.toLowerCase()),l.controls()?l.addClass("vjs-controls-enabled"):l.addClass("vjs-controls-disabled"),l.el_.setAttribute("role","region"),l.isAudio()?l.el_.setAttribute("aria-label",l.localize("Audio Player")):l.el_.setAttribute("aria-label",l.localize("Video Player")),l.isAudio()&&l.addClass("vjs-audio"),l.flexNotSupported_()&&l.addClass("vjs-no-flex"),Se||l.addClass("vjs-workinghover"),e.players[l.id_]=l;var d=he.split(".")[0];return l.addClass("vjs-v"+d),l.userActive(!0),l.reportUserActivity(),l.one("play",l.listenForUserActivity_),l.on("fullscreenchange",l.handleFullscreenChange_),l.on("stageclick",l.handleStageClick_),l.changingSrc_=!1,l.playWaitingForReady_=!1,l.playOnLoadstart_=null,l}return ze(e,t),e.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Zt(this),t.prototype.dispose.call(this)},e.prototype.createEl=function(){var e=this.tag,n=void 0,i=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),o="video-js"===this.tag.tagName.toLowerCase();i?n=this.el_=e.parentNode:o||(n=this.el_=t.prototype.createEl.call(this,"div"));var r=x(e);if(o){for(n=this.el_=e,e=this.tag=be.createElement("video");n.children.length;)e.appendChild(n.firstChild);y(n,"video-js")||b(n,"video-js"),n.appendChild(e),i=this.playerElIngest_=n,["autoplay","controls","crossOrigin","defaultMuted","defaultPlaybackRate","loop","muted","playbackRate","src","volume"].forEach(function(t){void 0!==n[t]&&(e[t]=n[t])})}if(e.setAttribute("tabindex","-1"),Be&&e.setAttribute("role","application"),e.removeAttribute("width"),e.removeAttribute("height"),Object.getOwnPropertyNames(r).forEach(function(t){"class"===t?(n.className+=" "+r[t],o&&(e.className+=" "+r[t])):(n.setAttribute(t,r[t]),o&&e.setAttribute(t,r[t]))}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=n.player=this,this.addClass("vjs-paused"),!0!==fe.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=mn("vjs-styles-dimensions");var s=on(".vjs-styles-defaults"),a=on("head");a.insertBefore(this.styleEl_,s?s.nextSibling:a.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var l=e.getElementsByTagName("a"),c=0;c<l.length;c++){var u=l.item(c);b(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!i&&e.parentNode.insertBefore(n,e),v(e,n),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_=n,n},e.prototype.width=function(t){return this.dimension("width",t)},e.prototype.height=function(t){return this.dimension("height",t)},e.prototype.dimension=function(t,e){var n=t+"_";if(void 0===e)return this[n]||0;if(""===e)return this[n]=void 0,void this.updateStyleEl_();var i=parseFloat(e);if(isNaN(i))return void tn.error('Improper value "'+e+'" supplied for for '+t);this[n]=i,this.updateStyleEl_()},e.prototype.fluid=function(t){if(void 0===t)return!!this.fluid_;this.fluid_=!!t,t?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid"),this.updateStyleEl_()},e.prototype.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},e.prototype.updateStyleEl_=function(){if(!0===fe.VIDEOJS_NO_DYNAMIC_STYLE){var t="number"==typeof this.width_?this.width_:this.options_.width,e="number"==typeof this.height_?this.height_:this.options_.height,n=this.tech_&&this.tech_.el();return void(n&&(t>=0&&(n.width=t),e>=0&&(n.height=e)))}var i=void 0,o=void 0,r=void 0,s=void 0;r=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";var a=r.split(":"),l=a[1]/a[0];i=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/l:this.videoWidth()||300,o=void 0!==this.height_?this.height_:i*l,s=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(s),vn(this.styleEl_,"\n      ."+s+" {\n        width: "+i+"px;\n        height: "+o+"px;\n      }\n\n      ."+s+".vjs-fluid {\n        padding-top: "+100*l+"%;\n      }\n    ")},e.prototype.loadTech_=function(t,e){var n=this;this.tech_&&this.unloadTech_();var o=Z(t),r=t.charAt(0).toLowerCase()+t.slice(1);"Html5"!==o&&this.tag&&(Yi.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=o,this.isReady_=!1;var s="string"!=typeof this.autoplay()&&this.autoplay(),a={source:e,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+o+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Mi.names.forEach(function(t){var e=Mi[t];a[e.getterName]=n[e.privateName]}),i(a,this.options_[o]),i(a,this.options_[r]),i(a,this.options_[t.toLowerCase()]),this.tag&&(a.tag=this.tag),e&&e.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);var l=Yi.getTech(t);if(!l)throw new Error("No Tech named '"+o+"' exists! '"+o+"' should be registered using videojs.registerTech()'");this.tech_=new l(a),this.tech_.ready(yn(this,this.handleTechReady_),!0),Hn.jsonToTextTracks(this.textTracksJson_||[],this.tech_),Br.forEach(function(t){n.on(n.tech_,t,n["handleTech"+Z(t)+"_"])}),Object.keys(Fr).forEach(function(t){n.on(n.tech_,t,function(e){if(0===n.tech_.playbackRate()&&n.tech_.seeking())return void n.queuedCallbacks_.push({callback:n["handleTech"+Fr[t]+"_"].bind(n),event:e});n["handleTech"+Fr[t]+"_"](e)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===o&&this.tag||v(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},e.prototype.unloadTech_=function(){var t=this;Mi.names.forEach(function(e){var n=Mi[e];t[n.privateName]=t[n.getterName]()}),this.textTracksJson_=Hn.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},e.prototype.tech=function(t){return void 0===t&&tn.warn(en(Rr)),this.tech_},e.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},e.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},e.prototype.handleTechReady_=function(){if(this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),(this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused())try{delete this.tag.poster}catch(t){tn("deleting tag.poster throws in some browsers",t)}},e.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},e.prototype.manualAutoplay_=function(t){var e=this;if(this.tech_&&"string"==typeof t){var n=function(){var t=e.muted();e.muted(!0);var n=e.play();if(n&&n.then&&n.catch)return n.catch(function(n){e.muted(t)})},i=void 0;if("any"===t?(i=this.play())&&i.then&&i.catch&&i.catch(function(){return n()}):i="muted"===t?n():this.play(),i&&i.then&&i.catch)return i.then(function(){e.trigger({type:"autoplay-success",autoplay:t})}).catch(function(n){e.trigger({type:"autoplay-failure",autoplay:t})})}},e.prototype.updateSourceCaches_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t,n="";"string"!=typeof e&&(e=t.src,n=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],e&&!n&&(n=no(this,e)),this.cache_.source=tt({},t,{src:e,type:n});for(var i=this.cache_.sources.filter(function(t){return t.src&&t.src===e}),o=[],r=this.$$("source"),s=[],a=0;a<r.length;a++){var l=x(r[a]);o.push(l),l.src&&l.src===e&&s.push(l.src)}s.length&&!i.length?this.cache_.sources=o:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=e},e.prototype.handleTechSourceset_=function(t){var e=this;if(!this.changingSrc_&&(this.updateSourceCaches_(t.src),!t.src)){var n=function t(n){"sourceset"!==n.type&&e.updateSourceCaches_(e.techGet_("currentSrc")),e.tech_.off(["sourceset","loadstart"],t)};this.tech_.one(["sourceset","loadstart"],n)}this.trigger({src:t.src,type:"sourceset"})},e.prototype.hasStarted=function(t){if(void 0===t)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},e.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},e.prototype.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(t){return t.callback(t.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},e.prototype.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return t.removeClass("vjs-waiting")})},e.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},e.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},e.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},e.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},e.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},e.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(tn.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},e.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},e.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},e.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},e.prototype.handleTechClick_=function(t){B(t)&&this.controls_&&(this.paused()?ct(this.play()):this.pause())},e.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},e.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},e.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},e.prototype.handleTechTouchEnd_=function(t){t.preventDefault()},e.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},e.prototype.handleStageClick_=function(){this.reportUserActivity()},e.prototype.handleTechFullscreenChange_=function(t,e){e&&this.isFullscreen(e.isFullscreen),this.trigger("fullscreenchange")},e.prototype.handleTechError_=function(){var t=this.tech_.error();this.error(t)},e.prototype.handleTechTextData_=function(){var t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)},e.prototype.getCache=function(){return this.cache_},e.prototype.techCall_=function(t,e){this.ready(function(){if(t in Zi)return Gt(this.middleware_,this.tech_,t,e);if(t in Ji)return Qt(this.middleware_,this.tech_,t,e);try{this.tech_&&this.tech_[t](e)}catch(t){throw tn(t),t}},!0)},e.prototype.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in Xi)return Yt(this.middleware_,this.tech_,t);if(t in Ji)return Qt(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(e){if(void 0===this.tech_[t])throw tn("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e),e;if("TypeError"===e.name)throw tn("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e),this.tech_.isReady_=!1,e;throw tn(e),e}}},e.prototype.play=function(){var t=this;if(this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_){if(!this.changingSrc_&&(this.src()||this.currentSrc()))return this.techGet_("play");this.playOnLoadstart_=function(){t.playOnLoadstart_=null,ct(t.play())},this.one("loadstart",this.playOnLoadstart_)}else{if(this.playWaitingForReady_)return;this.playWaitingForReady_=!0,this.ready(function(){t.playWaitingForReady_=!1,ct(t.play())})}},e.prototype.pause=function(){this.techCall_("pause")},e.prototype.paused=function(){return!1!==this.techGet_("paused")},e.prototype.played=function(){return this.techGet_("played")||ot(0,0)},e.prototype.scrubbing=function(t){if(void 0===t)return this.scrubbing_;this.scrubbing_=!!t,t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},e.prototype.currentTime=function(t){return void 0!==t?(t<0&&(t=0),void this.techCall_("setCurrentTime",t)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},e.prototype.duration=function(t){if(void 0===t)return void 0!==this.cache_.duration?this.cache_.duration:NaN;t=parseFloat(t),t<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))},e.prototype.remainingTime=function(){return this.duration()-this.currentTime()},e.prototype.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},e.prototype.buffered=function(){var t=this.techGet_("buffered");return t&&t.length||(t=ot(0,0)),t},e.prototype.bufferedPercent=function(){return rt(this.buffered(),this.duration())},e.prototype.bufferedEnd=function(){var t=this.buffered(),e=this.duration(),n=t.end(t.length-1);return n>e&&(n=e),n},e.prototype.volume=function(t){var e=void 0;return void 0!==t?(e=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=e,this.techCall_("setVolume",e),void(e>0&&this.lastVolume_(e))):(e=parseFloat(this.techGet_("volume")),isNaN(e)?1:e)},e.prototype.muted=function(t){return void 0!==t?void this.techCall_("setMuted",t):this.techGet_("muted")||!1},e.prototype.defaultMuted=function(t){return void 0!==t?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1},e.prototype.lastVolume_=function(t){return void 0!==t&&0!==t?void(this.cache_.lastVolume=t):this.cache_.lastVolume},e.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},e.prototype.isFullscreen=function(t){return void 0!==t?void(this.isFullscreen_=!!t):!!this.isFullscreen_},e.prototype.requestFullscreen=function(){var t=Mn;this.isFullscreen(!0),t.requestFullscreen?(z(be,t.fullscreenchange,yn(this,function e(n){this.isFullscreen(be[t.fullscreenElement]),!1===this.isFullscreen()&&W(be,t.fullscreenchange,e),this.trigger("fullscreenchange")})),this.el_[t.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},e.prototype.exitFullscreen=function(){var t=Mn;this.isFullscreen(!1),t.requestFullscreen?be[t.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},e.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=be.documentElement.style.overflow,z(be,"keydown",yn(this,this.fullWindowOnEscKey)),be.documentElement.style.overflow="hidden",b(be.body,"vjs-full-window"),this.trigger("enterFullWindow")},e.prototype.fullWindowOnEscKey=function(t){27===t.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},e.prototype.exitFullWindow=function(){this.isFullWindow=!1,W(be,"keydown",this.fullWindowOnEscKey),be.documentElement.style.overflow=this.docOrigOverflow,_(be.body,"vjs-full-window"),this.trigger("exitFullWindow")},e.prototype.canPlayType=function(t){for(var e=void 0,n=0,i=this.options_.techOrder;n<i.length;n++){var o=i[n],r=Yi.getTech(o);if(r||(r=On.getComponent(o)),r){if(r.isSupported()&&(e=r.canPlayType(t)))return e}else tn.error('The "'+o+'" tech is undefined. Skipped browser support check for that tech.')}return""},e.prototype.selectSource=function(t){var e=this,n=this.options_.techOrder.map(function(t){return[t,Yi.getTech(t)]}).filter(function(t){var e=t[0],n=t[1];return n?n.isSupported():(tn.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),i=function(t,e,n){var i=void 0;return t.some(function(t){return e.some(function(e){if(i=n(t,e))return!0})}),i},o=function(t,n){var i=t[0];if(t[1].canPlaySource(n,e.options_[i.toLowerCase()]))return{source:n,tech:i}};return(this.options_.sourceOrder?i(t,n,function(t){return function(e,n){return t(n,e)}}(o)):i(n,t,o))||!1},e.prototype.src=function(t){var e=this;if(void 0===t)return this.cache_.src||"";var n=io(t);if(!n.length)return void this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);this.changingSrc_=!0,this.cache_.sources=n,this.updateSourceCaches_(n[0]),zt(this,n[0],function(t,i){if(e.middleware_=i,e.cache_.sources=n,e.updateSourceCaches_(t),e.src_(t))return n.length>1?e.src(n.slice(1)):(e.changingSrc_=!1,e.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void e.triggerReady());Wt(i,e.tech_)})},e.prototype.src_=function(t){var e=this,n=this.selectSource([t]);return!n||(J(n.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready(function(){e.changingSrc_=!1}),!1))},e.prototype.load=function(){this.techCall_("load")},e.prototype.reset=function(){this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset")},e.prototype.currentSources=function(){var t=this.currentSource(),e=[];return 0!==Object.keys(t).length&&e.push(t),this.cache_.sources||e},e.prototype.currentSource=function(){return this.cache_.source||{}},e.prototype.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},e.prototype.currentType=function(){return this.currentSource()&&this.currentSource().type||""},e.prototype.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")},e.prototype.autoplay=function(t){if(void 0===t)return this.options_.autoplay||!1;var e=void 0;"string"==typeof t&&/(any|play|muted)/.test(t)?(this.options_.autoplay=t,this.manualAutoplay_(t),e=!1):this.options_.autoplay=!!t,e=e||this.options_.autoplay,this.tech_&&this.techCall_("setAutoplay",e)},e.prototype.playsinline=function(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},e.prototype.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")},e.prototype.poster=function(t){if(void 0===t)return this.poster_;t||(t=""),t!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))},e.prototype.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},e.prototype.controls=function(t){if(void 0===t)return!!this.controls_;t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},e.prototype.usingNativeControls=function(t){if(void 0===t)return!!this.usingNativeControls_;t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},e.prototype.error=function(t){return void 0===t?this.error_||null:null===t?(this.error_=t,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new st(t),this.addClass("vjs-error"),tn.error("(CODE:"+this.error_.code+" "+st.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},e.prototype.reportUserActivity=function(t){this.userActivity_=!0},e.prototype.userActive=function(t){if(void 0===t)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},e.prototype.listenForUserActivity_=function(){var t=void 0,e=void 0,n=void 0,i=yn(this,this.reportUserActivity),o=function(t){t.screenX===e&&t.screenY===n||(e=t.screenX,n=t.screenY,i())},r=function(){i(),this.clearInterval(t),t=this.setInterval(i,250)},s=function(e){i(),this.clearInterval(t)};this.on("mousedown",r),this.on("mousemove",o),this.on("mouseup",s),this.on("keydown",i),this.on("keyup",i);var a=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);var t=this.options_.inactivityTimeout;t<=0||(a=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},t))}},250)},e.prototype.playbackRate=function(t){return void 0!==t?void this.techCall_("setPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},e.prototype.defaultPlaybackRate=function(t){return void 0!==t?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},e.prototype.isAudio=function(t){return void 0!==t?void(this.isAudio_=!!t):!!this.isAudio_},e.prototype.addTextTrack=function(t,e,n){if(this.tech_)return this.tech_.addTextTrack(t,e,n)},e.prototype.addRemoteTextTrack=function(t,e){if(this.tech_)return this.tech_.addRemoteTextTrack(t,e)},e.prototype.removeRemoteTextTrack=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.track,n=void 0===e?arguments[0]:e;if(this.tech_)return this.tech_.removeRemoteTextTrack(n)},e.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},e.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},e.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},e.prototype.language=function(t){if(void 0===t)return this.language_;this.language_=String(t).toLowerCase()},e.prototype.languages=function(){return tt(e.prototype.options_.languages,this.languages_)},e.prototype.toJSON=function(){var t=tt(this.options_),e=t.tracks;t.tracks=[];for(var n=0;n<e.length;n++){var i=e[n];i=tt(i),i.player=void 0,t.tracks[n]=i}return t},e.prototype.createModal=function(t,e){var n=this;e=e||{},e.content=t||"";var i=new zn(this,e);return this.addChild(i),i.on("dispose",function(){n.removeChild(i)}),i.open(),i},e.getTagSettings=function(t){var e={sources:[],tracks:[]},n=x(t),o=n["data-setup"];if(y(t,"vjs-fluid")&&(n.fluid=!0),null!==o){var r=Nn(o||"{}"),s=r[0],a=r[1];s&&tn.error(s),i(n,a)}if(i(e,n),t.hasChildNodes())for(var l=t.childNodes,c=0,u=l.length;c<u;c++){var h=l[c],d=h.nodeName.toLowerCase();"source"===d?e.sources.push(x(h)):"track"===d&&e.tracks.push(x(h))}return e},e.prototype.flexNotSupported_=function(){var t=be.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},e}(On);Mi.names.forEach(function(t){var e=Mi[t];Nr.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}}),Nr.players={};var Ur=fe.navigator;Nr.prototype.options_={techOrder:Yi.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:Ur&&(Ur.languages&&Ur.languages[0]||Ur.userLanguage||Ur.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},Re||Nr.prototype.options_.children.push("resizeManager"),["ended","seeking","seekable","networkState","readyState"].forEach(function(t){Nr.prototype[t]=function(){return this.techGet_(t)}}),Br.forEach(function(t){Nr.prototype["handleTech"+Z(t)+"_"]=function(){return this.trigger(t)}}),On.registerComponent("Player",Nr);var $r={},qr=function(t){return $r.hasOwnProperty(t)},Hr=function(t){return qr(t)?$r[t]:void 0},Vr=function(t,e){t.activePlugins_=t.activePlugins_||{},t.activePlugins_[e]=!0},zr=function(t,e,n){var i=(n?"before":"")+"pluginsetup";t.trigger(i,e),
t.trigger(i+":"+e.name,e)},Wr=function(t,e){var n=function(){zr(this,{name:t,plugin:e,instance:null},!0);var n=e.apply(this,arguments);return Vr(this,t),zr(this,{name:t,plugin:e,instance:n}),n};return Object.keys(e).forEach(function(t){n[t]=e[t]}),n},Yr=function(t,e){return e.prototype.name=t,function(){zr(this,{name:t,plugin:e,instance:null},!0);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var r=new(Function.prototype.bind.apply(e,[null].concat([this].concat(i))));return this[t]=function(){return r},zr(this,r.getEventHash()),r}},Gr=function(){function t(e){if(Ve(this,t),this.constructor===t)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,K(this),delete this.trigger,X(this,this.constructor.defaultState),Vr(e,this.name),this.dispose=yn(this,this.dispose),e.on("dispose",this.dispose)}return t.prototype.version=function(){return this.constructor.VERSION},t.prototype.getEventHash=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.name=this.name,t.plugin=this.constructor,t.instance=this,t},t.prototype.trigger=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y(this.eventBusEl_,t,this.getEventHash(e))},t.prototype.handleStateChanged=function(t){},t.prototype.dispose=function(){var t=this.name,e=this.player;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e.activePlugins_[t]=!1,this.player=this.state=null,e[t]=Yr(t,$r[t])},t.isBasic=function(e){var n="string"==typeof e?Hr(e):e;return"function"==typeof n&&!t.prototype.isPrototypeOf(n.prototype)},t.registerPlugin=function(e,n){if("string"!=typeof e)throw new Error('Illegal plugin name, "'+e+'", must be a string, was '+(void 0===e?"undefined":He(e))+".");if(qr(e))tn.warn('A plugin named "'+e+'" already exists. You may want to avoid re-registering plugins!');else if(Nr.prototype.hasOwnProperty(e))throw new Error('Illegal plugin name, "'+e+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+e+'", must be a function, was '+(void 0===n?"undefined":He(n))+".");return $r[e]=n,"plugin"!==e&&(t.isBasic(n)?Nr.prototype[e]=Wr(e,n):Nr.prototype[e]=Yr(e,n)),n},t.deregisterPlugin=function(t){if("plugin"===t)throw new Error("Cannot de-register base plugin.");qr(t)&&(delete $r[t],delete Nr.prototype[t])},t.getPlugins=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys($r),e=void 0;return t.forEach(function(t){var n=Hr(t);n&&(e=e||{},e[t]=n)}),e},t.getPluginVersion=function(t){var e=Hr(t);return e&&e.VERSION||""},t}();Gr.getPlugin=Hr,Gr.BASE_PLUGIN_NAME="plugin",Gr.registerPlugin("plugin",Gr),Nr.prototype.usingPlugin=function(t){return!!this.activePlugins_&&!0===this.activePlugins_[t]},Nr.prototype.hasPlugin=function(t){return!!qr(t)};var Qr=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":He(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.super_=e)},Kr=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(){t.apply(this,arguments)},i={};"object"===(void 0===e?"undefined":He(e))?(e.constructor!==Object.prototype.constructor&&(n=e.constructor),i=e):"function"==typeof e&&(n=e),Qr(n,t);for(var o in i)i.hasOwnProperty(o)&&(n.prototype[o]=i[o]);return n};"undefined"==typeof HTMLVideoElement&&h()&&(be.createElement("video"),be.createElement("audio"),be.createElement("track"),be.createElement("video-js"));var Xr=function(t){return 0===t.indexOf("#")?t.slice(1):t};if(ce.hooks_={},ce.hooks=function(t,e){return ce.hooks_[t]=ce.hooks_[t]||[],e&&(ce.hooks_[t]=ce.hooks_[t].concat(e)),ce.hooks_[t]},ce.hook=function(t,e){ce.hooks(t,e)},ce.hookOnce=function(t,e){ce.hooks(t,[].concat(e).map(function(e){return function n(){return ce.removeHook(t,n),e.apply(void 0,arguments)}}))},ce.removeHook=function(t,e){var n=ce.hooks(t).indexOf(e);return!(n<=-1)&&(ce.hooks_[t]=ce.hooks_[t].slice(),ce.hooks_[t].splice(n,1),!0)},!0!==fe.VIDEOJS_NO_DYNAMIC_STYLE&&h()){var Zr=on(".vjs-styles-defaults");if(!Zr){Zr=mn("vjs-styles-defaults");var Jr=on("head");Jr&&Jr.insertBefore(Zr,Jr.firstChild),vn(Zr,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}return Q(1,ce),ce.VERSION=he,ce.options=Nr.prototype.options_,ce.getPlayers=function(){return Nr.players},ce.getPlayer=function(t){var e=Nr.players,n=void 0;if("string"==typeof t){var i=Xr(t),o=e[i];if(o)return o;n=on("#"+i)}else n=t;if(d(n)){var r=n,s=r.player,a=r.playerId;if(s||e[a])return s||e[a]}},ce.getAllPlayers=function(){return Object.keys(Nr.players).map(function(t){return Nr.players[t]}).filter(Boolean)},ce.players=Nr.players,ce.getComponent=On.getComponent,ce.registerComponent=function(t,e){Yi.isTech(e)&&tn.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),On.registerComponent.call(On,t,e)},ce.getTech=Yi.getTech,ce.registerTech=Yi.registerTech,ce.use=Vt,!Re&&Object.defineProperty?(Object.defineProperty(ce,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(ce.middleware,"TERMINATOR",{value:Ki,writeable:!1,enumerable:!0})):ce.middleware={TERMINATOR:Ki},ce.browser=qe,ce.TOUCH_ENABLED=Ue,ce.extend=Kr,ce.mergeOptions=tt,ce.bind=yn,ce.registerPlugin=Gr.registerPlugin,ce.plugin=function(t,e){return tn.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Gr.registerPlugin(t,e)},ce.getPlugins=Gr.getPlugins,ce.getPlugin=Gr.getPlugin,ce.getPluginVersion=Gr.getPluginVersion,ce.addLanguage=function(t,e){var n;return t=(""+t).toLowerCase(),ce.options.languages=tt(ce.options.languages,(n={},n[t]=e,n)),ce.options.languages[t]},ce.log=tn,ce.createTimeRange=ce.createTimeRanges=ot,ce.formatTime=vo,ce.setFormatTime=oe,ce.resetFormatTime=re,ce.parseUrl=si,ce.isCrossOrigin=ci,ce.EventTarget=wn,ce.on=z,ce.one=G,ce.off=W,ce.trigger=Y,ce.xhr=wi,ce.TextTrack=Ti,ce.AudioTrack=ki,ce.VideoTrack=Si,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(t){ce[t]=function(){return tn.warn("videojs."+t+"() is deprecated; use videojs.dom."+t+"() instead"),sn[t].apply(null,arguments)}}),ce.computedStyle=a,ce.dom=sn,ce.url=ui,ce}),define("vsef/media/Media",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.registerEmitter=function(e){-1===t.emitters.indexOf(e)&&t.emitters.push(e)},t.deregisterEmitter=function(e){var n=t.emitters.indexOf(e);-1!==n&&t.emitters.splice(n,1)},t.emit=function(e){for(var n=0,i=t.emitters;n<i.length;n++){var o=i[n];o!==e&&o.stopEmitting()}},t.stopAll=function(){t.emit(void 0)},t.emitters=[],t}();e.Media=n}),define("videojs-errors",["require","exports","videojs"],function(t,e,n){"use strict";!function(){var t=function(t){this.on("error",function(e){var n=this.error();n.code&&t.messages[n.code]&&(n.message=t.messages[n.code]),t.callback&&t.callback(n)})};n.plugin("errors",t)}()}),define("vsef/media/VideoJSMediaPlayer",["require","exports","jquery","lodash","videojs","../Log","../EventDispatcher","./Media","../utils/Keyboard","../Types","videojs-errors"],function(t,e,n,i,o,r,s,a,l,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(e,o){void 0===o&&(o={});var l=this;this._units=c.DimensionUnit.pixels,this.className="vcs-media",r.note("media player constructed"),a.Media.registerEmitter(this),this.$el=e.first(),this.$parent=this.$el.parent(),this.id="VideoJs"+t.mediaId++,void 0===this.$el.attr("id")&&this.$el.attr("id",this.id),this.config={};var u={controls:!0,autoplay:!1,plugins:{errors:{messages:{4:"The media could not be loaded. The server or network may be unavailable or the format is not supported. Please check your network connection and try again."},callback:this.onError.bind(this)}}};i.assign(this.config,o,u);for(var h in o)o.hasOwnProperty(h)&&(this["_"+h]=o[h]);this.$el.addClass(this.className),n(window).resize(function(){l.handleResize()}),this.onComplete=new s.EventDispatcher(this),this.onPlay=new s.EventDispatcher(this),this.onStop=new s.EventDispatcher(this),this.onTimeUpdate=new s.EventDispatcher(this)}return t.prototype.stopEmitting=function(){this.player&&this.pause()},t.prototype.init=function(){var t=this;return new Promise(function(e,n){o(t.$el[0],t.config,t.onVideoJsInit.bind(t,e,n))})},t.prototype.play=function(){this.player.play()},t.prototype.pause=function(){this.player&&this.player.pause()},t.prototype.seek=function(t){this.player.currentTime(t)},t.prototype.stop=function(){this.currentTime=0,this.pause()},Object.defineProperty(t.prototype,"src",{get:function(){return this._src},set:function(t){this.player.src(t),this._src=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this.player.width(t),this._width=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.player.currentTime()},set:function(t){this.player.currentTime(t)},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.player.dispose()},t.prototype.onError=function(t){this.handleResize()},t.prototype.onVideoJsInit=function(t,e){try{this.player=o(this.id),this.$el=this.$parent.find("#"+this.id),this.player.on("ended",this.onVideoJsPlaybackEnded.bind(this)),this.player.on("play",this.onVideoJsPlay.bind(this)),this.player.on("firstplay",this.onVideoJsFirstplay.bind(this)),this.player.on("pause",this.onVideoJsPause.bind(this)),this.player.on("timeupdate",this.onVideoJsTimeUpdate.bind(this)),this.$el.on("contextmenu",function(t){t.preventDefault()}),this.$el.find(".vjs-slider").on("keyup",this.onKeyup.bind(this)),this.onPlayerInit(),this.$el.attr("role","region"),this.$el.find(".vjs-control-bar").addClass("vst-draggable vst-click"),this.$el.find(".vjs-progress-control .vjs-slider").attr("aria-label","progress bar"),this.handleResize(),t()}catch(t){e(t)}},t.prototype.onKeyup=function(t){t.keyCode!==l.Keyboard.LEFT_ARROW&&t.keyCode!==l.Keyboard.RIGHT_ARROW||(t.stopPropagation(),t.preventDefault())},t.prototype.onVideoJsPlaybackEnded=function(){this.onComplete.trigger()},t.prototype.onVideoJsPlay=function(){a.Media.emit(this),this.onPlay.trigger()},t.prototype.onVideoJsFirstplay=function(){this.setPlayButtonFocus()},t.prototype.onVideoJsPause=function(){this.onStop.trigger()},t.prototype.onVideoJsTimeUpdate=function(){this.onTimeUpdate.trigger()},t.prototype.setPlayButtonFocus=function(){var t=this.$el.find(".vjs-play-control");setTimeout(function(){t.focus()},100)},t.mediaId=0,t}();e.VideoJSMediaPlayer=u});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/media/VideoJSVideoPlayer",["require","exports","./VideoJSMediaPlayer","../Log","../Types"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n){void 0===n&&(n={});var o=t.call(this,e,n)||this;return o.videoClassName="vcs-video",i.note("video player constructed"),o.$el.addClass(o.videoClassName),o.$el.addClass("video-js vjs-default-skin vjs-big-play-centered"),o}return __extends(e,t),e.prototype.init=function(){var e=this;return t.prototype.init.call(this).then(function(){e.player.on("canplay",e.onVideoJsCanPlay.bind(e))})},Object.defineProperty(e.prototype,"poster",{get:function(){return this._poster},set:function(t){this.$el.find(".vjs-poster").css("background-image","url("+t+")"),this._poster=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this.player.height(t),this._height=t},enumerable:!0,configurable:!0}),e.prototype.setSize=function(t,e){this.player.width(t),this.player.height(e),this._width=t,this._height=e},e.prototype.handleResize=function(){var t=this.$el.width()/this._width;if(this._units===o.DimensionUnit.percentage){if(!this.width)return void i.error("Video width must be specified if units are set to percentage");this.player.width(this.$el.width()*(this.width/100))}else this.$el.css("height",this._height*t);if(this.$el.hasClass("vjs-error")){var e=this.$el.find(".vjs-error-display"),n=this.$el.find(".vjs-control-bar").height(),r=this.player.height();e.height(r*t-n)}if(this.$el.hasClass("vjs-using-native-controls")){this.$el.find("video").height(this.$el.height())}},e.prototype.onPlayerInit=function(){this.$el.attr("aria-label","video player")},e.prototype.onVideoJsCanPlay=function(){this._units===o.DimensionUnit.pixels&&(this.width||(this.width=this.$el.width()),this.height||(this.height=this.$el.height()))},e}(n.VideoJSMediaPlayer);e.VideoJsVideoPlayer=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/media/VideoJSAudioPlayer",["require","exports","lodash","../Log","./VideoJSMediaPlayer","../Types"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,o){void 0===o&&(o={});var r=t.call(this,e,o)||this;r.heightDefault=30,r.audioClassName="vcs-audio",i.note("audio player constructed");var s={controlBar:{fullscreenToggle:!1},bigPlayButton:!1,height:r.heightDefault};return n.assign(r.config,s),r.$el.addClass(r.audioClassName),r.$el.addClass("video-js vjs-default-skin"),r}return __extends(e,t),e.prototype.handleResize=function(){this._units===r.DimensionUnit.percentage&&this.width&&this.player.width(this.player.width()*(this.width/100));var t=this.$el.find("audio").height();this.$el.hasClass("vjs-error")?this.$el.height("100%"):this.$el.height()<t&&this.$el.height(t)},e.prototype.onPlayerInit=function(){this.$el.attr("aria-label","audio player"),this.$el.hasClass("vjs-using-native-controls")&&this.$el.addClass("vst-draggable vst-click")},e}(o.VideoJSMediaPlayer);e.VideoJsAudioPlayer=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("vsef/media/transcript/TranscriptModel",["require","exports","../../Model","./Transcript","../../Observable"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n,i,o){this.textParts=t?t.slice():[],this.start=e,this.end=e}return t}();e.TranscriptItem=r;var s=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parseContent=function(t,e){if(e===i.TranscriptContentFormat.Auto&&(e=0===t.trim().indexOf("WEBVTT")?i.TranscriptContentFormat.VTT:i.TranscriptContentFormat.Text),this.format=e,e===i.TranscriptContentFormat.Text)this.items=[new r([t])];else{if(e!==i.TranscriptContentFormat.VTT)throw"unknown transcript format";this.items=this.parseVTT(t)}},e.prototype.setTime=function(t){if(this.format===i.TranscriptContentFormat.VTT)for(var e=0,n=this.items;e<n.length;e++){var o=n[e];if(t>=o.start&&t<=o.end)return void(this.itemPlayingIndex=this.items.indexOf(o))}this.itemPlayingIndex=-1},e.prototype.parseVTT=function(t){t=t.replace(/(\r\n|\n|\r)/g,"\n");var e=t.split("\n");e.push("");for(var n,i,o=[],s=0;s<e.length;s++){var a=e[s],l=a.trim();if(l){if(0!==l.indexOf("WEBVTT")&&0!==l.indexOf("NOTE"))if(-1!==a.indexOf("--\x3e")||n)if(-1===a.indexOf("--\x3e")||n)n&&n.textParts.push(l);else{n=new r,i&&(n.id=i);var c=a.split("--\x3e");n.start=this.readVttTime(c[0]),n.end=this.readVttTime(c[1])}else i=l}else n&&o.push(n),n=void 0,i=void 0}return o},e.prototype.readVttTime=function(t){var e=t.split(":"),n=e.pop(),i=n.split("."),o=0;2===i.length&&(o+=parseInt(i[1],10)/1e3),o+=parseInt(i[0],10);var r=e.pop();r&&(o+=60*parseInt(r,10));var s=e.pop();return s&&(o+=3600*parseInt(s,10)),o},__decorate([o.observable],e.prototype,"items",void 0),__decorate([o.observable],e.prototype,"itemPlayingIndex",void 0),__decorate([o.observable],e.prototype,"visible",void 0),e}(n.Model);e.TranscriptModel=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/media/transcript/TranscriptView",["require","exports","jquery","../../View","./Transcript","../../utils/DisplayUtils"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,n,i,o,r){var s=t.call(this,e,n,i,o)||this;return s.media=r,s.listenTo(s.model.onItemPlayingIndexChange,s.itemPlayingIndexChange),s.listenTo(s.model.onVisibleChange,s.visibleChange),r&&(s.listenTo(s.media.onPlay,s.mediaPlay),s.listenTo(s.media.onStop,s.mediaStop),s.listenTo(s.media.onTimeUpdate,s.mediaTimeUpdate)),s}return __extends(e,t),e.prototype.getEvents=function(){return{"click .media-transcript-seekable":this.seekableSpanClick,"click .media-transcript-show-btn":this.showTranscript}},e.prototype.render=function(){t.prototype.render.call(this);var e=this.$(".media-transcript-body");if(this.model.format===o.TranscriptContentFormat.Text)e.html(this.model.items[0].textParts[0]);else for(var i=0,r=this.model.items;i<r.length;i++){var s=r[i],a=s.textParts.join(" ")+" ",l=n("<span>"+a+"</span>");void 0!==s.start&&(l.addClass("media-transcript-seekable"),l.attr("data-media-start",s.start),l.attr("data-media-end",s.end)),l.appendTo(e)}return this},e.prototype.itemPlayingIndexChange=function(){if(this.$("span.media-transcript-seekable").removeClass("playing"),-1!==this.model.itemPlayingIndex){var t=this.$("span.media-transcript-seekable").eq(this.model.itemPlayingIndex);t.addClass("playing");var e=this.$(".media-transcript-body-holder"),n=new r.Rectangle(e),i=t.position().top,o=t.position().top+t.height();i<0?e.scrollTop(e.scrollTop()+i):o>n.height&&e.scrollTop(e.scrollTop()+o-n.height)}},e.prototype.visibleChange=function(){this.$el.toggleClass("visible",this.model.visible),this.$(".media-transcript-show-btn").attr("aria-expanded",this.model.visible?"true":"false")},e.prototype.mediaPlay=function(){this.mediaTimeUpdate()},e.prototype.mediaStop=function(){this.model.setTime(-1)},e.prototype.mediaTimeUpdate=function(){this.model.setTime(this.media.currentTime)},e.prototype.seekableSpanClick=function(){var t=this.$(event.target);this.media.play(),this.media.seek(parseFloat(t.attr("data-media-start")))},e.prototype.showTranscript=function(){this.model.visible=!this.model.visible},e}(i.View);e.TranscriptView=s}),define("vsef/media/transcript/Transcript",["require","exports","../../AssetLoader","./TranscriptModel","./TranscriptView"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r;!function(t){t[t.Content=0]="Content",t[t.File=1]="File"}(r=e.TranscriptContentType||(e.TranscriptContentType={}));var s;!function(t){t[t.Text=0]="Text",t[t.VTT=1]="VTT",t[t.Auto=2]="Auto"}(s=e.TranscriptContentFormat||(e.TranscriptContentFormat={}));var a=function(){function t(t,e,i,o,a,l,c){void 0===c&&(c=s.Auto);var u=this;l===r.File?n.AssetLoader.load([{url:o,id:"transcript"}]).then(function(n){u.build(n.get("transcript"),t,e,i,a,c)}):this.build(o,t,e,i,a,c)}return t.prototype.build=function(t,e,n,r,s,a){var l=new i.TranscriptModel;l.id=s,l.parseContent(t,a);var c=new o.TranscriptView(l,n,"common-ui-transcript",e,r);c.render(),this.model=l,this.view=c},t}();e.Transcript=a});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/stimulus/StimulusView",["require","exports","jquery","../View","../media/VideoJSVideoPlayer","../media/VideoJSAudioPlayer","../utils/MiscUtils","../media/transcript/Transcript","../Log","../utils/Environment"],function(t,e,n,i,o,r,s,a,l,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=".legacy-image-holder figcaption, .legacy-image-holder .figcaption",h=function(t){function e(e,i,o,r){var s=t.call(this,e,i,o,r)||this;return n(window).resize(function(){s.handleResize()}),s}return __extends(e,t),e.prototype.show=function(){return t.prototype.show.call(this),this.handleResize(),this},e.prototype.hide=function(){return t.prototype.hide.call(this),this.audioPlayer&&this.audioPlayer.pause(),this.videoPlayer&&this.videoPlayer.pause(),this},e.prototype.render=function(){var e=this;t.prototype.render.call(this);var i=!c.Environment.isPrerendering()&&this.$el.hasClass("rendered");if(this.model.hasVideo||this.model.hasEmbeddedVideo){var h=this.model.hasEmbeddedVideo;this.model.videoWidth=560,this.model.videoHeight=316;var d=void 0;h?(i?d=this.$("embedded-video-holder"):(d=n(this.templates.get("common-ui-embedded-video-stimulus")(this.model)),this.$(".video-player").append(d),d.html(this.model.embeddedVideo)),c.Environment.isPrerendering()||this.model.hasVideoTranscript&&(this.transcript=this.createTranscript(void 0))):(i?d=this.$("video"):(d=n(this.templates.get("common-ui-video-stimulus")(this.model)),this.$(".video-player").append(d)),c.Environment.isPrerendering()||(this.videoPlayer=new o.VideoJsVideoPlayer(d,{width:560,height:316}),this.videoPlayer.init().then(function(){e.model.hasVideoTranscript&&(e.transcript=e.createTranscript(e.videoPlayer))})))}if(this.model.hasAudio){var p=void 0;i?p=this.$("audio"):(p=n(this.templates.get("common-ui-audio-stimulus")(this.model)),this.$(".audio-player").append(p)),c.Environment.isPrerendering()||(this.audioPlayer=new r.VideoJsAudioPlayer(p,{width:768}),this.audioPlayer.init().then(function(){l.note("audio init"),e.model.hasAudioTranscript&&(e.transcript=new a.Transcript(e.$(".audio-transcript"),e.templates,e.audioPlayer,e.model.audioTranscript,e.model.id+"-trans",e.model.isAudioTranscriptExternal?a.TranscriptContentType.File:a.TranscriptContentType.Content))}))}var f=this.$el.find(".legacy-image-holder img");return this.model.hasImage&&this.model.hasImageCaption&&f.length&&(this.$(u).css("display","none"),s.MiscUtils.whenImageLoaded(f.get(0)).then(function(t){t&&(e.model.hasImage&&e.$(u).css("display","block"),e.handleResize())})),this.model.hasImage||this.$("figure").attr("aria-hidden","true"),this},e.prototype.createTranscript=function(t){return new a.Transcript(this.$(".video-transcript"),this.templates,t,this.model.videoTranscript,this.model.id+"-trans",this.model.isVideoTranscriptExternal?a.TranscriptContentType.File:a.TranscriptContentType.Content,this.model.isVideoTranscriptExternal?a.TranscriptContentFormat.VTT:a.TranscriptContentFormat.Text)},e.prototype.handleResize=function(){if(this.model.hasImage&&this.model.hasImageCaption&&(this.$(u).width(this.$(".legacy-image-holder img").width()),this.$(u).css("display","inline-block")),this.model.video&&this.model.hasVideoInfo&&this.$(".video-info").width(this.$("video").width()),this.model.hasEmbeddedVideo&&this.model.hasVideoInfo&&this.$(".video-info").width(this.$(".embedded-video-holder iframe").width()),(this.model.video||this.model.videoTranscript)&&this.model.hasVideoTranscript&&this.$(".video-transcript").width(this.$("video").width()),this.model.hasEmbeddedVideo&&this.model.hasVideoTranscript&&this.$(".video-transcript").width(this.$(".embedded-video-holder iframe").width()),this.model.audio&&this.model.hasAudioTranscript&&this.$(".audio-transcript").width(this.$(".vcs-audio").width()),this.model.hasText){this.$("table").length&&this.$(".c-x-scroll.vst-draggable").css("width","100%")}},e}(i.View);e.StimulusView=h});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/PageView",["require","exports","./View","./stimulus/StimulusView","./utils/DisplayUtils","./utils/Environment","./Types"],function(t,e,n,i,o,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e,n,i,o,r){var s=t.call(this,e,n,i,r)||this;return s.subID=o,s.listenTo(e.onVisibleChange,s.pageVisibleChange),s.listenTo(e.onSubmittedChange,s.pageSubmittedChange),s.listenTo(e.onRevealAnswerChange,s.pageRevealAnswerChange),s.listenTo(e.onShowFeedbackChange,s.pageShowFeedbackChange),s.listenTo(e.onAfterSubmitted,s.afterPageSubmitted),s.listenTo(e.onFeedbackMessageChange,s.feedbackMessageChange),s.listenTo(e.onPresentFeedback,s.presentFeedback),s}return __extends(e,t),e.prototype.render=function(){if(t.prototype.render.call(this),this.$el.hasClass("rendered")&&!r.Environment.isPrerendering()||this.$(".content-holder").append(this.templates.get(this.subID)(this.model)),!this.model.stimulus.isEmpty){var e=void 0;this.model.stimulusPlacement===s.StimulusPlacement.Below?(e=this.$el.find(".stimulus-after"),e.addClass("stimulus")):e=this.$el.find(".stimulus"),this.stimulusView=new i.StimulusView(this.model.stimulus,this.templates,"common-ui-page-stimulus",e.eq(0)),e.addClass("has-content"),e.addClass(this.model.stimulus.contentClasses),this.stimulusView.render()}if(!this.model.feedback.isEmpty){var n=this.$el.find(".feedback-content");this.feedbackView=new i.StimulusView(this.model.feedback,this.templates,"common-ui-page-stimulus",n),n.addClass("has-content"),n.addClass(this.model.feedback.contentClasses),this.feedbackView.render()}return this},e.prototype.pageVisibleChange=function(){this.$el.toggleClass("visible",this.model.visible),this.model.visible?(this.stimulusView&&this.stimulusView.show(),this.model.hasFeedback&&this.feedbackView.show()):(this.stimulusView&&this.stimulusView.hide(),this.model.hasFeedback&&this.feedbackView.hide());for(var t=0,e=this.model.questions;t<e.length;t++){e[t].visible=this.model.visible}},e.prototype.pageSubmittedChange=function(){this.$el.toggleClass("no-feedback",!this.model.hasFeedback),this.$el.toggleClass("submitted",this.model.submitted),this.updateFeedback()},e.prototype.pageRevealAnswerChange=function(){this.$el.toggleClass("reveal-answer",this.model.revealAnswer)},e.prototype.pageShowFeedbackChange=function(){this.$el.toggleClass("no-feedback",!this.model.hasFeedback),this.$el.toggleClass("show-feedback",this.model.showFeedback),this.updateFeedback()},e.prototype.updateFeedback=function(){this.model.hasFeedback&&(this.model.showFeedback||this.model.submitted?this.feedbackView.show():this.feedbackView.hide())},e.prototype.afterPageSubmitted=function(){var t;if(void 0!==this.model.correct&&(t=this.model.correct?"correct":"incorrect",this.$(".feedback").removeClass("correct incorrect").addClass(this.model.correct?"correct":"incorrect"),this.model.hasMissedAnswers&&!this.model.hasWrongAnswers?t+="-missing-answers":this.model.hasRightAnswers&&!this.model.correct&&(t+="-partial-correct")),t){var e=this.templates.getText("common-ui-text-answer-"+t);this.$(".feedback .result").text(e)}},e.prototype.feedbackMessageChange=function(){this.$(".feedback .result").text(this.model.feedbackMessage)},e.prototype.presentFeedback=function(){var t=this.model.useFeedbackFocusPrefixDiv?".feedback-focus-helper":".feedback";o.DisplayUtils.scrollIntoView({$to:this.$(t),$focusCtl:this.$(t)})},e}(n.View);e.PageView=a});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/ImageView",["require","exports","jquery","lodash","./View","./utils/DisplayUtils","./utils/Environment"],function(t,e,n,i,o,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e,o,a,l){var c=t.call(this,e,o,a,l)||this;if(c.canObjectFit="objectFit"in document.documentElement.style,c.$image=c.$("img"),s.Environment.isPrerendering())return c.$image.css("max-width","1px"),c.$image.css("max-height","1px"),c;if(c.canObjectFit){c.$image.css("width","100%"),c.$image.css("height","100%"),c.$image.css("object-fit","contain");var u=r.DisplayHorzPosToCssString(c.model.horzPos)+" "+r.DisplayVertPosToCssString(c.model.vertPos);return c.$image.css("object-position",u),c.$image.css("max-width","none"),c.$image.css("max-height","none"),c}if(c.handleResize=c.handleResize.bind(c),e.autoUpdate&&n(window).resize(c.handleResize),c.$image=c.$("img"),c.$image){var h=c.$image.get(0);h.complete?i.defer(function(){c.handleResize()}):(c.$image.css("max-width","1px"),c.$image.css("max-height","1px"),h.onload=function(){h.onload=void 0,i.defer(function(){c.handleResize()})})}return c}return __extends(e,t),e.prototype.update=function(){this.$image&&this.handleResize()},e.prototype.handleResize=function(){if(s.Environment.isPrintScreenFrame()||s.Environment.isPrintBlockFrame())return this.$image.css("max-width","none"),void this.$image.css("max-height","none");var t=this.$image.get(0);if(t.complete&&0!==t.naturalWidth&&0!==t.naturalHeight){var e=new r.Rectangle(this.$el),n=new r.Rectangle(0,0,t.naturalWidth,t.naturalHeight),i=e.scale(n,this.model.fit,this.model.vertPos,this.model.horzPos);this.$image.css("position","relative"),this.$image.css("max-width","none"),this.$image.css("max-height","none"),i.applyToElement(this.$image)}},e}(o.View);e.ImageView=a});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/ImageModel",["require","exports","./Model","./utils/DisplayUtils","./utils/DisplayUtils","./utils/DisplayUtils"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,n,s){void 0===e&&(e=i.DisplayFitSize.Contain),void 0===n&&(n=r.DisplayHorzPos.Center),void 0===s&&(s=o.DisplayVertPos.Center);var a=t.call(this)||this;return a.fit=e,a.horzPos=n,a.vertPos=s,a}return __extends(e,t),e}(n.Model);e.ImageModel=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){
function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/stimulus/RevealStimulusView",["require","exports","jquery","../View","./RevealStimulusModel","./StimulusView"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,n,i,o){var r=t.call(this,e,n,i,o)||this;return r.listenTo(e.onShowContentChange,r.renderReveal),r}return __extends(e,t),e.prototype.getEvents=function(){return{"click .reveal-stimulus-show-btn":this.toggleReveal}},e.prototype.render=function(){if(t.prototype.render.call(this),!this.model.stimulus.isEmpty){var e=this.$el.find(".reveal-stimulus-content-holder");this.stimulusView=new r.StimulusView(this.model.stimulus,this.templates,"common-ui-page-stimulus",e),e.addClass("has-content"),e.addClass(this.model.stimulus.contentClasses),this.stimulusView.render()}return this},e.prototype.renderReveal=function(){this.$el.toggleClass("revealed",this.model.showContent),this.$(".reveal-stimulus-show-btn").attr("aria-expanded",this.model.showContent?"true":"false");var t=this.model.showContent?"hide":"show",e="common-ui-reveal-stimulus-"+t+"-"+o.revealStimulusTypeToString(this.model.type);this.$(".reveal-stimulus-show-btn").html(this.templates.getText(e)),this.model.showContent&&n(window).trigger("resize")},e.prototype.toggleReveal=function(t){this.model.showContent=!this.model.showContent,t.stopPropagation()},e}(i.View);e.RevealStimulusView=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/QuestionView",["require","exports","./View","./stimulus/RevealStimulusView","./utils/DisplayUtils"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,i,o){var r=t.call(this,e,n,i,o)||this;return r.extendQuestion(),r.listenTo(r.model.onPresent,r.present),r.listenTo(r.model.onDisabledChange,r.disabledChange),r}return __extends(e,t),e.prototype.extendQuestion=function(){if(!this.model.hint.isEmpty){var t=this.$el.find(".reveal-stimulus");this.hintView=new i.RevealStimulusView(this.model.hint,this.templates,"common-ui-reveal-stimulus-template"),this.appendChildView(this.hintView,t),this.hintView.$el.addClass("hint")}},e.prototype.present=function(){o.DisplayUtils.scrollIntoView({$to:this.$el,$focusCtl:this.presentFocusCtl,forceFocus:!0})},Object.defineProperty(e.prototype,"presentFocusCtl",{get:function(){return this.$(".js-review-focus")},enumerable:!0,configurable:!0}),e}(n.View);e.QuestionView=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/MC/view/MCQuestionView",["require","exports","jquery","vsef/Log","vsef/ImageView","vsef/ImageModel","vsef/QuestionView","vsef/utils/DisplayUtils","../utils/MCUtils","vsef/utils/StringUtils"],function(t,e,n,i,o,r,s,a,l,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function e(e,n,s,a){var l=this;if(i.note("MCQuestion View"),l=t.call(this,e,n,s,a)||this,l.listenTo([e.onAnswerChange,e.onSubmittedChange,e.onRevealAnswerChange],l.renderAnswersState),l.listenTo(e.onTakeFocus,l.takeFocus),l.listenTo(e.onAnswerOrderChange,l.answerOrderChange),e.hasImageAnswers&&a){var c=l.$(".image-holder");l.images=[];for(var u=0;u<c.length;u++){var h=new r.ImageModel;h.autoUpdate=!1,l.images.push(new o.ImageView(h,l.templates,"",c.eq(u)))}}return l}return __extends(e,t),e.prototype.getEvents=function(){return{"change input[type='radio'], input[type='checkbox']":this.answerChange}},e.prototype.disabledChange=function(){this.renderAnswersState()},e.prototype.takeFocus=function(){var t=this.$("input[type='radio'],input[type='checkbox']").first();a.DisplayUtils.scrollIntoView({$to:this.$el,$focusCtl:t})},e.prototype.answerOrderChange=function(t,e,n){for(var i=this.$(".answer"),o=i.parent(),r=[],s=0;s<this.model.answers.length;s++)r.push(i.eq(s));r=l.default.reorderItem(r,e,n),i.detach();for(var s=0;s<this.model.answers.length;s++)o.append(r[s])},e.prototype.renderAnswersState=function(){for(var t="input[type='radio'],input[type='checkbox']",e=this.$(".answer"),n=this.$(".answers-feedback .status"),i=this.model.submitted,o=0;o<this.model.answers.length;o++){var r=this.model.answers[o],s=this.model.selected[o],a=i,l=r.correct,u=e.eq(o);u.toggleClass("selected",s);var h=this.model.disabled||this.model.revealAnswer||i;if(u.toggleClass("checked",s||this.model.revealAnswer&&l),u.find(t).prop("checked",s),u.toggleClass("disabled",h),u.find(t).prop("disabled",h),n.eq(o).text(""),u.removeClass("correct incorrect"),i){var d="";(a||this.model.revealAnswer&&l)&&(u.addClass(l?"correct":"incorrect"),d+=this.getAnswerAccessibleLabel(s,l,this.model.revealAnswer)),d+=c.default.htmlToText(r.text,c.HtmlToTextMode.Text),n.eq(o).text(d)}}this.$(".answers").attr("aria-hidden",i?"true":"false"),this.model.isResetting&&e.find(t).prop("checked",!1)},e.prototype.answerChange=function(t){var e=this.$(".answer").index(n(t.currentTarget).parent());this.model.toggleSelection(e)},e.prototype.getAnswerAccessibleLabel=function(t,e,n){var i="";return!t&&e&&n?i=this.templates.getText("common-ui-text-correct-shown"):e&&t?i=this.templates.getText("common-ui-text-marked-correct"):!e&&t&&(i=this.templates.getText("common-ui-text-marked-incorrect")),i.length?i+" ":""},e}(s.QuestionView);e.MCQuestionView=u});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/MC/view/MCPageView",["require","exports","vsef/PageView","vsef/Log","./MCQuestionView"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,o,r,s){return i.note("MCPageView"),t.call(this,e,n,o,r,s)||this}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this),this.questionViews=[];for(var e=0;e<this.model.questions.length;e++)this.questionViews.push(new o.MCQuestionView(this.model.questions[e],this.templates,"",this.$(".question").eq(e)));return this},e}(n.PageView);e.MCPageView=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/ActivityView",["require","exports","./View"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,i,o){var r=t.call(this,e,n,i,o)||this;return r.pageViews=[],r.hideShowSelectors=[],r.$el&&(r.$el.find(".activity")&&r.hideShowSelectors.push(".activity"),r.$el.find(".footer").length&&r.hideShowSelectors.push(".footer")),r}return __extends(e,t),e}(n.View);e.ActivityView=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/MC/view/MCView",["require","exports","vsef/Log","./MCPageView","vsef/ActivityView"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,i,o,r){var s=this;return n.note("MCView"),s=t.call(this,e,i,o,r)||this,s.listenTo(e.onPagesChange,s.renderPages),s}return __extends(e,t),e.prototype.renderPages=function(){for(var t=0,e=0,n=this.model.pages;e<n.length;e++){var o=n[e],r=this.$el.find(".page").eq(t),s=new i.MCPageView(o,this.templates,"common-ui-page-base","mc-page-template");this.appendChildView(s,r),this.pageViews.push(s),t++}},e}(o.ActivityView);e.MCView=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/MC/MCActivity",["require","exports","vsef/Log","vsef/Activity","./model/MCModel","./view/MCView"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){var e=t.call(this)||this;return n.note("created MC Activity"),e}return __extends(e,t),e.prototype.buildUI=function(t,e){this.model=new o.MCModel,this.view=new r.MCView(this.model,t,this.context.engineClassLower+"-page-template",e)},e.prototype.getActivity=function(){return new e},e}(i.Activity);e.MCActivity=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/InteractiveEngine",["require","exports","./Log","./AssetLoader","./contexts/Context","./Engine","./utils/MiscUtils","./rootUI/RootUI","./utils/PathUtils","./commonUI/CommonUI","./Types","./Flags"],function(t,e,n,i,o,r,s,a,l,c,u,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=function(t){function e(e){var n=t.call(this,e)||this;return n.ID_MAIN_CSS="mainCSS",n.ID_ENGINE_CSS="engineCSS",n.ID_ENGINE_SUBPROJ_CSS="engineSubprojCSS",n}return __extends(e,t),e.prototype.destroy=function(){this.content&&this.content.destroy()},e.prototype.create=function(){var t=this;n.note("vsef engine create"),this.context.init().then(function(){return n.note("context initialized"),t.extractContextInfo(),t.buildConfig()}).then(function(e){return n.note("config loaded"),t.config=e,t.buildCss()}).then(function(){return n.note("css loaded"),t.context.getActivityData()}).then(function(e){return n.note("activity data loaded"),t.activityData=e,t.buildCommonUI()}).then(function(e){return n.note("commonUI loaded"),t.commonUI=e,t.buildRootUI()}).then(function(e){return n.note("rootUI loaded"),t.context.rootUI=e,t.buildContent()})},Object.defineProperty(e.prototype,"cssFilesList",{get:function(){if(this.context.attributes.has(o.ContextAttribute.DontLoadCss))return[];var t=[];this.context.attributes.has(o.ContextAttribute.StandAlone)&&t.push({url:this.paths.rootCssPath+"vcs.css",id:this.ID_MAIN_CSS});var e=this.config.architecture.engines[this.context.engineClass],n=e.isCore,i=n?this.paths.rootCssPath:this.paths.cssPath;return t.push({url:i+"activity_blox/activities/"+this.context.engineClassLower+".css",id:this.ID_ENGINE_CSS}),this.context.subproj&&n&&e.hasCSSOverride&&t.push({url:this.paths.cssPath+"activity_blox/activities/"+this.context.engineClassLower+".css",id:this.ID_ENGINE_SUBPROJ_CSS}),t},enumerable:!0,configurable:!0}),e.prototype.buildCss=function(){var t=this;return new Promise(function(e,o){i.AssetLoader.load(t.cssFilesList).then(function(n){for(var i=l.PathUtils.getDocBasePath(),o=0,r=t.cssFilesList;o<r.length;o++){var a=r[o],c=i+(t.paths.baseRelativePath?t.paths.baseRelativePath:"")+a.url,u=n.get(a.id),h=t.config.getTheme();h.fonts&&a.id===t.ID_MAIN_CSS&&(u=h.fonts.insertIntoCSS(u,"../fonts/")),u=s.MiscUtils.repathCSSAssets(u,i,c);var d="vcs-css";a.id!==t.ID_MAIN_CSS&&(d="engine-"+t.context.engineClassLower+"-"+(a.id===t.ID_ENGINE_SUBPROJ_CSS?"subproj-":"")+"css"),u=s.MiscUtils.themeCSS(u,h),s.MiscUtils.includeCSSInline(u,d)}e()}).catch(function(t){n.log("buildCSS failed with:"),n.error(t)})})},e.prototype.determineCommonUI=function(t,e){return new h.Flags(u.CommonUIType.Basic)},e.prototype.getCommonUI=function(){return new c.CommonUI},e.prototype.buildCommonUI=function(){return this.getCommonUI().create(this.paths,this.context.id,this.$el)},e.prototype.buildRootUI=function(){var t=this;return this.context.attributes.has(o.ContextAttribute.StandAlone)?(new a.RootUI).create(this.paths,this.config.isRTL):new Promise(function(e,n){e(t.context.rootUI)})},e.prototype.buildContent=function(){var t=this;return new Promise(function(e,i){t.getInteractive().create({paths:t.paths,activityData:t.activityData,$el:t.commonUI.$el,commonUI:t.commonUI,context:t.context,config:t.config}).then(function(n){t.content=n,e(n)}).catch(function(t){throw n.log("Interactive buildContent failed with:"),n.error(t),t})})},e}(r.Engine);e.InteractiveEngine=d});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("vsef/ActivityEngine",["require","exports","./commonUI/CommonUIPaged","./commonUI/CommonUIStacked","./InteractiveEngine","./Log","./Types"],function(t,e,n,i,o,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.create=function(){var t=this;r.note("vsef engine create"),this.context.init().then(function(){return r.note("context initialized"),t.extractContextInfo(),t.buildConfig()}).then(function(e){return r.note("config loaded"),t.config=e,t.buildCss()}).then(function(){return r.note("css loaded"),t.context.getActivityData()}).then(function(e){return r.note("activity data loaded"),t.activityData=e,t.buildCommonUI()}).then(function(e){return r.note("commonUI loaded"),t.commonUI=e,t.buildRootUI()}).then(function(e){return r.note("rootUI loaded"),t.context.rootUI=e,t.buildContent()})},e.prototype.getCommonUI=function(){return this.determineCommonUI(this.activityData,this.config).has(s.CommonUIType.ActivityPaged)?new n.CommonUIPaged(this.config.isRTL):new i.CommonUIStacked},e.prototype.buildCommonUI=function(){return this.getCommonUI().create(this.paths,this.context.id,this.$el)},e.prototype.getInteractive=function(){return this.getActivity()},e}(o.InteractiveEngine);e.ActivityEngine=a});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/shared/BaseActivityEngine",["require","exports","jquery","vsef/ActivityEngine","vsef/Flags","vsef/Types","vsef/utils/PathUtils"],function(t,e,n,i,o,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.determineCommonUI=function(t,e){var i=r.stringToQuestionLayout(n(n.parseXML(t)).find("questionLayout").attr("value")),a=s.PathUtils.getQueryString("layout");return"stacked"===a?i=r.QuestionLayout.Stacked:"paged"===a&&(i=r.QuestionLayout.Paged),i===r.QuestionLayout.Stacked?new o.Flags(r.CommonUIType.ActivityStacked):new o.Flags(r.CommonUIType.ActivityPaged)},e}(i.ActivityEngine);e.BaseActivityEngine=a});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/MC/MCEngine",["require","exports","vsef/Log","./model/MCModel","./MCActivity","../shared/BaseActivityEngine"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e){return n.note("created MC engine"),t.call(this,e)||this}return __extends(e,t),e.prototype.createModel=function(t){return new i.MCModel(t)},e.prototype.getActivity=function(){return new o.MCActivity},e}(r.BaseActivityEngine);e.MCEngine=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("enginesRoot/engines/ESSAY/model/ESSAYPromptModel",["require","exports","vsef/Model","vsef/utils/MiscUtils","vsef/Observable","vsef/Log"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e){var n=this;return r.note("created ESSAYPromptModel"),n=t.call(this)||this,n.text=i.MiscUtils.removeHtmlWhitespace(i.MiscUtils.getFloeString(e.find("text").text())),n.answer="",n}return __extends(e,t),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return!(this.text.length>0)},enumerable:!0,configurable:!0}),__decorate([o.observable],e.prototype,"answer",void 0),e}(n.Model);e.ESSAYPromptModel=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/ESSAY/model/ESSAYQuestionModel",["require","exports","./ESSAYPromptModel","vsef/QuestionModel","../../shared/model/BaseEngineModel","vsef/Log"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,i,s,a){var l=this;r.note("created ESSAYQuestionModel"),l=t.call(this,i,a)||this,l.hint.stimulus=o.BaseEngineModel.extractStimulus(e.find("hint"),s);for(var c=e.find("prompt"),u=[],h=0;h<c.length;h++){var d=c.eq(h),p=new n.ESSAYPromptModel(d);p.isEmpty||(u.push(p),l.listenTo(p.onAnswerChange,l.promptAnswerChange))}return l.prompts=u,l.listenTo(l.onSubmittedChange,l.submittedChange),l}return __extends(e,t),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.prompts.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{get:function(){return this.prompts.reduce(function(t,e){return e.answer.length>0?t+1:t},0)/this.prompts.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"success",{get:function(){return this.complete===this.possibleComplete},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"possibleScore",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"possibleComplete",{get:function(){return this.prompts.length},enumerable:!0,configurable:!0}),e.prototype.getQuestionState=function(){return{kind:"ESSAYQuestionState",answers:this.prompts.map(function(t){return t.answer}),submitted:this.submitted,showFeedback:this.showFeedback,revealAnswer:this.revealAnswer}},e.prototype.setState=function(t){if(this.showFeedback=t.state.showFeedback,this.submitted=t.state.submitted,!this.isValidState(t))throw new Error("Invalid question state returned by backend. ESSAYQuestionModel will use default state.");for(var e=t.state.answers,n=0;n<e.length;n++)this.prompts[n].answer=e[n]},e.prototype.isValidState=function(e){return e.state.answers.length===this.prompts.length&&t.prototype.isValidState.call(this,e)},e.prototype.getCorrectAnswer=function(){return""},e.prototype.getAnswer=function(){return this.prompts.map(function(t){return t.answer})},e.prototype.getQuestion=function(){return this.prompts.map(function(t){return t.text})},e.prototype.checkAnswer=function(){},e.prototype.checkComplete=function(){var t=this;this.complete=this.prompts.reduce(function(e,n){return n.answer.trim().length>=t.completionSettings.charMin&&e++,e},0)},e.prototype.promptAnswerChange=function(){this.checkComplete(),this.onChange.trigger(),this.onStateChange.trigger()},e.prototype.submittedChange=function(){this.showFeedback=this.submitted},e}(i.QuestionModel);e.ESSAYQuestionModel=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/ESSAY/model/ESSAYPageModel",["require","exports","vsef/PageModel"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,i,o){return void 0===o&&(o=""),t.call(this,e,n,i,o)||this}return __extends(e,t),e.prototype.assessCorrect=function(){this.correct=void 0},e.prototype.clearAnswers=function(){t.prototype.clearAnswers.call(this),this.checkComplete()},e}(n.Page);e.ESSAYPageModel=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/ESSAY/model/ESSAYModel",["require","exports","../../shared/model/BaseEngineModel","./ESSAYQuestionModel","./ESSAYPageModel","vsef/Types","vsef/Log"],function(t,e,n,i,o,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=this;return s.note("created ESSAYModel"),n=t.call(this,e)||this,n.completenessSettings={min:1,kind:"Type-in",charMin:1},n}return __extends(e,t),e.prototype.readData=function(){s.note("ESSAYModel parse activity data"),t.prototype.readData.call(this),this.autoNumberWritingPrompts=r.stringOptionToBool(this.$data.find("autoNumberWritingPrompts").attr("value"),!0);for(var e=this.$data.find("questions > question"),a=[],l=[],c=0,u=0;u<e.length;u++){var h=e.eq(u),d=new i.ESSAYQuestionModel(h,c,this.paths,this.completenessSettings);if(!d.isEmpty){var p=n.BaseEngineModel.extractStimulus(h.find("stimulus"),this.paths),f=n.BaseEngineModel.extractStimulus(h.find("feedback"),this.paths);a.push(d);var g=new o.ESSAYPageModel([d],p,f);g.autoNumberWritingPrompts=this.autoNumberWritingPrompts,g.numPages=e.length,g.stimulusPlacement=this.stimulusPlacement,l.push(g),c++}}this.setData(l,a)},e}(n.BaseEngineModel);e.ESSAYModel=a}),function(t,e){if("function"==typeof define&&define.amd)define("autosize",["exports","module"],e);else if("undefined"!=typeof exports&&"undefined"!=typeof module)e(exports,module);else{var n={exports:{}};e(n.exports,n),t.autosize=n.exports}}(this,function(t,e){"use strict";function n(t){function e(e){var n=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=n,t.style.overflowY=e}function n(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}function i(){var e=t.style.height,i=n(t),o=document.documentElement&&document.documentElement.scrollTop;t.style.height="";var r=t.scrollHeight+a;if(0===t.scrollHeight)return void(t.style.height=e);t.style.height=r+"px",l=t.clientWidth,i.forEach(function(t){t.node.scrollTop=t.scrollTop}),o&&(document.documentElement.scrollTop=o)}function o(){i();var n=Math.round(parseFloat(t.style.height)),o=window.getComputedStyle(t,null),r="content-box"===o.boxSizing?Math.round(parseFloat(o.height)):t.offsetHeight;if(r!==n?"hidden"===o.overflowY&&(e("scroll"),i(),r="content-box"===o.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight):"hidden"!==o.overflowY&&(e("hidden"),i(),r="content-box"===o.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight),c!==r){c=r;var a=s("autosize:resized");try{t.dispatchEvent(a)}catch(t){}}}if(t&&t.nodeName&&"TEXTAREA"===t.nodeName.toUpperCase()&&!r.has(t)){var a=null,l=t.clientWidth,c=null,u=function(){t.clientWidth!==l&&o()},h=function(e){window.removeEventListener("resize",u,!1),t.removeEventListener("input",o,!1),t.removeEventListener("keyup",o,!1),t.removeEventListener("autosize:destroy",h,!1),t.removeEventListener("autosize:update",o,!1),Object.keys(e).forEach(function(n){t.style[n]=e[n]}),r.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",h,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",o,!1),window.addEventListener("resize",u,!1),t.addEventListener("input",o,!1),t.addEventListener("autosize:update",o,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",r.set(t,{destroy:h,update:o}),function(){var e=window.getComputedStyle(t,null);"vertical"===e.resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),a="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(a)&&(a=0),o()}()}}function i(t){var e=r.get(t);e&&e.destroy()}function o(t){var e=r.get(t);e&&e.update()}var r="function"==typeof Map?new Map:function(){var t=[],e=[];return{has:function(e){return t.indexOf(e)>-1},get:function(n){return e[t.indexOf(n)]},set:function(n,i){-1===t.indexOf(n)&&(t.push(n),e.push(i))},delete:function(n){var i=t.indexOf(n);i>-1&&(t.splice(i,1),e.splice(i,1))}}}(),s=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){s=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}var a=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(a=function(t){return t},a.destroy=function(t){return t},a.update=function(t){return t}):(a=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return n(t)}),t},a.destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],i),t},a.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],o),t}),e.exports=a});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/ESSAY/view/ESSAYQuestionView",["require","exports","jquery","autosize","vsef/Log","vsef/QuestionView","vsef/utils/Keyboard","vsef/utils/Environment","vsef/utils/DisplayUtils"],function(t,e,n,i,o,r,s,a,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(e,n,r,s){var a=this;return o.note("ESSAYQuestion View"),a=t.call(this,e,n,r,s)||this,a.listenTo(e.prompts.map(function(t){return t.onAnswerChange}),a.renderAnswerChange),a.listenTo(e.onSubmittedChange,a.renderSubmittedChange),a.listenTo(e.onVisibleChange,a.renderVisibleChange),a.listenTo(e.onAfterReset,a.afterReset),a.listenTo(e.onTakeFocus,a.takeFocus),i(a.$(".answer-input")),a}return __extends(e,t),e.prototype.getEvents=function(){return{"keyup .type-in-box":this.typeInKeyup}},e.prototype.disabledChange=function(){var t=this;this.$(".answer-input").each(function(e,n){n.disabled=t.model.disabled})},e.prototype.renderAnswerChange=function(t){var e=this.model.prompts.indexOf(t),n=this.$(".answer-input").eq(e);this.templates.isPrint?n.text(t.answer):n.val()!==t.answer&&n.val(t.answer)},e.prototype.renderSubmittedChange=function(){this.$(".answer-input").prop("disabled",this.model.submitted)},e.prototype.renderVisibleChange=function(){this.model.visible&&i.update(this.$(".answer-input"))},e.prototype.afterReset=function(){i.update(this.$(".answer-input"))},e.prototype.takeFocus=function(){var t=this.$(".answer-input").first();l.DisplayUtils.scrollIntoView({$to:this.$el,$focusCtl:t})},e.prototype.typeInKeyup=function(t){var e=n(t.target);this.model.prompts[e.parent().index()].answer=e.val(),a.Environment.isBookshelf&&s.Keyboard.HORZ_ARROW.has(t.keyCode)&&t.stopPropagation()},e}(r.QuestionView);e.ESSAYQuestionView=c});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/ESSAY/view/ESSAYPageView",["require","exports","vsef/PageView","vsef/Log","./ESSAYQuestionView"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,o,r,s){return i.note("ESSAYPageView"),t.call(this,e,n,o,r,s)||this}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this),this.questionViews=[];for(var e=0;e<this.model.questions.length;e++)this.questionViews.push(new o.ESSAYQuestionView(this.model.questions[e],this.templates,"",this.$(".question").eq(e)));return this},e}(n.PageView);e.ESSAYPageView=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/ESSAY/view/ESSAYView",["require","exports","vsef/Log","./ESSAYPageView","vsef/ActivityView"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,i,o,r){var s=this;return n.note("ESSAYView"),s=t.call(this,e,i,o,r)||this,s.listenTo(e.onPagesChange,s.renderPages),s}return __extends(e,t),e.prototype.renderPages=function(){for(var t=0,e=0,n=this.model.pages;e<n.length;e++){var o=n[e],r=this.$el.find(".page").eq(t),s=new i.ESSAYPageView(o,this.templates,"common-ui-page-base","essay-page-template");this.appendChildView(s,r),this.pageViews.push(s),t++}},e}(o.ActivityView);e.ESSAYView=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/ESSAY/ESSAYActivity",["require","exports","vsef/Log","vsef/Activity","./model/ESSAYModel","./view/ESSAYView","vsef/Activity"],function(t,e,n,i,o,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){var e=t.call(this)||this;return n.note("created ESSAY Activity"),e}
return __extends(e,t),e.prototype.buildUI=function(t,e){this.model=new o.ESSAYModel,this.model.attributes.remove(s.ActivityAttribute.Scorable),this.view=new r.ESSAYView(this.model,t,this.context.engineClassLower+"-page-template",e)},e.prototype.getActivity=function(){return new e},e}(i.Activity);e.ESSAYActivity=a});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/ESSAY/ESSAYEngine",["require","exports","vsef/Log","./model/ESSAYModel","./ESSAYActivity","../shared/BaseActivityEngine"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e){return n.note("created ESSAY engine"),t.call(this,e)||this}return __extends(e,t),e.prototype.createModel=function(t){return new i.ESSAYModel(t)},e.prototype.getActivity=function(){return new o.ESSAYActivity},e}(r.BaseActivityEngine);e.ESSAYEngine=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("enginesRoot/engines/shared/model/FIBBaseAnswerModel",["require","exports","vsef/Types","vsef/Observable"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){return void 0===e&&(e=""),t.call(this,{text:e})||this}return __extends(e,t),Object.defineProperty(e.prototype,"userInputLength",{get:function(){return this.userInput?this.userInput.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasUserInput",{get:function(){return this.userInput&&this.userInput.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"correct",{get:function(){return this.text===this.userInput},enumerable:!0,configurable:!0}),e.prototype.updateUserInput=function(t){var e=this;this.silently(function(){e.userInput=t})},__decorate([i.observable],e.prototype,"userInput",void 0),e}(n.StimulusElement);e.default=o});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/CLOZ/model/CLOZAnswerModel",["require","exports","../../shared/model/FIBBaseAnswerModel"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(n.default);e.CLOZAnswerModel=i}),define("vsef/utils/GapUtils",["require","exports","lodash","./MiscUtils","../Flags"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r;!function(t){t[t.Standard=0]="Standard"}(r=e.GapType||(e.GapType={}));var s;!function(t){t[t.Typed=0]="Typed"}(s=e.GapTransformOption||(e.GapTransformOption={}));var a=function(){function t(){}return t.replaceUntypeableChars=function(t){return t=t.replace(/“|”|&#8220;|&#8221;/gi,'"'),t=t.replace(/‘|’|&#8216;|&#8217;/gi,"'"),t=t.replace(/ |&nbsp;|&#160;/gi," ")},t}();e.GapUtils=a;var l=function(){function t(t){this.answers=t.answers,this.randomOrder=i.MiscUtils.makeRandomSequence(t.answers.length),this.initialText=t.initialText}return Object.defineProperty(t.prototype,"randomAnswers",{get:function(){for(var t=[],e=0;e<this.answers.length;e++)t.push(this.answers[this.randomOrder[e]]);return n.uniq(t)},enumerable:!0,configurable:!0}),t}();e.GapItem=l;var c=function(){function t(e,n){this.initialText="";var o=e.indexOf(":");if(n.has(s.Typed)&&-1!==o)if("*"!==e[o-1]){var r=e.split(":"),l=r[0],c=r[1];e=l+"]",this.initialText=i.MiscUtils.unencodeString(c.trim().slice(0,-1))}else e=e.substring(0,o-1)+e.substring(o);if(this.answers=t.split(e),n.has(s.Typed))for(var u=0;u<this.answers.length;u++)this.answers[u]=a.replaceUntypeableChars(this.answers[u])}return t.split=function(t){t=t.trim(),t=t.substring(1,t.length-1);var e=String.fromCharCode(7);t=t.replace(/\*\//g,e);var n=t.split("/");return n=n.map(function(t){return t=t.replace(new RegExp(e,"g"),"/"),t=i.MiscUtils.unencodeString(t),t.trim()})},Object.defineProperty(t.prototype,"allAnswers",{get:function(){var t=this.answers.slice();return this.initialText&&t.push(this.initialText),t},enumerable:!0,configurable:!0}),t}();e.SplitGap=c;var u=function(){function t(t,e,n,i){void 0===n&&(n=r.Standard),void 0===i&&(i=new o.Flags),this.options=i,this.process(t,e,n)}return t.prototype.process=function(t,e,i){var o=this;void 0===i&&(i=r.Standard),this.preprocess(t,i),this.text=t;var s=this.getSearchExp(i),a=[];this.outputText=t.replace(s,function(t){var i=new l(new c(t,o.options));return a.push(i),n.isFunction(e)?e(a.length-1,t,i,o):e}),this.items=a},t.prototype.getWidestCharCount=function(t){for(var e=this.widestCharCount,n=0,i=t;n<i.length;n++){var o=i[n];e=Math.max(e,o.length)}return e},t.prototype.preprocess=function(t,e){var i=this;void 0===e&&(e=r.Standard);var o=this.getSearchExp(e);this.answers=[],this.widestCharCount=0,t.replace(o,function(t){for(var e=new c(t,i.options),o=0,r=e.allAnswers;o<r.length;o++){var s=r[o];i.widestCharCount=Math.max(i.widestCharCount,s.length)}return i.answers=n.union(i.answers,e.allAnswers),t})},t.prototype.getSearchExp=function(t){if(t===r.Standard)return/\[.*?]/g;throw new Error("GapTransformer: unknown GapType")},t}();e.GapTransformer=u});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/shared/model/FIBBaseQuestionModel",["require","exports","vsef/QuestionModel","vsef/utils/MiscUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n,o,r){var s=t.call(this,n,o,r)||this;return s.text=i.MiscUtils.removeHtmlWhitespace(e.find("question questionText").text()),s}return __extends(e,t),Object.defineProperty(e.prototype,"hasRightAnswers",{get:function(){for(var t=0;t<this.answers.length;t++){if(this.answers[t].correct)return!0}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"score",{get:function(){var t=this.answers.reduce(function(t,e){return e.correct?t[0]+=1:t[1]+=1,t},[0,0]),e=t[0],n=t[1];return n=Math.min(this.possibleScore-e,n),this.calculateScore(e,n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"answerCount",{get:function(){return this.answers.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"correct",{get:function(){return this.answers.filter(function(t){return t.correct}).length===this.answers.length},enumerable:!0,configurable:!0}),e.prototype.getAnswer=function(){return this.answers.map(function(t){return t.userInput})},e.prototype.createAnswerListeners=function(){for(var t=0,e=this.answers;t<e.length;t++){var n=e[t];this.listenTo(n.onUserInputChange,this.answerUserInputChange)}},e.prototype.setState=function(e){t.prototype.setState.call(this,e);for(var n=e.state,i=0;i<n.answers.length;i++)this.answers[i].userInput=n.answers[i].userInput},e.prototype.isValidState=function(e){return this.answers.length===e.state.answers.length&&t.prototype.isValidState.call(this,e)},e.prototype.setUserAnswer=function(t,e){this.answers[t].updateUserInput(e),this.modified=!0,this.checkComplete(),this.onStateChange.trigger()},e.prototype.checkAnswer=function(){this.submitted=!0,this.onSubmittedChange.trigger()},e.prototype.checkComplete=function(){var t=this;this.complete=this.answers.filter(function(e){switch(t.completionSettings.kind){case"Type-in":return e.userInputLength>=t.completionSettings.charMin;default:return e.hasUserInput}}).length},e}(n.QuestionModel);e.FIBBaseQuestionModel=o});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/CLOZ/model/CLOZQuestionModel",["require","exports","lodash","vsef/Log","./CLOZAnswerModel","vsef/utils/MiscUtils","vsef/utils/GapUtils","../../shared/model/BaseEngineModel","../../shared/model/FIBBaseQuestionModel"],function(t,e,n,i,o,r,s,a,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(e,l,c,u,h,d,p){var f=this;i.note("created CLOZQuestionModel"),f=t.call(this,e,l,d)||this,f.hint.stimulus=a.BaseEngineModel.extractStimulus(e.find("hint"),c),f.answers=[];var g=f.text,m=new s.GapTransformer(g,function(t,e,i){for(var s=r.MiscUtils.getWidestDefaultText(i.answers)+r.MiscUtils.remToPx("2rem"),a='<option value=""></option>',c=[],d=0,g=p?i.answers:i.randomAnswers;d<g.length;d++){var m=g[d];m=n.escape(m),a+='<option value="'+m+'">'+m+"</option>",c.push(m)}s=Math.round(100*r.MiscUtils.pxToRem(s))/100;var v=new o.CLOZAnswerModel(i.answers[0]);f.answers.push(v);var y=u+"-select-"+l+"-"+t;return'<span class="print-answer">&#160;&#160;'+c.join(" / ")+'&#160;&#160;</span><span class="answer-block">\n\t\t\t\t\t\t<label class="visuallyhidden" for="'+y+'">Fill-in blank '+(t+1)+'</label>\n\t\t\t\t\t\t<select id="'+y+'" class="drop-element drop-element-select" spellcheck="false"\n\t\t\t\t\t\tstyle="min-width:'+s+"rem; background-position: "+(h?"left 0.625rem":"right 0.625rem")+' center !important;"> '+a+' </select>\n\t\t\t\t\t\t<span class="answer-feedback" aria-hidden="true"><span class="answer-feedback-wrapper"><span class="user-answer" style="min-width: '+s+'rem"></span><span class="correct-answer" style="min-width: '+s+'rem"></span></span></span>\n\t\t\t\t\t\t<span class="answer-a11y-feedback visuallyhidden" aria-hidden="true"></span>\n\t\t\t\t\t</span>'});return f.transformedText=m.outputText,f.createAnswerListeners(),f}return __extends(e,t),Object.defineProperty(e.prototype,"correct",{get:function(){return this.answers.filter(function(t){return t.correct}).length===this.answers.length},enumerable:!0,configurable:!0}),e.prototype.getQuestionState=function(){return{kind:"CLOZQuestionState",submitted:this.submitted,showFeedback:this.showFeedback,revealAnswer:this.revealAnswer,answers:this.answers.map(function(t){return{userInput:t.userInput}})}},e.prototype.getCorrectAnswer=function(){return this.answers.map(function(t){return t.text})},e.prototype.resetAnswer=function(){t.prototype.resetAnswer.call(this);for(var e=0;e<this.answers.length;e++){this.answers[e].updateUserInput("")}this.onSubmittedChange.trigger()},e.prototype.answerUserInputChange=function(){this.onAnswerChange.trigger(),this.onStateChange.trigger()},e}(l.FIBBaseQuestionModel);e.CLOZQuestionModel=c});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/CLOZ/model/CLOZPageModel",["require","exports","vsef/PageModel"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,i,o){return void 0===o&&(o=""),t.call(this,e,n,i,o)||this}return __extends(e,t),e}(n.Page);e.CLOZPageModel=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/CLOZ/model/CLOZModel",["require","exports","vsef/Log","../../shared/model/BaseEngineModel","./CLOZQuestionModel","./CLOZPageModel","vsef/Types"],function(t,e,n,i,o,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var i=this;return n.note("created CLOZModel"),i=t.call(this,e)||this,i.completenessSettings={kind:"Selection",min:1},i}return __extends(e,t),e.prototype.readData=function(){n.note("CLOZModel parse activity data"),t.prototype.readData.call(this),this.autoNumberQuestions=s.stringOptionToBool(this.$data.find("autoNumberQuestions").attr("value"),!1);for(var e=this.$data.find("questions > question"),a=[],l=[],c=0,u=0;u<e.length;u++){var h=e.eq(u),d=new o.CLOZQuestionModel(h,c,this.paths,this.id+"-p"+u,this.isRTL,this.completenessSettings,this.survey);if(!d.isEmpty){var p=i.BaseEngineModel.extractStimulus(h.find("stimulus"),this.paths),f=i.BaseEngineModel.extractStimulus(h.find("feedback"),this.paths);a.push(d);var g=new r.CLOZPageModel([d],p,f);g.autoNumberQuestions=this.autoNumberQuestions,g.stimulusPlacement=this.stimulusPlacement,l.push(g),c++}}this.setData(l,a)},e}(i.BaseEngineModel);e.CLOZModel=a});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/CLOZ/view/CLOZQuestionView",["require","exports","vsef/Log","vsef/QuestionView","vsef/utils/DisplayUtils"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,i,o,r){var s=this;return n.note("CLOZQuestion View"),s=t.call(this,e,i,o,r)||this,s.listenTo(e.onSubmittedChange,s.renderSubmitted),s.listenTo(e.onRevealAnswerChange,s.renderRevealAnswer),s.listenTo(e.onAnswerChange,s.answerChange),s.listenTo(e.onTakeFocus,s.takeFocus),s}return __extends(e,t),e.prototype.getEvents=function(){return{"change .drop-element-select":this.selectClick}},e.prototype.disabledChange=function(){this.renderSubmitted()},e.prototype.selectClick=function(t){var e=this.$(t.currentTarget).val(),n=this.$(".drop-element-select").index(t.currentTarget);this.model.setUserAnswer(n,e)},e.prototype.answerChange=function(){this.renderSubmitted()},e.prototype.renderSubmitted=function(){for(var t=this.$(".answer-block"),e=this.model.submitted,n=0;n<this.model.answers.length;n++){var i=t.eq(n),o=this.model.answers[n],r=e,s=o.correct,a=i.find(".drop-element-select"),l=i.find(".answer-feedback"),c=i.find("label"),u=l.find(".user-answer"),h=l.find(".correct-answer"),d=i.find(".answer-a11y-feedback");a.prop("disabled",this.model.disabled),r||this.model.revealAnswer&&s?(l.removeClass("correct incorrect").addClass(s?"correct":"incorrect"),r&&(h.text(o.text),c.attr("aria-hidden","true"),d.attr("aria-hidden","false"),u.text(o.userInput),a.attr("aria-hidden","true"),c.attr("aria-hidden","true"))):(o.hasUserInput?a.val(o.userInput):a.val(""),l.removeClass("correct incorrect"),u.text(""),h.text(""),c.attr("aria-hidden","false"),d.attr("aria-hidden","true"),a.attr("aria-hidden","false"))}this.createA11YFeedback(),this.model.submitted&&this.$(".dragable-element").draggable("disable")},e.prototype.renderRevealAnswer=function(){this.createA11YFeedback()},e.prototype.takeFocus=function(){var t=this.$(".answer-block").eq(0).find(".drop-element-select");o.DisplayUtils.scrollIntoView({$to:this.$el,$focusCtl:t})},e.prototype.createA11YFeedback=function(){for(var t=this.$(".answer-block"),e=this.model.submitted,n=this.model.revealAnswer,i=0;i<this.model.answers.length;i++){var o=t.eq(i),r=o.find(".answer-a11y-feedback");if(e){var s=this.model.answers[i],a=s.correct,l=this.templates.getText("common-ui-text-answer"),c=this.templates.getText("common-ui-text-not-answered"),u=this.templates.getText("common-ui-text-marked-"+(a?"correct":"incorrect")),h=!(!s.userInput||!s.userInput.length),d=h?s.userInput:c,p=l+" "+d+" "+u;if(n&&!a){p+=", "+this.templates.getText("common-ui-correct-answer")+" "+s.text}r.html(p)}else r.text("")}},e}(i.QuestionView);e.CLOZQuestionView=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/CLOZ/view/CLOZPageView",["require","exports","vsef/PageView","vsef/Log","./CLOZQuestionView"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,o,r,s){return i.note("CLOZPageView"),t.call(this,e,n,o,r,s)||this}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this),this.questionViews=[];for(var e=0;e<this.model.questions.length;e++)this.questionViews.push(new o.CLOZQuestionView(this.model.questions[e],this.templates,"",this.$(".question").eq(e)));return this},e}(n.PageView);e.CLOZPageView=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/CLOZ/view/CLOZView",["require","exports","vsef/Log","./CLOZPageView","vsef/ActivityView"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,i,o,r){var s=this;return n.note("CLOZView"),s=t.call(this,e,i,o,r)||this,s.listenTo(e.onPagesChange,s.renderPages),s}return __extends(e,t),e.prototype.renderPages=function(){for(var t=0,e=0,n=this.model.pages;e<n.length;e++){var o=n[e],r=this.$el.find(".page").eq(t),s=new i.CLOZPageView(o,this.templates,"common-ui-page-base","cloz-page-template");this.appendChildView(s,r),this.pageViews.push(s),t++}},e}(o.ActivityView);e.CLOZView=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/CLOZ/CLOZActivity",["require","exports","vsef/Log","vsef/Activity","./model/CLOZModel","./view/CLOZView"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){var e=t.call(this)||this;return n.note("created CLOZ Activity"),e}return __extends(e,t),e.prototype.buildUI=function(t,e){this.model=new o.CLOZModel,this.view=new r.CLOZView(this.model,t,this.context.engineClassLower+"-page-template",e)},e.prototype.getActivity=function(){return new e},e}(i.Activity);e.CLOZActivity=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/CLOZ/CLOZEngine",["require","exports","vsef/Log","./model/CLOZModel","./CLOZActivity","../shared/BaseActivityEngine"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e){return n.note("created CLOZ engine"),t.call(this,e)||this}return __extends(e,t),e.prototype.createModel=function(t){return new i.CLOZModel(t)},e.prototype.getActivity=function(){return new o.CLOZActivity},e}(r.BaseActivityEngine);e.CLOZEngine=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/FIB/model/FIBAnswerModel",["require","exports","vsef/Log","../../shared/model/FIBBaseAnswerModel","vsef/Types","vsef/utils/StringUtils"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,i,o){var r=t.call(this)||this;return n.note("created FIBAnswerModel"),r.userInput=i,r.answers=e.slice(),r.initialText=i,r.answerSensitivity=o,r}return __extends(e,t),Object.defineProperty(e.prototype,"correct",{get:function(){var t=this,e=r.default.normalizePunctuation(this.userInput);return this.answers.filter(function(n,i,s){return t.answerSensitivity===o.TypedAnswerSensitivity.ExactMatch?r.default.normalizePunctuation(n)===e:r.default.normalizePunctuation(n).toUpperCase()===e.toUpperCase()}).length>=1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasInitialText",{get:function(){return!!(this.initialText&&this.userInput.trim().length>0)},enumerable:!0,configurable:!0}),e}(i.default);e.FIBAnswerModel=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/FIB/model/FIBQuestionModel",["require","exports","lodash","vsef/Log","./FIBAnswerModel","vsef/utils/MiscUtils","vsef/utils/GapUtils","vsef/Flags","../../shared/model/BaseEngineModel","../../shared/model/FIBBaseQuestionModel"],function(t,e,n,i,o,r,s,a,l,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function e(e,c,u,h,d,p){var f=this;i.note("createdFIBQuestionModel"),f=t.call(this,e,c,p)||this,f.hint.stimulus=l.BaseEngineModel.extractStimulus(e.find("hint"),u);var g=[],m=f.text,v=-1,y=function(t,e,i,s){if(-1===v){for(var a=0,l=s.answers;a<l.length;a++){var u=l[a];v=Math.max(v,r.MiscUtils.getDefaultFontSize(u)+r.MiscUtils.remToPx("2rem"))}v=Math.round(125*r.MiscUtils.pxToRem(v))/100}var p=new o.FIBAnswerModel(i.answers,i.initialText,d);g.push(p);var f=h+"-gaptext-"+c+"-"+t,m=i.initialText?" is-initial":"";return'\n\t\t\t<span class="print-answer" style="padding-left: '+v+'rem"> </span>\n\t\t\t<span class="answer-block" style="width: '+v+'rem;">\n\t\t\t\t<label class="visuallyhidden" for="'+f+'">Fill-in blank '+(t+1)+'</label>\n\t\t\t\t<input id="'+f+'" type="text" class="answer'+m+'" spellcheck\n\t\t\t\t="false" style="width: '+v+'rem" value="'+n.escape(i.initialText)+'"/>\n\t\t\t\t<span class="answer-feedback" aria-hidden="true"><span class="answer-feedback-wrapper"><span class="user-answer" style="width: auto"></span><span class="correct-answer" style="width: auto"></span></span></span>\n\t\t\t\t<span class="answer-a11y-feedback visuallyhidden" aria-hidden="true"></span>\n\t\t\t</span>'},b=new a.Flags(s.GapTransformOption.Typed),_=new s.GapTransformer(m,y,s.GapType.Standard,b);return f.setData({audio:e.find("question questionAudio").text()}),f.transformedText=_.outputText,f.answers=g,f.widest=v,f.createAnswerListeners(),f}return __extends(e,t),Object.defineProperty(e.prototype,"correct",{get:function(){return this.answers.filter(function(t){return t.correct}).length===this.answers.length},enumerable:!0,configurable:!0}),e.prototype.getQuestionState=function(){return{kind:"FIBQuestionState",answers:this.answers.map(function(t){return{userInput:t.userInput}}),submitted:this.submitted,showFeedback:this.showFeedback,revealAnswer:this.revealAnswer}},e.prototype.getCorrectAnswer=function(){return this.answers.map(function(t){return t.answers.join("\n")})},e.prototype.resetAnswer=function(){t.prototype.resetAnswer.call(this);for(var e=0;e<this.answers.length;e++){var n=this.answers[e];n.updateUserInput(n.initialText)}this.onSubmittedChange.trigger()},e.prototype.answerUserInputChange=function(){this.onAnswerChange.trigger(),this.onStateChange.trigger()},e}(c.FIBBaseQuestionModel);e.FIBQuestionModel=u});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/FIB/model/FIBPageModel",["require","exports","vsef/PageModel"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,i,o){return void 0===o&&(o=""),t.call(this,e,n,i,o)||this}return __extends(e,t),e}(n.Page);e.FIBPageModel=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/FIB/model/FIBModel",["require","exports","./FIBQuestionModel","vsef/Log","./FIBPageModel","../../shared/model/BaseEngineModel","vsef/Types"],function(t,e,n,i,o,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=this;return i.note("created FIBModel"),n=t.call(this,e)||this,n.completenessSettings={min:1,kind:"Type-in",charMin:1},n}return __extends(e,t),e.prototype.readData=function(){i.note("FIBModel parse activity data"),t.prototype.readData.call(this),this.autoNumberQuestions=s.stringOptionToBool(this.$data.find("autoNumberQuestions").attr("value"),!0);for(var e=s.stringToTypedAnswerSensitivity(this.$data.find("answerSensitivity").attr("value")),a=this.$data.find("questions > question"),l=[],c=[],u=0,h=0;h<a.length;h++){var d=a.eq(h),p=new n.FIBQuestionModel(d,u,this.paths,this.id+"-p"+h,e,this.completenessSettings);if(!p.isEmpty){var f=r.BaseEngineModel.extractStimulus(d.find("stimulus"),this.paths),g=r.BaseEngineModel.extractStimulus(d.find("feedback"),this.paths);l.push(p);var m=new o.FIBPageModel([p],f,g);m.autoNumberQuestions=this.autoNumberQuestions,m.stimulusPlacement=this.stimulusPlacement,c.push(m),u++}}var v=-1;if(-1===v)for(var y=0,b=l;y<b.length;y++){var p=b[y];v=Math.max(v,p.widest)}for(var _=0,w=l;_<w.length;_++){var p=w[_];p.widest=v}this.setData(c,l)},e}(r.BaseEngineModel);e.FIBModel=a});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/FIB/view/FIBQuestionView",["require","exports","lodash","vsef/Log","vsef/utils/MiscUtils","vsef/QuestionView","vsef/utils/Environment","vsef/utils/Keyboard","vsef/utils/DisplayUtils"],function(t,e,n,i,o,r,s,a,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(e,n,o,r){var s=this;return i.note("FIBQuestion View"),s=t.call(this,e,n,o,r)||this,s.listenTo(e.onSubmittedChange,s.renderSubmitted),s.listenTo(e.onRevealAnswerChange,s.renderRevealAnswer),s.listenTo(e.onTakeFocus,s.takeFocus),s.listenTo(e.onAnswerChange,s.modelAnswerChange),s.$el.find("input").css("width",s.model.widest+"rem"),s}return __extends(e,t),e.prototype.getEvents=function(){return{"input .answer":this.answerChange,"keyup .answer":this.answerKeyup,"blur .answer":this.answerBlur}},e.prototype.disabledChange=function(){this.renderSubmitted()},e.prototype.answerChange=function(t){var e=this.$(t.currentTarget),n=e.val().trim(),i=this.$(".answer").index(t.currentTarget);this.model.setUserAnswer(i,n),this.renderInitialAnswerState(e)},e.prototype.modelAnswerChange=function(){this.renderSubmitted()},e.prototype.answerKeyup=function(t){s.Environment.isBookshelf&&a.Keyboard.HORZ_ARROW.has(t.keyCode)&&t.stopPropagation()},e.prototype.answerBlur=function(t){var e=this.$(t.currentTarget),n=this.$(".answer").index(t.currentTarget),i=this.model.answers[n].userInput;e.val()!==i&&e.val(i)},e.prototype.renderSubmitted=function(){for(var t=this.$(".answer-block"),e=this.model.submitted,n=0;n<this.model.answers.length;n++){var i=this.model.answers[n],r=e,s=i.correct,a=t.eq(n),l=a.find(".answer-feedback"),c=a.find("label"),u=l.find(".user-answer"),h=l.find(".correct-answer"),d=a.find("input"),p=a.find(".answer-a11y-feedback");if(d.prop("disabled",this.model.disabled),r||this.model.revealAnswer&&s){if(l.removeClass("correct incorrect").addClass(s?"correct":"incorrect"),r){h.text(i.answers[0]),d.attr("aria-hidden","true"),c.attr("aria-hidden","true"),p.attr("aria-hidden","false"),u.text(i.userInput);var f=o.MiscUtils.getDefaultFontSize(h.text()+o.MiscUtils.getElementCSSInt(h,"padding-right","padding-left"));u.css("min-width",f)}}else i.hasUserInput?d.val(i.userInput):d.val(i.initialText),l.removeClass("correct incorrect"),u.text(""),h.text(""),d.attr("aria-hidden","false"),c.attr("aria-hidden","false"),p.attr("aria-hidden","true"),this.renderInitialAnswerState(d)}this.createA11YFeedback()},e.prototype.renderRevealAnswer=function(){this.createA11YFeedback()},e.prototype.renderInitialAnswerState=function(t){var e=this.$(".answer").index(t),n=this.model.answers[e];t.toggleClass("is-initial",n.hasInitialText&&!(n.userInput!==n.initialText))},e.prototype.takeFocus=function(){var t=this.$(".answer-block").eq(0).find(".answer");l.DisplayUtils.scrollIntoView({$to:this.$el,$focusCtl:t})},e.prototype.createA11YFeedback=function(){for(var t=this.$(".answer-block"),e=this.model.submitted,i=this.model.revealAnswer,o=0;o<this.model.answers.length;o++){var r=t.eq(o),s=r.find(".answer-a11y-feedback");if(e){var a=this.model.answers[o],l=a.correct,c=this.templates.getText("common-ui-text-answer"),u=this.templates.getText("common-ui-text-not-answered"),h=this.templates.getText("common-ui-text-marked-"+(l?"correct":"incorrect")),d=!(!a.userInput||!a.userInput.length),p=d?n.escape(a.userInput):u,f=c+" "+p+" "+h;if(i&&!l){f+=", "+this.templates.getText("common-ui-correct-answer")+" "+n.escape(a.answers[0])}s.html(f)}else s.text("")}},e}(r.QuestionView);e.FIBQuestionView=c});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/FIB/view/FIBPageView",["require","exports","vsef/PageView","vsef/Log","./FIBQuestionView"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,o,r,s){
return i.note("FIBPageView"),t.call(this,e,n,o,r,s)||this}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this),this.questionViews=[];for(var e=0;e<this.model.questions.length;e++)this.questionViews.push(new o.FIBQuestionView(this.model.questions[e],this.templates,"",this.$(".question").eq(e)));return this},e}(n.PageView);e.FIBPageView=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/FIB/view/FIBView",["require","exports","vsef/Log","./FIBPageView","vsef/ActivityView"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,i,o,r){var s=this;return n.note("FIBView"),s=t.call(this,e,i,o,r)||this,s.listenTo(e.onPagesChange,s.renderPages),s}return __extends(e,t),e.prototype.renderPages=function(){for(var t=0,e=0,n=this.model.pages;e<n.length;e++){var o=n[e],r=this.$el.find(".page").eq(t),s=new i.FIBPageView(o,this.templates,"common-ui-page-base","fib-page-template");this.appendChildView(s,r),this.pageViews.push(s),t++}},e}(o.ActivityView);e.FIBView=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/FIB/FIBActivity",["require","exports","vsef/Log","vsef/Activity","./model/FIBModel","./view/FIBView"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){var e=t.call(this)||this;return n.note("created FIB Activity"),e}return __extends(e,t),e.prototype.buildUI=function(t,e){this.model=new o.FIBModel,this.view=new r.FIBView(this.model,t,this.context.engineClassLower+"-page-template",e)},e.prototype.getActivity=function(){return new e},e}(i.Activity);e.FIBActivity=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/FIB/FIBEngine",["require","exports","vsef/Log","./model/FIBModel","./FIBActivity","../shared/BaseActivityEngine"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e){return n.note("created FIB engine"),t.call(this,e)||this}return __extends(e,t),e.prototype.createModel=function(t){return new i.FIBModel(t)},e.prototype.getActivity=function(){return new o.FIBActivity},e}(r.BaseActivityEngine);e.FIBEngine=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/FIBDD/model/FIBDDAnswerModel",["require","exports","../../shared/model/FIBBaseAnswerModel","vsef/Log"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n){var o=t.call(this,e)||this;return o.selected=!1,i.note("created FIBDDNAnswerModel"),o.distractor=n,o.userInput="",o}return __extends(e,t),e}(n.default);e.FIBDDAnswerModel=o});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/FIBDD/model/FIBDDQuestionModel",["require","exports","lodash","./FIBDDAnswerModel","vsef/utils/MiscUtils","vsef/utils/GapUtils","../../shared/model/BaseEngineModel","../../shared/model/FIBBaseQuestionModel","vsef/Log"],function(t,e,n,i,o,r,s,a,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(e,a,c,u,h,d){var p=this;l.note("created FIBDDQuestionModel"),p=t.call(this,e,a,d)||this,p.isDropDown=!1,p.hint.stimulus=s.BaseEngineModel.extractStimulus(e.find("hint"),c);for(var f=e.find("questionContent > distractors > distractor"),g=[],m=0;m<f.length;m++){var v=f.eq(m).text().trim();v&&g.push(v)}for(var y,b=[],_=p.text,w=-1,C="",x="<option value=''></option>",T=new r.GapTransformer(_,function(t,e,r,s){if(-1===w){p.shuffledAnswers=n.shuffle(s.answers.concat(g));for(var l=0,c=p.shuffledAnswers;l<c.length;l++){var d=c[l],f=o.MiscUtils.getDefaultFontSize(d)+o.MiscUtils.remToPx("2rem");f>w&&(C=d,w=f),d=n.escape(d),x+='<option value="'+d+'">'+d+"</option>"}y=s.getWidestCharCount(g),w=Math.round(100*o.MiscUtils.pxToRem(w))/100}var m=n.repeat(" ",4),v=o.MiscUtils.getDefaultFontSize(m+C+m);v+=o.MiscUtils.remToPx("2rem"),v=Math.round(100*o.MiscUtils.pxToRem(v))/100;var _=new i.FIBDDAnswerModel(r.answers[0],!1);b.push(_);var T=u+"-select-"+a+"-"+t;return'<span class="print-answer" style="padding-left: '+v+'rem"> </span><span class="answer-block">\n\t\t\t\t\t\t<label class="visuallyhidden" for="'+T+'">Fill-in blank '+(t+1)+'</label>\n\t\t\t\t\t\t<select id="'+T+'" class="drop-element drop-element-select" spellcheck="false"\n\t\t\t\t\t\tstyle="min-width:'+w+"rem; background-position: "+(h?"left 0.625rem":"right 0.625rem")+' center !important;"> '+x+' </select>\n\t\t\t\t\t\t<span class="answer-feedback" aria-hidden="true"><span class="answer-feedback-wrapper"><span class="user-answer" style="min-width: '+w+'rem"></span><span class="correct-answer" style="min-width: '+w+'rem"></span></span></span>\n\t\t\t\t\t\t<span class="answer-a11y-feedback visuallyhidden" aria-hidden="true"></span>\n\t\t\t\t\t</span>'}),k=0,S=g;k<S.length;k++){var v=S[k];b.push(new i.FIBDDAnswerModel(v,!0))}return p.setData({audio:e.find("question questionAudio").text()}),p.transformedText=T.outputText,p.answers=b,p.createAnswerListeners(),p}return __extends(e,t),Object.defineProperty(e.prototype,"answerCount",{get:function(){return this.getCorrectAnswer().length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"correct",{get:function(){return this.answers.filter(function(t){return t.correct||t.distractor}).length===this.answers.length},enumerable:!0,configurable:!0}),e.prototype.getQuestionState=function(){return{kind:"FIBDDQuestionState",submitted:this.submitted,showFeedback:this.showFeedback,revealAnswer:this.revealAnswer,answers:this.answers.map(function(t){return{userInput:t.userInput}})}},e.prototype.getCorrectAnswer=function(){return this.answers.filter(function(t){return!t.distractor}).map(function(t){return t.text})},e.prototype.setUserAnswer=function(t,e){this.modified=!0,this.answers[t].updateUserInput(e),this.answers[t].selected=!0,this.modified=!0,this.checkComplete(),this.onStateChange.trigger()},e.prototype.resetAnswer=function(){t.prototype.resetAnswer.call(this);for(var e=0;e<this.answers.length;e++){var n=this.answers[e];n.updateUserInput(""),n.selected=!1}this.onSubmittedChange.trigger()},e.prototype.answerUserInputChange=function(){this.onAnswerChange.trigger()},e}(a.FIBBaseQuestionModel);e.FIBDDQuestionModel=c});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/FIBDD/model/FIBDDPageModel",["require","exports","vsef/PageModel"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,i,o){return void 0===o&&(o=""),t.call(this,e,n,i,o)||this}return __extends(e,t),e}(n.Page);e.FIBDDPageModel=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/FIBDD/model/FIBDDModel",["require","exports","../../shared/model/BaseEngineModel","./FIBDDQuestionModel","./FIBDDPageModel","vsef/Types","vsef/Log"],function(t,e,n,i,o,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=this;return s.note("created FIBDDModel"),n=t.call(this,e)||this,n.completenessSettings={kind:"Selection",min:1},n}return __extends(e,t),e.prototype.readData=function(){s.note("FIBDDModel parse activity data"),t.prototype.readData.call(this),this.autoNumberQuestions=r.stringOptionToBool(this.$data.find("autoNumberQuestions").attr("value"),!1);for(var e=this.$data.find("questions > question"),a=[],l=[],c=0,u=0;u<e.length;u++){var h=e.eq(u),d=new i.FIBDDQuestionModel(h,c,this.paths,this.id+"-p"+u,this.isRTL,this.completenessSettings);if(!d.isEmpty){var p=n.BaseEngineModel.extractStimulus(h.find("stimulus"),this.paths),f=n.BaseEngineModel.extractStimulus(h.find("feedback"),this.paths);a.push(d);var g=new o.FIBDDPageModel([d],p,f);g.autoNumberQuestions=this.autoNumberQuestions,g.stimulusPlacement=this.stimulusPlacement,l.push(g),c++}}this.setData(l,a)},e}(n.BaseEngineModel);e.FIBDDModel=a});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/FIBDD/view/FIBDDQuestionView",["require","exports","vsef/Log","vsef/QuestionView","vsef/utils/DisplayUtils"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,i,o,r){var s=this;return n.note("FIBDDQuestion View"),s=t.call(this,e,i,o,r)||this,s.listenTo(e.onSubmittedChange,s.renderSubmitted),s.listenTo(e.onRevealAnswerChange,s.renderRevealAnswer),s.listenTo(e.onAnswerChange,s.modelAnswerChange),s.listenTo(e.onTakeFocus,s.takeFocus),s}return __extends(e,t),e.prototype.getEvents=function(){return{"drag .dragable-element":this.startDragging,"drop .droppable":this.answerClick,"change .drop-element-select":this.selectClick}},e.prototype.disabledChange=function(){this.renderSubmitted()},e.prototype.startDragging=function(t,e){this.$(t.currentTarget).parent().addClass("removed-element")},e.prototype.answerClick=function(t,e){var n=e.draggable[0].innerHTML,i=this.$(".droppable").index(t.currentTarget);this.$(e.draggable[0].parentElement).addClass("removed-element"),this.$(e.draggable[0]).css("visibility","hidden"),e.draggable.css("background","none"),""!==this.$(t.currentTarget).val()?(this.$("#"+i).animate({left:0,top:0},300,"linear"),this.$("#"+i).css("background","#ececec"),this.$("#"+i).css("visibility","visible"),this.$("#"+i).removeAttr("id"),this.$(e.draggable[0]).attr("id",i)):this.$(e.draggable[0]).attr("id",i),this.$(t.currentTarget).val(n),e.draggable.position({my:"center",at:"center",of:t.target,using:function(t,e){e.element.element.animate(t,200,"linear")}}),this.model.setUserAnswer(i,n)},e.prototype.selectClick=function(t){var e=this.$(t.currentTarget).val(),n=this.$(".drop-element-select").index(t.currentTarget);this.model.setUserAnswer(n,e),this.model.isDropDown=!0},e.prototype.modelAnswerChange=function(){this.renderSubmitted()},e.prototype.renderSubmitted=function(){for(var t=this.$(".answer-block"),e=this.model.submitted,n=0;n<this.model.answers.length;n++){var i=t.eq(n),o=this.model.answers[n],r=e,s=o.correct,a=i.find(".drop-element-select"),l=i.find(".answer-feedback"),c=i.find("label"),u=l.find(".user-answer"),h=l.find(".correct-answer"),d=i.find(".answer-a11y-feedback");a.prop("disabled",this.model.disabled),r||this.model.revealAnswer&&s?(l.removeClass("correct incorrect").addClass(s?"correct":"incorrect"),r&&(h.text(o.text),c.attr("aria-hidden","true"),d.attr("aria-hidden","false"),u.text(o.userInput),a.attr("aria-hidden","true"))):(o.hasUserInput?a.val(o.userInput):a.val(""),l.removeClass("correct incorrect"),u.text(""),h.text(""),c.attr("aria-hidden","false"),d.attr("aria-hidden","true"),a.attr("aria-hidden","false"))}if(this.model.isResetting){this.$(".dragable-element").draggable("enable");var p=this.$(".dragable-element").data("left"),f=this.$(".dragable-element").data("top");this.$(".dragable-element").animate({left:p,top:f}),this.$(".dragable-element").css("visibility","visible"),this.$(".dragable-element").css("background","#ececec"),this.$(".dragable-element").css("color","#444444")}this.model.submitted&&this.$(".dragable-element").draggable("disable"),this.createA11YFeedback()},e.prototype.renderRevealAnswer=function(){this.createA11YFeedback()},e.prototype.takeFocus=function(){var t=this.$(".drop-element-select").eq(0);o.DisplayUtils.scrollIntoView({$to:this.$el,$focusCtl:t})},e.prototype.createA11YFeedback=function(){for(var t=this.$(".answer-block"),e=this.model.submitted,n=this.model.revealAnswer,i=0;i<this.model.answers.length;i++){var o=t.eq(i),r=o.find(".answer-a11y-feedback");if(e){var s=this.model.answers[i],a=s.correct,l=this.templates.getText("common-ui-text-answer"),c=this.templates.getText("common-ui-text-not-answered"),u=this.templates.getText("common-ui-text-marked-"+(a?"correct":"incorrect")),h=!(!s.userInput||!s.userInput.length),d=h?s.userInput:c,p=l+" "+d+" "+u;if(n&&!a){p+=", "+this.templates.getText("common-ui-correct-answer")+" "+s.text}r.html(p)}else r.text("")}},e}(i.QuestionView);e.FIBDDQuestionView=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/FIBDD/view/FIBDDPageView",["require","exports","vsef/PageView","vsef/Log","./FIBDDQuestionView"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,o,r,s){return i.note("FIBDDPageView"),t.call(this,e,n,o,r,s)||this}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this),this.questionViews=[];for(var e=0;e<this.model.questions.length;e++)this.questionViews.push(new o.FIBDDQuestionView(this.model.questions[e],this.templates,"",this.$(".question").eq(e)));if(this.$(".dragable-element").draggable({revert:"invalid",zIndex:100,containment:this.$(".question")}),this.$(".question").css("position","relative"),this.$(".droppable").droppable(),this.$(".dragable-element").length){var n=this.$(".dragable-element").position().left,i=this.$(".dragable-element").position().top;this.$(".dragable-element").data("left",n).data("top",i)}return this},e}(n.PageView);e.FIBDDPageView=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/FIBDD/view/FIBDDView",["require","exports","jquery","vsef/Log","./FIBDDPageView","vsef/ActivityView"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,n,o,r){var s=this;return i.note("FIBDDView"),s=t.call(this,e,n,o,r)||this,s.listenTo(e.onPagesChange,s.renderPages),s}return __extends(e,t),e.prototype.destroy=function(){n(".dragable-element").each(function(){n(this).draggable&&n(this).draggable("destroy"),n(this).remove()})},e.prototype.renderPages=function(){for(var t=0,e=0,n=this.model.pages;e<n.length;e++){var i=n[e],r=this.$el.find(".page").eq(t),s=new o.FIBDDPageView(i,this.templates,"common-ui-page-base","fibdd-page-template");this.appendChildView(s,r),this.pageViews.push(s),t++}},e}(r.ActivityView);e.FIBDDView=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/FIBDD/FIBDDActivity",["require","exports","vsef/Log","vsef/Activity","./model/FIBDDModel","./view/FIBDDView"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){var e=t.call(this)||this;return n.note("created FIBDD Activity"),e}return __extends(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.view.destroy()},e.prototype.buildUI=function(t,e){this.model=new o.FIBDDModel,this.view=new r.FIBDDView(this.model,t,this.context.engineClassLower+"-page-template",e)},e.prototype.getActivity=function(){return new e},e}(i.Activity);e.FIBDDActivity=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/FIBDD/FIBDDEngine",["require","exports","vsef/Log","./model/FIBDDModel","./FIBDDActivity","../shared/BaseActivityEngine"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e){return n.note("created FIBDD engine"),t.call(this,e)||this}return __extends(e,t),e.prototype.createModel=function(t){return new i.FIBDDModel(t)},e.prototype.getActivity=function(){return new o.FIBDDActivity},e}(r.BaseActivityEngine);e.FIBDDEngine=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/STIMUL/model/STIMULQuestionModel",["require","exports","vsef/Log","vsef/QuestionModel"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return n.note("createdSTIMULQuestionModel"),t.call(this,0)||this}return __extends(e,t),e.prototype.getState=function(){return null},e.prototype.setState=function(t){},e.prototype.getQuestionState=function(){},e.prototype.getCorrectAnswer=function(){return null},e.prototype.getQuestion=function(){return null},e.prototype.getAnswer=function(){return null},e.prototype.checkAnswer=function(){},e.prototype.resetAnswer=function(){t.prototype.resetAnswer.call(this)},e.prototype.checkComplete=function(){},e}(i.QuestionModel);e.STIMULQuestionModel=o});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/STIMUL/model/STIMULPageModel",["require","exports","vsef/PageModel"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,i,o){return void 0===o&&(o=""),t.call(this,e,n,i,o)||this}return __extends(e,t),e}(n.Page);e.STIMULPageModel=i});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/STIMUL/model/STIMULModel",["require","exports","vsef/Log","../../shared/model/BaseEngineModel","./STIMULQuestionModel","./STIMULPageModel"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e){return n.note("created STIMULModel"),t.call(this,e)||this}return __extends(e,t),e.prototype.getState=function(){return null},e.prototype.loadState=function(t){},e.prototype.readData=function(){n.note("STIMULModel parse activity data"),t.prototype.readData.call(this);var e=[],s=[],a=new o.STIMULQuestionModel,l=i.BaseEngineModel.extractStimulus(this.$data.find("stimulus"),this.paths);if(!l.isEmpty){e.push(a);var c=new r.STIMULPageModel(e,l);s.push(c)}this.setData(s,e)},e}(i.BaseEngineModel);e.STIMULModel=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/STIMUL/view/STIMULQuestionView",["require","exports","vsef/Log","vsef/View"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,i,o,r){return n.note("STIMULQuestion View"),t.call(this,e,i,o,r)||this}return __extends(e,t),e}(i.View);e.STIMULQuestionView=o});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/STIMUL/view/STIMULPageView",["require","exports","vsef/PageView","vsef/Log","./STIMULQuestionView"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,o,r,s){return i.note("STIMULPageView"),t.call(this,e,n,o,r,s)||this}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this),this.questionViews=[];for(var e=0;e<this.model.questions.length;e++)this.questionViews.push(new o.STIMULQuestionView(this.model.questions[e],this.templates,"",this.$(".question").eq(e)));return this},e}(n.PageView);e.STIMULPageView=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/STIMUL/view/STIMULView",["require","exports","vsef/Log","./STIMULPageView","vsef/ActivityView"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,i,o,r){var s=this;return n.note("STIMULView"),s=t.call(this,e,i,o,r)||this,s.listenTo(e.onPagesChange,s.renderPages),s}return __extends(e,t),e.prototype.renderPages=function(){for(var t=0,e=0,n=this.model.pages;e<n.length;e++){var o=n[e],r=this.$el.find(".page").eq(t),s=new i.STIMULPageView(o,this.templates,"common-ui-page-base","stimul-page-template");this.appendChildView(s,r),this.pageViews.push(s),t++}},e}(o.ActivityView);e.STIMULView=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/STIMUL/STIMULActivity",["require","exports","vsef/Log","vsef/Activity","./model/STIMULModel","./view/STIMULView","vsef/Activity"],function(t,e,n,i,o,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){var e=t.call(this)||this;return n.note("created STIMUL Activity"),e}return __extends(e,t),e.prototype.buildUI=function(t,e){if(this.model=new o.STIMULModel,this.model.attributes.add(s.ActivityAttribute.NoCommonUIChrome),this.model.attributes.add(s.ActivityAttribute.Unsubmittable),this.model.attributes.remove([s.ActivityAttribute.Scorable,s.ActivityAttribute.Savable,s.ActivityAttribute.Numerable,s.ActivityAttribute.QuestionGroup]),"hideshow"===this.context.engineNativeClassLower){this.activityMinimized=!0,this.commonUI.$hostEl.find(".header-area").attr("role","button").attr("aria-expanded","false").attr("aria-label","Select to reveal hidden content").attr("aria-controls",this.commonUI.id+"-activity "+this.commonUI.id+"-footer"),this.model.attributes.remove(s.ActivityAttribute.NoCommonUIChrome),this.model.attributes.add(s.ActivityAttribute.HideShowsEnabled),this.commonUI.$hostEl.find(".activity, .footer").hide();var n=this.commonUI.$hostEl.find(".hide-show-icon");n&&(n.addClass("collapsed"),n.removeClass("hidden"))}this.view=new r.STIMULView(this.model,t,this.context.engineClassLower+"-page-template",e)},e.prototype.getActivity=function(){return new e},e}(i.Activity);e.STIMULActivity=a});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/STIMUL/STIMULEngine",["require","exports","vsef/Log","./model/STIMULModel","./STIMULActivity","../shared/BaseActivityEngine"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e){return n.note("created STIMUL engine"),t.call(this,e)||this}return __extends(e,t),e.prototype.createModel=function(t){return new i.STIMULModel(t)},e.prototype.getActivity=function(){return new o.STIMULActivity},e}(r.BaseActivityEngine);e.STIMULEngine=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("enginesRoot/engines/SLIDES/model/SLIDESModel",["require","exports","vsef/Log","vsef/Observable","vsef/InteractiveModel","vsef/Types"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e,n,i,o,s,a,l){this.image=t?l+t:"",this.imageTitle=e,this.imageCaption=n,this.imageAlt=i,this.enableZoom="on"===o||"yes"===o,this.enableBorder=r.stringOptionToBool(s,!1),this.searchableImage="on"===a||"yes"===a}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){return!this.image.trim().length},enumerable:!0,configurable:!0}),t}();e.Slide=s;var a=function(t){function e(e){return n.note("created SLIDESModel"),t.call(this,e)||this}return __extends(e,t),e.prototype.getIsEmpty=function(){return!this.slides||0===this.slides.length},Object.defineProperty(e.prototype,"hasMultipleSlides",{get:function(){return this.slides&&this.slides.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"atEndSlide",{get:function(){return this.itemIndex===this.slides.length-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"atStartSlide",{get:function(){return 0===this.itemIndex},enumerable:!0,configurable:!0}),e.prototype.previousSlide=function(){var t=Math.max(this.itemIndex-1,0);this.itemIndex=t},e.prototype.nextSlide=function(){var t=Math.min(this.itemIndex+1,this.slides.length-1);this.itemIndex=t},e.prototype.readData=function(){n.note("SLIDESModel parse activity data");for(var t=this.$data.find("slide"),e=[],i=0;i<t.length;i++){var o=t.eq(i),r=new s(o.find("image").text(),o.find("slideTitle").text(),o.find("slideCaption").text(),o.find("imageAltText").text(),o.find("enableZoom").attr("value"),o.find("enableBorder").attr("value"),o.find("searchableImage").attr("value"),this.paths.mediaPath);r.isEmpty||e.push(r)}this.slides=e;var a=this.$data.find("title"),l=this.$data.find("description");this.headerTitle=a.text(),this.headerDesc=l.text()},__decorate([i.observable],e.prototype,"itemIndex",void 0),e}(o.InteractiveModel);e.SLIDESModel=a}),function(t,e,n,i){"use strict";function o(t,e,n){return setTimeout(c(t,n),e)}function r(t,e,n){return!!Array.isArray(t)&&(s(t,n[e],n),!0)}function s(t,e,n){var o;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==i)for(o=0;o<t.length;)e.call(n,t[o],o,t),o++;else for(o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function a(e,n,i){var o="DEPRECATED METHOD: "+n+"\n"+i+" AT \n";return function(){var n=new Error("get-stack-trace"),i=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=t.console&&(t.console.warn||t.console.log);return r&&r.call(t.console,o,i),e.apply(this,arguments)}}function l(t,e,n){var i,o=e.prototype;i=t.prototype=Object.create(o),i.constructor=t,i._super=o,n&&ut(i,n)}function c(t,e){return function(){return t.apply(e,arguments)}}function u(t,e){return typeof t==pt?t.apply(e?e[0]||i:i,e):t}function h(t,e){return t===i?e:t}function d(t,e,n){s(m(e),function(e){t.addEventListener(e,n,!1)})}function p(t,e,n){s(m(e),function(e){t.removeEventListener(e,n,!1)})}function f(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function g(t,e){return t.indexOf(e)>-1}function m(t){return t.trim().split(/\s+/g)}function v(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function y(t){return Array.prototype.slice.call(t,0)}function b(t,e,n){for(var i=[],o=[],r=0;r<t.length;){var s=e?t[r][e]:t[r];v(o,s)<0&&i.push(t[r]),o[r]=s,r++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function _(t,e){for(var n,o,r=e[0].toUpperCase()+e.slice(1),s=0;s<ht.length;){if(n=ht[s],(o=n?n+r:e)in t)return o;s++}return i}function w(){return bt++}function C(e){var n=e.ownerDocument||e;return n.defaultView||n.parentWindow||t}function x(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){u(t.options.enable,[t])&&n.handler(e)},this.init()}function T(t){var e=t.options.inputClass;return new(e||(Ct?F:xt?$:wt?H:B))(t,k)}function k(t,e,n){var i=n.pointers.length,o=n.changedPointers.length,r=e&kt&&i-o==0,s=e&(Et|Pt)&&i-o==0;n.isFirst=!!r,n.isFinal=!!s,r&&(t.session={}),n.eventType=e,S(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function S(t,e){var n=t.session,i=e.pointers,o=i.length
;n.firstInput||(n.firstInput=A(e)),o>1&&!n.firstMultiple?n.firstMultiple=A(e):1===o&&(n.firstMultiple=!1);var r=n.firstInput,s=n.firstMultiple,a=s?s.center:r.center,l=e.center=I(i);e.timeStamp=mt(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=L(a,l),e.distance=D(a,l),E(n,e),e.offsetDirection=M(e.deltaX,e.deltaY);var c=O(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=gt(c.x)>gt(c.y)?c.x:c.y,e.scale=s?R(s.pointers,i):1,e.rotation=s?j(s.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,P(n,e);var u=t.element;f(e.srcEvent.target,u)&&(u=e.srcEvent.target),e.target=u}function E(t,e){var n=e.center,i=t.offsetDelta||{},o=t.prevDelta||{},r=t.prevInput||{};e.eventType!==kt&&r.eventType!==Et||(o=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=o.x+(n.x-i.x),e.deltaY=o.y+(n.y-i.y)}function P(t,e){var n,o,r,s,a=t.lastInterval||e,l=e.timeStamp-a.timeStamp;if(e.eventType!=Pt&&(l>Tt||a.velocity===i)){var c=e.deltaX-a.deltaX,u=e.deltaY-a.deltaY,h=O(l,c,u);o=h.x,r=h.y,n=gt(h.x)>gt(h.y)?h.x:h.y,s=M(c,u),t.lastInterval=e}else n=a.velocity,o=a.velocityX,r=a.velocityY,s=a.direction;e.velocity=n,e.velocityX=o,e.velocityY=r,e.direction=s}function A(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:ft(t.pointers[n].clientX),clientY:ft(t.pointers[n].clientY)},n++;return{timeStamp:mt(),pointers:e,center:I(e),deltaX:t.deltaX,deltaY:t.deltaY}}function I(t){var e=t.length;if(1===e)return{x:ft(t[0].clientX),y:ft(t[0].clientY)};for(var n=0,i=0,o=0;o<e;)n+=t[o].clientX,i+=t[o].clientY,o++;return{x:ft(n/e),y:ft(i/e)}}function O(t,e,n){return{x:e/t||0,y:n/t||0}}function M(t,e){return t===e?At:gt(t)>=gt(e)?t<0?It:Ot:e<0?Mt:Dt}function D(t,e,n){n||(n=Bt);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return Math.sqrt(i*i+o*o)}function L(t,e,n){n||(n=Bt);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return 180*Math.atan2(o,i)/Math.PI}function j(t,e){return L(e[1],e[0],Ft)+L(t[1],t[0],Ft)}function R(t,e){return D(e[0],e[1],Ft)/D(t[0],t[1],Ft)}function B(){this.evEl=Ut,this.evWin=$t,this.pressed=!1,x.apply(this,arguments)}function F(){this.evEl=Vt,this.evWin=zt,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=Yt,this.evWin=Gt,this.started=!1,x.apply(this,arguments)}function U(t,e){var n=y(t.touches),i=y(t.changedTouches);return e&(Et|Pt)&&(n=b(n.concat(i),"identifier",!0)),[n,i]}function $(){this.evTarget=Kt,this.targetIds={},x.apply(this,arguments)}function q(t,e){var n=y(t.touches),i=this.targetIds;if(e&(kt|St)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var o,r,s=y(t.changedTouches),a=[],l=this.target;if(r=n.filter(function(t){return f(t.target,l)}),e===kt)for(o=0;o<r.length;)i[r[o].identifier]=!0,o++;for(o=0;o<s.length;)i[s[o].identifier]&&a.push(s[o]),e&(Et|Pt)&&delete i[s[o].identifier],o++;return a.length?[b(r.concat(a),"identifier",!0),a]:void 0}function H(){x.apply(this,arguments);var t=c(this.handler,this);this.touch=new $(this.manager,t),this.mouse=new B(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function V(t,e){t&kt?(this.primaryTouch=e.changedPointers[0].identifier,z.call(this,e)):t&(Et|Pt)&&z.call(this,e)}function z(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches,o=function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)};setTimeout(o,Xt)}}function W(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var o=this.lastTouches[i],r=Math.abs(e-o.x),s=Math.abs(n-o.y);if(r<=Zt&&s<=Zt)return!0}return!1}function Y(t,e){this.manager=t,this.set(e)}function G(t){if(g(t,ie))return ie;var e=g(t,oe),n=g(t,re);return e&&n?ie:e||n?e?oe:re:g(t,ne)?ne:ee}function Q(t){this.options=ut({},this.defaults,t||{}),this.id=w(),this.manager=null,this.options.enable=h(this.options.enable,!0),this.state=ae,this.simultaneous={},this.requireFail=[]}function K(t){return t&de?"cancel":t&ue?"end":t&ce?"move":t&le?"start":""}function X(t){return t==Dt?"down":t==Mt?"up":t==It?"left":t==Ot?"right":""}function Z(t,e){var n=e.manager;return n?n.get(t):t}function J(){Q.apply(this,arguments)}function tt(){J.apply(this,arguments),this.pX=null,this.pY=null}function et(){J.apply(this,arguments)}function nt(){Q.apply(this,arguments),this._timer=null,this._input=null}function it(){J.apply(this,arguments)}function ot(){J.apply(this,arguments)}function rt(){Q.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function st(t,e){return e=e||{},e.recognizers=h(e.recognizers,st.defaults.preset),new at(t,e)}function at(t,e){this.options=ut({},st.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=T(this),this.touchAction=new Y(this,this.options.touchAction),lt(this,!0),s(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function lt(t,e){var n=t.element;if(n.style){var i;s(t.options.cssProps,function(o,r){i=_(n.style,r),e?(t.oldCssProps[i]=n.style[i],n.style[i]=o):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={})}}function ct(t,n){var i=e.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=n,n.target.dispatchEvent(i)}var ut,ht=["","webkit","Moz","MS","ms","o"],dt=e.createElement("div"),pt="function",ft=Math.round,gt=Math.abs,mt=Date.now;ut="function"!=typeof Object.assign?function(t){if(t===i||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var o=arguments[n];if(o!==i&&null!==o)for(var r in o)o.hasOwnProperty(r)&&(e[r]=o[r])}return e}:Object.assign;var vt=a(function(t,e,n){for(var o=Object.keys(e),r=0;r<o.length;)(!n||n&&t[o[r]]===i)&&(t[o[r]]=e[o[r]]),r++;return t},"extend","Use `assign`."),yt=a(function(t,e){return vt(t,e,!0)},"merge","Use `assign`."),bt=1,_t=/mobile|tablet|ip(ad|hone|od)|android/i,wt="ontouchstart"in t,Ct=_(t,"PointerEvent")!==i,xt=wt&&_t.test(navigator.userAgent),Tt=25,kt=1,St=2,Et=4,Pt=8,At=1,It=2,Ot=4,Mt=8,Dt=16,Lt=It|Ot,jt=Mt|Dt,Rt=Lt|jt,Bt=["x","y"],Ft=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(C(this.element),this.evWin,this.domHandler)}};var Nt={mousedown:kt,mousemove:St,mouseup:Et},Ut="mousedown",$t="mousemove mouseup";l(B,x,{handler:function(t){var e=Nt[t.type];e&kt&&0===t.button&&(this.pressed=!0),e&St&&1!==t.which&&(e=Et),this.pressed&&(e&Et&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var qt={pointerdown:kt,pointermove:St,pointerup:Et,pointercancel:Pt,pointerout:Pt},Ht={2:"touch",3:"pen",4:"mouse",5:"kinect"},Vt="pointerdown",zt="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Vt="MSPointerDown",zt="MSPointerMove MSPointerUp MSPointerCancel"),l(F,x,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),o=qt[i],r=Ht[t.pointerType]||t.pointerType,s="touch"==r,a=v(e,t.pointerId,"pointerId");o&kt&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):o&(Et|Pt)&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),n&&e.splice(a,1))}});var Wt={touchstart:kt,touchmove:St,touchend:Et,touchcancel:Pt},Yt="touchstart",Gt="touchstart touchmove touchend touchcancel";l(N,x,{handler:function(t){var e=Wt[t.type];if(e===kt&&(this.started=!0),this.started){var n=U.call(this,t,e);e&(Et|Pt)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var Qt={touchstart:kt,touchmove:St,touchend:Et,touchcancel:Pt},Kt="touchstart touchmove touchend touchcancel";l($,x,{handler:function(t){var e=Qt[t.type],n=q.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var Xt=2500,Zt=25;l(H,x,{handler:function(t,e,n){var i="touch"==n.pointerType,o="mouse"==n.pointerType;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)V.call(this,e,n);else if(o&&W.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Jt=_(dt.style,"touchAction"),te=Jt!==i,ee="auto",ne="manipulation",ie="none",oe="pan-x",re="pan-y",se=function(){if(!te)return!1;var e={},n=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){e[i]=!n||t.CSS.supports("touch-action",i)}),e}();Y.prototype={set:function(t){"compute"==t&&(t=this.compute()),te&&this.manager.element.style&&se[t]&&(this.manager.element.style[Jt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return s(this.manager.recognizers,function(e){u(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),G(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var i=this.actions,o=g(i,ie)&&!se[ie],r=g(i,re)&&!se[re],s=g(i,oe)&&!se[oe];if(o){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}return s&&r?void 0:o||r&&n&Lt||s&&n&jt?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var ae=1,le=2,ce=4,ue=8,he=ue,de=16;Q.prototype={defaults:{},set:function(t){return ut(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(r(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=Z(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return r(t,"dropRecognizeWith",this)?this:(t=Z(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(r(t,"requireFailure",this))return this;var e=this.requireFail;return t=Z(t,this),-1===v(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(r(t,"dropRequireFailure",this))return this;t=Z(t,this);var e=v(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,i=this.state;i<ue&&e(n.options.event+K(i)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),i>=ue&&e(n.options.event+K(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|ae)))return!1;t++}return!0},recognize:function(t){var e=ut({},t);if(!u(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(he|de|32)&&(this.state=ae),this.state=this.process(e),this.state&(le|ce|ue|de)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},l(J,Q,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(le|ce),o=this.attrTest(t);return i&&(n&Pt||!o)?e|de:i||o?n&Et?e|ue:e&le?e|ce:le:32}}),l(tt,J,{defaults:{event:"pan",threshold:10,pointers:1,direction:Rt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Lt&&e.push(re),t&jt&&e.push(oe),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,o=t.direction,r=t.deltaX,s=t.deltaY;return o&e.direction||(e.direction&Lt?(o=0===r?At:r<0?It:Ot,n=r!=this.pX,i=Math.abs(t.deltaX)):(o=0===s?At:s<0?Mt:Dt,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=o,n&&i>e.threshold&&o&e.direction},attrTest:function(t){return J.prototype.attrTest.call(this,t)&&(this.state&le||!(this.state&le)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=X(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),l(et,J,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ie]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&le)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),l(nt,Q,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ee]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(Et|Pt)&&!r)this.reset();else if(t.eventType&kt)this.reset(),this._timer=o(function(){this.state=he,this.tryEmit()},e.time,this);else if(t.eventType&Et)return he;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===he&&(t&&t.eventType&Et?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=mt(),this.manager.emit(this.options.event,this._input)))}}),l(it,J,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ie]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&le)}}),l(ot,J,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Lt|jt,pointers:1},getTouchAction:function(){return tt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Lt|jt)?e=t.overallVelocity:n&Lt?e=t.overallVelocityX:n&jt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&gt(e)>this.options.velocity&&t.eventType&Et},emit:function(t){var e=X(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),l(rt,Q,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ne]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&kt&&0===this.count)return this.failTimeout();if(i&&r&&n){if(t.eventType!=Et)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||D(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&s?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=o(function(){this.state=he,this.tryEmit()},e.interval,this),le):he}return 32},failTimeout:function(){return this._timer=o(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==he&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),st.VERSION="2.0.7",st.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[it,{enable:!1}],[et,{enable:!1},["rotate"]],[ot,{direction:Lt}],[tt,{direction:Lt},["swipe"]],[rt],[rt,{event:"doubletap",taps:2},["tap"]],[nt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};at.prototype={set:function(t){return ut(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&he)&&(o=e.curRecognizer=null);for(var r=0;r<i.length;)n=i[r],2===e.stopped||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(t),!o&&n.state&(le|ce|ue)&&(o=e.curRecognizer=n),r++}},get:function(t){if(t instanceof Q)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(r(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(r(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=v(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==i&&e!==i){var n=this.handlers;return s(m(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==i){var n=this.handlers;return s(m(t),function(t){e?n[t]&&n[t].splice(v(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&ct(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&lt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ut(st,{INPUT_START:kt,INPUT_MOVE:St,INPUT_END:Et,INPUT_CANCEL:Pt,STATE_POSSIBLE:ae,STATE_BEGAN:le,STATE_CHANGED:ce,STATE_ENDED:ue,STATE_RECOGNIZED:he,STATE_CANCELLED:de,STATE_FAILED:32,DIRECTION_NONE:At,DIRECTION_LEFT:It,DIRECTION_RIGHT:Ot,DIRECTION_UP:Mt,DIRECTION_DOWN:Dt,DIRECTION_HORIZONTAL:Lt,DIRECTION_VERTICAL:jt,DIRECTION_ALL:Rt,Manager:at,Input:x,TouchAction:Y,TouchInput:$,MouseInput:B,PointerEventInput:F,TouchMouseInput:H,SingleTouchInput:N,Recognizer:Q,AttrRecognizer:J,Tap:rt,Pan:tt,Swipe:ot,Pinch:et,Rotate:it,Press:nt,on:d,off:p,each:s,merge:yt,extend:vt,assign:ut,inherit:l,bindFn:c,prefixed:_}),(void 0!==t?t:"undefined"!=typeof self?self:{}).Hammer=st,"function"==typeof define&&define.amd?define("hammerjs",[],function(){return st}):"undefined"!=typeof module&&module.exports?module.exports=st:t.Hammer=st}(window,document);var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/SLIDES/view/SLIDESView",["require","exports","hammerjs","vsef/View","vsef/Log","vsef/utils/Environment"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,n,i,r,s){var a=this;return o.note("SLIDESView"),a=t.call(this,e,n,i,s)||this,a.rootUI=r,a.listenTo(e.onItemIndexChange,a.itemIndexChange),a}return __extends(e,t),e.prototype.getEvents=function(){return{"click .slides-next-btn":this.nextBtnClick,"click .slides-previous-btn":this.previousBtnClick,"change .slide-number":this.changeSlideNumber}},e.prototype.render=function(){if(t.prototype.render.call(this),r.Environment.isMobile){new n(this.$(".slides-holder").get(0),{recognizers:[[n.Swipe,{direction:n.DIRECTION_HORIZONTAL}]]}).on("swipe",this.horzSwipe.bind(this)),this.$(".image-detail").css("user-select","auto")}return this},e.prototype.itemIndexChange=function(){this.$(".slides-slide").removeClass("active").eq(this.model.itemIndex).addClass("active"),this.$(".slide-number").val(this.model.itemIndex+1+""),this.$(".slides-previous-btn").prop("disabled",this.model.atStartSlide),this.$(".slides-next-btn").prop("disabled",this.model.atEndSlide),this.rootUI.update()},e.prototype.previousBtnClick=function(t){this.model.previousSlide()},e.prototype.nextBtnClick=function(t){this.model.nextSlide()},e.prototype.changeSlideNumber=function(t){var e=Math.min(t.target.value-1);e>=0&&e<this.model.slides.length&&(this.model.itemIndex=e)},e.prototype.horzSwipe=function(t){t.direction===n.DIRECTION_LEFT?this.model.nextSlide():this.model.previousSlide()},e}(i.View);e.SLIDESView=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/SLIDES/SLIDESInteractive",["require","exports","vsef/Log","vsef/Interactive","./model/SLIDESModel","./view/SLIDESView","vsef/CFIMap"],function(t,e,n,i,o,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){var e=t.call(this)||this;return n.note("created SLIDES Interactive"),e}return __extends(e,t),e.prototype.buildUI=function(t,e){this.model=new o.SLIDESModel,this.view=new r.SLIDESView(this.model,t,this.context.engineClassLower+"-interactive-template",this.context.rootUI,e)},e.prototype.getInteractive=function(){return new e},e.prototype.init=function(){this.model.itemIndex=0},e.prototype.defineCfiRegions=function(){var t;if(this.model.hasMultipleSlides){for(var e=this.view.$(".slides-slide"),n=[],i=0;i<e.length;i++)n.push(new s.CFIRegion(e.eq(i)[0]));t=new s.CFIRegion(this.commonUI.$el[0],n)}return t},e.prototype.doCFILink=function(){var t=this.context.cfiMap.activeCFIRegion.element;this.commonUI.$el.has(t)&&(this.model.itemIndex=this.view.$(".slides-slide").index(t))},e}(i.Interactive);e.SLIDESInteractive=a});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/SLIDES/SLIDESEngine",["require","exports","vsef/Log","vsef/InteractiveEngine","./SLIDESInteractive"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){return n.note("created SLIDES engine"),t.call(this,e)||this}return __extends(e,t),e.prototype.getInteractive=function(){return new o.SLIDESInteractive},e}(i.InteractiveEngine);e.SLIDESEngine=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/BTN/model/BTNModel",["require","exports","lodash","vsef/Log","vsef/InteractiveModel","vsef/Types","vsef/utils/MiscUtils","vsef/utils/StringUtils"],function(t,e,n,i,o,r,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(e){return i.note("created BTNModel"),t.call(this,e)||this}return __extends(e,t),e.prototype.getIsEmpty=function(){return!this.url||0===this.url.trim().length},e.prototype.readData=function(){i.note("BTNModel parse activity data"),this.url=n.escape(encodeURI(s.MiscUtils.getFloeString(this.$data.find("url").text()))),this.text=s.MiscUtils.getFloeString(this.$data.find("text").text()),this.tooltip=s.MiscUtils.getFloeString(this.$data.find("tooltip").text()),this.alignment=r.stringToAlignment(this.$data.find("alignment").attr("value")),this.title=a.default.htmlPtoBr(s.MiscUtils.getFloeString(this.$data.find("title").text())),this.instructions=s.MiscUtils.getFloeString(this.$data.find("instructions").text())},e}(o.InteractiveModel);e.BTNModel=l});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/BTN/view/BTNView",["require","exports","vsef/View","vsef/Log","vsef/Types"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,o,r,s){var a=this;return i.note("BTNView"),a=t.call(this,e,n,o,s)||this,a.rootUI=r,a}return __extends(e,t),e.prototype.getEvents=function(){return{}},e.prototype.render=function(){return t.prototype.render.call(this),this.$(".btn-holder").css("text-align",o.alignmentToString(this.model.alignment)),this},e}(n.View);e.BTNView=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/BTN/BTNInteractive",["require","exports","vsef/Log","vsef/Interactive","./model/BTNModel","./view/BTNView"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){var e=t.call(this)||this;return n.note("created BTN Interactive"),e}return __extends(e,t),e.prototype.buildUI=function(t,e){this.model=new o.BTNModel,this.view=new r.BTNView(this.model,t,this.context.engineClassLower+"-interactive-template",this.context.rootUI,e)},e.prototype.getInteractive=function(){return new e},e.prototype.init=function(){},e}(i.Interactive);e.BTNInteractive=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/BTN/BTNEngine",["require","exports","vsef/Log","vsef/InteractiveEngine","./BTNInteractive"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){return n.note("created BTN engine"),t.call(this,e)||this}return __extends(e,t),e.prototype.getInteractive=function(){return new o.BTNInteractive},e}(i.InteractiveEngine);e.BTNEngine=r});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};define("enginesRoot/engines/HSPOT/model/Hotspot",["require","exports","lodash","vsef/Observable"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n,i){var o=t.call(this)||this;return o.selected=!1,o.x=Number(e.find("x").text()),o.y=Number(e.find("y").text()),o.pos="left: "+o.x/n*100+"%; top: "+o.y/i*100+"%",o.text=e.find("text").text(),o.alt=e.find("alt").text(),o.color=e.find("color").text(),o.strokeColor=e.find("strokeColor").text(),o.selectedColor=e.find("selectedColor").text(),o.colorName=e.find("colorName").text(),o.type=e.find("type").text(),o}return __extends(e,t),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return!(n.isNumber(this.x)&&n.isNumber(this.y)&&this.text)},enumerable:!0,configurable:!0}),__decorate([i.observable],e.prototype,"selected",void 0),e}(i.Observable);e.HotSpot=o}),define("enginesRoot/engines/HSPOT/model/HotspotGraphics",["require","exports","jquery","lodash"],function(t,e,n,i){"use strict";function o(t){return t===r.Bottom||t===r.Top}Object.defineProperty(e,"__esModule",{value:!0});var r;!function(t){t[t.None="none"]="None",t[t.Left="left"]="Left",t[t.Right="right"]="Right",t[t.Top="top"]="Top",t[t.Bottom="bottom"]="Bottom"}(r=e.HotspotOrientation||(e.HotspotOrientation={})),e.orientationIsVertical=o;var s=function(){function t(){}return t}();e.HotspotCardinality=s;var a=function(){function t(t){i.extend(this,t)}return t}();e.HotspotGraphicVariant=a,e.basicCardinality=[{orientationName:"Left",orientation:r.Left,rotation:180},{orientationName:"Bottom",orientation:r.Bottom,rotation:90},{orientationName:"Right",orientation:r.Right,rotation:0},{orientationName:"Top",orientation:r.Top,rotation:-90}];var l=function(){function t(t,s){if(!s.length)throw new Error("Hotspot graphics has been given no graphic data for "+t);this.name=t,this.svgData=[],this.svgDataNames=[],this.svgSwatchSizes=[],this.glyphs=[];for(var l={color:"#000000",strokeColor:"#ffffff",selectedColor:"#000000",style:""},c=0;c<s.length;c++){var u=s[c];if(this.svgData.push(i.template(u.data)),this.svgDataNames.push(u.name),this.svgSwatchSizes.push(u.swatchSize),"directionless"===u.type){var h=n(n.parseXML(this.svgData[c](l))).find("svg");this.width=parseInt(h.attr("width"),10),this.height=parseInt(h.attr("height"),10);var d=u.translate.split(","),p=parseInt(d[2],10),f=parseInt(d[3],10);this.glyphs.push(new a({svgIndex:c,cardinality:{orientationName:"Radio",orientation:r.None,rotation:0},width:this.width,height:this.height,id:t+"."+this.svgDataNames[c]+"."+r.None.toString()+".0",translateX:parseInt(d[0],10),translateY:parseInt(d[1],10),trimX:i.isNaN(p)?0:p,trimY:i.isNaN(f)?0:f}))}else if("cardinal"===u.type)for(var h=n(n.parseXML(this.svgData[c](l))).find("svg"),g=parseInt(h.attr("width"),10),m=parseInt(h.attr("height"),10),v=0,y=e.basicCardinality;v<y.length;v++){var b=y[v],d=u.cardinalTranslate[b.orientationName].split(","),p=parseInt(d[2],10),f=parseInt(d[3],10);this.glyphs.push(new a({svgIndex:c,cardinality:b,width:o(b.orientation)?m:g,height:o(b.orientation)?g:m,id:t+"."+this.svgDataNames[c]+"."+b.orientation.toString()+"."+b.rotation,translateX:parseInt(d[0],10),translateY:parseInt(d[1],10),trimX:i.isNaN(p)?0:p,trimY:i.isNaN(f)?0:f}))}}}return t.prototype.indexOfGlyph=function(t){for(var e=0,n=this.glyphs;e<n.length;e++){var i=n[e];if(i.id===t)return this.glyphs.indexOf(i)}return-1},t}();e.HotspotGraphic=l;var c=function(){function t(){this.palette=[]}return t.prototype.push=function(t){this.palette.push(t)},t.prototype.getGlyphInstance=function(t,e,n,i,o,r,s,a,l){var c=this.findGraphic(t),u=c.graphic,h=c.variantIndex,d=r?' class="'+r+'" ':" ",p=u.glyphs[h],f=a?"":"translate("+p.translateX+"px, "+p.translateY+"px)";f+=0===p.cardinality.rotation?"":" rotate("+p.cardinality.rotation+"deg)";var g='style="'+(s?s+"; ":"")+"transform: "+f+';"',m='style="display: block;';return m+=(l?"width: "+u.svgSwatchSizes[p.svgIndex]:"")+'"',"<"+o+d+g+">"+u.svgData[p.svgIndex]({color:e,strokeColor:n,selectedColor:i,style:m})+"</"+o+">"},t.prototype.findGraphic=function(t){for(var e,n=0,i=this.palette;n<i.length;n++){var o=i[n];if(-1!==(e=o.indexOfGlyph(t)))return{graphic:o,variantIndex:e}}throw"Hotspot graphic not found for type "+t},t}();e.HotspotGraphicPalette=c});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/HSPOT/model/HSPOTModel",["require","exports","jquery","vsef/Log","vsef/InteractiveModel","./Hotspot","./HotspotGraphics","vsef/Templates","vsef/Types"],function(t,e,n,i,o,r,s,a,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(e){var o=t.call(this,null)||this;o.hasBorder=!1,i.note("created HSPOTModel"),o.hotspots=[],
o.graphics=new s.HotspotGraphicPalette;for(var r=["studio-spot1"],l=0,c=r;l<c.length;l++){for(var u=c[l],h=[],d=e.getTextsByAttribute("data-hotspot-group",u,a.TemplateContent.Outer),p=0,f=d;p<f.length;p++){var g=f[p],m=a.Templates.removeOuter(g),v=g.indexOf(m);g=g.substr(0,v)+g.substr(v+m.length);for(var y=n(n.parseXML(g)).find("script"),b={},_=0,w=s.basicCardinality;_<w.length;_++){var C=w[_],x=C.orientationName;b[x]=y.attr("data-hotspot-translate-"+x.toLowerCase())}h.push({name:y.attr("data-hotspot-name"),swatchSize:y.attr("data-hotspot-swatch-size"),type:y.attr("data-hotspot-type"),data:m,translate:y.attr("data-hotspot-translate"),cardinalTranslate:b})}o.graphics.push(new s.HotspotGraphic("studio-spot1",h))}return o}return __extends(e,t),e.prototype.getIsEmpty=function(){return this.hotspots.length<1},Object.defineProperty(e.prototype,"currentHotspot",{get:function(){for(var t=0,e=this.hotspots;t<e.length;t++){var n=e[t];if(n.selected)return n}return null},enumerable:!0,configurable:!0}),e.prototype.hideAllHotpsots=function(){for(var t=0,e=this.hotspots;t<e.length;t++){e[t].selected=!1}},e.prototype.readData=function(){i.note("HSPOTModel parse activity data"),this.$data=this.$data.find("HSPOT");var t=this.$data.find("hotspotsData").text(),e=n(n.parseXML(t)),o=this.$data.find("image").text();this.image=o?this.paths.mediaPath+o:"",this.imageWidth=Number(e.find("imageWidth").text()),this.imageHeight=Number(e.find("imageHeight").text()),this.imageAlt=this.$data.find("imageAltText").text(),this.imageCaption=this.$data.find("imageCaption").text(),this.$data.find("enableBorder")&&(this.hasBorder=l.stringOptionToBool(this.$data.find("enableBorder").attr("value"),!1));for(var s=e.find("hotspot"),a=0;a<s.length;a++){var c=new r.HotSpot(s.eq(a),this.imageWidth,this.imageHeight);this.hotspots.push(c)}},e}(o.InteractiveModel);e.HSPOTModel=c});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/HSPOT/view/HSPOTView",["require","exports","vsef/View","vsef/Log","jquery","vsef/Types","../model/HotspotGraphics","vsef/utils/Environment","vsef/utils/MiscUtils"],function(t,e,n,i,o,r,s,a,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(e,n,r,s,a){var l=this;return i.note("HSPOTView"),l=t.call(this,e,n,r,a)||this,l.rootUI=s,o(window).resize(function(){l.handleResize()}),l}return __extends(e,t),e.prototype.getEvents=function(){return{"click .hotspot":this.hotspotClick}},e.prototype.render=function(){var e=this;t.prototype.render.call(this),this.$el.hasClass(n.View.RENDERED)&&!a.Environment.isPrerendering()||this.model.hotspots.slice().reverse().forEach(function(t){var n=e.model.id+"-hotspot-"+e.model.hotspots.indexOf(t),i=e.model.graphics.getGlyphInstance(t.type,t.color,t.strokeColor,t.selectedColor,"button","hotspot",t.pos),r=o(i).insertAfter(e.$(".spots-image-a11y-helper"));r.attr("id",n),r.attr("type","button"),r.attr("aria-expanded","false"),o('<span class="visuallyhidden">'+t.alt+"</span>").insertBefore(r.find("svg"));var s='<div class="hotspot-text visuallyhidden" aria-hidden="true">'+t.text+"</div>",a=o(s).insertAfter(r),l=n+"-text";a.attr("id",l)}),this.$(".spots-image-holder").addClass("loading"),l.MiscUtils.whenImageLoaded(this.$("img")[0]).then(function(t){e.$(".spots-image-holder").removeClass("loading"),e.handleResize()});for(var i=0,r=this.model.hotspots;i<r.length;i++){var s=r[i];this.listenTo(s.onSelectedChange,this.hotspotSelectedChange)}return this},e.prototype.hotspotClick=function(t){var e=this.model.currentHotspot,n=this.$(".hotspot").index(t.currentTarget),i=this.model.hotspots[n];if(e&&i!==e)e.selected=!1,i.selected=!0;else{var o=i.selected;i.selected=!o}},e.prototype.hotspotSelectedChange=function(t){var e=this.model.hotspots.indexOf(t),n=this.$(".hotspot").eq(e);this.$(".hotspot").eq(e).toggleClass("selected",t.selected);var i=this.$(".hotspot-text").eq(e);t.selected?(this.toolTip=this.rootUI.showTooltip(n[0],t.text,this.hotspotOrientationToPosition(t)),this.listenTo(this.toolTip.onClose,this.tooltipClose)):this.toolTip&&(this.toolTip.close(),this.stopListening(this.toolTip.onClose),this.toolTip=null),n.attr("aria-expanded",t.selected?"true":"false"),i.attr("aria-hidden",t.selected?"false":"true")},e.prototype.tooltipClose=function(t,e){var n=this.model.hotspots.indexOf(this.model.currentHotspot);if(-1!==n){var i=this.$(".hotspot").eq(n);this.model.currentHotspot&&e&&e.currentTarget!==document&&!i.has(e.target).length&&(this.model.currentHotspot.selected=!1)}},e.prototype.hotspotOrientationToPosition=function(t){var e=this.model.graphics.findGraphic(t.type),n=e.graphic,i=e.variantIndex,o=[s.HotspotOrientation.Left,s.HotspotOrientation.Right,s.HotspotOrientation.None,s.HotspotOrientation.Bottom,s.HotspotOrientation.Top];return[r.DisplayPosition.Right,r.DisplayPosition.Left,r.DisplayPosition.Right,r.DisplayPosition.Above,r.DisplayPosition.Below][o.indexOf(n.glyphs[i].cardinality.orientation)]},e.prototype.handleResize=function(){if(!a.Environment.isPrerendering()){var t=this.$("img");if(t.length&&t[0].complete){var e=this.$("img").width();this.$(".spots-image-caption").width(e);var n=(this.$("figure").width()-e)/2;this.$(".spots-image-caption").css("margin-left",n)}}},e}(n.View);e.HSPOTView=c});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/HSPOT/HSPOTInteractive",["require","exports","vsef/Log","vsef/Interactive","./model/HSPOTModel","./view/HSPOTView"],function(t,e,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){var e=t.call(this)||this;return n.note("created HSPOT Interactive"),e}return __extends(e,t),e.prototype.buildUI=function(t,e){this.model=new o.HSPOTModel(t),this.view=new r.HSPOTView(this.model,t,this.context.engineClassLower+"-interactive-template",this.context.rootUI,e)},e.prototype.getInteractive=function(){return new e},e.prototype.init=function(){},e}(i.Interactive);e.HSPOTInteractive=s});var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();define("enginesRoot/engines/HSPOT/HSPOTEngine",["require","exports","vsef/Log","vsef/InteractiveEngine","./HSPOTInteractive"],function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){return n.note("created HSPOT engine"),t.call(this,e)||this}return __extends(e,t),e.prototype.getInteractive=function(){return new o.HSPOTInteractive},e}(i.InteractiveEngine);e.HSPOTEngine=r}),define("text!engines/data/config.json",[],function(){return'{"settings":{"lang":"en","dir":"","gui":{"name":"vcs","variant":""},"media":{"provider":"videojs"},"subproj":"","backends":{"EPUBEducationOutcomesAPI":true,"VSTBookAPI":true,"EPUBEducationOutcomesAPISimulator":true,"VCSEditorOutcomesAPISimulator":true},"state":{"stateSaveDelay":250},"debug":{"isDebug":false,"debugLevel":0,"showConsole":"none","debugModal":{"enabled":true,"trigger":{"touch":false,"click":false,"keyboard":true},"triggerZoneSizeY":200}},"engines":{"base":{"buttons":{"print":true,"submit":false}}}},"architecture":{"mappings":{"VIDEO":"STIMUL","AUDIO":"STIMUL","HIDESHOW":"STIMUL","MC_SURVEY":"MC","CLOZ_SURVEY":"CLOZ","FIB_SURVEY":"FIB"},"staticRegistry":{"base":{"label":"Blox","editable":true},"STATIC_divider":{"editable":false},"STATIC_hr-divider":{"editable":false},"MC":{"label":"Multiple Choice"},"MC_SURVEY":{"label":"Multiple Choice Survey"},"ESSAY":{"label":"Essay"},"CLOZ":{"label":"Fill-in-Blank Dropdown"},"CLOZ_SURVEY":{"label":"Dropdown Survey"},"FIB":{"label":"Fill-in-Blank Type-in"},"FIB_SURVEY":{"label":"Type-in Survey"},"FIBDD":{"label":"Fill-in-Blank Word Bank"}},"engines":{"base":{"isCore":true,"hasTemplateOverride":false,"hasCSSOverride":false},"CLOZ":{},"ESSAY":{},"FIB":{},"FIBDD":{},"MC":{},"SLIDES":{},"STATIC":{},"STIMUL":{},"BTN":{},"HSPOT":{}}},"options":{"noTableBorders":false,"noImageZoomBtns":false,"stripMCAnswerPs":true},"themes":{"activeThemeStack":"","skins":{"vcs":{"flavors":{"base":{"definitions":{"mainAccent":"$accent7"},"elements":{"body-color":"$neutral10","body-font":"$mainFont","static-heading-heading-color":"$neutral10","static-heading-heading-font":"inherit","static-heading-heading-size":"1.5em","static-heading-heading-mob-size":"1.125em","static-heading-subheadingA-color":"$neutral7","static-heading-subheadingA-font":"inherit","static-heading-subheadingA-size":"1.125em","static-heading-subheadingA-mob-size":"1.125em","static-heading-subheadingB-color":"$neutral10","static-heading-subheadingB-font":"inherit","static-heading-subheadingB-size":"1em","static-heading-subheadingB-mob-size":"1em","static-heading-subheadingC-color":"$neutral10","static-heading-subheadingC-font":"inherit","static-heading-subheadingC-size":"0.938em","static-heading-subheadingC-mob-size":"0.938em","static-heading-subheadingD-color":"$neutral7","static-heading-subheadingD-font":"inherit","static-heading-subheadingD-size":"0.938em","static-heading-subheadingD-mob-size":"0.938em","static-hr-divider-color":"$neutral7","static-container-color":"$neutral3","static-quote-line-color":"$mainAccent","static-quote-line-size":"3px","static-quote-txt-color":"$neutral10","static-quote-txt-size":"1.125em","static-quote-txt-line-height":"1.55","static-quote-txt-font":"inherit","static-quote-txt-weight":"300","static-quote-cite-txt-color":"$neutral10","static-quote-cite-txt-size":"0.938em","static-quote-cite-txt-line-height":"1.45","static-quote-cite-txt-font":"inherit","static-quote-cite-txt-weight":"300","activity-title-font":"inherit","instructions-color":"$neutral7","ctl-btn-bg-color":"$mainAccent","ctl-btn-border-color":"$mainAccent","ctl-btn-color":"white","ctl-btn-disabled-bg-color":"white","ctl-btn-disabled-border-color":"$neutral7","ctl-btn-disabled-color":"$neutral7","ctl-btn-deemphasized-bg-color":"white","ctl-btn-deemphasized-border-color":"$neutral7","ctl-btn-deemphasized-color":"$mainAccent","page-btn-container-bg-color":"$neutral3","page-ctl-btn-bg-color":"$neutral3","page-ctl-btn-icon-color":"$neutral7","page-ctl-btn-disabled-icon-color":"$neutral5","page-btn-bg-color":"$neutral3","page-btn-color":"$neutral7","page-btn-selected-bg-color":"$mainAccent","page-btn-selected-color":"white","page-btn-complete-color":"inherit","image-caption-color":"$neutral7","image-caption-size":"0.75rem","input-border-color":"$neutral7","container-border-color":"$neutral7","btn-icon-color":"$mainAccent","btn-icon-border-color":"$mainAccent","hyperlink-color":"$mainAccent","radio-check-border-color":"$neutral7","radio-check-highlight-color":"$neutral3","radio-check-selected-color":"$mainAccent","gap-border-color":"$neutral7","gap-initial-text-color":"$mainAccent","feedback-msg-color":"$mainAccent","feedback-bg-color":"$neutral3","feedback-text-color":"$neutral8","slides-bg-color":"$neutral2","slides-title-color":"$mainAccent","slides-slide-number-color":"$mainAccent","slides-nav-btn-bg-color":"$neutral10","media-btn-bg-color":"$accent5","media-btn-slider-bg-color":"$accent5","transcript-btn-toolbar-bg-color":"$neutral3","transcript-btn-icon-bg-selected-color":"$mainAccent","transcript-btn-icon-color":"$mainAccent","transcript-btn-icon-border-color":"$neutral6","transcript-text-highlight-color":"$accent2","table-border-color":"$neutral3","table-caption-bg-color":"$neutral7","table-heading-bg-color":"$neutral3","question-hint-btn-icon-color":"$adjunct1","question-hint-btn-text-color":"$adjunct1","question-hint-panel-bg-color":"$adjunct9","stacked-question-divider-bg-color":"$neutral3","stacked-block-divider-bg-color":"$neutral5","launch-btn-bg-color":"$mainAccent","launch-btn-color":"white","error-text":"#D50D0D","error-background":"#FEE5E2","correct-text":"#067D06","correct-background":"#F9FCED","overlay-medium-bg-color":"$neutral10","screen-heading-bg-color":"#ffffff","screen-heading-border-color":"$mainAccent"}},"heading_fonts":{"elements":{"static-heading-heading-font":"$headingFont","static-heading-subheadingA-font":"$headingFont","static-heading-subheadingB-font":"$headingFont","activity-title-font":"$headingFont"}},"cheddar":{"definitions":{"mainAccent":"$accent9","accent1":"#fef3e9","accent2":"#fedbbd","accent3":"#fec491","accent4":"#fead64","accent5":"#ff993f","accent6":"#f58525","accent7":"#eb710b","accent8":"#e06107","accent9":"#ca500f","accent10":"#b0430c","adjunct1":"#007fad","adjunct9":"#eaf7fc"},"elements":{"media-btn-bg-color":"$accent6","media-btn-slider-bg-color":"$accent6"}},"ocean":{"definitions":{"accent1":"#eaf7fc","accent2":"#b0e3f4","accent3":"#75cfec","accent4":"#3bbbe3","accent5":"#00a7db","accent6":"#0093c4","accent7":"#007fad","accent8":"#006c94","accent9":"#005a75","accent10":"#00465c","adjunct1":"#ca500F","adjunct9":"#fef3e9"}},"magic":{"definitions":{"accent1":"#f2f4f9","accent2":"#d2d9ed","accent3":"#b2bee0","accent4":"#91a3d4","accent5":"#7188c7","accent6":"#516dbb","accent7":"#425ba1","accent8":"#334a88","accent9":"#24386e","accent10":"#002244","adjunct1":"#ca500F","adjunct9":"#fef3e9"},"elements":{"media-btn-bg-color":"$accent4","media-btn-slider-bg-color":"$accent4"}},"sangria":{"definitions":{"accent1":"#fdf2f5","accent2":"#fbcada","accent3":"#f8a2bf","accent4":"#f57aa3","accent5":"#f35288","accent6":"#e53872","accent7":"#d81e5d","accent8":"#bf1b52","accent9":"#a61747","accent10":"#8c143c","adjunct1":"#007fad","adjunct9":"#eaf7fc"}},"jungle":{"definitions":{"mainAccent":"$accent8","accent1":"#e8f7f2","accent2":"#c0eadb","accent3":"#86e0c2","accent4":"#55d5a9","accent5":"#24c991","accent6":"#1fb380","accent7":"#1a9c6e","accent8":"#16825c","accent9":"#12694a","accent10":"#0d4f38","adjunct1":"#ca500F","adjunct9":"#fef3e9"}},"pickle":{"definitions":{"mainAccent":"$accent9","accent1":"#f4f6ea","accent2":"#e0eab8","accent3":"#ccde87","accent4":"#b7d155","accent5":"#a3c523","accent6":"#91b215","accent7":"#7e9e06","accent8":"#698505","accent9":"#556b04","accent10":"#415203","adjunct1":"#ca500F","adjunct9":"#fef3e9"}},"brick":{"definitions":{"accent1":"#fae6e3","accent2":"#fac3bb","accent3":"#faa094","accent4":"#fa7d6d","accent5":"#f75f4b","accent6":"#eb4f3b","accent7":"#d24634","accent8":"#b83e2e","accent9":"#9e3528","accent10":"#852d21","adjunct1":"#007fad","adjunct9":"#eaf7fc"}},"mist":{"definitions":{"accent1":"#e6f4f7","accent2":"#c9e5ea","accent3":"#acd5dd","accent4":"#8fc6cf","accent5":"#6eadba","accent6":"#5f96a1","accent7":"#4f7e87","accent8":"#41666e","accent9":"#324e54","accent10":"#23373b","adjunct1":"#ca500F","adjunct9":"#fef3e9"},"elements":{"media-btn-bg-color":"$accent4","media-btn-slider-bg-color":"$accent4"}},"eggplant":{"definitions":{"accent1":"#f6f1f9","accent2":"#ddcbe9","accent3":"#c4a4d9","accent4":"#ab7ec9","accent5":"#9258b9","accent6":"#7a4c98","accent7":"#684182","accent8":"#543469","accent9":"#3f284f","accent10":"#2b1b36","adjunct1":"#ca500F","adjunct9":"#fef3e9"},"elements":{"media-btn-bg-color":"$accent3","media-btn-slider-bg-color":"$accent3"}},"cloud":{"definitions":{"neutral1":"#fafafa","neutral2":"#f6f6f6","neutral3":"#ececec","neutral4":"#dadada","neutral5":"#b3b3b3","neutral6":"#949494","neutral7":"#757575","neutral8":"#646464","neutral9":"#525252","neutral10":"#3c3c3c"}},"frost":{"definitions":{"neutral1":"#f6f8fc","neutral2":"#edf0f5","neutral3":"#dfe4eb","neutral4":"#ced2d9","neutral5":"#a4a9b3","neutral6":"#888c94","neutral7":"#74777e","neutral8":"#5b5e63","neutral9":"#46494d","neutral10":"#343538"}},"roboto_font_base":{"fonts":{"faces":[{"face":"roboto-regular-webfont","family":"roboto","weight":"normal","style":"normal","svgid":"robotoregular"},{"face":"roboto-italic-webfont","family":"roboto","weight":"normal","style":"italic","svgid":"robotoitalic"},{"face":"roboto-bold-webfont","family":"roboto","weight":"bold","style":"normal","svgid":"robotobold"},{"face":"roboto-bolditalic-webfont","family":"roboto","weight":"bold","style":"italic","svgid":"robotobold_italic"},{"face":"roboto-black-webfont","family":"roboto","weight":"900","style":"normal","svgid":"robotoblack"},{"face":"roboto-blackitalic-webfont","family":"roboto","weight":"900","style":"italic","svgid":"robotoblack_italic"},{"face":"roboto-medium-webfont","family":"roboto","weight":"500","style":"normal","svgid":"robotomedium"},{"face":"roboto-light-webfont","family":"roboto","weight":"300","style":"normal","svgid":"robotolight"},{"face":"roboto-lightitalic-webfont","family":"roboto","weight":"300","style":"italic","svgid":"robotolight_italic"}]}},"rubik_font_base":{"fonts":{"faces":[{"face":"rubik-regular-webfont","family":"rubik","weight":"normal","style":"normal","svgid":"rubikregular"},{"face":"rubik-italic-webfont","family":"rubik","weight":"normal","style":"italic","svgid":"rubikitalic"},{"face":"rubik-bold-webfont","family":"rubik","weight":"bold","style":"normal","svgid":"rubikbold"},{"face":"rubik-bolditalic-webfont","family":"rubik","weight":"bold","style":"italic","svgid":"rubikbold_italic"},{"face":"rubik-black-webfont","family":"rubik","weight":"900","style":"normal","svgid":"rubikblack"},{"face":"rubik-blackitalic-webfont","family":"rubik","weight":"900","style":"italic","svgid":"rubikblack_italic"},{"face":"rubik-light-webfont","family":"rubik","weight":"300","style":"normal","svgid":"rubiklight"},{"face":"rubik-lightitalic-webfont","family":"rubik","weight":"300","style":"italic","svgid":"rubiklight_italic"}]}},"aleo_font_base":{"fonts":{"faces":[{"face":"aleo-regular-webfont","family":"aleo","weight":"normal","style":"normal","svgid":"aleoregular"},{"face":"aleo-italic-webfont","family":"aleo","weight":"normal","style":"italic","svgid":"aleoitalic"},{"face":"aleo-bold-webfont","family":"aleo","weight":"bold","style":"normal","svgid":"aleobold"},{"face":"aleo-bolditalic-webfont","family":"aleo","weight":"bold","style":"italic","svgid":"aleobolditalic"},{"face":"aleo-light-webfont","family":"aleo","weight":"300","style":"normal","svgid":"aleolight"},{"face":"aleo-lightitalic-webfontt","family":"aleo","weight":"300","style":"italic","svgid":"aleolightitalic"}]}},"pt_serif_font_base":{"fonts":{"faces":[{"face":"pt_serif-web-regular-webfont","family":"PT Serif","weight":"normal","style":"normal","svgid":"pt_serifregular"},{"face":"pt_serif-web-italic-webfont","family":"PT Serif","weight":"normal","style":"italic","svgid":"pt_serifitalic"},{"face":"pt_serif-web-bold-webfont","family":"PT Serif","weight":"bold","style":"normal","svgid":"pt_serifbold"},{"face":"pt_serif-web-bolditalic-webfont","family":"PT Serif","weight":"bold","style":"italic","svgid":"pt_serifbold_italic"}]}},"sourcecodepro":{"fonts":{"faces":[{"face":"sourcecodepro-regular-webfont","family":"Source Code Pro","weight":"normal","style":"normal","svgid":"source_code_proregular"}],"exclusive":false}},"roboto":{"include":"roboto_font_base","definitions":{"mainFont":"roboto, Sans-Serif"},"fonts":{"exclusive":true}},"rubik":{"include":"rubik_font_base","definitions":{"mainFont":"rubik, Sans-Serif"},"fonts":{"exclusive":true}},"aleo":{"include":"aleo_font_base","definitions":{"mainFont":"aleo, Serif"},"fonts":{"exclusive":true}},"pt_serif":{"include":"pt_serif_font_base","definitions":{"mainFont":"PT Serif, Serif"},"fonts":{"exclusive":true}},"roboto_headings":{"include":"heading_fonts, roboto_font_base","definitions":{"headingFont":"roboto, Sans-Serif"}},"rubik_headings":{"include":"heading_fonts, rubik_font_base","definitions":{"headingFont":"rubik, Sans-Serif"}},"aleo_headings":{"include":"heading_fonts, aleo_font_base","definitions":{"headingFont":"aleo, Serif"}},"pt_serif_headings":{"include":"heading_fonts, pt_serif_font_base","definitions":{"headingFont":"PT Serif, Serif"}}}}}},"libraries":{"math":{"type":"mathjax","lib":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML","scale":100}}}'}),define("text!skinRoot/template/btn.html",[],function(){return'\n\n<script type="text/template" id="btn-interactive-template">\n\n\t<%\n\tvar btnClasses = instructions.length ? "" : " no-instructions";\n\tbtnClasses += (text.length ? "" : " no-text");\n\t%>\n\n\t<div class="content screen__margin <%=btnClasses%>">\n\t\t<h5><%=title%></h5>\n\t\t<div class="btn-instructions-title"<%=itu.dirltr()%>>Instructions:</div>\n\t\t<div class="btn-instructions"><%=instructions%></div>\n\t\t<div class="btn-holder">\n\t\t\t<a class="btn-launch" title="<%-tooltip%>" href="<%=url%>"><span aria-hidden="true"><%=text%></span><span class="visuallyhidden"><%=text%> (Opens in a new window)</span></a>\n\t\t</div>\n\t\t<div class="btn-url-for-print">\n\t\t\t<%=url%>\n\t\t</div>\n\t</div>\n\n<\/script>\n\n\n\n\n'}),define("text!skinRoot/template/cloz.html",[],function(){return'<script type="text/template" id="cloz-page-template">\n\t<div class="content">\n\t\t<div class="question">\n\t\t\t<%\n\t\t\tvar doAutoNumber = autoNumberQuestions; // make available in _.each callback scope\n\t\t\tvar questionClasses = !doAutoNumber ? "no-autonumber" : "";\n\t\t\tvar topMarginRequired = !stacked && (stimulus.isEmpty || !isStimulusAboveQuestion())\n\t\t\tif (topMarginRequired) {\n\t\t\t\tquestionClasses += " no-stimulus-margin";\n\t\t\t}\n\t\t\tvar questionNumber = index;\n\t\t\t_.each(questions,function(question,i) {\n\t\t\t%>\n\t\t\t<h3 class="visuallyhidden">Question <%=questionNumber+1%></h3>\n\t\t\t<div id="<%= question.qid %>" class="question <%=questionClasses%>">\n\t\t\t\t<div class="question-txt js-review-focus" tabindex="-1"><span class="question-num"><%= doAutoNumber ? (question.index + 1) + "." : "" %></span><%=question.transformedText.length ? question.transformedText:"&nbsp;"%></div>\n\t\t\t</div>\n\t\t\t<div class="stimulus-after u-float--clearfix"></div>\n\t\t\t<% }); %>\n\t\t</div>\n\t</div>\n<\/script>\n\n\n\n'}),define("text!skinRoot/template/common-ui.html",[],function(){
return'\n\x3c!--\n  only common ui related templates here\n--\x3e\n\n<script type="text/template" id="common-ui-template">\n<\/script>\n\n<script type="text/template" id="common-ui-activity-template">\n\n\t<div class="screen__margin">\n\t\t<div class="header">\n\t\t\t<div class="header-area">\n\t\t\t\t<h2 class="title"><%=title%></h2><div class="hide-show-icon hidden"></div>\n\t\t\t</div>\n\t\t\t<div class="instructions">\n\t\t\t\t<div class="instructions-holder"><%=instructions%></div><div class="instructions-mobile-holder"><%=instructionsMobile%></div>\n\t\t\t</div>\n\t\t\t<div class="page-nav vstdonthighlight"></div>\n\t\t</div>\n\t\t<div id="<%=id%>-activity" class="activity"></div>\n\t\t<div class="global-feedback vstdonthighlight" tabindex="-1"<%=itu.dirltr()%>><span class="global-feedback-title visuallyhidden">Feedback</span><div class="global-feedback-holder"></div></div>\n\t\t<div id="<%=id%>-footer" class="footer">\n\t\t\t<div class="bottom-bar">\n\t\t\t\t<div class="toolbar control-btns">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n<\/script>\n\n<script type="text/template" id="common-ui-page-nav-template">\n\t<div class="main-nav">\n\t\t<div class="nav-wrapper">\n\t\t\t<button class="previous-page-btn" aria-hidden="true" tabindex="-1"></button>\n\t\t\t<button class="ellipsis-left-btn" aria-hidden="true" tabindex="-1"></button>\n\t\t\t<span class="page-btns-holder" role="tablist">\n\t\t\t\t<% for (var i = 0; i < pages.length; i++) { %>\n\t\t\t\t\t<button class="page-btn" role="tab" aria-controls="<%=pages[i].pid%>" tabindex="-1"><span><span class="visuallyhidden">Question</span><%=(i+1)%></span></button><% } %>\n\t\t\t</span>\n\t\t\t<button class="ellipsis-right-btn" aria-hidden="true" tabindex="-1"></button>\n\t\t\t<div class="page-dropdown"<%=itu.dirltr()%>>\n\t\t\t\t<div class="page-dropdown-btn-holder">\n\t\t\t\t\t<button aria-owns="<%=id%>-page-select-bar" class="page-dropdown-btn" aria-expanded="false"><span class="page-dropdown-text"></span><span class="page-dropdown-btn-arrow"></span></button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<button class="next-page-btn" aria-hidden="true" tabindex="-1"></button>\n\t\t</div>\n\t</div>\n\t<div class="page-select-bar-holder">\n\t\t<div class="page-select-bar" role="tablist" id="<%=id%>-page-select-bar">\n\t\t\t<% for (var i = 0; i < pages.length; i++) { %>\n\t\t\t<button class="page-bar-btn" role="tab" aria-controls="<%=pages[i].pid%>" tabindex="-1"><span><span class="visuallyhidden">Question</span><%=(i+1)%></span></button><% } %>\n\t\t</div>\n\t</div>\n<\/script>\n\n<script type="text/template" id="common-ui-vcs-screen-btn-template">\n\t<button data-function="checkAllAnswers" data-subfunction="submit"><%= submittedText %></button>\n\t<button data-function="resetAllAnswers" data-subfunction="reset">Retry</button>\n\t<button data-function="revealAllAnswers" data-subfunction="reveal">Reveal All Answers</button>\n\t<button data-function="print" data-subfunction="print"<%=itu.dirltr()%>><span class="print-btn-icon" aria-hidden="true"></span>Print</button>\n<\/script>\n\n<script type="text/template" id="common-ui-vcs-paged-btn-template">\n\t<button data-function="checkPageAnswer" data-subfunction="submit">Submit</button>\n\t<button data-function="checkPageAnswer" data-subfunction="checkAnswer">Check Answer</button>\n\t<button data-function="showHidePageFeedback" data-subfunction="showFeedback">Show Feedback</button>\n\t<button data-function="showHidePageFeedback" data-subfunction="hideFeedback">Hide Feedback</button>\n\t<button data-function="resetPageAnswer" data-subfunction="reset">Retry</button>\n\t<button data-function="revealPageAnswer" data-subfunction="reveal">Reveal Answer</button>\n\t<button data-function="nextPage" data-subfunction="next">Next Question</button>\n\t<button data-function="print" data-subfunction="print"<%=itu.dirltr()%>><span class="print-btn-icon" aria-hidden="true"></span>Print</button>\n<\/script>\n\n\n<script type="text/template" id="common-ui-vcs-stacked-btn-template">\n\t<button data-function="checkAllAnswers" data-subfunction="submit">Submit All Answers</button>\n\t<button data-function="checkAllAnswers" data-subfunction="checkAnswer">Check All Answers</button>\n\t<button data-function="showHideAllFeedback" data-subfunction="showFeedback">Show Feedback</button>\n\t<button data-function="showHideAllFeedback" data-subfunction="hideFeedback">Hide Feedback</button>\n\t<button data-function="resetAllAnswers" data-subfunction="reset">Retry</button>\n\t<button data-function="revealAllAnswers" data-subfunction="reveal">Reveal All Answers</button>\n\t<button data-function="print" data-subfunction="print"<%=itu.dirltr()%>><span class="print-btn-icon" aria-hidden="true"></span>Print</button>\n<\/script>\n\n<script type="text/template" id="common-ui-vcs-stacked-single-question-btn-template">\n\t<button data-function="checkAllAnswers" data-subfunction="submit">Submit Answer</button>\n\t<button data-function="checkAllAnswers" data-subfunction="checkAnswer">Check Answer</button>\n\t<button data-function="showHideAllFeedback" data-subfunction="showFeedback">Show Feedback</button>\n\t<button data-function="showHideAllFeedback" data-subfunction="hideFeedback">Hide Feedback</button>\n\t<button data-function="resetAllAnswers" data-subfunction="reset">Retry</button>\n\t<button data-function="revealAllAnswers" data-subfunction="reveal">Reveal Answer</button>\n\t<button data-function="print" data-subfunction="print"<%=itu.dirltr()%>><span class="print-btn-icon" aria-hidden="true"></span>Print</button>\n<\/script>\n\n<script type="text/template" id="common-ui-text-page-display">\n\t<span class="visuallyhidden">Question</span><%=index%> of <%=total%>\n<\/script>\n\n\n\n'}),define("text!skinRoot/template/engine-shared.html",[],function(){return'\n\x3c!--\n  enter any templates that apply to all engines here\n  these templates will get appended to the end of the per engine templates\n  (as they could feasibly override this structure)\n--\x3e\n\n<script type="text/template" id="common-ui-page-base">\n\t<div class="page" id="<%=pid%>">\n\t\t<div class="stimulus"/>\n\t\t<div class="content-holder"/>\n\t\t<% if (useFeedbackFocusPrefixDiv) { %>\n\t\t\x3c!-- focus helper on iOS --\x3e\n\t\t<div class="feedback-focus-helper" tabindex="-1">Swipe next to hear feedback</div>\n\t\t<% } %>\n\t\t<div class="feedback vstdonthighlight" tabindex="-1">\n\t\t\t<span class="visuallyhidden">Feedback</span>\n\t\t\t<p class="result"<%=itu.dirltr()%>></p> \x3c!-- dynamic feedback --\x3e\n\t\t\t\x3c!-- main feedback if present --\x3e\n\t\t\t<div class="feedback-content stimulus"></div>\n\t\t</div>\n\t</div>\n<\/script>\n\n\n<script type="text/template" id="common-ui-page-stimulus">\n\t<div class="audio-holder">\n\t\t<div class="audio-player"></div>\n\t\t<div class="audio-transcript media-transcript-holder"></div>\n\t</div>\n\t<%\n\tvar holderClass = "";\n\tif (image) {\n\tvar data = {\n\t\timage: obj.image,\n\t\timageAlt: obj.imageAlt,\n\t\timageCaption: obj.imageCaption,\n\t\timageControls: obj.imageControls\n\t}\n\tvar isLegacy = itu.isLegacyImg(data);\n\tdata.isFloating = !isLegacy && obj.text.length > 0;\n\tdata.isLegacyDynamic = isLegacy; // legacy dynamics used their own styling not global figure styles\n\tholderClass = isLegacy ? " legacy-image-holder" : "";\n\t%>\n\t<div class="fig-holder<%=holderClass%>">\n\t\t<%= itu.createImg(data) %>\n\t</div>\n\t<% } %>\n\t<div class="reading"><%=text%></div>\n\t<div class="video-holder">\n\t\t<div class="video-info"><%=videoInfo%></div>\n\t\t<div class="video-player"></div>\n\t\t<div class="video-transcript media-transcript-holder"></div>\n\t</div>\n<\/script>\n\n<script type="text/template" id="common-ui-transcript">\n\t<%\n\t\tvar transcriptBtnID = id + "-show-btn";\n\t\tvar transcriptContentID = id + "-content";\n\t%>\n\t<div class="media-transcript vstdonthighlight">\n\t\t<div class="media-transcript-toolbar">\n\t\t\t<button id="<%=transcriptBtnID%>" class="media-transcript-show-btn" aria-controls="<%=transcriptContentID%>" aria-expanded="false" title="transcript"><span class="visuallyhidden">Transcript</span></button>\n\t\t</div>\n\t\t<div id="<%=transcriptContentID%>" class="media-transcript-body-holder" aria-labelledby="<%=transcriptBtnID%>" tabindex="0">\n\t\t\t<div class="media-transcript-body"></div>\n\t\t</div>\n\t</div>\n<\/script>\n\n\n\x3c!--\n  audio and video stimulus templates common to all engines\n--\x3e\n<script type="text/template" id="common-ui-video-stimulus">\n\t<video controls="controls" preload="none"<%= itu.conditionalAttribute(videoPoster !== "", "poster", videoPoster) %>>\n\t\t<source src="<%-video%>" type="video/mp4" />\n\n\t\t\x3c!-- label should be "captions off" until we support multiple subtitles or captions --\x3e\n\t\t<% if (videoCaption) { %>\n\t\t\t<track src="<%-videoCaption%>" kind="captions" srclang="en" label="captions on" default="default" />\n\t\t<% } %>\n\t</video>\n<\/script>\n\n<script type="text/template" id="common-ui-embedded-video-stimulus">\n\t<div class="embedded-video-holder"></div>\n<\/script>\n\n<script type="text/template" id="common-ui-audio-stimulus">\n\t<audio controls="controls" preload="none">\n\t\t<source src="<%-audio%>" type="audio/mpeg" />\n\t</audio>\n<\/script>\n\n\n<script type="text/template" id="common-ui-reveal-stimulus-template">\n\t<%\n\tvar revealBtnID = id + "-show-btn";\n\tvar revealContentID = id + "-content";\n\t%>\n\t<div class="reveal-stimulus vstdonthighlight">\n\t\t<button id="<%=revealBtnID%>" class="reveal-stimulus-show-btn" aria-controls="<%=revealContentID%>" aria-expanded="false">Hint</button>\n\t\t<div id="<%=revealContentID%>" class="reveal-stimulus-content clearfix" aria-labelledby="<%=revealBtnID%>">\n\t\t\t<div class="reveal-stimulus-arrow"></div>\n\t\t\t<div class="stimulus reveal-stimulus-content-holder"></div>\n\t\t</div>\n\t</div>\n<\/script>\n\n\n<script type="text/template" id="utility-empty-template">\n\t<div class="empty-indicator empty-<%=blockType%> screen__margin"<%=itu.dirltr()%>><span aria-hidden="true" class="<%=blockType%>-icon"/><span>Click to add <%=blockLabel%></span></div>\n<\/script>\n\n<script type="text/template" id="utility-empty-epub-template">\n\t<div class="empty-indicator empty-<%=blockType%> screen__margin"<%=itu.dirltr()%>><span aria-hidden="true" class="<%=blockType%>-icon"/><span>This block is empty</span></div>\n<\/script>\n\n<script type="text/template" id="common-ui-text-answer-correct">\nYour answer is correct.\n<\/script>\n\n<script type="text/template" id="common-ui-text-answer-incorrect">\nYour answer is incorrect.\n<\/script>\n\n<script type="text/template" id="common-ui-text-answer-incorrect-partial-correct">\n\tYou have one or more incorrect answers.\n<\/script>\n\n<script type="text/template" id="common-ui-text-answer-incorrect-missing-answers">\n\tYour answer is incorrect because you missed one or more answers.\n<\/script>\n\n<script type="text/template" id="common-ui-text-answer-submitted">\nYour answer has been submitted.\n<\/script>\n\n<script type="text/template" id="common-ui-scored-screen-header-attempts">\n\t<% if (attempts < 0) { %>\n\t\t<p>You have unlimited attempts.</p>\n\t<% } else { %>\n\t\t<% var attemptPlural = attempts === 1 ? "attempt" : "attempts"; %>\n\t\t<p>You have <%= attempts %> <%= attemptPlural %> left.</p>\n\t<% } %>\n<\/script>\n\n<script type="text/template" id="common-ui-scored-screen-feedback-correct">\n\t<div class="feedback__text correct">\n\t\t<span class="visuallyhidden">Feedback</span>\n\t\t<div class="feedback__message">All of your scorable answers are correct.</div>\n\t\t<button class="feedback__review-link">Review your answers</button>.\n\t</div>\n<\/script>\n\n<script type="text/template" id="common-ui-scored-screen-feedback-incorrect">\n\t<div class="feedback__text incorrect">\n\t\t<span class="visuallyhidden">Feedback</span>\n\t\t<div class="feedback__message">One or more of your scorable answers is incorrect.</div>\n\t\t<button class="feedback__review-link">Review your answers</button>.\n\t</div>\n<\/script>\n\n<script type="text/template" id="common-ui-scored-screen-feedback-submitted">\n\t<div class="feedback__text submitted">\n\t\t<div class="feedback__message">Your answer has been submitted.</div>\n\t</div>\n<\/script>\n\n<script type="text/template" id="common-ui-text-answer-cannot-submit">\n\tAnswers are not saved between screens. Print these questions and answers, or copy any content you wish to retain.\n<\/script>\n\n<script type="text/template" id="common-ui-text-answer">\nanswer\n<\/script>\n\n<script type="text/template" id="common-ui-text-not-answered">\nnot attempted\n<\/script>\n\n<script type="text/template" id="common-ui-text-correct-shown">\ncorrect answer\n<\/script>\n\n<script type="text/template" id="common-ui-text-marked-correct">\nmarked correct\n<\/script>\n\n<script type="text/template" id="common-ui-text-marked-incorrect">\nmarked incorrect\n<\/script>\n\n<script type="text/template" id="common-ui-correct-answer">\ncorrect answer\n<\/script>\n\n<script type="text/template" id="common-ui-global-feedback-correct">\n\t<% if (useFeedbackFocusPrefixDiv) { %>\n\t\x3c!-- focus helper on iOS --\x3e\n\t\t<div class="feedback-focus-helper" tabindex="-1">Swipe next to hear feedback</div>\n\t<% } %>\n\tAll of your answers are correct.\n<\/script>\n\n<script type="text/template" id="common-ui-global-feedback-incorrect">\n\t<% if (useFeedbackFocusPrefixDiv) { %>\n\t\x3c!-- focus helper on iOS --\x3e\n\t\t<div class="feedback-focus-helper" tabindex="-1">Swipe next to hear feedback</div>\n\t<% } %>\n\tOne or more answers are incorrect. <button>Review your answers</button>.\n<\/script>\n\n<script type="text/template" id="common-ui-reveal-stimulus-show-hint">\n\tHint\n<\/script>\n\n<script type="text/template" id="common-ui-reveal-stimulus-hide-hint">\n\tClose Hint\n<\/script>\n'}),define("text!skinRoot/template/essay.html",[],function(){return'<script type="text/template" id="essay-page-template">\n\n\t<div class="content">\n\t\t<%\n\t\tvar doAutoNumber = autoNumberWritingPrompts; // make available in _.each callback scope\n\t\tvar maxPages = numPages;\n\t\tvar questionNumber = index;\n\t\t_.each(questions,function(question,i) {\n\t\tvar autoNumberWritingPromptsClass = doAutoNumber ? " autonumber" : "";\n\t\t%>\n\t\t<h3 class="visuallyhidden">Question <%=questionNumber+1%></h3>\n\t\t<div id="<%= question.qid %>" class="question<%=autoNumberWritingPromptsClass%>">\n\t\t\t<%\n\t\t\t_.each(question.prompts,function(prompt,i) {\n\t\t\tvar questionid = pid + "-prompt-question-" + i;\n\t\t\tvar inputid = pid + "-answer-input-" + i;\n\t\t\tvar itemLabel = "";\n\t\t\tif (doAutoNumber) {\n\t\t\t\titemLabel =  questionNumber + 1;\n\t\t\t\tif (question.prompts.length > 1) {\n\t\t\t\t\titemLabel += String.fromCharCode(String("a").charCodeAt(0) + i);\n\t\t\t\t}\n\t\t\t\titemLabel += ".";\n\t\t\t}\n\t\t\t%>\n\t\t\t<div class="prompt">\n\t\t\t\t<div class="prompt-question" id="<%=questionid%>">\n\t\t\t\t\t<span class="question-num"><%=itemLabel%></span><div class="prompt-txt"><%=prompt.text%></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="stimulus-after u-float--clearfix"></div>\n\t\t\t\t<% if (isPrint) { %>\n\t\t\t\t\t<div id="<%=inputid%>" class="answer-input type-in-box"></div>\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<textarea id="<%=inputid%>" aria-labelledby="<%=questionid%>" spellcheck="false" autocapitalize="none" autocomplete="off" class="answer-input type-in-box"></textarea>\n\t\t\t\t<% } %>\n\t\t\t</div>\n\t\t\t<% }); %>\n\t\t</div>\n\t\t<% }); %>\n\t</div>\n\n<\/script>\n\n\n\n\n'}),define("text!skinRoot/template/fib.html",[],function(){return'\n\n<script type="text/template" id="fib-page-template">\n\n\t<div class="content">\n\t\t<%\n\t\tvar doAutoNumber = autoNumberQuestions; // make available in _.each callback scope\n\t\tvar questionNumber = index;\n\t\tvar questionClasses = !doAutoNumber ? "no-autonumber" : "";\n\t\tvar topMarginRequired = !stacked && (stimulus.isEmpty || !isStimulusAboveQuestion())\n\t\tif (topMarginRequired) {\n\t\t\tquestionClasses += " no-stimulus-margin";\n\t\t}\n\t\t_.each(questions,function(question,i) {\n\t\t%>\n\t\t<h3 class="visuallyhidden">Question <%=questionNumber+1%></h3>\n\t\t<div id="<%= question.qid %>" class="question <%=questionClasses%>" >\n\t\t\t<div class="question-txt js-review-focus" tabindex="-1"><span class="question-num"><%= doAutoNumber ? (question.index + 1) + "." : "" %></span><%=question.transformedText.length ? question.transformedText:"&nbsp;"%></div>\n\t\t\t<div class="stimulus-after u-float--clearfix"></div>\n\t\t</div>\n\t\t<% }); %>\n\t</div>\n\n<\/script>\n\n'}),define("text!skinRoot/template/fibdd.html",[],function(){return'<script type="text/template" id="fibdd-page-template">\n\t<div class="content">\n\t\t<div class="question">\n\t\t<%\n\t\tvar doAutoNumber = autoNumberQuestions; // make available in _.each callback scope\n\t\tvar questionNumber = index;\n\t\tvar questionClasses = !doAutoNumber ? "no-autonumber" : "";\n\t\tvar topMarginRequired = !stacked && (stimulus.isEmpty || !isStimulusAboveQuestion())\n\t\tif (topMarginRequired) {\n\t\t\tquestionClasses += " no-stimulus-margin";\n\t\t}\n\t\t_.each(questions,function(question,i) {\n\t\t%>\n\t\t<div class="word-bank">\n\t\t\t<%\n\t\t\t\t_.each(question.shuffledAnswers, function(answer, i) {\n\t\t\t%>\n\t\t\t<span class="word-bank-answer"><%-answer%></span>\n\t\t\t<% }) %>\n\t\t</div>\n\t\t<h3 id="<%= question.qid %>" class="visuallyhidden">Question <%=questionNumber+1%></h3>\n\t\t<div class="dragable-container">\n\t\t<%\n\t\t_.each(question.shuffledAnswers,function(answer,i) {\n\t\t%>\n\t\t<div class="dragable-element-container">\n\t\t\t<div class="dragable-element" style="top: 0px;left: 0px;"><%-answer.length ? answer:"&nbsp;"%></div>\n\t\t</div>\n\n\t\t<% }); %>\n\t\t</div>\n\n\t\t<div class="question <%=questionClasses%>" >\n\t\t\t<div class="question-txt js-review-focus" tabindex="-1"><span class="question-num"><%= doAutoNumber ? (question.index + 1) + "." : "" %></span><%=question.transformedText.length ? question.transformedText:"&nbsp;"%></div>\n\t\t</div>\n\t\t<div class="stimulus-after u-float--clearfix"></div>\n\t\t</div>\n\t\t<% }); %>\n\t</div>\n\n<\/script>\n\n\n\n'}),define("text!skinRoot/template/flags.html",[],function(){return'<script type="text/template" id="flagsimulator-template">\n\t<div id="<%= id %>" class="flag-simulator">\n\t\t<div>\n\t\t\t<button data-function="close">Close</button>\n\t\t</div>\n\t\t<div>\n\t\t\t<form>\n\t\t\t\t<label for="<%= id %>_status_0">Open</label>\n\t\t\t\t<% if (status === "Open") { %>\n\t\t\t\t\t<input id="<%= id %>_status_0" name="status" value="Open" type="radio" checked="checked" />\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<input id="<%= id %>_status_0" name="status" value="Open" type="radio"/>\n\t\t\t\t<% } %>\n\t\t\t\t<label for="<%= id %>_status_1">Resolved</label>\n\t\t\t\t<% if (status === "Resolved") { %>\n\t\t\t\t\t<input id="<%= id %>_status_1" name="status" value="Resolved" type="radio" checked="checked" />\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<input id="<%= id %>_status_1" name="status" value="Resolved" type="radio"/>\n\t\t\t\t<% } %>\n\t\t\t</form>\n\t\t</div>\n\t\t<div>\n\t\t\t<label for="<%= id %>_assignee">Assignee:</label>\n\t\t\t<select id="<%= id %>_assignee">\n\t\t\t\t<% for (var i = 0, j = assignees.length; i < j; i++) { %>\n\t\t\t\t\t<% if (assignee === assignees[i]) { %>\n\t\t\t\t\t\t<option selected="selected"><%= assignees[i] %></option>\n\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t<option><%= assignees[i] %></option>\n\t\t\t\t\t<% } %>\n\t\t\t\t<% } %>\n\t\t\t</select>\n\t\t</div>\n\t\t<div>\n\t\t\t<label for="<%= id %>_comment">Add Comment:</label>\n\t\t\t<textarea id="<%= id %>_comment"></textarea>\n\t\t</div>\n\t\t<div>\n\t\t\t<button data-function="close">Cancel</button>\n\t\t\t<button data-function="save">Save</button>\n\t\t</div>\n\t</div>\n<\/script>\n'}),define("text!skinRoot/template/hspot.html",[],function(){return'\n\n<script type="text/template" id="hspot-interactive-template">\n\n\t<div class="screen__margin">\n\t\t<div class="content">\n\t\t\t<figure>\n\t\t\t\t<div class="spots-image-holder">\n\t\t\t\t\t<img class="vst-draggable vst-click <%= hasBorder ? \'has-border\' : \'\' %>" draggable="false" src="<%=image%>" alt="<%-imageAlt%>"/>\n\t\t\t\t\t<span class="spots-image-a11y-helper visuallyhidden">Select buttons below to read about elements of the image</span>\n\t\t\t\t\t<div class="print-label-holder">\n\t\t\t\t\t\t<% for (var i = 0; i < hotspots.length; i++) {\n\t\t\t\t\t\tvar hotspot = hotspots[i]\n\t\t\t\t\t\t%>\n\t\t\t\t\t\t<span class="print-label" style="<%=hotspot.pos%>"><%=i+1%></span>\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<% var captionClass = imageCaption.length ? "" : "spots-image-no-caption" %>\n\t\t\t\t<figcaption class="spots-image-caption <%=captionClass%>"><%=imageCaption%></figcaption>\n\t\t\t</figure>\n\t\t\t<table>\n\t\t\t\t<% for (var i = 0; i < hotspots.length; i++) {\n\t\t\t\t\tvar hotspot = hotspots[i]\n\t\t\t\t%>\n\t\t\t\t<tr><td><%=i+1%></td><td><%-hotspot.text%></td></tr>\n\t\t\t\t<% } %>\n\t\t\t</table>\n\t\t</div>\n\t</div>\n\n<\/script>\n\n\x3c!-- directionless hotspot svg --\x3e\n<script type="text/template" data-hotspot-group="studio-spot1" data-hotspot-name="radio" data-hotspot-type="directionless" data-hotspot-swatch-size="18px" data-hotspot-translate="-11,-11">\n\t<svg aria-hidden="true" <%=style%> width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg">\n\t<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n\t\t<g class="hotspot-icon" transform="translate(-470.000000, -29.000000)" fill="<%=color%>">\n\t\t\t<g transform="translate(471.000000, 30.000000)">\n\t\t\t\t<path class="hotspot-icon-stroke" d="M-0.5,10 C-0.5,4.20101013 4.20101013,-0.5 10,-0.5 C15.7989899,-0.5 20.5,4.20101013 20.5,10 C20.5,15.7989899 15.7989899,20.5 10,20.5 C4.20101013,20.5 -0.5,15.7989899 -0.5,10 Z M5.5,10 C5.5,12.4852814 7.51471863,14.5 10,14.5 C12.4852814,14.5 14.5,12.4852814 14.5,10 C14.5,7.51471863 12.4852814,5.5 10,5.5 C7.51471863,5.5 5.5,7.51471863 5.5,10 Z" stroke="<%=strokeColor%>"></path>\n\t\t\t\t<circle fill="<%=selectedColor%>" class="hotspot-icon-selected" cx="10.0008337" cy="10.0008337" r="3.1675"></circle>\n\t\t\t</g>\n\t\t</g>\n\t</g>\n\t</svg>\n<\/script>\n\n\x3c!-- directed hotspot svg --\x3e\n<script type="text/template" data-hotspot-group="studio-spot1" data-hotspot-name="pointer" data-hotspot-type="cardinal" data-hotspot-swatch-size="24px" data-hotspot-translate-left="-2,-12" data-hotspot-translate-bottom="-19,-29,-7,7" data-hotspot-translate-right="-35,-11" data-hotspot-translate-top="-18,6,-7,-5">\n\t<svg aria-hidden="true" <%=style%> width="37px" height="23px" viewBox="0 0 37 23" version="1.1" xmlns="http://www.w3.org/2000/svg">\n\t<g  class="hotspot-icon" transform="translate(-560.000000, -29.000000)" fill="<%=color%>">\n\t\t<g transform="translate(561.000000, 30.000000)">\n\t\t\t<path class="hotspot-icon-stroke" d="M17.9920028,1.0283148 C19.5569119,0.140348664 21.3279037,-0.333333651 23.1666663,-0.333333651 C28.9656562,-0.333333651 33.6666663,4.36767648 33.6666663,10.1666663 C33.6666663,15.9656562 28.9656562,20.6666663 23.1666663,20.6666663 C21.3232679,20.6666663 19.5479826,20.1905926 18.0038821,19.3109576 L-0.284700338,10.1666663 L17.9920028,1.0283148 Z M18.6666663,10.1666663 C18.6666663,12.6519477 20.681385,14.6666663 23.1666663,14.6666663 C25.6519477,14.6666663 27.6666663,12.6519477 27.6666663,10.1666663 C27.6666663,7.68138497 25.6519477,5.66666635 23.1666663,5.66666635 C20.681385,5.66666635 18.6666663,7.68138497 18.6666663,10.1666663 Z" stroke="<%=strokeColor%>" transform="translate(17.000000, 10.166666) rotate(180.000000) translate(-17.000000, -10.166666) "></path>\n\t\t\t<circle fill="<%=selectedColor%>" class="hotspot-icon-selected" cx="10.8325" cy="10.1658327" r="3.1675"></circle>\n\t\t</g>\n\t</g>\n\t</svg>\n<\/script>\n\n\n\n\n'}),define("text!skinRoot/template/mc.html",[],function(){return'\n\n<script type="text/template" id="mc-page-template">\n\n\t<div class="content">\n\t\t<%\n\t\tvar doAutoNumber = autoNumberQuestions; // make available in _.each callback scope\n\t\tvar pid = pid; // screen wide unique id prefix\n\t\t_.each(questions,function(question,i) {\n\t\t\tvar answerGroupTitleID = "answer-group-" + question.index;\n\t\t\tvar questionClasses = question.hasImageAnswers ? "image-answers" : "";\n\t\t\tvar noQuestionTxt = !question.text.trim().length;\n\t\t\tif (!doAutoNumber) {\n\t\t\t\tquestionClasses += " no-autonumber";\n\t\t\t}\n\t\t\tif (noQuestionTxt) {\n\t\t\t\tquestionClasses += " no-question-text";\n\t\t\t}\n\t\t%>\n\t\t<h3 class="visuallyhidden">Question <%=question.index + 1%></h3>\n\t\t<div id="<%= question.qid %>" class="question <%=questionClasses%>">\n\t\t<% if (!noQuestionTxt) { %>\n\t\t<div class="question-txt js-review-focus" tabindex="-1"><span class="question-num"><%= doAutoNumber ? (question.index + 1) + "." : "" %></span><%=question.text%></div>\n\t\t<% } %>\n\t\t\t<div class="stimulus-after u-float--clearfix"/>\n\t\t\t\t\t<div class="answers">\n\t\t\t<%\n\t\t\tvar answers = question.answers;\n\t\t\t_.each(answers,function(answer,j) {\n\t\t\t\tvar base = pid + "-answer-txt-" + question.index;\n\t\t\t\tvar id = base + "-" + j;\n\t\t\t\tvar inputType = question.multiSelect ? "checkbox" : "radio";\n\t\t\t\tvar inputName = base + "-input";\n\t\t\t%>\n\t\t\t\t<% if (question.hasImageAnswers) { %>\n\t\t\t\t<label class="answer image-answer vcs-click" for="<%=id%>">\n\t\t\t\t\t<input type="<%=inputType%>" class="visuallyhidden" name="<%=inputName%>" id="<%=id%>" value="<%= _.escape(answer.value) %>"/>\n\t\t\t\t\t<span/>\n\t\t\t\t\t<span class="image-holder"><img src="<%=answer.image%>" alt="<%=answer.imageAlt%>"/></span>\n\t\t\t\t</label>\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<label class="answer vcs-click vstdonthighlight" for="<%=id%>">\n\t\t\t\t\t\t<input type="<%=inputType%>" class="visuallyhidden" name="<%=inputName%>" id="<%=id%>" value="<%= _.escape(answer.value) %>"/>\n\t\t\t\t\t\t<span class="answer-txt"><%=options.stripMCAnswerPs ? itu.htmlPtoBr(answer.text) : answer.text%></span>\n\t\t\t\t\t</label>\n\n\t\t\t\t<% }\n\t\t\t\t }); %>\n\t\t\t</div>\n\t\t\t<div class="answers-feedback visuallyhidden">\n\t\t\t<% _.each(question.answers,function(answer,j) { %>\n\t\t\t\t<div class="status"></div>\n\t\t\t<% }); %>\n\t\t\t</div>\n\t\t<% }); %>\n\t\t</div>\n\t</div>\n\n<\/script>\n\n`\n'}),define("text!skinRoot/template/root-ui.html",[],function(){return'\n\x3c!--\n  only root ui related templates here\n--\x3e\n\n<script type="text/template" id="root-ui-overlay-root-template">\n\t<div class="overlay-root vstdonthighlight">\n\t\t<div class="modal-cover-holder">\n\t\t\t<div class="modal-cover-outer"><div class="modal-cover"></div></div>\n\t\t</div>\n\t</div>\n<\/script>\n\n<script type="text/template" id="root-ui-loading-icon-template">\n\t<div class="loading-spinner" tabindex="-1">\n\t\t\x3c!-- Set opacity to 0 inline to prevent screen flash --\x3e\n\t\t<div class="spinner-message visuallyhidden" style="opacity: 0">Loading</div>\n\t\t<div class="spinner"></div>\n\t</div>\n<\/script>\n\n<script type="text/template" id="root-ui-zoomable-image-wrapper-template">\n\t<div class="image-zoom-holder">\n\t\t<img class="image-zoom-proxy"/>\n\t\t<button class="image-zoom-button"><span class="visuallyhidden">zoom image</span></button>\n\t</div>\n<\/script>\n\n<script type="text/template" id="root-ui-zoom-image-popup-template">\n\t<div class="zoom-image-popup">\n\t\t<div class="image-zoom-holder">\n\t\t\t<button class="image-zoom-close-btn" tabindex="0"><span class="visuallyhidden">close image zoom</span></button>\n\t\t</div>\n\t</div>\n<\/script>\n\n<script type="text/template" id="root-ui-text-popup-template">\n\t<div class="text-popup">\n\t\t<button class="text-popup-close-btn" tabindex="0"><span class="visuallyhidden">close text popup</span></button>\n\t\t<div class="text-popup-container"></div>\n\t</div>\n<\/script>\n\n<script type="text/template" id="root-ui-text-popup-term-definition-template">\n\t<div class="text-popup-cutout"></div>\n\t<span class="popup-term"><%=term%></span><span class="popup-definition"><%=definition%></span>\n<\/script>\n\n<script type="text/template" id="root-ui-text-alert-template">\n\t<div class="alert-container">\n\t\t<div class="screen__margin">\n\t\t\t<div class="alert-modal" role="alertdialog" describedby="alert-content">\n\t\t\t\t<div class="alert-modal__btn-container">\n\t\t\t\t\t<button class="alert-modal__close-btn js-close-btn" tabindex="0"><span class="visuallyhidden"><%= closeText %></span></button>\n\t\t\t\t</div>\n\t\t\t\t<div class="alert-modal__icon-container">\n\t\t\t\t\t<div class="alert-modal__icon"></div>\n\t\t\t\t</div>\n\t\t\t\t<div id="alert-content" class="alert-modal__message"><%= message %></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n<\/script>\n\n<script type="text/template" id="root-ui-select-template">\n\t<div class="selection-items">\n\t\t<label for="<%= id %>"><%= label %></label>\n\t\t<select id="<%= id %>" class="drop-element drop-element-select" spellcheck="false">\n\t\t<% _.each(selectionOptions, function(selectionOption, i) { %>\n\t\t\t<option value="<%= selectionOption.value %>"><%= selectionOption.label %></option>\n\t\t<% }); %>\n\t\t</select>\n\t</div>\n<\/script>\n\n<script type="text/template" id="root-ui-modal-template">\n\t<div class="modal-container">\n\t\t<div class="screen__margin">\n\t\t\t<div class="modal u-float--clearfix" role="dialog" describedby="modal-dialog-content">\n\t\t\t\t<div class="modal__close-btn-container">\n\t\t\t\t\t<button class="modal__close-btn js-close-btn" tabindex="0"><span class="visuallyhidden"><%= closeText %></span></button>\n\t\t\t\t</div>\n\t\t\t\t<div class="modal__icon-container">\n\t\t\t\t\t<div class="modal__icon"></div>\n\t\t\t\t</div>\n\n\t\t\t\t<div id="modal-dialog-content" class="modal__contents">\n\t\t\t\t\t<% if (message) { %>\n\t\t\t\t\t\t<div class="modal__message"><%= message %></div>\n\t\t\t\t\t<% } %>\n\t\t\t\t\t<div class="modal__selection-btns">\n\t\t\t\t\t\t<button data-function="cancel" class="modal__selection-btn js-cancel-btn"><%= cancelText %></button>\n\t\t\t\t\t\t<button data-function="confirm" class="modal__selection-btn js-confirm-btn js-last-btn"><%= confirmText %></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n<\/script>\n\n<script type="text/template" id="root-ui-tooltip-template">\n\t<div class="tooltip-container" aria-hidden="true">\n\t\t<span class="tooltip-text"><%= text %></span>\n\t</div>\n<\/script>\n'}),define("text!skinRoot/template/screen.html",[],function(){
return'<script type="text/template" id="screeneditor-template">\n\t<div id="<%=id%>" xmlns:epub="http://www.idpf.org/2007/ops"\n\t<% if (isScoredScreen) { %> data-activityId="<%=id%>" epub:type="assessment" <% } %> class="screen">\n\t\t<div class="screengrid">\n\t\t\t<header class="screen__margin screen__header u-hide-element vstdonthighlight">\n\t\t\t\t<% if (showScreenHeader) { %>\n\t\t\t\t\t<div class="screen__heading u-float--clearfix">\n\t\t\t\t\t\t<div class="screen__icon u-float--left"></div>\n\t\t\t\t\t\t<h2 class="screen__title" tabindex="-1"></h2>\n\t\t\t\t\t</div>\n\t\t\t\t<% } %>\n\n\t\t\t\t<div class="screen__instructions"></div>\n\t\t\t</header>\n\t\t</div>\n\t\t<% if (!isPrerendering) { %>\n\t\t\t<div class="editor-layout">\n\t\t<% } %>\n\t\t\t<div class="screen__content">\n\t\t\t\t<% if (!isPrerendering) { %>\n\t\t\t\t\t<div class="u-hidden split-screen-icon" />\n\t\t\t\t\t<div class="u-hidden insert-add-icon" />\n\t\t\t\t\t<div class="drag-proxy">\n\t\t\t\t\t\tDrag to move Block\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="add-block-btn"<%=itu.dirltr()%>>\n\t\t\t\t\t\t<span class="add-block-icon"></span>Add Block\n\t\t\t\t\t</div>\n\t\t\t\t\t<button class="goto-top-btn" tabindex="-1" title="Go to top of Block"></button>\n\t\t\t\t\t<div class="block-toolbar">\n\t\t\t\t\t\t<div class="toolbar">\n\t\t\t\t\t\t\t<button class="move-btn" title="Drag the Block to a new location"></button>\n\t\t\t\t\t\t\t<span class="block-label" title="Block type"></span>\n\t\t\t\t\t\t\t<button class="edit-btn" title="Edit the Block content">Edit</button>\n\t\t\t\t\t\t\t<button class="done-btn hidden" title="Back to content view">Done</button>\n\t\t\t\t\t\t\t<button class="duplicate-block-btn" title="Duplicate this Block"></button>\n\t\t\t\t\t\t\t<% if (flagsEnabled) { %>\n\t\t\t\t\t\t\t\t<button class="flags-btn" title="View flags for this Block"></button>\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\t<button class="delete-btn" title="Delete this Block"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="flags-holder" />\n\t\t\t\t<% } %>\n\t\t\t</div>\n\t\t<% if (!isPrerendering) { %>\n\t\t\t</div>\n\t\t<% } %>\n\t\t<div class="screengrid">\n\t\t\t<footer class="screen__margin screen__footer u-hide-element vstdonthighlight">\n\t\t\t\t<div class="feedback">\n\t\t\t\t\t<div class="feedback__content js-feedback-focus" tabindex="-1"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="control-btns"></div>\n\t\t\t</footer>\n\t\t</div>\n\t</div>\n<\/script>\n\n<script type="text/template" id="screen-insert-toolbar-template">\n\t<div class="insert-container">\n\t\t<div class="insert-indicator">\n\t\t\t<div class="insert-line">\n\t\t\t\t<button class="split-screen-btn" title="Insert Screen Break"><span class="split-screen-icon"></span></button>\n\t\t\t\t<button class="insert-block-text insert-line-text"><span class="insert-add-icon" /><span class="insert-add-text">Add Block</span></button>\n\t\t\t\t<div class="split-screen-text insert-line-text">Insert Screen Break</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="move-indicator">\n\t\t\t<div class="move-box"></div>\n\t\t</div>\n\t</div>\n<\/script>\n\n<script type="text/template" id="screen-block-edit-template">\n\t<%\n\t\tvar blockClasses = "block";\n\t\tif (!info.editable && !isPrerendering) {\n\t\t\tblockClasses += " not-editable";\n\t\t}\n\t%>\n\t<div class="<%=blockClasses%>">\n\t\t<div id="<%= id %>" class="block-content"></div>\n\t\t<% if (!isPrerendering) { %>\n\t\t\t<div class="flag-indicator"></div>\n\t\t\t<div class="spinner-container"><div class="spinner"/></div>\n\t\t<% } %>\n\t</div>\n<\/script>\n\n\n<script type="text/template" id="screen-block-gap-template">\n\t<div class = "gap">\n\t</div>\n<\/script>\n\n<script type="text/template" id="screen-block-editor-template">\n\t<div class="editor-holder"></div>\n<\/script>\n\n\n<script type="text/template" id="screen-text-confirm-block-delete">\n\t<p>Delete this Block?</p>\n<\/script>\n\n<script type="text/template" id="screen-text-confirm-split-template">\n\t<p>The content below the break will be moved to a new screen.</p>\n<\/script>\n'}),define("text!skinRoot/template/slides.html",[],function(){return'\n\n<script type="text/template" id="slides-interactive-template">\n\t<div class="screen__margin">\n\t\t<div class="content">\n\t\t\t<h2 class="header-title"><%=headerTitle%></h2>\n\t\t\t<p class="header-desc"><%=headerDesc%></p>\n\t\t\t<div class="slides-content">\n\t\t\t\t<div class="slides-holder">\n\t\t\t\t\t<div class="slides-bg">\n\t\t\t\t\t\t<button class="slides-nav slides-previous-btn"><span class="visuallyhidden">Previous Slide</span></button>\n\t\t\t\t\t\t<button class="slides-nav slides-next-btn"><span class="visuallyhidden">Next Slide</span></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<%\n\t\t\t\t\t_.each(slides,function(slide,i) {\n\t\t\t\t\t%>\n\t\t\t\t\t<%\n\t\t\t\t\t\tvar figCaptionTag = "div";\n\t\t\t\t\t\tif ( slide.searchableImage ) {\n\t\t\t\t\t\t\tfigCaptionTag = \'figcaption\';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar div = slide.searchableImage ? "figure" : "div";\n\t\t\t\t\t%>\n\t\t\t\t\t<<%= div %> class="slides-slide <%= slide.enableBorder ? \'has-border\' : \'\' %>">\n\t\t\t\t\t\t<div class="slide-image-holder">\n\t\t\t\t\t\t\t<img class="<%=slide.enableZoom ? \'zoomable-image\' : \'\'%> vst-draggable vst-click" draggable="false" src="<%-slide.image%>" alt="<%-slide.imageAlt%>"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<% if (slide.imageTitle || slide.imageCaption) { %>\n\t\t\t\t\t\t<<%=figCaptionTag%> class="fig-caption image-detail">\n\t\t\t\t\t\t\t<% if (slide.imageTitle) { %>\n\t\t\t\t\t\t\t<h3 class=".heading--subheadingb"><%=itu.htmlPtoBr(slide.imageTitle)%></h3>\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\t<% if (slide.imageCaption) { %>\n\t\t\t\t\t\t\t<%=slide.imageCaption%>\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t</<%=figCaptionTag%>>\n\t\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t\t<div class="caption-spacer"/>\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t<%=slide.searchableImage ? \'</figure>\' : \'</div>\'%>\n\t\t\t\t\t<% }) %>\n\t\t\t\t</div>\n\t\t\t\t<div class="carousel-numbering vstdonthighlight"<%=itu.dirltr()%>>\n\t\t\t\t\t<%\n\t\t\t\t\tvar totalSlides=slides.length;\n\t\t\t\t\tvar inputID = id + "-slide-num-input";\n\t\t\t\t\t%>\n\t\t\t\t\t<label class="visuallyhidden" for="<%=inputID%>">Slide Number</label>\n\t\t\t\t\t<input type="text" class="slide-number" id="<%=inputID%>" /> of <span><%=totalSlides%></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n<\/script>\n'}),define("text!skinRoot/template/static.html",[],function(){return'\x3c!--\n  enter any templates for static (aka content) blocks here\n--\x3e\n\n<script type="text/template" id="static-pagebreak-template">\n\t<div epub:type="pagebreak" id="pagebreak_<%= id %>" class="hidden-pagebreak" title="<%= page %>" xmlns:epub="http://www.idpf.org/2007/ops" />\n<\/script>\n\n<script type="text/template" id="static-heading-template">\n\t<div class="static">\n\t\t<div class="screen__margin">\n\t\t\t<%\n\t\t\t\t// default level should be 2\n\t\t\t\tvar type = headingLevel._value;\n\t\t\t\tvar level = ["heading", "subheadinga", "subheadingb", "subheadingc", "subheadingd"].indexOf(type);\n\t\t\t\tlevel = level === -1 ? 2 : level + 2;\n\t\t\t%>\n\t\t\t<h<%= level %> class="heading heading--<%= type %>"><%= itu.htmlPtoBr(text) %></h<%= level %>>\n\t\t</div>\n\t</div>\n<\/script>\n\n<script type="text/template" id="static-table-template">\n\t<div class="static">\n\t\t<div class="screen__margin vst-draggable">\n\t\t\t<%= text %>\n\t\t</div>\n\t</div>\n<\/script>\n\n<script type="text/template" id="static-container-template">\n\t<div class="static">\n\t\t<div class="screen__margin">\n\t\t\t<%\n\t\t\tvar style= "";\n\t\t\tif (typeof(bgColor) !== "undefined" && typeof(bgColor._value) !== "undefined" &&\n\t\t\t\tbgColor._value !== "ececec" ) {\n\t\t\t\t// note ececec implies theme default\n\t\t\t\tstyle = "style=\'background-color: #" + bgColor._value + "\'";\n\t\t\t}\n\t\t\t%>\n\t\t\t<div class="container" <%=style%>>\n\t\t\t<div class="static__text">\n\t\t\t\t<%= text %>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t</div>\n<\/script>\n\n<script type="text/template" id="static-text-template">\n\t<div class="static">\n\t\t<div class="screen__margin">\n\t\t\t<div class="static__text--indent">\n\t\t\t\t<%= text %>\n\t\t\t</div>\n\n\t\t</div>\n\t</div>\n<\/script>\n\n<script type="text/template" id="static-figure-template">\n\t<%\n\tif (obj.image) {\n\t\tvar data = {\n\t\t\timage: obj.mediaPath + obj.image,\n\t\t\timageAlt: obj.imageAlt,\n\t\t\timageCaption: obj.imageCaption,\n\t\t\timageControls: obj.imageControls\n\t\t}\n\t\tvar margin = itu.isLegacyImg(data) ? "" : " screen__margin";\n\t}\n\t%>\n\t<div class="static u-float--clearfix<%=margin%>">\n\t\t<%= itu.createImg(data) %>\n\t</div>\n<\/script>\n\n<script type="text/template" id="static-text-figure-template">\n\t<div class="static u-float--clearfix">\n\t\t<%\n\t\tif (obj.image) {\n\t\t\tvar data = {\n\t\t\t\timage: obj.mediaPath + obj.image,\n\t\t\t\timageAlt: obj.imageAlt,\n\t\t\t\timageCaption: obj.imageCaption,\n\t\t\t\timageControls: obj.imageControls,\n\t\t\t\tisFloating : true\n\t\t\t}\n\t\t\tvar margin = "screen__margin" + (itu.isLegacyImg(data) ? "--desktop" : "");\n\t\t}\n\t\t%>\n\t\t<div class="screen__margin">\n\t\t\t<div class="static__text--indent" >\n\t\t\t\t<div class="<%=margin%>">\n\t\t\t\t\t<%= itu.createImg(data) %>\n\t\t\t\t\t<%= text %>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n<\/script>\n\n<script type="text/template" id="static-hr-divider-template">\n\t<div class="static">\n\t\t<div class="screen__margin">\n\t\t\t<hr class="divider--hr" />\n\t\t</div>\n\t</div>\n<\/script>\n\n<script type="text/template" id="static-divider-template">\n\t<div class="static">\n\t\t<div class="screen__margin">\n\t\t\t<div class="divider"></div>\n\t\t</div>\n\t</div>\n<\/script>\n\n<script type="text/template" id="static-quote-template">\n\t<div class="static">\n\t\t<div class="screen__margin">\n\t\t\t<blockquote class="quote">\n\t\t\t\t<%= quote %>\n\t\t\t\t<footer><cite class="quote--cite"><%= itu.htmlPtoBr(citation) %></cite></footer>\n\t\t\t</blockquote>\n\t\t</div>\n\t</div>\n<\/script>\n\n\n<script type="text/template" id="utility-empty-template">\n\t<div class="empty-indicator empty-<%=blockType%> screen__margin"<%=itu.dirltr()%>><span aria-hidden="true" class="<%=blockType%>-icon"/><span>Click to add <%=blockLabel%></span></div>\n<\/script>\n\n<script type="text/template" id="utility-empty-epub-template">\n\t<div class="empty-indicator empty-<%=blockType%> screen__margin"<%=itu.dirltr()%>><span aria-hidden="true" class="<%=blockType%>-icon"/><span>This block is empty</span></div>\n<\/script>\n\n\n<script type="text/template" id="static-html-embed-block-template">\n\t<div class="static">\n\t\t<div class="screen__margin">\n\t\t\t<%= text %>\n\t\t</div>\n\t</div>\n<\/script>\n\n<script type="text/template" id="static-html-zip-template">\n\t<div class="static">\n\t\t<div class="screen__margin">\n\t\t\t<iframe src="<%=imagePath%><%= image %>" style="width: 100%;overflow: auto;height: 500px;">\n\n\t\t\t</iframe>\n\n\t\t</div>\n\t</div>\n<\/script>\n'}),define("text!skinRoot/template/stimul.html",[],function(){return'\n\n<script type="text/template" id="stimul-page-template">\n\n\t<div class="content">\n\t</div>\n\n<\/script>\n'});